(self.webpackChunk=self.webpackChunk||[]).push([[8002],{46560:(e,t,n)=>{n.d(t,{B:()=>r});var i=n(27378);const r=({title:e,titleId:t,desc:n,descId:r,...s})=>i.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",stroke:"transparent","aria-labelledby":t,"aria-describedby":r,...s},n?i.createElement("desc",{id:r},n):null,e?i.createElement("title",{id:t},e):null,i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.646 7.646a.5.5 0 0 1 .708 0L12 11.293l3.646-3.647a.5.5 0 0 1 .708.708L12.707 12l3.647 3.646a.5.5 0 0 1-.708.708L12 12.707l-3.646 3.647a.5.5 0 0 1-.708-.708L11.293 12 7.646 8.354a.5.5 0 0 1 0-.708Z",fill:"#646B81"}))},17579:(e,t,n)=>{n.d(t,{N:()=>r});var i=n(27378);const r=({title:e,titleId:t,desc:n,descId:r,...s})=>i.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",stroke:"transparent","aria-labelledby":t,"aria-describedby":r,...s},n?i.createElement("desc",{id:r},n):null,e?i.createElement("title",{id:t},e):null,i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 6a2 2 0 0 0-2 2v2h4V8a2 2 0 0 0-2-2Zm3 4V8a3 3 0 1 0-6 0v2H6.5a.5.5 0 0 0-.5.5v8a.5.5 0 0 0 .5.5h11a.5.5 0 0 0 .5-.5v-8a.5.5 0 0 0-.5-.5H15Zm-8 1v7h10v-7H7Z",fill:"#646B81"}))},93962:(e,t,n)=>{n.d(t,{aU:()=>r,pY:()=>i,Cl:()=>B,ix:()=>w,ec:()=>E,a8:()=>S,JZ:()=>R,_y:()=>s,nF:()=>O,x2:()=>h,_H:()=>V,TG:()=>k,lG:()=>_,H3:()=>l,s3:()=>U,x4:()=>d,z_:()=>x.z,SA:()=>F,V6:()=>D,Z7:()=>f,Zq:()=>C,Bs:()=>G,LA:()=>g});var i,r,s,o=n(5114),a=n(57050);!function(e){let t,n;!function(e){e.create=function(e){return e}}(t=e.Id||(e.Id={})),function(e){e.create=function(e,t){return{id:e,kind:"string",value:t}}}(n=e.StringValue||(e.StringValue={}))}(i||(i={})),function(e){function t(e){return"userPrompt"===e.kind}function n(e){return"dynamic"===e.kind}function r(e){return"quickRewrite"===e.kind}let s,l,c,u,d;e.isUserPrompt=t,e.isDynamic=n,e.isQuickRewrite=r,e.willGenerateResult=function(e){return t(e)||r(e)||n(e)&&o.isSome(e.generatesTextType)},function(e){e.create=function(e){return e}}(s=e.Id||(e.Id={})),function(e){e.isFollowUpQuestion=function(e){return 1===e.args.length&&"string"===e.args[0].kind},e.isQuickAction=function(e){return 0===e.args.length}}(l=e.DynamicInput||(e.DynamicInput={})),function(e){e.fromInputAndValue=function(e,t){return Object.assign(Object.assign({},e),{args:[(0,a.zG)(e.args[0],(e=>i.StringValue.create(e.id,t)))]})}}(c=e.FollowUpQuestionValue||(e.FollowUpQuestionValue={})),function(e){e.fromActionAndArg=function(e,t,n,r){return Object.assign(Object.assign({},e),{arg:i.StringValue.create(e.arg.id,t),useReferenceIds:n,omitReferenceIds:r})}}(u=e.UserPromptValue||(e.UserPromptValue={})),function(e){e.fromInput=function(e){return Object.assign(Object.assign({},e),{args:[]})}}(d=e.QuickRewriteValue||(e.QuickRewriteValue={}))}(r||(r={})),function(e){let t;!function(e){e.create=function(e){return e}}(t=e.Id||(e.Id={})),e.isPending=function(e){return"pending"===e.kind},e.isReceived=function(e){return"received"===e.kind}}(s||(s={}));var l,c=n(64015),u=n(17889);!function(e){let t,n;e.fromOuterContext=function(e){var n,i,r,s;const l=e=>(0,a.zG)(o.fromNullable(null==e?void 0:e.from),o.chain(c.YM),o.fold((()=>t.empty),t.fromNameAndEmailString)),d=e=>(0,a.zG)(o.fromNullable(null==e?void 0:e.to),o.chain(u.c2),o.map(u.UI(t.fromNameAndEmailString)),o.getOrElseW((()=>[]))),m=(0,a.zG)(o.fromNullable(e.items),o.chain(c.YM),o.getOrElseW((()=>{})));return{previousMessageInfo:{author:l(null==m?void 0:m.people),directRecipients:d(null==m?void 0:m.people),text:null!==(n=null==m?void 0:m.text)&&void 0!==n?n:""},title:null!==(i=e.title)&&void 0!==i?i:"",author:l(e.people),directRecipients:d(e.people),indirectRecipients:(0,a.zG)(o.fromNullable(null===(r=e.people)||void 0===r?void 0:r.cc),o.chain(u.c2),o.map(u.UI(t.fromNameAndEmailString)),o.getOrElseW((()=>[]))),undisclosedRecipients:(0,a.zG)(o.fromNullable(null===(s=e.people)||void 0===s?void 0:s.bcc),o.chain(u.c2),o.map(u.UI(t.fromNameAndEmailString)),o.getOrElseW((()=>[])))}},e.toOuterContext=function(t){return{title:t.title,people:{from:[e.Person.extractNameAndEmailString(t.author)],to:t.directRecipients.map(e.Person.extractNameAndEmailString),cc:t.indirectRecipients.map(e.Person.extractNameAndEmailString),bcc:t.undisclosedRecipients.map(e.Person.extractNameAndEmailString)},items:[{text:t.previousMessageInfo.text,people:{from:[e.Person.extractNameAndEmailString(t.previousMessageInfo.author)],to:t.previousMessageInfo.directRecipients.map(e.Person.extractNameAndEmailString)}}]}},e.empty={previousMessageInfo:{author:{name:"",email:""},directRecipients:[],text:""},title:"",author:{name:"",email:""},directRecipients:[],indirectRecipients:[],undisclosedRecipients:[]},function(e){e.empty={name:"",email:""},e.fromNameAndEmailString=function(t){return(0,a.zG)(o.fromNullable(t.match(/^([^<]*)<(.*)>$/)),o.map((e=>{var t,n,i,r;return{name:null!==(n=null===(t=e[1])||void 0===t?void 0:t.trim())&&void 0!==n?n:"",email:null!==(r=null===(i=e[2])||void 0===i?void 0:i.trim())&&void 0!==r?r:""}})),o.getOrElse((()=>e.empty)))},e.extractNameAndEmailString=function(e){const t=""!==e.email?`<${e.email}>`:"";return[e.name,t].filter((e=>""!==e)).join(" ")}}(t=e.Person||(e.Person={})),function(e){e.empty={author:{name:"",email:""},directRecipients:[],text:""}}(n=e.PreviousMessageInfo||(e.PreviousMessageInfo={}))}(l||(l={}));var d,m=n(73975),p=n(8125);!function(e){let t,n;!function(e){e.create=function(e){return`${e}`},e.toPrimitive=function(e){return parseInt(e)},e.eq=m.yv}(t=e.Id||(e.Id={})),function(e){e.insert="insert",e.reportOffensive="reportOffensive"}(n=e.Feedback||(e.Feedback={})),e.hasId=function(e){return"id"in e},e.isComplete=function(e){return"complete"===e.kind},e.isInProgressOngoing=function(e){return"inProgressOngoing"===e.kind},e.isInProgressPending=function(e){return"inProgressPending"===e.kind},e.isInProgressInterrupted=function(e){return"inProgressInterrupted"===e.kind},e.isInProgress=(0,p.Kg)(e.isInProgressOngoing,e.isInProgressPending)}(d||(d={}));var g,h,f,x=n(45626),v=n(48044),b=n(13853),y=n(22232);!function(e){let t,n,i,r,s,a;!function(e){let t;!function(e){e.create=function(e){return e},e.eq=m.yv}(t=e.Id||(e.Id={}))}(t=e.Tone||(e.Tone={})),function(e){let t;!function(e){e.create=function(e){return e},e.eq=m.yv}(t=e.Id||(e.Id={}))}(n=e.Style||(e.Style={})),function(e){let t;!function(e){e.create=function(e){return e},e.eq=m.yv}(t=e.Id||(e.Id={}))}(i=e.Role||(e.Role={})),function(e){let t,n;function i(e){switch(e){case t.american:return"American English";case t.australian:return"Australian English";case t.british:return"British English";case t.canadian:return"Canadian English";case t.indian:return"Indian English";default:return(0,y.L0)(e)}}function r(e){switch(e){case t.american:return"https://assets.grammarly.com/emoji/v1/1f1fa-1f1f8.svg";case t.australian:return"https://assets.grammarly.com/emoji/v1/1f1e6-1f1fa.svg";case t.british:return"https://assets.grammarly.com/emoji/v1/1f1ec-1f1e7.svg";case t.canadian:return"https://assets.grammarly.com/emoji/v1/1f1e8-1f1e6.svg";case t.indian:return"https://assets.grammarly.com/emoji/v1/1f1ee-1f1f3.svg";default:return(0,y.L0)(e)}}!function(e){e.fromString=function(t){switch(t){case"american":return e.american;case"australian":return e.australian;case"british":return e.british;case"canadian":return e.canadian;case"indian":return e.indian;default:return(0,y.L0)(t)}}}(t=e.Value||(e.Value={})),function(e){e.american="american",e.australian="australian",e.british="british",e.canadian="canadian",e.indian="indian"}(t=e.Value||(e.Value={})),function(e){e.create=function(e){return e},e.eq=m.yv}(n=e.Id||(e.Id={})),e.american={id:n.create(t.american),label:i(t.american),iconUrl:r(t.american)},e.australian={id:n.create(t.australian),label:i(t.australian),iconUrl:r(t.australian)},e.british={id:n.create(t.british),label:i(t.british),iconUrl:r(t.british)},e.canadian={id:n.create(t.canadian),label:i(t.canadian),iconUrl:r(t.canadian)},e.indian={id:n.create(t.indian),label:i(t.indian),iconUrl:r(t.indian)},e.all=function(){return[e.american,e.australian,e.british,e.canadian,e.indian]}}(r=e.Dialect||(e.Dialect={})),function(e){e.eq=m.MW({selectedStyle:n.Id.eq,selectedTonesPerStyle:v.Eh(n.Id.eq,b.Eh(t.Id.eq)),selectedRole:o.getEq(i.Id.eq),selectedDialect:r.Id.eq})}(s=e.Selections||(e.Selections={})),e.toLegacyVoiceProfile=function(e){return"legacyVoiceProfile"===e.kind?o.some(e):o.none},function(e){const t=m.MW({name:m.yv,state:m.yv}),n=m.MW({name:m.yv,tags:c.Eh(t)}),s=m.MW({name:m.yv,summary:m.yv,selected:m.vD,sections:c.Eh(n)}),a=c.Eh(s);e.eqByRoleDialectAndProfile=m.MW({profiles:a,selectedRole:o.getEq(i.Id.eq),selectedDialect:r.Id.eq})}(a=e.NewSelections||(e.NewSelections={})),e.toNewVoiceProfile=function(e){return"newVoiceProfile"===e.kind?o.some(e):o.none}}(g||(g={})),function(e){let t,n;!function(e){e.ok="ok",e.satisfied="satisfied",e.dissatisfied="dissatisfied"}(t=e.Mood||(e.Mood={})),function(e){e.resultCard="resultCard",e.quickReplyInitialActions="quickReplyInitialActions"}(n=e.Source||(e.Source={}))}(h||(h={})),function(e){let t,n,i,r,s,o,l;!function(e){let t;!function(e){e.rephrase="rephrase",e.dismiss="dismiss",e.insert="insert",e.offensive="offensive"}(t=e.UserAction||(e.UserAction={}))}(t=e.Result||(e.Result={})),function(e){let t;!function(e){e.open="open",e.skip="skip",e.openFromBanner="openFromBanner",e.keepVoiceTag="keepTag",e.removeVoiceTag="removeTag"}(t=e.UserAction||(e.UserAction={}))}(n=e.VoiceProfile||(e.VoiceProfile={})),function(e){let t;!function(e){e.openStore="openStore",e.offensive="offensive"}(t=e.UserAction||(e.UserAction={}))}(i=e.Actions||(e.Actions={})),function(e){let t;!function(e){e.search="search"}(t=e.UserAction||(e.UserAction={}))}(r=e.Prompt||(e.Prompt={})),function(e){let t;!function(e){e.hover="hover",e.click="click"}(t=e.UserAction||(e.UserAction={}))}(s=e.UsageInfo||(e.UsageInfo={})),function(e){let t;!function(e){e.view="view",e.skip="skip",e.next="next"}(t=e.UserAction||(e.UserAction={}))}(o=e.Onboarding||(e.Onboarding={})),function(e){let t;!function(e){e.close="close"}(t=e.UserAction||(e.UserAction={}))}(l=e.Assistant||(e.Assistant={})),e.getComponentId=function(e,t){return(0,a.zG)(e.kind,(t=>{switch(t){case"result":return"card";case"voiceProfile":return"voice";case"actions":return e.userAction===i.UserAction.openStore?"group":"card";case"assistant":return"widget";case"onboardingPromptsTooltip":return"onboardingPromptTooltip";case"onboardingReviewTooltip":return"onboardingReviewtextTooltip";case"usageInfo":case"prompt":case"onboardingPopup":case"onboardingRewriteTooltip":case"onboardingKnowledgeHubTooltip":return t;default:return(0,y.L0)(t)}}),(e=>`cheetah:${e}${t?`:${t}`:""}`))},e.getUserAction=function(e){return(0,a.zG)(e.kind,(t=>{switch(t){case"actions":return e.userAction===i.UserAction.openStore?"All Ideas":e.userAction;case"assistant":return e.userAction===l.UserAction.close?"dismiss":e.userAction;case"result":case"voiceProfile":case"prompt":case"usageInfo":case"onboardingPopup":case"onboardingPromptsTooltip":case"onboardingReviewTooltip":case"onboardingRewriteTooltip":case"onboardingKnowledgeHubTooltip":return e.userAction;default:return(0,y.L0)(t)}}))}}(f||(f={}));var C,k,S,w,_,E,O,A=n(95195),I=n(69243),P=n(68200);!function(e){const t=(0,P.$d)()(["initial","prompts","review","rewrite","knowledgeHub"]),n=(0,P.$d)()(["extension","editor","llamaMac","llamaWin"]);function i(e,t){return`${e}|${t}`}function r(e,t,n){return`${e}|${t}|${n}`}function s(e){return o.isSome(f(e))}function l(e){return o.isSome(x(e))}const u=new I.Type("CompletedStepName",(e=>"string"==typeof e&&s(e)),((e,t)=>"string"==typeof e&&s(e)?I.success(e):I.failure(e,t)),I.identity),d=new I.Type("LastSeenStepName",(e=>"string"==typeof e&&l(e)),((e,t)=>"string"==typeof e&&l(e)?I.success(e):I.failure(e,t)),I.identity),m=I.readonly(I.partial({completed:I.readonlyArray(u),lastSeen:I.readonlyArray(d)}));let p,g,h;function f(e){return(0,a.zG)(o.some(e.split("|")),o.filter((e=>2===e.length)),o.filter((e=>t.includes(e[0])&&n.includes(e[1]))))}function x(e){return(0,a.zG)(o.some(e.split("|")),o.filter((e=>3===e.length)),o.filter((e=>t.includes(e[0])&&n.includes(e[1]))),o.filterMap((e=>(0,a.zG)(parseInt(e[2],10),(t=>Number.isNaN(t)?o.none:o.some([e[0],e[1],t]))))))}function v(e,t,n){var i,r,s,o;return{extension:{completed:t.some((t=>t[0]===e&&"extension"===t[1])),lastSeen:null===(i=n.find((t=>t[0]===e&&"extension"===t[1])))||void 0===i?void 0:i[2]},editor:{completed:t.some((t=>t[0]===e&&"editor"===t[1])),lastSeen:null===(r=n.find((t=>t[0]===e&&"editor"===t[1])))||void 0===r?void 0:r[2]},llamaMac:{completed:t.some((t=>t[0]===e&&"llamaMac"===t[1])),lastSeen:null===(s=n.find((t=>t[0]===e&&"llamaMac"===t[1])))||void 0===s?void 0:s[2]},llamaWin:{completed:t.some((t=>t[0]===e&&"llamaWin"===t[1])),lastSeen:null===(o=n.find((t=>t[0]===e&&"llamaWin"===t[1])))||void 0===o?void 0:o[2]}}}e.emptyClientStep={completed:!1,lastSeen:void 0},function(e){function t(e){return t=>e(t.extension)||e(t.editor)||e(t.llamaMac)||e(t.llamaWin)}e.anyClient=t,e.anyClientCompleted=t((e=>e.completed))}(p=e.Step||(e.Step={})),e.emptyStep={extension:e.emptyClientStep,llamaMac:e.emptyClientStep,llamaWin:e.emptyClientStep,editor:e.emptyClientStep},e.codec=new I.Type("UpstreamOnboarding",(e=>m.is(e)),((e,t)=>(0,a.zG)(m.validate(e,t),A.map((e=>{const t=(0,a.zG)(e.completed||[],c.UI(f),c.oA),n=(0,a.zG)(e.lastSeen||[],c.UI(x),c.oA);return{initial:v("initial",t,n),prompts:v("prompts",t,n),review:v("review",t,n),rewrite:v("rewrite",t,n),knowledgeHub:v("knowledgeHub",t,n)}})))),(e=>({completed:(0,a.zG)(Object.entries(e),c.tS((([e,t])=>function(e,t){return(0,a.zG)(Object.entries(t),c.tS((([t,n])=>n.completed?[i(e,t)]:[])))}(e,t)))),lastSeen:(0,a.zG)(Object.entries(e),c.tS((([e,t])=>function(e,t){return(0,a.zG)(Object.entries(t),c.tS((([t,n])=>n.lastSeen?[r(e,t,n.lastSeen)]:[])))}(e,t))))}))),e.decode=function(t){return(0,a.zG)(decodeURIComponent(t),(n=>{try{const t=JSON.parse(n);return e.codec.decode(t)}catch(e){return A.left(`Cannot decode raw onboarding state: ${t}.`)}}),A.getOrElse((()=>e.State.empty)))},e.encode=function(t){return encodeURIComponent(JSON.stringify(e.codec.encode(t)))},function(t){t.empty={initial:e.emptyStep,prompts:e.emptyStep,review:e.emptyStep,rewrite:e.emptyStep,knowledgeHub:e.emptyStep},t.toClientState=function(e,t){return{initial:e.initial[t],prompts:e.prompts[t],review:e.review[t],rewrite:e.rewrite[t],knowledgeHub:e.knowledgeHub[t]}},t.patch=function(e,t){return n=>({initial:Object.assign(Object.assign({},n.initial),{[t]:e.initial}),prompts:Object.assign(Object.assign({},n.prompts),{[t]:e.prompts}),review:Object.assign(Object.assign({},n.review),{[t]:e.review}),rewrite:Object.assign(Object.assign({},n.rewrite),{[t]:e.rewrite}),knowledgeHub:Object.assign(Object.assign({},n.knowledgeHub),{[t]:e.knowledgeHub})})}}(g=e.State||(e.State={})),function(t){t.empty={initial:e.emptyClientStep,prompts:e.emptyClientStep,review:e.emptyClientStep,rewrite:e.emptyClientStep,knowledgeHub:e.emptyClientStep}}(h=e.ClientState||(e.ClientState={}))}(C||(C={})),function(e){let t;!function(e){e.initial="initial",e.prompts="prompts",e.review="review",e.rewrite="rewrite",e.knowledgeHub="knowledgeHub"}(t=e.StepName||(e.StepName={})),function(e){e.isAssistantOnboardingStep=function(t){switch(t){case e.prompts:case e.review:case e.knowledgeHub:return!0;case e.initial:case e.rewrite:return!1;default:return(0,y.L0)(t)}},e.isTooltipOnboardingStep=function(t){switch(t){case e.prompts:case e.review:case e.rewrite:case e.knowledgeHub:return!0;case e.initial:return!1;default:return(0,y.L0)(t)}}}(t=e.StepName||(e.StepName={}))}(k||(k={})),function(e){let t,n,i;function r(e){return e.kind===t.active}function s(e){return e.kind===t.passive}function l(e){return e.kind===t.unknown}function c(e){return r(e)||l(e)}!function(e){e.unavailable="unavailable",e.active="active",e.passive="passive",e.disabled="disabled",e.pending="pending",e.unknown="unknown"}(t=e.Kind||(e.Kind={})),function(e){const t=(0,p.HP)((e=>{const t=Date.parse(e);return isNaN(t)?0:t}));function n(e){const t=e-Date.now();return Math.floor(t/36e5)}e.parseRefillDate=function(e){return t(e)},e.hoursUntilRefillDate=n,e.daysUntilRefillDate=function(e){return Math.floor(n(e)/24)}}(n=e.Active||(e.Active={})),function(t){t.empty={kind:e.Kind.passive,promptsAllocated:0,promptsRemaining:0,refillDate:0}}(i=e.Passive||(e.Passive={})),e.isActive=r,e.isPassive=s,e.isActiveOrPassive=(0,p.Kg)(r,s),e.isUnknown=l,e.isUsable=c,e.isVisible=function(e){return c(e)||s(e)},e.isDisabled=function(e){return e.kind===t.disabled},e.isUnavailable=function(e){return e.kind===t.pending||e.kind===t.unavailable||e.kind===t.disabled},e.fromUsage=function(n){return(0,a.zG)(o.fromNullable(n),o.fold((()=>({kind:e.Kind.unknown})),(n=>{const i=e.Active.parseRefillDate(n.refillDate);return n.promptsRemaining<0?{kind:t.unknown}:n.promptsRemaining>0?{kind:t.active,promptsRemaining:n.promptsRemaining,promptsAllocated:n.promptsAllocated,refillDate:i}:{kind:t.passive,promptsRemaining:n.promptsRemaining,promptsAllocated:n.promptsAllocated,refillDate:i}})))}}(S||(S={})),function(e){let t;!function(e){e.mount="mount",e.unmount="unmount",e.toolbarCloseButtonClick="toolbarCloseButtonClick",e.toolbarGoBackButtonClick="toolbarGoBackButtonClick",e.toolbarVoiceButtonClick="toolbarVoiceButtonClick",e.setVoiceButtonClick="setVoiceButtonClick",e.voiceProfileCloseButtonClick="voiceProfileCloseButtonClick",e.voiceProfileUseVoiceButtonClick="voiceProfileUseVoiceButtonClick",e.toneToggleClick="toneToggleClick",e.styleToggleClick="styleToggleClick",e.roleTypeaheadSelectionChange="roleTypeaheadSelectionChange",e.dialectDropdownSelectionChange="dialectDropdownSelectionChange",e.promptFieldTextChange="promptFieldTextChange",e.promptFieldFocusChange="promptFieldFocusChange",e.promptFieldAndMenuFocusChange="promptFieldAndMenuFocusChange",e.actionBrickClick="actionBrickClick",e.promptSubmitButtonClick="promptSubmitButtonClick",e.generateStopButtonClick="generateStopButtonClick",e.promptFieldKeyPressEscape="promptFieldKeyPressEscape",e.promptFieldKeyPressEnter="promptFieldKeyPressEnter",e.promptFieldKeyPressArrowDown="promptFieldKeyPressArrowDown",e.promptFieldKeyPressArrowUp="promptFieldKeyPressArrowUp",e.promptMenuKeyPressArrowDown="promptMenuKeyPressArrowDown",e.promptMenuKeyPressArrowUp="promptMenuKeyPressArrowUp",e.resultCardInsertButtonClick="resultCardInsertButtonClick",e.resultCardRephraseButtonClick="resultCardRephraseButtonClick",e.resultCardDismissButtonClick="resultCardDismissButtonClick",e.resultCardToggleGenericVoiceButtonClick="resultCardToggleGenericVoiceButtonClick",e.errorCardOkButtonClick="errorCardOkButtonClick",e.openFeedbackFormButtonClick="openFeedbackFormButtonClick",e.feedbackFormChange="feedbackFormChange",e.feedbackFormSubmitButtonClick="feedbackFormSubmitButtonClick",e.reportOffensiveResultButtonClick="reportOffensiveResultButtonClick",e.reportOffensiveActionsButtonClick="reportOffensiveActionsButtonClick",e.resultCardHeaderClick="resultCardHeaderClick",e.collapsePromptMenuButtonClick="collapsePromptMenuButtonClick",e.creditsInfoHover="creditsInfoHover",e.creditsInfoClick="creditsInfoClick",e.resultCardHoverChange="resultCardHoverChange",e.resultCardFocusChange="resultCardFocusChange",e.reportMenuVisibilityChange="reportMenuVisibilityChange",e.referencesVisibilityChange="referencesVisibilityChange",e.voiceProfileTabChange="voiceProfileTabChange",e.voiceTagClick="voiceTagClick",e.voiceTagPopoverCloseButtonClick="voiceTagPopoverCloseButtonClick",e.voiceTagPopoverKeepButtonClick="voiceTagPopoverKeepButtonClick",e.voiceTagPopoverRemoveButtonClick="voiceTagPopoverRemoveButtonClick",e.applyVoiceToWritingCheckboxChange="applyVoiceToWritingCheckboxChange",e.voiceDialectDropdownSelectionChange="voiceDialectDropdownSelectionChange",e.voiceRoleDropdownSelectionChange="voiceRoleDropdownSelectionChange",e.voiceSelectionsSaveButtonClick="voiceSelectionsSaveButtonClick",e.voiceSelectionsCancelButtonClick="voiceSelectionsCancelButtonClick",e.voiceSelectionsEditButtonClick="voiceSelectionsEditButtonClick",e.surveyRatingSelectionChange="surveyRatingSelectionChange",e.surveyOpenAnswerChange="surveyOpenAnswerChange",e.surveyComplete="surveyComplete",e.surveyClose="surveyClose",e.regenerateWithoutReferenceButtonClick="regenerateWithoutReferenceButtonClick"}(t=e.Kind||(e.Kind={})),e.is=function(e){return t=>t.kind===e},e.isResultAction=(0,p.Kg)(e.is(e.Kind.resultCardInsertButtonClick),e.is(e.Kind.resultCardRephraseButtonClick),e.is(e.Kind.resultCardDismissButtonClick),e.is(e.Kind.reportOffensiveResultButtonClick),e.is(e.Kind.regenerateWithoutReferenceButtonClick)),e.isSurveyAction=(0,p.Kg)(e.is(e.Kind.surveyOpenAnswerChange),e.is(e.Kind.surveyComplete),e.is(e.Kind.surveyClose),e.is(e.Kind.surveyRatingSelectionChange)),e.isSurveyImplicitDismissAction=(0,p.Kg)(e.is(e.Kind.promptSubmitButtonClick),e.is(e.Kind.actionBrickClick),e.is(e.Kind.resultCardInsertButtonClick),e.is(e.Kind.resultCardRephraseButtonClick),e.is(e.Kind.resultCardDismissButtonClick),e.is(e.Kind.resultCardHeaderClick))}(w||(w={})),(0,y.L0)(void 0),function(e){let t;!function(e){e.close="close",e.tryItOut="tryItOut",e.mount="mount"}(t=e.Kind||(e.Kind={})),e.is=function(e){return t=>t.kind===e}}(_||(_={})),(0,y.L0)(void 0),function(e){e.initialActionsList="initialActionsList",e.followUpActionsList="followUpActionsList",e.creditsInfoButton="creditsInfoButton",e.promptInput="promptInput",e.promptMenuContent="promptMenuContent"}(E||(E={})),function(e){e.initialPopupAnchor="initialPopupAnchor",e.rewriteTooltipAnchor="rewriteTooltipAnchor"}(O||(O={}));var R,B,U,N=n(17771),T=n(63513);!function(e){let t;function n(e){switch(e){case t.sensitiveResult:return{header:"Assistance is unavailable",text:"GrammarlyGO assistance is unavailable for that text or prompt.\nTry something else."};case t.overload:return{header:"Couldn’t generate text",text:"We’re handling a lot of prompts right now and couldn’t generate that text.\nPlease try again later."};case t.unsupportedLanguage:return{header:"Hmm, don’t know that language",text:"GrammarlyGO assistance is currently only available for English."};case t.critical:case t.timeout:case t.emptyResult:case t.truncatedResult:case t.usageExceeded:return{header:"Something went wrong",text:"We’re not sure what happened, but we couldn’t generate that text.\nPlease try again."};default:return(0,y.L0)(e)}}!function(e){e.create=function(t){switch(t){case T.vv.Schema.ErrorKind.Generic:return e.critical;case T.vv.Schema.ErrorKind.Overflow:return e.truncatedResult;case T.vv.Schema.ErrorKind.PromptsLimitExceeded:return e.usageExceeded;case T.vv.Schema.ErrorKind.SensitiveContent:return e.sensitiveResult;case T.vv.Schema.ErrorKind.ServerOverloaded:return e.overload;case T.vv.Schema.ErrorKind.UnsupportedLanguage:return e.unsupportedLanguage;default:return(0,y.L0)(t)}}}(t=e.Reason||(e.Reason={})),function(e){e.emptyResult="emptyResult",e.truncatedResult="truncatedResult",e.sensitiveResult="sensitiveResult",e.usageExceeded="usageExceeded",e.unsupportedLanguage="unsupportedLanguage",e.overload="overload",e.timeout="timeout",e.critical="critical"}(t=e.Reason||(e.Reason={})),e.create=function(e){const i=t.create(e.kind),r=(0,a.zG)(N.Y(o.Applicative)({header:(0,a.zG)(o.fromNullable(e.title),o.filter((e=>""!==e.trim()))),text:(0,a.zG)(o.fromNullable(e.text),o.filter((e=>""!==e.trim())))}),o.getOrElse((()=>n(i))));return Object.assign({reason:i},r)},e.createCriticalError=function(e){return{reason:t.critical,header:"Something went wrong",text:e?"We’re not sure what happened.\nPlease try again later.":"We’re not sure what happened, but we couldn’t generate that text.\nPlease try again."}},e.createEmptyResultError=function(){return Object.assign({reason:t.emptyResult},n(t.emptyResult))}}(R||(R={})),function(e){let t;!function(e){e.feedbackSubmitted="feedbackSubmitted",e.voiceTagRemoved="voiceTagRemoved"}(t=e.Kind||(e.Kind={}))}(B||(B={})),function(e){let t;!function(e){e.create=e=>e}(t=e.Id||(e.Id={}))}(U||(U={}));var G,z,j,F,D,V,M=n(80800);!function(e){let t;!function(e){let t;!function(e){e.Rating="rating",e.Feedback="feedback",e.Completed="completed",e.Closed="closed"}(t=e.Type||(e.Type={})),e.isOpen=e=>e!==t.Closed,e.toCAPIStage=e=>{switch(e){case t.Rating:return M.v0.Survey.Data.OpenAnswerScoreSurvey.scoreStage;case t.Feedback:case t.Closed:case t.Completed:return M.v0.Survey.Data.OpenAnswerScoreSurvey.submitStage;default:(0,y.L0)(e)}}}(t=e.Stage||(e.Stage={}))}(G||(G={})),function(e){e.info="info",e.warning="warning",e.error="error"}(z||(z={})),function(e){e.session="session",e.survey="survey"}(j||(j={})),function(e){let t,n,i;e.toJSON=function(e){var r;let s={kind:e.kind,name:String(e.name),sessionMode:e.sessionMode};return(0,p.Kg)(t.StartSession.is,t.Action.is,i.WaitForResultTimeout.is)(e)||((0,p.Kg)(i.WaitForAckTimeout.is,i.WaitForContextTimeout.is)(e)?s=Object.assign(Object.assign({},s),{command:e.command}):(0,p.Kg)(i.AssistantCloseFailed.is,i.SetVoiceProfileFailed.is,i.SubmitFeedbackFailed.is,i.ReportUphookShowFailed.is,i.ReportUphookClickFailed.is)(e)?s=Object.assign(Object.assign({},s),{rawErrorName:e.rawError.name,rawErrorMessage:e.rawError.message,rawErrorStack:null!==(r=e.rawError.stack)&&void 0!==r?r:""}):(0,p.Kg)(n.UnexpectedChunkReceived.is,n.UnexpectedResultReceived.is)(e)?s=Object.assign(Object.assign({},s),{expectedInProgressResultId:o.toNullable(e.expectedInProgressResultId),receivedInProgressResultId:e.receivedInProgressResultId}):(0,p.Kg)(n.CAPIErrorHandled.is,i.CAPIErrorUnhandled.is)(e)?s=Object.assign(Object.assign({},s),{errorCode:e.capiError.error,errorSeverity:String(e.capiError.severity)}):(0,y.L0)(e)),JSON.stringify(s)},function(e){let t,n,i;e.is=function(e){return e.kind===z.info},function(e){e.startSession="startSession",e.action="action"}(t=e.Name||(e.Name={})),function(e){e.create=function(e){return{source:j.session,kind:z.info,name:t.startSession,sessionMode:e}},e.is=function(e){return e.name===t.startSession}}(n=e.StartSession||(e.StartSession={})),function(e){e.create=function(e){return{source:j.session,kind:z.info,name:t.action,sessionMode:e}},e.is=function(e){return e.name===t.action}}(i=e.Action||(e.Action={}))}(t=e.Info||(e.Info={})),function(e){let t,n,i,r;e.is=function(e){return e.kind===z.warning},function(e){e.unexpectedChunkReceived="unexpectedChunkReceived",e.unexpectedResultReceived="unexpectedResultReceived",e.capiErrorHandled="capiErrorHandled"}(t=e.Name||(e.Name={})),function(e){e.is=function(e){return e.name===t.unexpectedChunkReceived},e.create=function(e,n,i){return{source:j.session,kind:z.warning,name:t.unexpectedChunkReceived,sessionMode:e,expectedInProgressResultId:n,receivedInProgressResultId:i}}}(n=e.UnexpectedChunkReceived||(e.UnexpectedChunkReceived={})),function(e){e.is=function(e){return e.name===t.unexpectedResultReceived},e.create=function(e,n,i){return{source:j.session,kind:z.warning,name:t.unexpectedResultReceived,sessionMode:e,expectedInProgressResultId:n,receivedInProgressResultId:i}}}(i=e.UnexpectedResultReceived||(e.UnexpectedResultReceived={})),function(e){e.create=function(e,n){return{source:j.session,kind:z.warning,name:t.capiErrorHandled,sessionMode:e,capiError:n}},e.is=function(e){return e.name===t.capiErrorHandled}}(r=e.CAPIErrorHandled||(e.CAPIErrorHandled={}))}(n=e.Warning||(e.Warning={})),function(e){let t,n,i,r,s,o,a,l,c,u,d;e.is=function(e){return e.kind===z.error},function(e){e.waitForContextTimeout="waitForContextTimeout",e.waitForResultTimeout="waitForResultTimeout",e.waitForAckTimeout="waitForAckTimeout",e.assistantCloseFailed="assistantCloseFailed",e.setVoiceProfileFailed="setVoiceProfileFailed",e.submitFeedbackFailed="submitFeedbackFailed",e.reportUphookShowFailed="reportUphookShowFailed",e.reportUphookClickFailed="reportUphookClickFailed",e.capiErrorUnhandled="capiErrorUnhandled"}(t=e.Name||(e.Name={})),function(e){e.startSession="startSession",e.action="action",e.searchReferences="searchReferences"}(n=e.Command||(e.Command={})),function(e){e.create=function(e,n){return{source:j.session,kind:z.error,name:t.waitForAckTimeout,command:n,sessionMode:e}},e.is=function(e){return e.name===t.waitForAckTimeout}}(i=e.WaitForAckTimeout||(e.WaitForAckTimeout={})),function(e){e.create=function(e,n){return{source:j.session,kind:z.error,name:t.waitForContextTimeout,command:n,sessionMode:e}},e.is=function(e){return e.name===t.waitForContextTimeout}}(r=e.WaitForContextTimeout||(e.WaitForContextTimeout={})),function(e){e.create=function(e){return{source:j.session,kind:z.error,name:t.waitForResultTimeout,sessionMode:e}},e.is=function(e){return e.name===t.waitForResultTimeout}}(s=e.WaitForResultTimeout||(e.WaitForResultTimeout={})),function(e){e.create=function(e,n){return{source:j.session,kind:z.error,name:t.assistantCloseFailed,sessionMode:e,rawError:n}},e.is=function(e){return e.name===t.assistantCloseFailed}}(o=e.AssistantCloseFailed||(e.AssistantCloseFailed={})),function(e){e.create=function(e,n){return{source:j.session,kind:z.error,name:t.setVoiceProfileFailed,sessionMode:e,rawError:n}},e.is=function(e){return e.name===t.setVoiceProfileFailed}}(a=e.SetVoiceProfileFailed||(e.SetVoiceProfileFailed={})),function(e){e.create=function(e,n){return{source:j.session,kind:z.error,name:t.submitFeedbackFailed,sessionMode:e,rawError:n}},e.is=function(e){return e.name===t.submitFeedbackFailed}}(l=e.SubmitFeedbackFailed||(e.SubmitFeedbackFailed={})),function(e){e.create=function(e,n){return{source:j.session,kind:z.error,name:t.reportUphookShowFailed,sessionMode:e,rawError:n}},e.is=function(e){return e.name===t.reportUphookShowFailed}}(c=e.ReportUphookShowFailed||(e.ReportUphookShowFailed={})),function(e){e.create=function(e,n){return{source:j.session,kind:z.error,name:t.reportUphookClickFailed,sessionMode:e,rawError:n}},e.is=function(e){return e.name===t.reportUphookClickFailed}}(u=e.ReportUphookClickFailed||(e.ReportUphookClickFailed={})),function(e){e.create=function(e,n){return{source:j.session,kind:z.error,name:t.capiErrorUnhandled,sessionMode:e,capiError:n}},e.is=function(e){return e.name===t.capiErrorUnhandled}}(d=e.CAPIErrorUnhandled||(e.CAPIErrorUnhandled={}))}(i=e.Error||(e.Error={}))}(F||(F={})),function(e){let t,n,i;e.toJSON=function(e){var r,s;let o={kind:e.kind,name:String(e.name),surveyType:e.surveyType,surveyPlacement:e.surveyPlacement};return(0,p.Kg)(i.SubmitSurveyFailed.is,n.UnexpectedSurveyFormatReceived.is)(e)||(t.SubmitSurveyInfo.is(e)?o=Object.assign(Object.assign({},o),{surveyStage:e.surveyStage,surveyDetailedPlacement:null!==(r=e.surveyDetailedPlacement)&&void 0!==r?r:null,surveyRating:e.surveyRating?e.surveyRating.toString():null,surveyOpenAnswer:null!==(s=e.surveyOpenAnswer)&&void 0!==s?s:null,surveyIsDismissed:e.surveyIsDismissed?String(e.surveyIsDismissed):null}):(0,y.L0)(e)),JSON.stringify(o)},function(e){let t,n;e.is=function(e){return e.kind===z.info},function(e){e.submitSurvey="submitSurvey"}(t=e.Name||(e.Name={})),function(e){e.create=function(e,n,i,r,s,o,a){return{source:j.survey,kind:z.info,name:t.submitSurvey,surveyPlacement:n,surveyStage:i,surveyType:e,surveyIsDismissed:r,surveyRating:s,surveyOpenAnswer:o,surveyDetailedPlacement:a}},e.is=function(e){return e.name===t.submitSurvey}}(n=e.SubmitSurveyInfo||(e.SubmitSurveyInfo={}))}(t=e.Info||(e.Info={})),function(e){let t,n;e.is=function(e){return e.kind===z.warning},function(e){e.unexpectedSurveyFormatReceived="unexpectedSurveyFormatReceived"}(t=e.Name||(e.Name={})),function(e){e.create=function(e,n,i){return{source:j.survey,kind:z.warning,name:t.unexpectedSurveyFormatReceived,surveyPlacement:n,surveyType:e,surveyDetailedPlacement:i}},e.is=function(e){return e.name===t.unexpectedSurveyFormatReceived}}(n=e.UnexpectedSurveyFormatReceived||(e.UnexpectedSurveyFormatReceived={}))}(n=e.Warning||(e.Warning={})),function(e){let t,n;e.is=function(e){return e.kind===z.error},function(e){e.submitSurveyFailed="submitSurveyFailed"}(t=e.Name||(e.Name={})),function(e){e.create=function(e,n,i){return{source:j.survey,kind:z.error,name:t.submitSurveyFailed,surveyPlacement:n,surveyType:e,surveyDetailedPlacement:i}},e.is=function(e){return e.name===t.submitSurveyFailed}}(n=e.SubmitSurveyFailed||(e.SubmitSurveyFailed={}))}(i=e.Error||(e.Error={}))}(D||(D={})),function(e){e.isInfo=e=>e.kind===z.info,e.isWarning=e=>e.kind===z.warning,e.isError=e=>e.kind===z.error,e.isSurveyMonitoringEvent=e=>e.source===j.survey,e.isSessionMonitoringEvent=e=>e.source===j.session}(V||(V={}))},32264:(e,t,n)=>{n.d(t,{$C:()=>D,gz:()=>w.g,ZP:()=>E,c3:()=>V});var i=n(31699),r=n(17771),s=n(95195),o=n(5114),a=n(64015),l=n(17889),c=n(62965),u=n(57050),d=n(8709),m=n(63513),p=n(9922),g=n(85985),h=n(98403),f=n(80900),x=n(22232),v=n(8125),b=n(38983),y=n(81531),C=n(46680),k=n(68200),S=n(93962),w=n(97834),_=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n};class E{constructor(e){var t,n,i,r,s,o;this._params=e,this._subs=new p.w.Keeper,this._session=b.h.create(S.z_.Starting.initial),this._resultById=new Map,this._contextIdByResultId=new Map,this._contextById=new Map,this._stateBlobByContextId=new Map,this._initialReceivedContext=null,this._upstreamDialect=b.h.create(S.LA.Dialect.Id.create(S.LA.Dialect.Value.american)),this._cheetahAckIds=new Set,this._searchReferencesUrlsById=new Map,this._cheetahAckHandlers=new Array,this._resultTimeout=void 0,this._contextTimeout=void 0,this._cheetahAckTimeout=void 0,this._resultTimeoutMs=null!==(t=this._params.resultTimeoutMs)&&void 0!==t?t:1e4,this._contextTimeoutMs=null!==(n=this._params.contextTimeoutMs)&&void 0!==n?n:1e4,this._cheetahAckTimeoutMs=null!==(i=this._params.cheetahAckTimeoutMs)&&void 0!==i?i:1e4,this._monitoringService=null!==(r=this._params.monitoringService)&&void 0!==r?r:w.g.getInstance(),this._logger=null!==(s=this._params.logger)&&void 0!==s?s:y.C8.Logging.getLogger("CheetahWeb.SessionServiceImpl",C.i.DEBUG),this.session=this._session.view(),o=this._params.startSessionOptions,S.z_.Mode.isRewriteOrQuickRewrite(o.mode)?(0,k.tt)("getText",this._params.textEditorService.getText(this._params.startSessionOptions.selectedRange),this._logger,(e=>{this._init(e)})):this._init()}_init(e){this._session.set({kind:"starting",mode:this._params.startSessionOptions.mode,selectedText:o.fromNullable(e),quickReplyContext:o.fromNullable(this._params.startSessionOptions.mode===S.z_.Mode.quickReply?this._params.startSessionOptions.quickReplyContext:void 0),error:o.none}),this._subs.push(this._params.capiService.capiEvents.pipe(g.h((e=>"cheetah:ack"===e.kind))).subscribe((e=>this._handleCheetahAck(e)))),this._subs.push(this._params.capiService.capiEvents.pipe(g.h((e=>"cheetah:setContext"===e.kind))).subscribe((e=>this._handleCheetahSetContext(e)))),this._subs.push(this._params.capiService.capiEvents.pipe(g.h((e=>"cheetah:chunk"===e.kind))).subscribe((e=>this._handleCheetahChunk(e)))),this._subs.push(this._params.capiService.capiEvents.pipe(g.h((e=>"cheetah:result"===e.kind))).subscribe((e=>this._handleCheetahResult(e)))),this._subs.push(this._params.capiService.capiEvents.pipe(g.h((e=>"cheetah:searchReferencesResult"===e.kind))).subscribe((e=>this._handleCheetahSearchReferencesResult(e)))),this._subs.push(this._params.capiService.capiEvents.pipe(g.h((e=>"cheetah:error"===e.kind))).subscribe((e=>this._handleCheetahError(e)))),this._subs.push(this._params.capiService.capiEvents.pipe(g.h((e=>"error"===e.kind))).subscribe((e=>this._handleError(e)))),this._subs.push(this._params.userService.user.view("dialect").subscribe((e=>h.wW(this._upstreamDialect)(S.LA.Dialect.Id.create(e))))),this._subs.push(this._upstreamDialect.subscribe((e=>this._handleUpstreamDialectChange(e)))),this._subs.push(this._session.subscribe((e=>this._logger.debug("session updated",e)))),this._startSession(this._params.startSessionOptions)}_startSession(e,t){this._logger.debug("_startSession()",{startSessionOptions:e}),(0,k.tt)("flush",this._params.textEditorService.flush(),this._logger,(()=>{const n=o.fromNullable(e.mode===S.z_.Mode.rewrite||e.mode===S.z_.Mode.quickRewrite?e.selectedRange:void 0),i=o.fromNullable(e.mode===S.z_.Mode.quickReply?e.quickReplyContext:void 0);this._setupCheetahAckHandler(S.SA.Error.Command.startSession,(()=>{this._setupContextTimeout(S.SA.Error.Command.startSession)}));const r={entryPoint:this._prepareEntryPoint(e.mode),selectedRange:(0,u.zG)(n,o.getOrElse((()=>({start:0,end:0})))),outerContext:(0,u.zG)(i,o.map(S.H3.toOuterContext),o.toUndefined),stateBlob:t,metadata:e.metadata};this._logger.debug("_startSession() - sending `cheetah:startSession` to CAPI",{data:r}),(0,k.tt)("cheetahStartSession",this._params.capiService.cheetahStartSession(r),this._logger,(()=>this._monitoringService.notify(S.SA.Info.StartSession.create(this._session.get().mode))))}))}submitAction(e){this._logger.debug("submitAction()",{action:e}),this._submitAction(e)}setVoiceProfile(e){return this._logger.debug("setVoiceProfile()",{voiceProfileSelections:e}),(0,u.zG)(A(this._session.get()),c.UI((t=>(this._session.set(Object.assign(Object.assign({},t),{voiceProfile:Object.assign(Object.assign({},t.voiceProfile),e),context:Object.assign(Object.assign({},t.context),{kind:"pending"})})),t))),c.tS((t=>(0,u.zG)(this._params.capiService.cheetahSetVoice({voice:{selectedStyle:e.selectedStyle,selectedTones:Array.from(e.selectedTonesPerStyle.get(e.selectedStyle)||[]),selectedRole:(0,u.zG)(e.selectedRole,o.toUndefined),needSetup:!1}}),c.Pd((e=>new Error(`CAPIService.cheetahSetVoice error: ${e.message}`)),(()=>!S.LA.Dialect.Id.eq.equals(t.voiceProfile.selectedDialect,e.selectedDialect))),c.tS((t=>t?r.g(c.qA)((0,u.zG)(this._params.capiService.setContext({goals:o.none,domain:o.none,audience:o.none,style:o.none,dialect:o.some(e.selectedDialect),outcomeContext:o.none}),c.Vn((e=>new Error(`CAPIService.setContext error: ${e.message}`)))),(0,u.zG)(this._params.userService.setDialect(e.selectedDialect),c.Vn((e=>new Error(`CAPIService.setDialect error: ${e.message}`))))):c.of(null))),c.Pd((e=>(this._monitoringService.notify(S.SA.Error.SetVoiceProfileFailed.create(this._session.get().mode,e)),e)),u.Q1)))))}setNewVoiceProfile(e){var{selectedDialect:t}=e,n=_(e,["selectedDialect"]);return this._logger.debug("setNewVoiceProfile()",{dialect:t,voiceProfile:n}),(0,u.zG)(A(this._session.get()),c.UI((e=>(this._session.set(Object.assign(Object.assign({},e),{context:Object.assign(Object.assign({},e.context),{kind:"pending"})})),e))),c.tS((e=>(0,u.zG)(this._params.capiService.cheetahSetVoiceProfile({role:(0,u.zG)(n.selectedRole,o.toUndefined),isEnabledByDefault:n.isEnabledByDefault,profiles:n.profiles}),c.Pd((e=>new Error(`CAPIService.cheetahSetVoice error: ${e.message}`)),(()=>!S.LA.Dialect.Id.eq.equals(e.voiceProfile.selectedDialect,t))),c.tS((e=>e?r.g(c.qA)((0,u.zG)(this._params.capiService.setContext({goals:o.none,domain:o.none,audience:o.none,style:o.none,dialect:o.some(t),outcomeContext:o.none}),c.Vn((e=>new Error(`CAPIService.setContext error: ${e.message}`)))),(0,u.zG)(this._params.userService.setDialect(t),c.Vn((e=>new Error(`CAPIService.setDialect error: ${e.message}`))))):c.of(null))),c.UI(u.Q1),O(this._logger,(e=>`SessionService.setVoiceProfile error: ${e.message}`))))))}stopInProgressResult(){return this._logger.debug("stopInProgressResult()"),(0,u.zG)(c.tD((()=>this._session.get())),c.Y$(S.z_.isStartedWithInProgressResult,(()=>new Error("Session has no in-progress result"))),c.tS((e=>(this._clearAllTimeouts(),this._session.modify((t=>Object.assign(Object.assign({},t),{context:(0,u.zG)(e.resultHistory.length>0?this._extractLatestResultContext(e):this._extractInitialContext(),o.getOrElse((()=>e.context))),inProgressResult:S.x4.isInProgressPending(e.inProgressResult.value)?o.some(Object.assign(Object.assign({},e.inProgressResult.value),{kind:"inProgressInterrupted"})):S.x4.isInProgressInterrupted(e.inProgressResult.value)?e.inProgressResult:S.x4.isInProgressOngoing(e.inProgressResult.value)?o.none:(0,x.L0)(e.inProgressResult.value)}))),(0,u.zG)(e.inProgressResult.value,o.fromPredicate(S.x4.isInProgressOngoing),o.fold((()=>c.of(void 0)),(e=>this._params.capiService.cheetahInterrupt({promptId:S.x4.Id.toPrimitive(e.id)}))))))),c.UI(u.Q1),O(this._logger,(e=>`SessionService.stopInProgressResult error: ${e.message}`)))}regenerateResult(e,t){this._logger.debug("regenerateResult()",{resultId:e});const n=this._session.get();if("started"===n.kind){const i=this._resultById.get(e);if(i){const n=i.source.action,r=o.getMonoid(l.jG()).concat,s=S.aU.isUserPrompt(n)||S.aU.isDynamic(n)?Object.assign(Object.assign({},n),{omitReferenceIds:r(n.omitReferenceIds,t.omitReferenceIds)}):n;this._submitAction(s,i.source.contextId,i.text);const a=this._contextIdByResultId.get(e);this._params.trackingService.trackResultRephrase(a)}else this._logger.warn("regenerateResult() - could not find result for provided result ID, skipping",{session:n,resultId:e})}else this._logger.warn("regenerateResult() - trying to regenerate result with a session that is not `started`, skipping",{session:n,resultId:e})}searchReferences(e){const t=this._session.get();"started"===t.kind?t.detectedReferences.has(e)||(this._session.set(Object.assign(Object.assign({},t),{detectedReferences:new Map(t.detectedReferences).set(e,o.none)})),this._setupCheetahAckHandler(S.SA.Error.Command.searchReferences,(t=>{this._searchReferencesUrlsById.set(t,e)})),(0,k.tt)("cheetahSearchReferences",this._params.capiService.cheetahSearchReferences({url:e}),this._logger)):this._logger.warn("searchReferences() - trying to search a reference with a session that is not `started`, skipping",{session:t})}dismissResult(e){this._logger.debug("dismissResult()",{resultId:e});const t=this._session.get();if("started"===t.kind){if(this._resultById.delete(e)){const n=t.resultHistory.findIndex((t=>t.id===e));let i=t.context;if(0===n&&t.resultHistory.length>1){this._logger.debug("dismissResult() - dismissing latest result, will try to restore context from previous result",{session:t,resultId:e});const n=o.toUndefined(this._extractPreviousResultContext(t));n?(this._logger.debug("dismissResult() - found context for previous result, will restore its context",{session:t,resultId:e,previousResultContext:n}),i=n):this._logger.warn("dismissResult() - could not find context for previous result, context will not be updated",{session:t,resultId:e})}else if(1===t.resultHistory.length){const n=o.toNullable(this._extractInitialContext());n?(this._logger.debug("dismissResult() - dismissed all results, restoring initial context",{session:t,resultId:e,initialContext:n}),i=n):this._logger.warn("dimissResult() - dismissed all results, but there is no initial context to restore, keeping the latest context",{session:t,resultId:e})}this._session.set(Object.assign(Object.assign({},t),{context:i,resultHistory:t.resultHistory.filter((t=>!S.x4.Id.eq.equals(t.id,e)))}));const r=this._contextIdByResultId.get(e);this._params.trackingService.trackResultDismiss(r)}else this._logger.warn("dismissResult() - could not find result for provided result ID, skipping",{session:t,resultId:e})}else this._logger.warn("dismissResult() - trying to dismiss result with a session that is not `started`, skipping",{session:t,resultId:e})}dismissError(){this._logger.debug("dismissError()"),this._session.modify((e=>Object.assign(Object.assign({},e),{error:o.none})))}trackResultInsert(e){this._logger.debug("trackResultInsert()",{resultId:e});if(this._resultById.get(e)){const t=this._contextIdByResultId.get(e);this._params.trackingService.trackResultInsert(t)}else this._logger.warn("trackResultInsert() - could not find result for provided result ID, skipping",{resultId:e})}trackResultOffensive(e){this._logger.debug("trackResultOffensive()",{resultId:e});if(this._resultById.get(e)){const t=this._contextIdByResultId.get(e);this._params.trackingService.trackResultOffensive(t)}else this._logger.warn("trackResultOffensive() - could not find result for provided result ID, skipping",{resultId:e})}trackActionsOffensive(){this._logger.debug("trackActionsOffensive()");const e=this._session.get();if("started"!==e.kind)return this._logger.warn("trackActionsOffensive() - tracking actions as offensive with a session that is not `started`, skipping");this._params.trackingService.trackActionsOffensive(e.context.id)}dispose(e){this._logger.debug("dispose()",{reason:e}),this._endSession(),this._subs.dispose()}_endSession(){this._logger.debug("_endSession() - sending `cheetah:endSession` to CAPI"),(0,k.tt)("cheetahEndSession",this._params.capiService.cheetahEndSession(),this._logger)}_handleCheetahSetContext(e){var t;this._logger.debug("_handleCheetahSetContext()",{event:e}),this._clearContextTimeout();const n=this._session.get(),i=e.message,r=(0,u.zG)(o.fromNullable(null===(t=i.context)||void 0===t?void 0:t.voiceProfileSettings),o.fold((()=>P(i.context.voice,n,this._upstreamDialect.get())),(e=>I(e,i.context.voice,n,this._upstreamDialect.get())))),s={id:S._y.Id.create(i.context.id),dynamicActions:R(i.context.availableActions),userPromptAction:B(i.context.promptAction,this._logger),quickRewriteAction:U(i.context.quickRewriteAction),intent:N(i.context.intent)},a=i.progressMessage?Object.assign(Object.assign({},s),{kind:"pending"}):Object.assign(Object.assign({},s),{kind:"received"});let l=!1;if(0===this._contextById.size&&S._y.isReceived(a)&&(l=!0,this._initialReceivedContext=a),this._contextById.set(a.id,a),this._stateBlobByContextId.set(a.id,i.context.stateBlob),this._session.set(Object.assign(Object.assign({},n),{kind:"started",voiceProfile:r,context:a,inProgressResult:"started"===n.kind?n.inProgressResult:o.none,resultHistory:"started"===n.kind?n.resultHistory:[],detectedReferences:"started"===n.kind?n.detectedReferences:new Map})),l&&S.z_.Mode.isQuickRewrite(n.mode)){const t=S.aU.QuickRewriteValue.fromInput(U(i.context.quickRewriteAction));this._logger.debug("_handleCheetahSetContext() - received initial context for quick rewrite session, submitting quick rewrite action",{session:n,event:e,quickRewriteAction:t}),this._submitAction(t)}}_handleCheetahChunk(e){this._logger.debug("_handleCheetahChunk()",{event:e});const t=this._session.get();if("started"!==t.kind)return this._logger.warn("_handleCheetahChunk() - received chunk with a session that is not `started`, skipping",{session:t,event:e});const n=e.message,i=S.x4.Id.create(n.promptId);(0,u.zG)(t.inProgressResult,o.filter(S.x4.isInProgressOngoing),o.filter((e=>S.x4.Id.eq.equals(e.id,i))),o.fold((()=>{const e=(0,u.zG)(t.inProgressResult,o.filter(S.x4.isInProgressOngoing),o.map((e=>e.id)));this._monitoringService.notify(S.SA.Warning.UnexpectedChunkReceived.create(this._session.get().mode,e,i))}),(e=>{this._clearAllTimeouts(),this._session.set(Object.assign(Object.assign({},t),{inProgressResult:o.some(Object.assign(Object.assign({},e),{text:e.text+n.token}))})),this._setupResultTimeout()})))}_handleCheetahResult(e){this._logger.debug("_handleCheetahResult()",{event:e});const t=this._session.get();if("started"!==t.kind)return this._logger.warn("_handleCheetahResult() - received result with a session that is not `started`, skipping",{session:t,event:e});const n=e.message,i=S.x4.Id.create(n.promptId);(0,u.zG)(t.inProgressResult,o.filter(S.x4.isInProgressOngoing),o.filter((e=>S.x4.Id.eq.equals(e.id,i))),o.fold((()=>{const e=(0,u.zG)(t.inProgressResult,o.filter(S.x4.isInProgressOngoing),o.map((e=>e.id)));this._monitoringService.notify(S.SA.Warning.UnexpectedResultReceived.create(this._session.get().mode,e,i))}),(i=>{var r,a;if(this._clearAllTimeouts(),n.error||!n.text||""===n.text.plain){const i=n.error?S.JZ.create(n.error):S.JZ.createEmptyResultError();this._logger.warn("_handleCheetahResult() - received result with error, adding error to session",{session:t,event:e,error:i}),this._session.set(Object.assign(Object.assign({},t),{inProgressResult:o.none,error:o.some(i)}))}else if(n.text.interrupted)this._logger.debug("_handleCheetahResult() - received result with interrupted text, skipping",{session:t,event:e});else{const l=Object.assign(Object.assign({},i),{kind:"complete",text:n.text.plain,timestamp:Date.now(),delta:(0,u.zG)(n.withVoiceText,(e=>{var t;const i=(0,u.zG)((0,k.DO)(null===(t=n.text)||void 0===t?void 0:t.delta),o.getOrElse((()=>new d.i)));return(0,u.zG)((0,k.DO)(null==e?void 0:e.delta),s.fromOption((()=>i)),s.map((e=>({genericVoice:i,preferVoice:!0===(null==n?void 0:n.showVoiceTextByDefault)?"user":"generic",userVoice:e}))))})),references:(0,u.zG)(o.fromNullable(n.references),o.map((e=>e.map((e=>{var t;return Object.assign(Object.assign({},e),{id:S.s3.Id.create(e.id),url:o.fromNullable(e.url),contextText:(0,u.zG)(o.fromNullable(null===(t=n.metadata)||void 0===t?void 0:t.knowledge_engine_references),o.chainNullableK((t=>{const n=Array.isArray(t)?t.find((t=>t.id===e.id)):void 0,i=null==n?void 0:n.contextText;return"string"==typeof i?i:void 0})))})}))))),changesSummary:o.fromNullable(n.changesSummary)});let c,m,p;this._logger.debug("_handleCheetahResult() - received complete result, saving complete result into history",{session:t,event:e,result:l}),n.context?(m=(null===(r=n.context)||void 0===r?void 0:r.voiceProfileSettings)?I(null===(a=n.context)||void 0===a?void 0:a.voiceProfileSettings,n.context.voice,t,this._upstreamDialect.get()):P(n.context.voice,t,this._upstreamDialect.get()),c={kind:"received",id:S._y.Id.create(n.context.id),dynamicActions:R(n.context.availableActions),userPromptAction:B(n.context.promptAction,this._logger),intent:N(n.context.intent)},p=n.context.stateBlob,this._logger.debug("_handleCheetahResult() - received result with context, will update voice profile and context accordingly",{session:t,event:e,voiceProfile:m,context:c})):(this._logger.warn("_handleCheetahResult() - received result without context, keeping latest voice profile and context",{session:t,event:e}),m=t.voiceProfile,c=t.context,p=this._stateBlobByContextId.get(t.context.id)),this._contextById.set(c.id,c),void 0!==p&&this._stateBlobByContextId.set(c.id,p),this._resultById.set(l.id,l),this._contextIdByResultId.set(l.id,c.id),this._session.set(Object.assign(Object.assign({},t),{voiceProfile:m,context:c,inProgressResult:o.none,resultHistory:[l,...t.resultHistory]}))}})))}_handleCheetahSearchReferencesResult(e){const t=this._session.get();if("started"===t.kind){const n=this._searchReferencesUrlsById.get(e.message.promptId);if(n){const i=e.message.references[0];i&&this._session.set(Object.assign(Object.assign({},t),{detectedReferences:new Map(t.detectedReferences).set(n,o.some(T(i)))}))}else this._logger.warn("_handleCheetahSearchReferencesResult() - trying to handle a search references result that did not have a corresponding cheetah:searchReferences request, skipping",{event:e})}else this._logger.warn("_handleCheetahSearchReferencesResult() - trying to handle a search references result with a session that is not `started`, skipping",{session:t})}_handleCheetahError(e){this._logger.debug("_handleCheetahError",{event:e}),this._clearAllTimeouts();const t=S.JZ.create(e.message.error);this._logger.warn("_handleCheetahError - received error, adding error to session",{error:t}),this._session.modify((e=>Object.assign(Object.assign({},e),{inProgressResult:o.none,error:o.some(t)})))}_handleUpstreamDialectChange(e){this._logger.debug("_handleUpstreamDialectChange()",{upstreamDialect:e});const t=this._session.get();if("started"===t.kind){const n=S.LA.Dialect.Id.create(e);this._logger.debug("_handleUpstreamDialectChange() - dialect changed on upstream services, updating selected dialect on voice profile",{session:t,selectedDialect:n}),this._session.set(Object.assign(Object.assign({},t),{voiceProfile:Object.assign(Object.assign({},t.voiceProfile),{selectedDialect:n})}))}}_handleCheetahAck(e){this._logger.debug("_handleCheetahAck()",{event:e}),this._clearCheetahAckTimeout(),this._cheetahAckIds.add(e.id);const t=this._cheetahAckHandlers.length>0?this._cheetahAckHandlers[0]:void 0;t&&(this._logger.debug("_handleCheetahAck() - extracting `cheetah:ack` handler from queue and executing it",{event:e,cheetahAckHandlers:this._cheetahAckHandlers}),this._cheetahAckHandlers=this._cheetahAckHandlers.slice(1),t(e.id))}_handleError(e){if(this._cheetahAckIds.has(e.id))if(this._clearAllTimeouts(),e.error===m.jK.SESSION_NOT_INITIALIZED){const t=(0,u.zG)(S.z_.toStarted(this._session.get()),o.map((e=>this._stateBlobByContextId.get(e.context.id))),o.toUndefined);this._session.modify((e=>Object.assign(Object.assign({},e),{inProgressResult:o.none}))),this._startSession(this._params.startSessionOptions,t),this._monitoringService.notify(S.SA.Warning.CAPIErrorHandled.create(this._session.get().mode,e))}else{const t=S.JZ.createCriticalError((0,u.zG)(S.z_.toStarting(this._session.get()),o.isSome));this._session.modify((e=>Object.assign(Object.assign({},e),{inProgressResult:o.none,error:o.some(t)}))),this._monitoringService.notify(S.SA.Error.CAPIErrorUnhandled.create(this._session.get().mode,e))}else this._monitoringService.notify(S.SA.Error.CAPIErrorUnhandled.create(this._session.get().mode,e))}_submitAction(e,t,n){var i;this._logger.debug("_submitAction()",{action:e,contextId:t});const r=this._session.get();if("started"===r.kind){const s=null!=t?t:r.context.id,a=this._stateBlobByContextId.get(s);if(void 0===a)return this._logger.warn("_submitAction() - cannot find state blob for context ID, skipping",{session:r,contextId:s,contextStateBlob:a});this._session.set(Object.assign(Object.assign({},r),{context:Object.assign(Object.assign({},r.context),{kind:"pending"}),inProgressResult:S.aU.willGenerateResult(e)?o.some({kind:"inProgressPending",header:{label:S.aU.isUserPrompt(e)?e.arg.value:e.label,iconUrl:S.aU.isUserPrompt(e)?o.none:o.some(e.iconUrl),copiablePrompt:S.aU.isUserPrompt(e)?o.some(e.arg.value):o.none},text:"",source:{contextId:s,action:e}}):o.none,error:o.none})),this._setupCheetahAckHandler(S.SA.Error.Command.action,(e=>{(0,u.zG)(S.z_.toStarted(this._session.get()),o.chain((e=>e.inProgressResult)),o.filter((0,v.Kg)(S.x4.isInProgressPending,S.x4.isInProgressInterrupted)),o.fold((()=>(this._logger.warn("received `cheetah:ack` related to in-progress-pending result but we don't have an in-progress-pending result, skipping",{ackId:e}),c.of(void 0))),(t=>{if(S.x4.isInProgressInterrupted(t))return this._clearAllTimeouts(),this._logger.info("received `cheetah:ack` related to in-progress-interrupted, sending `cheetah:interrupt`",{ackId:e}),this._session.modify((e=>Object.assign(Object.assign({},e),{inProgressResult:o.none}))),this._params.capiService.cheetahInterrupt({promptId:e});if(S.x4.isInProgressPending(t)){this._setupContextTimeout(S.SA.Error.Command.action);const n=Object.assign(Object.assign({},t),{kind:"inProgressOngoing",id:S.x4.Id.create(e)});return this._logger.debug("received `cheetah:ack` related to in-progress-pending result, transitioning result to in-progress-ongoing",{ackId:e,inProgressResult:n}),this._resultById.set(n.id,n),this._setupResultTimeout(),this._session.modify((e=>Object.assign(Object.assign({},e),{inProgressResult:o.some(n)}))),c.of(void 0)}(0,x.L0)(t)})))()}));const d={contextId:s,actionId:e.id,args:S.aU.isUserPrompt(e)?[{name:e.arg.id,value:e.arg.value}]:(0,u.zG)(l.c2(e.args),o.fold((()=>[]),(e=>e.map((e=>({name:e.id,value:e.value})))))),stateBlob:a,previousText:null!=n?n:null===(i=r.resultHistory[0])||void 0===i?void 0:i.text},m=S.aU.isUserPrompt(e)||S.aU.isDynamic(e)?(0,u.zG)(d,(t=>(0,u.zG)(e.useReferenceIds,o.fold((0,u.a9)(t),(e=>Object.assign(Object.assign({},t),{referenceIds:e}))))),(t=>(0,u.zG)(e.omitReferenceIds,o.fold((0,u.a9)(t),(e=>Object.assign(Object.assign({},t),{omitReferenceIds:e})))))):d;this._logger.debug("_submitAction() - sending `cheetah:action` to CAPI",{data:m}),(0,k.tt)("cheetahAction",this._params.capiService.cheetahAction(m),this._logger,(()=>this._monitoringService.notify(S.SA.Info.Action.create(this._session.get().mode))))}else this._logger.warn("_submitAction() - submitting action with a session that is not `started`, skipping",{session:r,action:e,contextId:t})}_prepareEntryPoint(e){let t;switch(e){case S.z_.Mode.ideation:t=m.vv.Schema.EntryPoint.Ideation;break;case S.z_.Mode.rewrite:t=m.vv.Schema.EntryPoint.Rewrite;break;case S.z_.Mode.quickRewrite:t=m.vv.Schema.EntryPoint.QuickRewrite;break;case S.z_.Mode.quickReply:t=m.vv.Schema.EntryPoint.QuickReply;break;default:return(0,x.L0)(e)}return this._logger.debug("_prepareEntryPoint()",{sessionMode:e,entryPoint:t}),t}_extractLatestResultContext(e){return this._extractContextFromResultHistory(e,0)}_extractPreviousResultContext(e){return this._extractContextFromResultHistory(e,1)}_extractContextFromResultHistory(e,t){const n=(0,u.zG)(o.fromNullable(e.resultHistory[t]),o.map((e=>e.id)),o.chain((e=>o.fromNullable(this._contextIdByResultId.get(e)))),o.chain((e=>o.fromNullable(this._contextById.get(e)))));return o.isNone(n)&&this._logger.warn("_extractContextFromResultHistory() - could not find context for result",{session:e,resultIndex:t}),n}_extractInitialContext(){return null!==this._initialReceivedContext?o.some(this._initialReceivedContext):(this._logger.warn("_extractInitialContext() - could not find initial context"),o.none)}_clearResultTimeout(){var e;this._logger.trace("_clearResultTimeout()"),null===(e=this._resultTimeout)||void 0===e||e.unsubscribe(),this._resultTimeout=void 0}_clearContextTimeout(){var e;this._logger.trace("_clearContextTimeout()"),null===(e=this._contextTimeout)||void 0===e||e.unsubscribe(),this._contextTimeout=void 0}_clearCheetahAckTimeout(){var e;this._logger.trace("_clearCheetahAckTimeout()"),null===(e=this._cheetahAckTimeout)||void 0===e||e.unsubscribe(),this._cheetahAckTimeout=void 0}_clearAllTimeouts(){this._clearResultTimeout(),this._clearContextTimeout(),this._clearCheetahAckTimeout()}_setupResultTimeout(){this._clearResultTimeout(),this._resultTimeout=f.H(this._resultTimeoutMs).subscribe((()=>{this._session.modify((e=>Object.assign(Object.assign({},e),{inProgressResult:o.none,error:o.some(S.JZ.createCriticalError((0,u.zG)(S.z_.toStarting(this._session.get()),o.isSome)))}))),this._monitoringService.notify(S.SA.Error.WaitForResultTimeout.create(this._session.get().mode))}))}_setupContextTimeout(e){this._logger.debug("_setupContextTimeout()",{command:e}),this._clearContextTimeout(),this._contextTimeout=f.H(this._contextTimeoutMs).subscribe((()=>{const t=S.JZ.createCriticalError((0,u.zG)(S.z_.toStarting(this._session.get()),o.isSome));this._logger.warn("waited too long to receive `cheetah:setContext`, adding error to session",{error:t}),this._session.modify((e=>Object.assign(Object.assign({},e),{inProgressResult:o.none,error:o.some(t)}))),this._monitoringService.notify(S.SA.Error.WaitForContextTimeout.create(this._session.get().mode,e))}))}_setupCheetahAckTimeout(e){this._logger.debug("_setupCheetahAckTimeout()",{command:e}),this._clearCheetahAckTimeout(),this._cheetahAckTimeout=f.H(this._cheetahAckTimeoutMs).subscribe((()=>{const t=S.JZ.createCriticalError((0,u.zG)(S.z_.toStarting(this._session.get()),o.isSome));this._logger.warn("waited too long to receive an ACK for a `cheetah:*` command, adding error to session",{error:t}),this._session.modify((e=>Object.assign(Object.assign({},e),{inProgressResult:o.none,error:o.some(t)}))),this._monitoringService.notify(S.SA.Error.WaitForAckTimeout.create(this._session.get().mode,e))}))}_setupCheetahAckHandler(e,t){this._setupCheetahAckTimeout(e),this._cheetahAckHandlers.push(t)}}function O(e,t){return c.Vn((n=>(e.error(t(n)),n)))}function A(e){return c.fj((()=>"started"===e.kind?s.right(e):s.left(new Error("Session not started"))))}function I(e,t,n,i){var r;const s=(0,u.zG)(S.z_.toStarted(n),o.fold((()=>[]),(e=>e.voiceProfile.roles)));return{kind:"newVoiceProfile",userName:e.userName,title:e.title,subTitle:e.subTitle,profiles:e.profiles,isEnabledByDefault:e.myVoiceIsEnabledByDefault.state,isEnabledByDefaultLabel:e.myVoiceIsEnabledByDefault.label,dialects:S.LA.Dialect.all(),roles:(0,u.zG)(null!==(r=t.roles)&&void 0!==r?r:[],a.UI((e=>({id:S.LA.Role.Id.create(e),label:e}))),(e=>e.length>0?e:s)),selectedDialect:(0,u.zG)(S.z_.toStarted(n),o.fold((()=>S.LA.Dialect.Id.create(i)),(e=>e.voiceProfile.selectedDialect))),selectedRole:(0,u.zG)(o.fromNullable(t.selectedRole),o.map((e=>e.trim())),o.filter((e=>""!==e)),o.map(S.LA.Role.Id.create)),needsSetup:!1}}function P(e,t,n){var i,r;const s=(0,u.zG)(S.z_.toStarted(t),o.map((e=>e.voiceProfile)),o.chain(S.LA.toLegacyVoiceProfile),o.fold((()=>[]),(e=>e.styles))),l=(0,u.zG)(S.z_.toStarted(t),o.fold((()=>[]),(e=>e.voiceProfile.roles))),c=(0,u.zG)(null!==(i=e.styles)&&void 0!==i?i:[],a.UI((e=>({id:S.LA.Style.Id.create(e.button.label),label:e.button.label,iconUrl:e.button.iconUrl,tones:e.tones.map((e=>({id:S.LA.Tone.Id.create(e.label),label:e.label,iconUrl:e.iconUrl,description:e.description}))),maxTones:e.maxTones,description:e.button.description}))),(e=>e.length>0?e:s)),d=S.LA.Style.Id.create(e.selectedStyle),m=c.find((e=>S.LA.Style.Id.eq.equals(e.id,d)));return{kind:"legacyVoiceProfile",styles:c,roles:(0,u.zG)(null!==(r=e.roles)&&void 0!==r?r:[],a.UI((e=>({id:S.LA.Role.Id.create(e),label:e}))),(e=>e.length>0?e:l)),selectedStyle:d,selectedTonesPerStyle:(new Map).set(d,new Set(e.selectedTones.filter((e=>null==m?void 0:m.tones.map((e=>e.id.toString())).includes(e))))),selectedRole:(0,u.zG)(o.fromNullable(e.selectedRole),o.map((e=>e.trim())),o.filter((e=>""!==e)),o.map(S.LA.Role.Id.create)),dialects:S.LA.Dialect.all(),selectedDialect:(0,u.zG)(S.z_.toStarted(t),o.fold((()=>S.LA.Dialect.Id.create(n)),(e=>e.voiceProfile.selectedDialect))),needsSetup:e.needSetup}}function R(e){return e.map((t=>({id:S.aU.Id.create(t.id),kind:"dynamic",iconUrl:t.iconUrl,group:{label:t.group,rank:e.map((e=>e.group)).findIndex((e=>t.group===e))},label:(0,i.sanitize)(t.label,{ALLOWED_TAGS:k.ap}),searchLabel:(0,i.sanitize)(t.label,{ALLOWED_TAGS:[]}),searchTags:t.searchTags,generatesTextType:o.fromNullable(t.generatesTextType),args:t.args.map((e=>({id:S.pY.Id.create(e.name),kind:"string",label:e.label,hints:(0,u.zG)(o.fromNullable(e.hint),o.map((e=>({header:e.header,items:e.text}))))}))),useReferenceIds:o.none,omitReferenceIds:o.none})))}function B(e,t){const n=(0,u.zG)(e.args,a.YM,o.map((t=>({id:S.aU.Id.create(e.id),kind:"userPrompt",arg:{id:S.pY.Id.create(t.name),kind:"string",label:t.label,hints:(0,u.zG)(o.fromNullable(t.hint),o.map((e=>({header:e.header,items:e.text}))))},useReferenceIds:o.none,omitReferenceIds:o.none}))));return o.isNone(n)&&t.warn("_extractUserPromptAction() - failed to extract user prompt action, received empty action args",{promptAction:e}),n}function U(e){return{kind:"quickRewrite",id:S.aU.Id.create(e.id),label:(0,i.sanitize)(e.label,{ALLOWED_TAGS:k.ap}),iconUrl:e.iconUrl}}function N(e){return(0,u.zG)(o.fromNullable(e),o.map((e=>(0,i.sanitize)(e,{ALLOWED_TAGS:[...k.ap,"person"]}))),o.map((e=>e.trim())),o.filter((e=>e.length>0)))}function T(e){return Object.assign(Object.assign({},e),{id:S.s3.Id.create(e.id),url:o.fromNullable(e.url),contextText:o.none})}var G=n(60797),z=n(24209),j=n(77176),F=n(16118);class D{constructor(e,t,n=y.C8.Logging.getLogger("CheetahWeb.AvailabilityServiceImpl",C.i.DEBUG)){this._capiService=e,this._startSessionInfo=t,this._logger=n,this._subs=new p.w.Keeper,this.availability=b.h.create({kind:S.a8.Kind.pending}),this.promptsAllocated=this.availability.view((e=>(0,u.zG)(e,o.fromPredicate(S.a8.isActiveOrPassive),o.map((e=>e.promptsAllocated))))),this._subs.push(this._startSessionInfo.pipe(G.oA).subscribe((({allowedFeatures:e,cheetahState:t})=>this.availability.set(e.includes(m.vv.AllowedFeature)?S.a8.fromUsage(null==t?void 0:t.usage):{kind:S.a8.Kind.unavailable}))),z.T(this._capiService.capiEvents.pipe(g.h((e=>"cheetah:setContext"===e.kind))),this._capiService.capiEvents.pipe(g.h((e=>"cheetah:result"===e.kind))),this._capiService.capiEvents.pipe(g.h((e=>"cheetah:updateState"===e.kind)),j.U((e=>({message:{usage:e.message.state.usage}}))))).subscribe((e=>this.availability.set(S.a8.fromUsage(e.message.usage)))),this.availability.pipe(F.G()).subscribe((([e,t])=>{this._logger.debug("availability updated",{prevAvailability:e,newAvailability:t}),S.a8.isActiveOrPassive(t)&&0===t.refillDate&&this._logger.warn("availability updated - error parsing refill date for new availability, setting timestamp to 0",{prevAvailability:e,newAvailability:t})})))}dispose(){this._subs.dispose()}}class V{constructor(e,t=y.C8.Logging.getLogger("CheetahWeb.TrackingServiceImpl",C.i.DEBUG)){this._capiService=e,this._logger=t}trackResultInsert(e){this._logger.debug("trackResultInsert()",{contextId:e}),e||this._logger.warn("trackResultInsert() - tracking result insert without context"),this._trackUxInteraction({kind:"result",userAction:S.Z7.Result.UserAction.insert},e)}trackResultOffensive(e){this._logger.debug("trackResultOffensive()",{contextId:e}),e||this._logger.warn("trackResultOffensive() - tracking result offensive without context"),this._trackUxInteraction({kind:"result",userAction:S.Z7.Result.UserAction.offensive},e)}trackResultDismiss(e){this._logger.debug("trackResultDismiss()",{contextId:e}),e||this._logger.warn("trackResultDismiss() - tracking result dismiss without context"),this._trackUxInteraction({kind:"result",userAction:S.Z7.Result.UserAction.dismiss},e)}trackResultRephrase(e){this._logger.debug("trackResultRephrase()",{contextId:e}),e||this._logger.warn("trackResultRephrase() - tracking result rephrase without context"),this._trackUxInteraction({kind:"result",userAction:S.Z7.Result.UserAction.rephrase},e)}trackVoiceProfileOpen(e){this._logger.debug("trackVoiceProfileOpen()",{source:e}),this._trackUxInteraction({kind:"voiceProfile",userAction:"toolbar"===e?S.Z7.VoiceProfile.UserAction.open:S.Z7.VoiceProfile.UserAction.openFromBanner})}trackVoiceProfileSkip(){this._logger.debug("trackVoiceProfileSkip()"),this._trackUxInteraction({kind:"voiceProfile",userAction:S.Z7.VoiceProfile.UserAction.skip})}trackActionsOpenStore(){this._logger.debug("trackActionsOpenStore()"),this._trackUxInteraction({kind:"actions",userAction:S.Z7.Actions.UserAction.openStore})}trackActionsOffensive(e){this._logger.debug("trackActionsOffensive()"),e||this._logger.warn("trackActionsOffensive() - tracking actions offensive without context"),this._trackUxInteraction({kind:"actions",userAction:S.Z7.Actions.UserAction.offensive},e)}trackPromptSearch(){this._logger.debug("trackPromptSearch()"),this._trackUxInteraction({kind:"prompt",userAction:S.Z7.Prompt.UserAction.search})}trackUsageInfoClick(){this._logger.debug("trackUsageInfoClick()"),this._trackUxInteraction({kind:"usageInfo",userAction:S.Z7.UsageInfo.UserAction.click})}trackUsageInfoHover(){this._logger.debug("trackUsageInfoHover()"),this._trackUxInteraction({kind:"usageInfo",userAction:S.Z7.UsageInfo.UserAction.hover})}trackOnboardingPopupView(){this._logger.debug("trackOnboardingPopupView()"),this._trackUxInteraction({kind:"onboardingPopup",userAction:S.Z7.Onboarding.UserAction.view})}trackOnboardingPopupSkip(){this._logger.debug("trackOnboardingPopupSkip()"),this._trackUxInteraction({kind:"onboardingPopup",userAction:S.Z7.Onboarding.UserAction.skip})}trackOnboardingPopupNext(){this._logger.debug("trackOnboardingPopupNext()"),this._trackUxInteraction({kind:"onboardingPopup",userAction:S.Z7.Onboarding.UserAction.next})}trackOnboardingPromptsTooltipView(){this._logger.debug("trackOnboardingPromptsTooltipView()"),this._trackUxInteraction({kind:"onboardingPromptsTooltip",userAction:S.Z7.Onboarding.UserAction.view})}trackOnboardingReviewTooltipView(){this._logger.debug("trackOnboardingReviewTooltipView()"),this._trackUxInteraction({kind:"onboardingReviewTooltip",userAction:S.Z7.Onboarding.UserAction.view})}trackOnboardingRewriteTooltipView(){this._logger.debug("trackOnboardingRewriteTooltipView()"),this._trackUxInteraction({kind:"onboardingRewriteTooltip",userAction:S.Z7.Onboarding.UserAction.view})}trackOnboardingKnowledgeHubTooltipView(){this._logger.debug("trackOnboardingRewriteTooltipView()"),this._trackUxInteraction({kind:"onboardingKnowledgeHubTooltip",userAction:S.Z7.Onboarding.UserAction.view})}trackAssistantClose(){this._logger.debug("trackAssistantClose()"),this._trackUxInteraction({kind:"assistant",userAction:S.Z7.Assistant.UserAction.close})}trackVoiceProfileRemoveTag(){this._logger.debug("trackVoiceProfileRemoveTag()"),this._trackUxInteraction({kind:"voiceProfile",userAction:S.Z7.VoiceProfile.UserAction.removeVoiceTag})}trackVoiceProfileKeepTag(){this._logger.debug("trackVoiceProfileKeepTag()"),this._trackUxInteraction({kind:"voiceProfile",userAction:S.Z7.VoiceProfile.UserAction.keepVoiceTag})}_trackUxInteraction(e,t){const n=S.Z7.getComponentId(e,t),i=S.Z7.getUserAction(e);this._logger.debug("_trackUxInteraction() - sending `user_action` to CAPI",{componentId:n,userAction:i,uxInteraction:e,contextId:t}),(0,k.tt)("sendUserAction",this._capiService.sendUserAction(n,i),this._logger)}}n(36582)},97834:(e,t,n)=>{n.d(t,{g:()=>r});var i=n(32952);class r{constructor(){this._events=new i.xQ}static getInstance(){return null===r.instance&&(r.instance=new r),r.instance}notify(e){this._events.next(e)}get events(){return this._events.asObservable()}}r.instance=null},36582:(e,t,n)=>{n.d(t,{p:()=>m});var i=n(5114),r=n(57050),s=n(80800),o=n(9922),a=n(85985),l=n(38983),c=n(93962),u=n(68200),d=n(97834);class m{constructor(e){var t;this._params=e,this._subs=new o.w.Keeper,this._activeSurvey=l.h.create(i.none),this.activeSurvey=this._activeSurvey.view(),this._monitoringService=null!==(t=this._params.monitoringService)&&void 0!==t?t:d.g.getInstance(),this._init()}dispose(){this._subs.dispose()}submitSurveyResult(e){(0,u.tt)("submitSurveyResult",this._params.capiService.submitSurvey({placement:e.placement,score:e.rating,stage:c.Bs.Stage.toCAPIStage(e.stage),open_answer:i.getOrElse((()=>""))(e.openAnswer),detailed_placement:e.detailedPlacement,type:e.type}),void 0,(()=>this._monitoringService.notify(c.V6.Info.SubmitSurveyInfo.create(e.type,e.placement,e.stage,!1,e.rating,i.getOrElse((0,r.a9)(""))(e.openAnswer),e.detailedPlacement))),(()=>this._monitoringService.notify(c.V6.Error.SubmitSurveyFailed.create(e.type,e.placement,e.detailedPlacement))))}dismissSurvey(e){(0,u.tt)("submitSurveyResult",this._params.capiService.submitSurvey({placement:e.placement,score:"declined",stage:c.Bs.Stage.toCAPIStage(e.stage),detailed_placement:e.detailedPlacement,type:e.type}),void 0,(()=>this._monitoringService.notify(c.V6.Info.SubmitSurveyInfo.create(e.type,e.placement,e.stage,!0))),(()=>this._monitoringService.notify(c.V6.Error.SubmitSurveyFailed.create(e.type,e.placement,e.detailedPlacement))))}_init(){this._subs.push(this._params.capiService.capiEvents.pipe(a.h((e=>"show_survey"===e.kind))).subscribe((e=>this._handleShowSurvey(e))))}_handleShowSurvey(e){(0,r.zG)(e.survey,i.fromPredicate((e=>"ggo"===e.placement)),i.chain((e=>"open_answer_score"===e.type?i.some(e):i.none)),i.chain((e=>{var t;return"string"==typeof e.detailed_placement&&2===(null===(t=e.detailed_placement)||void 0===t?void 0:t.split(":").length)?i.some({survey:e,detailedPlacement:e.detailed_placement}):i.none})),i.chain((({survey:e,detailedPlacement:t})=>{const[n,r]=t.split(":"),s=Math.abs(Number.parseInt(r,10));return Number.isNaN(s)?i.none:i.some({survey:e,detailedPlacement:t,sessionId:n,resultId:c.x4.Id.create(s)})})),i.fold((()=>this._monitoringService.notify(c.V6.Warning.UnexpectedSurveyFormatReceived.create(e.survey.type,e.survey.placement,e.survey.detailed_placement))),(({survey:e,detailedPlacement:t,resultId:n})=>{this._activeSurvey.modify((()=>i.some({placement:e.placement,title:e.title,detailedPlacement:t,type:s.v0.Survey.Data.OpenAnswerScoreSurvey.type,resultId:n,maxScore:e.max_score,boxText:i.fromNullable(e.box_text),ratingLabels:e.score_labels,acknowledgmentTitle:i.fromNullable(e.acknowledgment_title),acknowledgment:i.fromNullable(e.acknowledgment),skipOpenAnswerFrom:e.skip_open_answer_from,openAnswer:i.fromNullable({placeholder:e.open_answer.placeholder,maxLen:e.open_answer.max_len,minLen:i.fromNullable(e.open_answer.min_len)})})))})))}}},98685:(e,t,n)=>{n.d(t,{TB:()=>Me,Dj:()=>z,Gi:()=>j,WY:()=>Ec,aK:()=>wc,G2:()=>m});var i=n(5114),r=n(57050),s=n(14601),o=n(2768),a=n(85985),l=n(2834),c=n(49708),u=n(38983),d=n(68200);function m(e){return(0,r.zG)(e,i.fromPredicate((e=>"initial"===e.kind||"dragged"===e.kind)))}class p{constructor(e,t){this._positionInfo=e,this._handlers=t,this._internalState=u.h.create({managedPositionInfo:i.none,assistant:i.none,dragState:i.none,assistantMaxHeight:i.none}),this.state=this._internalState.view((e=>(0,r.zG)(e.dragState,i.map((t=>{return n=t,i=e.assistantMaxHeight,{kind:"dragged",dragging:n.dragging,referencePosition:n.translationOrigin,assistantMaxHeight:i,translation:(0,d.NN)(Object.assign(Object.assign({},n.assistantSize),{top:n.viewportSize.height-n.translationOrigin.bottom-n.assistantSize.height,left:n.viewportSize.width-n.translationOrigin.right-n.assistantSize.width}),Object.assign({left:0,top:0},n.viewportSize))(n.translation)};var n,i})),i.alt((()=>(0,r.zG)(e.managedPositionInfo,i.map((t=>({kind:"initial",referenceElement:t.referenceElement,placement:t.placement,offset:t.offset,assistantMaxHeight:e.assistantMaxHeight})))))),i.getOrElse((()=>({kind:"none"})))))),this._subs=new s.w,this._subs.add(this._positionInfo.pipe(o.R(this._internalState.view("dragState").pipe(a.h(i.isSome))),l.b((e=>this._internalState.lens("managedPositionInfo").set(i.some(e))))).subscribe()),this._subs.add(c.R(self,"resize").pipe(l.b((()=>this._internalState.lens("dragState").modify(i.map(d.eG.set("viewportSize",(0,r.zG)((0,d.C7)(),(({width:e,height:t})=>({width:e,height:t}))))))))).subscribe())}onFocusChange(e){this._handlers.onFocusChange(e)}onMount(e){this._internalState.lens("assistant").set(i.some(e))}onResize(e){this._internalState.lens("dragState").modify(i.map(d.eG.set("assistantSize",(0,r.zG)(e,(({width:e,height:t})=>({width:e,height:t}))))))}onMaxHeightChange(e){this._internalState.lens("assistantMaxHeight").set(i.some(e))}onDrag(e){this._internalState.modify((t=>Object.assign(Object.assign({},t),{dragState:(0,r.zG)(t.dragState,i.map((0,r.ls)(d.eG.set("translation",e),d.eG.set("dragging",!0))),i.alt((()=>(0,r.zG)(t.assistant,i.map((e=>({assistantRect:e.getBoundingClientRect(),viewportSize:(0,r.zG)((0,d.C7)(),(({width:e,height:t})=>({width:e,height:t})))}))),i.map((({assistantRect:t,viewportSize:n})=>({dragging:!0,viewportSize:n,assistantSize:{width:t.width,height:t.height},translation:e,translationOrigin:{bottom:n.height-(t.top+t.height),right:n.width-(t.left+t.width)}})))))))})))}onDragEnd(){this._internalState.lens("dragState").modify(i.map(d.eG.set("dragging",!1)))}dispose(){this._subs.unsubscribe()}}var g=n(17771),h=n(95195),f=n(73975),x=n(45701),v=n(64015),b=n(48044),y=n(17889),C=n(13853),k=n(24209),S=n(60797),w=n(77176),_=n(19751),E=n(78674),O=n(98403),A=n(8125),I=n(83078),P=n(22232),R=n(81531),B=n(93962),U=n(32264);function N(e){return(0,r.zG)(B.z_.toStarted(e),i.map((e=>e.context.dynamicActions)),i.chain((0,r.ls)(v.hX(z.isSupportedDynamicAction),y.c2)))}function T(e,t){return(0,r.zG)(B.z_.toStarted(e),i.map((e=>G(t).map((t=>{var n;return(0,r.zG)(null!==(n=e.detectedReferences.get(t))&&void 0!==n?n:i.none,i.toUndefined)})).filter((e=>!!e)))),i.getOrElse((0,r.a9)([])))}function G(e){return e.split(/\s/).filter((e=>e.length>3&&e.includes(".")))}var z,j,F,D=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n};!function(e){let t,n;e.isSupportedDynamicAction=(0,A.Kg)(B.aU.DynamicInput.isFollowUpQuestion,B.aU.DynamicInput.isQuickAction),function(e){e.ordByGroup=x.contramap((e=>e.group.rank))(x.ordNumber)}(t=e.SupportedDynamicActions||(e.SupportedDynamicActions={})),function(e){e.make=function(e){return{kind:"backendAction",action:e}}}(n=e.BackendAction||(e.BackendAction={}))}(z||(z={})),function(e){e.eq=h.getEq(f.yv,B.x4.Id.eq),e.card=function(e){return h.right(e)},e.uiItem=function(e){return h.left(e)},e.toCard=function(e){return i.fromEither(e)},e.toUIItem=function(e){return(0,r.zG)(e,h.fold(i.some,(()=>i.none)))}}(j||(j={})),function(e){function t(e){return t=>Object.assign(Object.assign({},t),{activeView:e,previousView:t.activeView})}e.create=function(){return{activeView:"loading",previousView:"loading",stagingVoiceProfile:i.none,stagingNewVoiceProfile:i.none,stagingFeedbackFormData:{},textBox:"",selectedDynamicAction:i.none,contentOverflowUnderToolbar:!1,promptAutofocusToken:0,cardsState:{hoveredCard:i.none,focusedCard:i.none},reportMenuVisible:i.none,referencesVisibility:new Map,detectedReferences:[],overrideCardVoice:new Map}},e.updateActiveView=t,e.goToPreviousView=e=>t(e.previousView)(e)}(F||(F={}));class V{constructor(e){var t,n;this._params=e,this._state=u.h.create(F.create()),this._subs=new s.w,this._reportMenuVisibleDebounced=u.h.create(i.none),this.state=u.h.combine(this._state,this._params.userService.user,this._params.availabilityService.availability,this._params.sessionService.session,this._reportMenuVisibleDebounced,((e,t,n,s,o)=>{var{cardsState:a,reportMenuVisible:l,textBox:c}=e,u=D(e,["cardsState","reportMenuVisible","textBox"]);return Object.assign(Object.assign({},u),{textBox:c,user:t,availability:n,session:s,userPromptAction:(0,r.zG)(B.z_.toStarted(s),i.chain((e=>e.context.userPromptAction))),activeCards:new Set((0,r.zG)([a.hoveredCard,(0,r.zG)(a.focusedCard,I.orElse((0,r.zG)(o,i.chain(j.toCard))))],v.oA)),canScroll:i.isNone(l),contextualActions:N(s),detectedReferences:T(s,c)})})),this.assistantUIActions=this._params.assistantUIActions,this._logger=null!==(t=this._params.logger)&&void 0!==t?t:R.C8.Logging.getLogger(V.name),this._monitoringService=null!==(n=this._params.monitoringService)&&void 0!==n?n:U.gz.getInstance(),this._subs.add(this.state.subscribe((e=>this._logger.debug("State update",e)))),this._subs.add(this._updateActiveView().subscribe()),this._subs.add(k.T(this._state.view("reportMenuVisible").pipe(S.oA,w.U(i.some)),this._state.view("reportMenuVisible").pipe(_.skipBy(i.getEq(j.eq)),E.b(250),a.h(i.isNone))).subscribe(O.wW(this._reportMenuVisibleDebounced))),this._subs.add(this.assistantUIActions.subscribe((e=>this._handleUIAction(e))))}_updateActiveView(){return u.h.combine(this._params.sessionService.session.view(B.z_.toStarting).view((0,r.ls)(i.chain((e=>e.error)),i.fold(r.jv,r.W8))),this._params.sessionService.session.view(B.z_.toStarted).view(i.map((e=>({hasResults:e.resultHistory.length>0,hasInProgressResult:i.isSome(e.inProgressResult)})))),this._state.view("selectedDynamicAction").view(i.isSome),((e,t,n)=>{(0,r.zG)(i.fromNullable(e?"loadingError":(0,r.zG)(t,i.map((({hasResults:e,hasInProgressResult:t})=>n?"actionSelected":e||t?"afterResults":"beforeResults")),i.toNullable)),I.tap((e=>this._state.modify((t=>"voiceProfile"!==t.activeView&&"feedbackForm"!==t.activeView?F.updateActiveView(e)(t):t)))))}))}contentOverflowUnderToolbar(e){this._state.lens("contentOverflowUnderToolbar").set(e)}focusPromptField(){this._state.lens("promptAutofocusToken").modify((e=>e+1))}dispose(){this._subs.unsubscribe()}_handleUIAction(e){switch(e.kind){case B.ix.Kind.toolbarCloseButtonClick:return void this._close(e);case B.ix.Kind.toolbarGoBackButtonClick:return this._goBack();case B.ix.Kind.toolbarVoiceButtonClick:return this._openVoiceProfile("toolbar");case B.ix.Kind.setVoiceButtonClick:return this._openVoiceProfile("banner");case B.ix.Kind.voiceProfileCloseButtonClick:return this._closeVoiceProfile();case B.ix.Kind.voiceProfileUseVoiceButtonClick:return this._applyVoiceProfile();case B.ix.Kind.toneToggleClick:return this._toggleTone(e.id,e.selected);case B.ix.Kind.styleToggleClick:return this._selectStyle(e.id);case B.ix.Kind.roleTypeaheadSelectionChange:return this._selectRole((0,r.zG)(e.role,i.map((e=>e.id))));case B.ix.Kind.dialectDropdownSelectionChange:return this._selectDialect(e.dialect.id);case B.ix.Kind.promptFieldTextChange:return this._updateTextBox(e.text);case B.ix.Kind.actionBrickClick:return this._executeAction(e.action);case B.ix.Kind.promptSubmitButtonClick:return this._go();case B.ix.Kind.generateStopButtonClick:return this._stop();case B.ix.Kind.resultCardInsertButtonClick:return this._insert(e.result);case B.ix.Kind.resultCardRephraseButtonClick:return this._rephrase(e.result);case B.ix.Kind.resultCardDismissButtonClick:return this._dismissResult(e.result);case B.ix.Kind.errorCardOkButtonClick:return this._dismissError();case B.ix.Kind.openFeedbackFormButtonClick:return this._openFeedbackForm(e.source);case B.ix.Kind.feedbackFormChange:return this._updateFeedbackForm(e.feedbackData);case B.ix.Kind.feedbackFormSubmitButtonClick:return this._submitFeedbackForm(e.feedbackData);case B.ix.Kind.reportOffensiveResultButtonClick:return this._reportOffensiveResult(e.result);case B.ix.Kind.reportOffensiveActionsButtonClick:return this._reportOffensiveActions();case B.ix.Kind.resultCardHeaderClick:return this._clickResultHeader(e.prompt);case B.ix.Kind.creditsInfoHover:return this._onCreditsInfoHover();case B.ix.Kind.creditsInfoClick:return this._onCreditsInfoClick();case B.ix.Kind.resultCardHoverChange:return this._onCardHover(e.resultId,e.hovered);case B.ix.Kind.resultCardFocusChange:return this._onCardFocus(e.resultId,e.focused);case B.ix.Kind.resultCardToggleGenericVoiceButtonClick:return this._onToggleGenericVoice(e.resultId,e.voice);case B.ix.Kind.reportMenuVisibilityChange:return this._onCardReportMenuVisibilityChange(e.trigger,e.visible);case B.ix.Kind.referencesVisibilityChange:return this._onCardReferencesVisibilityChange(e.resultId,e.visible);case B.ix.Kind.regenerateWithoutReferenceButtonClick:return this._regenerateWithoutReference(e.result,e.referenceId);case B.ix.Kind.mount:e.name===B.ec.creditsInfoButton&&(0,d.tt)("reportUphookShow",this._params.uphookService.reportUphookShow(this._params.userService.user.get()),this._logger,void 0,(e=>B.SA.Error.ReportUphookShowFailed.create(this._params.sessionService.session.get().mode,e)));break;case B.ix.Kind.promptFieldKeyPressEscape:return this._onPromptFieldKeyPressEscape(e);case B.ix.Kind.promptFieldKeyPressEnter:return e.text.trim().length>0?this._go():this._tryInsertLatestResult();case B.ix.Kind.voiceProfileTabChange:return this._switchNewVoiceProfileTab(e.profileName);case B.ix.Kind.voiceTagPopoverRemoveButtonClick:return this._removeVoiceTag(e);case B.ix.Kind.voiceTagPopoverCloseButtonClick:return this._closeVoiceTagPopover();case B.ix.Kind.voiceTagPopoverKeepButtonClick:return this._keepVoiceTagPopover();case B.ix.Kind.applyVoiceToWritingCheckboxChange:return this._updateMyVoiceIsEnabled(e.checked);case B.ix.Kind.voiceTagClick:return this._toggleVoiceTag(e);case B.ix.Kind.voiceDialectDropdownSelectionChange:return this._selectNewVoiceDialect(e.dialect.id);case B.ix.Kind.voiceRoleDropdownSelectionChange:return this._selectNewVoiceRole(e.role.id);case B.ix.Kind.voiceSelectionsSaveButtonClick:return this._saveNewVoiceSelections();case B.ix.Kind.voiceSelectionsCancelButtonClick:return this._cancelNewVoiceSelectionChanges();case B.ix.Kind.voiceSelectionsEditButtonClick:return this._editNewVoiceSelections();default:return}}_editNewVoiceSelections(){this._updateNewProfileStateIfAny((e=>Object.assign(Object.assign({},e),{stagingSelections:i.some({selectedDialect:e.selectedDialect,selectedRole:e.selectedRole})})))}_cancelNewVoiceSelectionChanges(){this._updateNewProfileStateIfAny((e=>Object.assign(Object.assign({},e),{stagingSelections:i.none})))}_saveNewVoiceSelections(){this._updateNewProfileStateIfAny((e=>Object.assign(Object.assign({},e),{selectedDialect:(0,r.zG)(e.stagingSelections,i.fold((()=>e.selectedDialect),(e=>e.selectedDialect))),selectedRole:(0,r.zG)(e.stagingSelections,i.fold((()=>e.selectedRole),(e=>e.selectedRole))),stagingSelections:i.none})))}_selectNewVoiceRole(e){this._updateNewProfileStateIfAny((t=>Object.assign(Object.assign({},t),{stagingSelections:(0,r.zG)(t.stagingSelections,i.map((t=>Object.assign(Object.assign({},t),{selectedRole:i.some(e)}))))})))}_selectNewVoiceDialect(e){this._updateNewProfileStateIfAny((t=>Object.assign(Object.assign({},t),{stagingSelections:(0,r.zG)(t.stagingSelections,i.map((t=>Object.assign(Object.assign({},t),{selectedDialect:e}))))})))}_updateNewProfileStateIfAny(e){this._state.lens("stagingNewVoiceProfile").modify(i.map(e))}_keepVoiceTagPopover(){this._params.trackingService.trackVoiceProfileKeepTag(),this._closeVoiceTagPopover()}_closeVoiceTagPopover(){this._updateNewProfileStateIfAny((e=>Object.assign(Object.assign({},e),{activeTagName:i.none})))}_toggleVoiceTag({tagName:e}){this._updateNewProfileStateIfAny((t=>Object.assign(Object.assign({},t),{activeTagName:i.toNullable(t.activeTagName)===e?i.none:i.some(e)})))}_updateMyVoiceIsEnabled(e){this._updateNewProfileStateIfAny((t=>Object.assign(Object.assign({},t),{isEnabledByDefault:e})))}_removeVoiceTag({tagName:e,profileName:t,sectionName:n}){this._params.trackingService.trackVoiceProfileRemoveTag(),this._updateNewProfileStateIfAny((i=>Object.assign(Object.assign({},i),{profiles:(0,r.zG)(i.profiles,v.UI((i=>i.name===t?Object.assign(Object.assign({},i),{sections:i.sections.map((t=>t.name===n?Object.assign(Object.assign({},t),{tags:t.tags.filter((t=>t.name!==e))}):t))}):i)))})))}_switchNewVoiceProfileTab(e){this._updateNewProfileStateIfAny((t=>Object.assign(Object.assign({},t),{activeProfileName:i.some(e)})))}_onCardHover(e,t){this._state.lens("cardsState").lens("hoveredCard").modify(t?()=>i.some(e):i.filter((t=>t!==e)))}_onCardFocus(e,t){this._state.lens("cardsState").lens("focusedCard").modify(t?()=>i.some(e):i.filter((t=>t!==e)))}_onCardReportMenuVisibilityChange(e,t){this._state.modify((n=>Object.assign(Object.assign({},n),{reportMenuVisible:t?i.some(e):(0,r.zG)(n.reportMenuVisible,i.filter((t=>!j.eq.equals(t,e)))),cardsState:Object.assign(Object.assign({},n.cardsState),{hoveredCard:(0,r.zG)(j.toCard(e),i.fold((()=>n.cardsState.hoveredCard),(e=>t?n.cardsState.hoveredCard:(0,r.zG)(n.cardsState.hoveredCard,i.filter((t=>t!==e))))))})})))}_onCardReferencesVisibilityChange(e,t){this._state.lens("referencesVisibility").modify((n=>new Map(n).set(e,t)))}_onToggleGenericVoice(e,t){this._state.lens("overrideCardVoice").modify((n=>{var i;const r=new Map(n),s=null!==(i=n.get(e))&&void 0!==i?i:t;return r.set(e,"generic"===s?"user":"generic"),r}))}_close(e){B.ix.is(B.ix.Kind.toolbarCloseButtonClick)(e)&&this._params.trackingService.trackAssistantClose(),"voiceProfile"===this._state.get().activeView&&this._trySaveNewProfileIfChanged(),(0,d.tt)("close",this._params.handlers.close(),this._logger,void 0,(e=>this._monitoringService.notify(B.SA.Error.AssistantCloseFailed.create(this._params.sessionService.session.get().mode,e))))}_trySaveNewProfileIfChanged(){const e=this._state.get();(0,r.zG)(g.Y(i.option)({editedVoiceProfile:e.stagingNewVoiceProfile,sessionVoiceProfile:(0,r.zG)(B.z_.toStarted(this._params.sessionService.session.get()),i.map((e=>e.voiceProfile)),i.chain(B.LA.toNewVoiceProfile))}),i.filter((({editedVoiceProfile:e,sessionVoiceProfile:t})=>!B.LA.NewSelections.eqByRoleDialectAndProfile.equals(e,t))),I.tap((({editedVoiceProfile:e})=>{(0,d.tt)("saveNewVoiceChanges",this._params.sessionService.setNewVoiceProfile({selectedDialect:e.selectedDialect,selectedRole:e.selectedRole,isEnabledByDefault:e.isEnabledByDefault,profiles:e.profiles}),this._logger,void 0,(e=>B.SA.Error.SetVoiceProfileFailed.create(this._params.sessionService.session.get().mode,e)))})))}_goBack(){"voiceProfile"===this._state.get().activeView&&this._trySaveNewProfileIfChanged();const e=(0,r.zG)(B.z_.toStarted(this._params.sessionService.session.get()),i.map((e=>e.resultHistory.length>0)),i.fold(r.jv,r.W8));this._state.modify((t=>Object.assign(Object.assign({},"actionSelected"===t.activeView?F.updateActiveView(e?"afterResults":"beforeResults")(t):F.updateActiveView(t.previousView)(t)),{selectedDynamicAction:"actionSelected"===t.activeView?i.none:t.selectedDynamicAction,textBox:"actionSelected"===t.activeView?"":t.textBox,stagingNewVoiceProfile:"voiceProfile"===t.activeView?i.none:t.stagingNewVoiceProfile})))}_createVoiceProfile(e){var t;return"newVoiceProfile"===e.kind?(0,r.ls)(F.updateActiveView("voiceProfile"),d.eG.set("stagingNewVoiceProfile",i.some({selectedRole:e.selectedRole,selectedDialect:e.selectedDialect,isEnabledByDefault:e.isEnabledByDefault,profiles:e.profiles,activeTagName:i.none,activeProfileName:i.fromNullable(null===(t=e.profiles.find((e=>e.selected)))||void 0===t?void 0:t.name),stagingSelections:i.none})),d.eG.set("reportMenuVisible",i.none),d.eG.set("cardsState",{hoveredCard:i.none,focusedCard:i.none})):(0,r.ls)(F.updateActiveView("legacyVoiceProfile"),d.eG.set("stagingVoiceProfile",i.some({selectedStyle:e.selectedStyle,selectedTonesPerStyle:e.selectedTonesPerStyle,selectedRole:e.selectedRole,selectedDialect:e.selectedDialect,needsSetup:e.needsSetup})),d.eG.set("reportMenuVisible",i.none),d.eG.set("cardsState",{hoveredCard:i.none,focusedCard:i.none}))}_openVoiceProfile(e){(0,r.zG)(B.z_.toStarted(this._params.sessionService.session.get()),I.tap((t=>{this._params.trackingService.trackVoiceProfileOpen(e),this._state.modify(this._createVoiceProfile(t.voiceProfile))})))}_closeVoiceProfile(){this._params.trackingService.trackVoiceProfileSkip(),this._state.modify((e=>(0,r.zG)(F.updateActiveView(e.previousView)(e),d.eG.set("stagingVoiceProfile",i.none))))}_applyVoiceProfile(){const e=this._state.get().stagingVoiceProfile;this._state.modify((e=>(0,r.zG)(F.updateActiveView(e.previousView)(e),d.eG.set("stagingVoiceProfile",i.none)))),(0,r.zG)(e,I.tap((e=>{(0,d.tt)("setVoiceProfile",this._params.sessionService.setVoiceProfile(e),this._logger)})))}_toggleTone(e,t){this._state.lens("stagingVoiceProfile").modify(i.map((n=>Object.assign(Object.assign({},n),{selectedTonesPerStyle:(0,r.zG)(n.selectedTonesPerStyle,t?(0,d.ni)(B.LA.Style.Id.eq)(n.selectedStyle,i.fold((()=>new Set([e])),C.$T(B.LA.Tone.Id.eq)(e))):(0,r.ls)(b.cq(B.LA.Style.Id.eq)(n.selectedStyle,C.Od(B.LA.Tone.Id.eq)(e)),i.getOrElse((()=>n.selectedTonesPerStyle))))}))))}_selectStyle(e){this._state.lens("stagingVoiceProfile").modify(i.map((t=>Object.assign(Object.assign({},t),{selectedStyle:e}))))}_selectRole(e){this._state.lens("stagingVoiceProfile").modify(i.map((t=>Object.assign(Object.assign({},t),{selectedRole:e}))))}_selectDialect(e){this._state.lens("stagingVoiceProfile").modify(i.map((t=>Object.assign(Object.assign({},t),{selectedDialect:e}))))}_updateTextBox(e){this._state.lens("textBox").set(e),this._searchReferences(e)}_executeAction(e){if("backendAction"===e.kind)if(B.aU.DynamicInput.isFollowUpQuestion(e.action)){const t=e.action;this._state.modify((e=>Object.assign(Object.assign({},e),{textBox:"",selectedDynamicAction:i.some(t)})))}else B.aU.DynamicInput.isQuickAction(e.action)?(this._state.modify((e=>Object.assign(Object.assign({},e),{textBox:"",selectedDynamicAction:i.none}))),this._params.sessionService.submitAction(e.action)):(0,P.L0)(e.action);else"allResults"===e.kind||("go"===e.kind?this._go():(0,P.L0)(e))}_go(){i.isSome(this._state.get().selectedDynamicAction)?this._submitSelectedFollowUpAction():this._submitCustomPrompt()}_stop(){this._params.sessionService.stopInProgressResult()()}_insert(e){(0,d.tt)("insertText",this._params.textEditorService.insertText(e.text),this._logger,(()=>{this._params.sessionService.trackResultInsert(e.id)}))}_tryInsertLatestResult(){(0,r.zG)(B.z_.toStarted(this._params.sessionService.session.get()),i.map((e=>e.resultHistory)),i.chain(v.YM),I.tap((e=>this._insert(e))))}_onPromptFieldKeyPressEscape(e){(0,r.zG)(B.z_.toStarted(this._params.sessionService.session.get()),i.chain((e=>e.inProgressResult)),i.fold((()=>this._close(e)),(()=>this._stop())))}_rephrase(e){this._params.sessionService.regenerateResult(e.id,{omitReferenceIds:i.none})}_dismissResult(e){this._params.sessionService.dismissResult(e.id),this._state.modify((t=>Object.assign(Object.assign({},t),{reportMenuVisible:(0,r.zG)(t.reportMenuVisible,i.filter((t=>!j.eq.equals(t,j.card(e.id))))),cardsState:{hoveredCard:(0,r.zG)(t.cardsState.hoveredCard,i.filter((t=>t!==e.id))),focusedCard:(0,r.zG)(t.cardsState.hoveredCard,i.filter((t=>t!==e.id)))}})))}_dismissError(){this._params.sessionService.dismissError()}_openFeedbackForm(e){this._state.modify((t=>Object.assign(Object.assign({},F.updateActiveView("feedbackForm")(t)),{stagingFeedbackFormData:{source:e},reportMenuVisible:i.none,cardsState:{hoveredCard:i.none,focusedCard:i.none}})))}_updateFeedbackForm(e){this._state.modify((t=>Object.assign(Object.assign({},t),{stagingFeedbackFormData:Object.assign(Object.assign({},t.stagingFeedbackFormData),e)})))}_submitFeedbackForm(e){this._state.modify((e=>Object.assign(Object.assign({},F.goToPreviousView(e)),{stagingFeedbackFormData:{}}))),(0,d.tt)("submitFeedback",this._params.feedbackService.submitFeedback(e),this._logger,void 0,(e=>B.SA.Error.SubmitFeedbackFailed.create(this._params.sessionService.session.get().mode,e)))}_reportOffensiveResult(e){this._params.sessionService.trackResultOffensive(e.id)}_reportOffensiveActions(){this._params.sessionService.trackActionsOffensive()}_clickResultHeader(e){this._state.modify((t=>Object.assign(Object.assign({},t),{textBox:e,promptAutofocusToken:t.promptAutofocusToken+1})))}_onCreditsInfoHover(){this._params.trackingService.trackUsageInfoHover()}_onCreditsInfoClick(){this._params.trackingService.trackUsageInfoClick(),(0,d.tt)("reportUphookClick",this._params.uphookService.reportUphookClick(this._params.userService.user.get()),this._logger,void 0,(e=>B.SA.Error.ReportUphookClickFailed.create(this._params.sessionService.session.get().mode,e)))}_submitSelectedFollowUpAction(){const e=(0,r.zG)(this._state.get().textBox.trim(),i.fromPredicate((e=>""!==e)));(0,r.zG)(g.Y(i.Applicative)({text:e,selectedDynamicAction:this._state.get().selectedDynamicAction}),i.map((({text:e,selectedDynamicAction:t})=>B.aU.FollowUpQuestionValue.fromInputAndValue(t,e))),I.tap((e=>{this._state.modify((e=>Object.assign(Object.assign({},e),{selectedDynamicAction:i.none,textBox:""}))),this._params.sessionService.submitAction(e)})))}_submitCustomPrompt(){(0,r.zG)(this._state.get().textBox.trim(),i.fromPredicate((e=>""!==e)),i.chain((e=>(0,r.zG)(B.z_.toStarted(this._params.sessionService.session.get()),i.chain((t=>(0,r.zG)(t.context.userPromptAction,i.map((n=>({text:e,session:t,userPromptAction:n}))))))))),I.tap((({text:e,session:t,userPromptAction:n})=>{this._state.lens("textBox").set(""),this._params.sessionService.submitAction(B.aU.UserPromptValue.fromActionAndArg(n,e,(0,r.zG)(T(t,e).map((e=>e.id)),y.nI),i.none))})))}_regenerateWithoutReference(e,t){this._params.sessionService.regenerateResult(e.id,{omitReferenceIds:i.some([t])})}_searchReferences(e){G(e).forEach((e=>this._params.sessionService.searchReferences(e)))}}var M,L=n(80900),K=n(28043);class ${constructor(e,t,n=3e3,i=1){this._assistantUIActions=e,this._activeView=t,this._notificationsDurationMs=n,this._maxNotificationsCountAtOnce=i,this._state=u.h.create([]),this._notificationsSubs=new Map,this._subs=new s.w,this._nextToastId=0,this.state=this._state.view(),this._subs.add(this._showFeedbackSubmittedToast().subscribe()),this._subs.add(this._clearNotificationsOnViewChange().subscribe()),this._subs.add(this._removeVoiceTagNotification().subscribe())}dismiss(e){var t;null===(t=this._notificationsSubs.get(e))||void 0===t||t.unsubscribe(),this._notificationsSubs.delete(e),this._state.modify(v.hX((t=>t.id!==e)))}clearAll(){this._notificationsSubs.forEach((e=>e.unsubscribe())),this._notificationsSubs.clear(),this._state.set([])}dispose(){this._subs.unsubscribe(),this.clearAll()}_showNotification(e){const t=this._nextToastId++;this._notificationsSubs.set(t,L.H(this._notificationsDurationMs).subscribe((()=>this.dismiss(t)))),this._state.modify((0,r.ls)(v.QI({kind:e,id:t}),v.ke(this._maxNotificationsCountAtOnce)))}_showFeedbackSubmittedToast(){return this._assistantUIActions.pipe(a.h((0,A.Kg)(B.ix.is(B.ix.Kind.feedbackFormSubmitButtonClick),B.ix.is(B.ix.Kind.reportOffensiveResultButtonClick),B.ix.is(B.ix.Kind.reportOffensiveActionsButtonClick))),l.b((()=>this._showNotification(B.Cl.Kind.feedbackSubmitted))))}_removeVoiceTagNotification(){return this._assistantUIActions.pipe(a.h(B.ix.is(B.ix.Kind.voiceTagPopoverRemoveButtonClick)),l.b((()=>this._showNotification(B.Cl.Kind.voiceTagRemoved))))}_clearNotificationsOnViewChange(){return this._activeView.pipe(K.x(),l.b((e=>{"feedbackForm"!==e&&"voiceProfile"!==e||this.clearAll()})))}}!function(e){e.empty={activeSurvey:i.none,stage:B.Bs.Stage.Type.Rating,transitionStage:B.Bs.Stage.Type.Rating,rating:i.none,errors:i.none,openAnswer:i.none}}(M||(M={}));class H{constructor(e){this._params=e,this._state=u.h.create(M.empty),this._subs=new s.w,this._stageTimeoutClear=void 0,this.state=this._state.view(),this._updateStageAfterTransition(),this._subscribeToActiveSurvey(),this._subs.add(this._params.assistantUIActions.subscribe((e=>{(0,A.Kg)(B.ix.isSurveyAction,B.ix.isSurveyImplicitDismissAction)(e)&&this._handleUIAction(e)})))}get _activeSurvey(){return this.state.get().activeSurvey}_subscribeToActiveSurvey(){this._subs.add(this._params.userSurveyService.activeSurvey.subscribe((e=>{(0,r.zG)(e,i.map((e=>{(0,r.zG)(this._activeSurvey,i.fold((()=>this._updateActiveSurvey(e)),(t=>{t.detailedPlacement!==e.detailedPlacement&&this._updateActiveSurvey(e)})))})))})))}_updateActiveSurvey(e){this._state.modify((()=>Object.assign(Object.assign({},M.empty),{activeSurvey:i.some(e)})))}_handleUIAction(e){switch(e.kind){case B.ix.Kind.surveyComplete:this._onSurveyCompleted();break;case B.ix.Kind.surveyClose:this._onDismissExplicitly();break;case B.ix.Kind.surveyOpenAnswerChange:this._onOpenAnswerChange(e.openAnswer);break;case B.ix.Kind.surveyRatingSelectionChange:this._onRatingSelectionChange(e.rating);break;case B.ix.Kind.promptSubmitButtonClick:case B.ix.Kind.actionBrickClick:case B.ix.Kind.resultCardInsertButtonClick:case B.ix.Kind.resultCardRephraseButtonClick:case B.ix.Kind.resultCardHeaderClick:case B.ix.Kind.resultCardDismissButtonClick:this._onDismissImplicitly();break;default:(0,P.L0)(e)}}_onRatingSelectionChange(e){(0,r.zG)(this._activeSurvey,i.map((e=>e.skipOpenAnswerFrom)),i.map((t=>{e<t?this._state.modify((t=>Object.assign(Object.assign({},t),{rating:i.some(e),transitionStage:B.Bs.Stage.Type.Feedback}))):this._state.modify((t=>Object.assign(Object.assign({},t),{rating:i.some(e),transitionStage:B.Bs.Stage.Type.Completed}))),this._reportCompleting()})))}_onOpenAnswerChange(e){(0,r.zG)(this._activeSurvey,i.chain((({openAnswer:e})=>e)),i.map((({maxLen:t})=>{e.length<=t&&this._state.modify((t=>Object.assign(Object.assign({},t),{openAnswer:i.some(e),errors:i.none})))})))}_onSurveyCompleted(){(0,r.zG)(this._activeSurvey,i.chain((({openAnswer:e})=>e)),i.chain((({minLen:e})=>e)),i.fold((()=>this._complete()),(e=>{(0,r.zG)(this._state.get().openAnswer,i.fold((()=>this._setOpenAnswerError("This field is required.")),(t=>{t.length<e?this._setOpenAnswerError(e>0?`Please enter at least ${e} characters.`:"This field is required."):this._complete()})))})))}_complete(){this._reportCompleting(),this._state.modify((e=>Object.assign(Object.assign({},e),{transitionStage:B.Bs.Stage.Type.Completed})))}_reportCompleting(){(0,r.zG)(this._activeSurvey,i.chain((e=>(0,r.zG)(this._state.get().rating,i.map((t=>({survey:e,rating:t})))))),i.map((({survey:e,rating:t})=>this._params.userSurveyService.submitSurveyResult({rating:t,openAnswer:this._state.get().openAnswer,placement:e.placement,detailedPlacement:e.detailedPlacement,stage:this.state.get().stage,type:e.type}))))}_setOpenAnswerError(e){this._state.modify((t=>Object.assign(Object.assign({},t),{errors:i.some({openAnswerError:i.some(e)})})))}_onDismissExplicitly(){(0,r.zG)(this._activeSurvey,i.map((e=>{const t=this.state.get().stage;t===B.Bs.Stage.Type.Rating&&this._params.userSurveyService.dismissSurvey({placement:e.placement,detailedPlacement:e.detailedPlacement,type:e.type,stage:t})}))),this._state.modify((e=>Object.assign(Object.assign({},e),{transitionStage:B.Bs.Stage.Type.Closed})))}_onDismissImplicitly(){this._state.modify((e=>Object.assign(Object.assign({},e),{transitionStage:B.Bs.Stage.Type.Closed})))}_updateStageAfterTransition(){this._subs.add(this._state.subscribe((e=>{this._clearStageTimeout(),this._stageTimeoutClear=setTimeout((()=>{this._state.modify((e=>Object.assign(Object.assign({},e),{stage:e.transitionStage})))}),Z[e.transitionStage])})))}_clearStageTimeout(){void 0!==this._stageTimeoutClear&&(clearTimeout(this._stageTimeoutClear),this._stageTimeoutClear=void 0)}dispose(){this._subs.unsubscribe(),this._clearStageTimeout()}}const Z={[B.Bs.Stage.Type.Rating]:0,[B.Bs.Stage.Type.Feedback]:300,[B.Bs.Stage.Type.Completed]:0,[B.Bs.Stage.Type.Closed]:0};var W=n(32952),q=n(16118),Y=n(2844),X=n(66310),Q=n(76974),J=n(93508),ee=n(27378),te=n(12187),ne=n(5739),ie=n(34217),re=n(62080),se=n(9546),oe=n(62172),ae=n(13578),le=n(89894);const ce="brick",ue=d.Es.buttonOverrideSpecificity({padding:`0 ${le.ux.rem(se.x)} 0 ${le.ux.rem(se.F2)}`},ce),de={display:"flex",alignItems:"center",gap:le.ux.rem(se.x)},me=d.Es.buttonOverrideSpecificity({minHeight:le.ux.rem(1.75),fontSize:le.ux.rem(.75),lineHeight:le.ux.rem(1.125),color:oe.BlueGray80},ce),pe=d.Es.buttonOverrideSpecificity({minHeight:le.ux.rem(2),fontSize:le.ux.rem(.875),lineHeight:le.ux.rem(1.375),color:ae.XY.Content.Primary.Default},ce),ge=d.Es.buttonOverrideSpecificity({boxShadow:`inset 0 0 0 ${le.ux.rem(.125)} ${d.BO.BrandGreen60}`},ce),he={textAlign:"left",whiteSpace:"initial",lineHeight:le.ux.rem(1.125),margin:`${le.ux.rem(.25)} 0 ${le.ux.rem(.25)} 0`},fe=Object.assign({},d.Es.iconSizeRems(1.5)),xe=le.ux.joinClasses([ce,le.ux.style(ue)]),ve=le.ux.style(de),be=le.ux.style(me),ye=le.ux.style(pe),Ce=le.ux.style(ge),ke=le.ux.style(he),Se=le.ux.style(fe),we=le.ux.style(fe),_e=(0,te.xb)(re.zx.Secondary),Ee="actionBrick",Oe=ie.UI.Node.make((({view:e,notify:t})=>ee.createElement(_e,Object.assign({onClick:e("action").pipe(w.U((e=>t({kind:B.ix.Kind.actionBrickClick,action:e})))),name:"actionBrick"},(0,te.Sh)(Ee,xe,e("action").pipe(w.U((({kind:e})=>"go"===e?Ce:null))),e("mode").pipe(w.U((e=>"compact"===e?be:"standard"===e?ye:(0,P.L0)(e)))))),ee.createElement(ne.F.div,{className:ve},e("icon").pipe(w.U(h.fold((({kind:e})=>{switch(e){case"allResults":return ee.createElement(re.k8,{className:Se});case"go":return ee.createElement(re.CT,{className:we});default:return(0,P.L0)(e)}}),(({url:e})=>ee.createElement("img",{src:e,style:{width:20,height:20}}))))),ee.createElement(ne.F.span,Object.assign({className:ke},(0,d.E)(e("label"))))))));function Ae(e,t,n){return ie.Z.fromSideEffect((t=>e.notify(t)),Y.aj([t,e.assistant.state.view("textBox")]).pipe(w.U((([e,t])=>({icon:"backendAction"===e.kind?h.right({url:e.action.iconUrl}):h.left({kind:e.kind}),label:"backendAction"===e.kind?e.action.label:"allResults"===e.kind?"More":"go"===e.kind?`”${t.trim()}”`:(0,P.L0)(e),action:e,mode:n})))))}const Ie=ie.UI.List.make(v.bw,Oe);function Pe(e,t,n){return ie.Z.composeList(v.Ot,(()=>t.pipe(w.U(i.getOrElse((()=>[]))))),(t=>Ae(e,Q.of(t),n)))}function Re(e=3,t=(t=>t.length>e)){return n=>t(n)?y.Ss(v.ke(e)(n),{kind:"allResults"}):n}const Be=({style:e,contentStyle:t,children:n,header:i})=>ee.createElement("div",{className:le.ux.style(Ue,e)},i?ee.createElement(re.Ol,null,i):null,ee.createElement("div",{className:le.ux.style(Ne,t)},n)),Ue={background:"white",display:"flex",flexDirection:"column",gap:le.ux.rem(se.x)},Ne={display:"flex",flexDirection:"row",flexWrap:"wrap",gap:le.ux.rem(se.x)},Te=ie.UI.Grid.make((({slots:e,view:t})=>ee.createElement(Be,{header:ee.createElement(ne.F.Fragment,null,t("group")),style:je},e.actions))),Ge=ie.UI.Knot.make(Te,{actions:Ie}),ze=ie.UI.List.make(v.bw,Ge),je={background:"transparent",padding:`${le.ux.rem(se.x)} 0`};function Fe(e,t){return ie.Z.composeList(v.Ot,(()=>t),(t=>function(e,t){return ie.Z.composeKnot({root:()=>Q.of({group:t.group}),actions:Pe(e,Q.of(i.some(t.actions)),"standard")})}(e,t)))}class De{constructor(e,t,n,o,c,m){var p,g,h;this._availabilityService=t,this._sessionService=n,this._trackingService=o,this._focusPromptField=m,this._subs=new s.w,this._state=u.h.create(i.none),this._userTyped=new W.xQ,this._promptOrMenuFocused=new W.xQ,this._promptMenuActions=new W.xQ,this._promptMenuContainer=i.none,this._cachedActionBricks=i.none,this.state=this._state.view(),this._subs.add(this._userTyped.pipe(E.b(150),a.h((()=>!c())),l.b((e=>this._promptMenuActions.next({kind:"showSearchResults",search:e})))).subscribe()),this._subs.add((p=this._promptMenuActions,g=this._sessionService.session,h=this._availabilityService.availability,Y.aj([p.pipe(X.w((e=>"showSearchResults"===e.kind?g.view(B.z_.toStarted).pipe(w.U((t=>(0,r.zG)(t,i.filter((()=>""!==e.search.trim())),i.chain((t=>{return n=(0,r.zG)(t.context.dynamicActions,v.hX(z.isSupportedDynamicAction)),s=e.search,(0,r.zG)(n,v.DZ((e=>(0,r.zG)((0,d.lA)(s,e.searchLabel,e.searchTags),i.map((t=>({data:e,matchScore:t})))))),v.DY((0,d.JY)()),v.UI((({data:e})=>e)),y.c2);var n,s})),i.map((e=>({kind:"searchResults",actions:e}))))))):"showActionsStore"===e.kind?g.view((0,r.ls)(N,i.map((e=>({kind:"actionsStore",actions:e}))))):"close"===e.kind?Q.of(i.none):(0,P.L0)(e))),J.O(i.none)),h]).pipe(w.U((([e,t])=>(0,r.zG)(e,i.filter((()=>!B.a8.isUnavailable(t)))))))).subscribe(O.wW(this._state))),this._subs.add(this._promptOrMenuFocused.pipe(E.b(100),a.h((e=>!e))).subscribe((()=>this._promptMenuActions.next({kind:"close"})))),this._subs.add(this.state.pipe(q.G(),a.h((([e,t])=>i.isNone(e)&&i.isSome(t))),w.U((([e,t])=>t)),S.oA).subscribe((e=>{"actionsStore"===e.kind?this._trackingService.trackActionsOpenStore():"searchResults"===e.kind&&this._trackingService.trackPromptSearch()}))),this._subs.add(this._promptMenuActions.pipe(a.h((e=>"close"===e.kind))).subscribe((()=>this._invalidateActionBricks()))),this._subs.add(e.subscribe((e=>this._handleUIAction(e))))}dispose(){this._subs.unsubscribe()}_handleUIAction(e){switch(e.kind){case B.ix.Kind.mount:return void(this._promptMenuContainer=i.some(e.element));case B.ix.Kind.promptMenuKeyPressArrowDown:return this._onPromptMenuKeyPressArrowDown();case B.ix.Kind.promptMenuKeyPressArrowUp:return this._onPromptMenuKeyPressArrowUp();case B.ix.Kind.promptFieldKeyPressArrowUp:return this._focusLastBrick();case B.ix.Kind.promptFieldKeyPressArrowDown:return this._focusFirstBrick();case B.ix.Kind.promptFieldTextChange:return this._invalidateActionBricks(),this._userTyped.next(e.text);case B.ix.Kind.collapsePromptMenuButtonClick:case B.ix.Kind.promptSubmitButtonClick:return this._promptMenuActions.next({kind:"close"});case B.ix.Kind.promptFieldKeyPressEnter:return void(e.text.trim().length>0&&this._promptMenuActions.next({kind:"close"}));case B.ix.Kind.actionBrickClick:return"allResults"===e.action.kind?this._promptMenuActions.next({kind:"showActionsStore"}):this._promptMenuActions.next({kind:"close"});case B.ix.Kind.promptFieldAndMenuFocusChange:return this._promptOrMenuFocused.next(e.focused);default:return}}_invalidateActionBricks(){this._cachedActionBricks=i.none}_getActionBricks(){return(0,r.zG)(this._cachedActionBricks,i.getOrElse((()=>{const e=(0,r.zG)(this._promptMenuContainer,i.fold((()=>[]),(e=>v.nI(Array.from(e.querySelectorAll(".actionBrick")).filter(d.Re)))));return this._cachedActionBricks=i.some(e),e})))}_onPromptMenuKeyPressArrowDown(){var e;const t=this._getActionBricks(),n=(0,d.vY)((null===(e=i.toNullable(this._promptMenuContainer))||void 0===e?void 0:e.ownerDocument)||document);return(0,r.zG)(i.fromNullable(t.findIndex((e=>e===n))),I.tap((e=>{var n;e+1>=t.length?this._focusPromptField():null===(n=t[e+1])||void 0===n||n.focus()})))}_onPromptMenuKeyPressArrowUp(){var e;const t=this._getActionBricks(),n=(0,d.vY)((null===(e=i.toNullable(this._promptMenuContainer))||void 0===e?void 0:e.ownerDocument)||document);return(0,r.zG)(i.fromNullable(t.findIndex((e=>e===n))),I.tap((e=>{var n;e-1<0?this._focusPromptField():null===(n=t[e-1])||void 0===n||n.focus()})))}_focusFirstBrick(){var e;null===(e=this._getActionBricks()[0])||void 0===e||e.focus()}_focusLastBrick(){var e;const t=this._getActionBricks();null===(e=t[t.length-1])||void 0===e||e.focus()}}var Ve,Me,Le=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n};!function(e){e.create=function(e){const t=new W.xQ,n=new V(Object.assign({assistantUIActions:t},e)),r=new De(t,e.availabilityService,e.sessionService,e.trackingService,(()=>i.isSome(n.state.get().selectedDynamicAction)),(()=>n.focusPromptField())),s=new $(t,n.state.view("activeView")),o=new H({userSurveyService:e.userSurveyService,assistantUIActions:t});return{assistant:n,promptMenu:r,notifications:s,survey:o,actions:t.asObservable(),notify:e=>t.next(e),dispose:()=>{s.dispose(),n.dispose(),o.dispose()}}}}(Ve||(Ve={})),function(e){e.create=function(e){const{positionInfo:t,handlers:n}=e,i=Le(e,["positionInfo","handlers"]),r=Ve.create(Object.assign(Object.assign({},i),{handlers:{close:()=>n.close()}})),s=new p(t,{onFocusChange:e=>n.onFocusChange(e)});return Object.assign(Object.assign({},r),{position:s,dispose:()=>{s.dispose(),r.dispose()}})}}(Me||(Me={}));var Ke=n(90845),$e=n(99094),He=n(31278),Ze=n(56133),We=n(88392);const qe="content",Ye="toolbar",Xe=e=>le.ux.color(oe.BlueGray40).toRGBA().fade(e).toString(),Qe={fontFamily:"Inter, sans-serif",width:le.ux.rem(26.875),borderRadius:le.ux.rem(We.ze),background:"linear-gradient(180deg, #FCFCFC 0%, #FCFCFC 100%)",$nest:{"&[data-dragging='true']":{cursor:"grabbing",$nest:{[`.${qe}`]:{pointerEvents:"none"},[`.${Ye}`]:{pointerEvents:"none"}}}}},Je=Object.assign(Object.assign({},Qe),{boxShadow:`0px 0px 0px 0.5px ${oe.BlueGray40}, 0px 0px 2px 0.5px ${Xe(.5)}, 0px 1px 8px 0.5px ${Xe(.1)}, 0px 2px 12px 0.5px ${Xe(.1)}, 0px 4px 20px 0.5px ${Xe(.25)}`,backdropFilter:`blur(${le.ux.rem(.34375)})`}),et={maxWidth:le.ux.rem(40),minWidth:le.ux.rem(18),width:le.ux.percent(100)},tt={display:"flex",alignItems:"center",justifyContent:"space-between",gap:le.ux.rem(se.x),padding:`${le.ux.rem(se.F2)} ${le.ux.rem(se.x)}`,height:le.ux.rem(2.5),boxSizing:"border-box","app-region":"drag","-webkit-app-region":"drag","--grammarly-app-region":"drag",$nest:{button:{"app-region":"no-drag","-webkit-app-region":"no-drag","--grammarly-app-region":"no-drag"}}},nt={borderBottom:`0.5px solid ${oe.BlueGray10}`},it=le.ux.style(Je),rt=(le.ux.style(Qe),le.ux.style(Je,et)),st=le.ux.style(Qe,et),ot=le.ux.joinClasses([Ye,le.ux.style(tt)]),at=le.ux.joinClasses([Ye,le.ux.style(tt,{cursor:"grab",$nest:{"&:active":{cursor:"grabbing"}}})]),lt=le.ux.style(nt),ct=qe,ut=ie.UI.Grid.make((({slots:e,state:t,notify:n})=>{const{ref:i,onMount:r}=Ke.P.useElWatcher();return ee.createElement(Ze.l.Provider,{value:{portalContainer:i}},ee.createElement($e.f.Context.Provider,{value:$e.f.emptyWithName("cheetahAssistant")},ee.createElement(ne.F.Fragment,null,t.pipe(w.U((t=>"initial"===t.kind||"dragged"===t.kind?ee.createElement(Ze.Q,{placement:t,onFocus:n({kind:"focus",focused:!0}),onBlur:n({kind:"focus",focused:!1}),onMount:e=>{n({kind:"mount",element:e})(),r(e)},onMaxSizeChange:e=>n({kind:"maxSize",maxSize:e})(),"data-grammarly-part":"ideation-assistant","data-dragging":"dragged"===t.kind&&t.dragging,className:it},ee.createElement("header",Object.assign({},(0,te.Sh)(at,t.contentOverflowUnderToolbar?lt:null),{ref:e=>e&&n({kind:"dragHandleMount",element:e})()}),e.toolbar,ee.createElement(re.zx.Tertiary,{onClick:n({kind:B.ix.Kind.toolbarCloseButtonClick}),compact:!0,size:"large",name:"toolbarClose","aria-label":"Close Assistant"},ee.createElement(He.JO.Close,null))),ee.createElement("main",{className:ct},e.content)):"none"===t.kind?null:(0,P.L0)(t)))))))}));var dt=n(38194),mt=n(49143),pt=n(85089),gt=n(83401);function ht(e){return(0,r.ls)(dt.B(),(t=>{return k.T(t.pipe(l.b((t=>function(e,t){switch(e.kind){case"focus":return t.position.onFocusChange(e.focused);case"mount":return t.position.onMount(e.element);case"maxSize":return t.position.onMaxHeightChange(e.maxSize.height);case"dragHandleMount":break;case B.ix.Kind.toolbarCloseButtonClick:return t.notify(e);default:return(0,P.L0)(e)}}(t,e))),mt.l()),t.pipe((n=e.position,(0,r.ls)(w.U((e=>"dragHandleMount"===e.kind?i.some(e.element):i.none)),S.oA,(0,d.uj)(),(s=n,(0,r.ls)(dt.B(),(e=>(0,r.zG)(k.T(e.pipe(a.h((e=>d.E9.l1Distance(d.E9.fromCartesian(e.translate),d.E9.fromCartesian(e.lastTranslate))>=3)),l.b((e=>s.onDrag(e.translate)))),e.pipe(a.h((e=>e.dragEnd)),l.b((()=>s.onDragEnd())))),mt.l())))),mt.l()))),t.pipe(function(e){return(0,r.ls)(w.U((e=>"mount"===e.kind?i.some(e.element):i.none)),S.oA,X.w((e=>pt.YC(e).pipe(J.O(null),w.U((()=>e.getBoundingClientRect()))))),l.b((t=>e.onResize(t))),mt.l())}(e.position)),t.pipe((0,r.ls)(w.U((e=>"mount"===e.kind?i.some(e.element):i.none)),S.oA,w.U(i.some),Ke.P.FocusTrap.dynamicFocusTrap(Ke.P.FocusTrap.InitialFocus.none,ft,xt),mt.l())),Y.aj([e.position.state,e.assistant.state]).pipe(w.U((([e,{contentOverflowUnderToolbar:t,activeView:n}])=>Object.assign(Object.assign({},e),{contentOverflowUnderToolbar:t&&"voiceProfile"!==n&&"feedbackForm"!==n})))));var n,s}))}function ft(e){var t;if(e instanceof HTMLIFrameElement){const n=null===(t=e.contentWindow)||void 0===t?void 0:t.document;if(n){const e=n.body.querySelector("textarea:not([disabled]), input:not([disabled])");e&&"focus"in e&&"function"==typeof e.focus&&e.focus()}}else e.focus()}function xt(e,t){return e instanceof HTMLIFrameElement?e.contentDocument?c.R(e.contentDocument.body,t):gt.C:c.R(e,t)}const vt=ie.UI.Grid.make((({slots:e,state:t,notify:n})=>{const{ref:s,onMount:o}=Ke.P.useElWatcher();return ee.createElement(Ze.l.Provider,{value:{portalContainer:s}},ee.createElement($e.f.Context.Provider,{value:$e.f.emptyWithName("cheetahAssistant")},ee.createElement(ne.F.Fragment,null,t.pipe(w.U((t=>ee.createElement(ne.F.div,Object.assign({},(0,te.Sh)(t.includeBoxShadow?rt:st),{key:"ideation-assistant-container",mount:e=>{(0,r.zG)(i.fromNullable(e),I.tap((e=>{n({kind:"mount",element:e})}))),o(e)}}),ee.createElement(ne.F.header,Object.assign({},(0,te.Sh)(ot,t.contentOverflowUnderToolbar?lt:null)),e.toolbar,ee.createElement(re.zx.Tertiary,{onClick:n({kind:B.ix.Kind.toolbarCloseButtonClick}),compact:!0,size:"large",name:"toolbarClose","aria-label":"Close Assistant"},ee.createElement(He.JO.Close,null))),ee.createElement(ne.F.main,{className:ct},e.content))))))))}));var bt;!function(e){e.empty={includeBoxShadow:!0}}(bt||(bt={}));const yt=ie.UI.Node.make((({view:e})=>ee.createElement(re.Zb,{style:kt},ee.createElement("div",{className:St},ee.createElement(ne.F.img,{src:e("iconUrl"),style:{width:16,height:16}}),ee.createElement(ne.F.span,Object.assign({},(0,d.E)(e("header"))))),ee.createElement(ne.F.div,null,e("hintsHeader")),ee.createElement(ne.F.ul,{className:wt},e("hintsItems").pipe(w.U(v.UI((e=>ee.createElement("li",{key:e},e))))))))),Ct=ie.UI.Union.asOption(yt),kt={fontWeight:400,fontSize:le.ux.rem(.875),lineHeight:le.ux.rem(1.3125)},St=le.ux.style({display:"flex",alignItems:"center",gap:le.ux.rem(se.x),color:ae.XY.Content.Secondary.Default,fontSize:le.ux.rem(.75),lineHeight:le.ux.rem(1.125)}),wt=le.ux.style({padding:`0 0 0 ${le.ux.rem(se.sD+se.yC)}`,margin:0}),_t=ie.UI.Node.make((({view:e,notify:t})=>ee.createElement(re.Zb,null,ee.createElement(ne.F.div,{className:Ot},e("error").pipe(w.U((e=>ee.createElement(ee.Fragment,null,ee.createElement(re.T6,{className:Pt}),ee.createElement("span",{className:At},e.header)))))),ee.createElement(ne.F.div,{className:It},e("error").pipe(w.U((e=>e.text)))),ee.createElement(ne.F.Fragment,null,e("showGotItButton").pipe(w.U((e=>e?ee.createElement(re.zx.Primary,{className:Rt,name:"gotItButton",onClick:t({kind:B.ix.Kind.errorCardOkButtonClick}),size:"small"},"OK"):null))))))),Et=ie.UI.Union.asOption(_t),Ot=le.ux.style({display:"flex",alignItems:"center",gap:le.ux.rem(se.F2)}),At=le.ux.style({fontSize:le.ux.rem(.875),lineHeight:le.ux.rem(1.375),fontWeight:700,color:ae.XY.Content.Primary.Default}),It=le.ux.style({fontSize:le.ux.rem(.75),lineHeight:le.ux.rem(1.125),color:ae.XY.Content.Secondary.Default,whiteSpace:"break-spaces",overflowWrap:"anywhere"}),Pt=le.ux.style(Object.assign({padding:le.ux.rem(se.yC)},d.Es.iconSizeRems(1.125))),Rt=le.ux.style({alignSelf:"flex-start"});var Bt=n(41398);function Ut(e){const t=e.assistant.state.view("session").pipe(w.U((e=>e.error)));return ie.Z.composeOption(function(e,t){const n=e.assistant.state.view("activeView").view((e=>"loadingError"!==e));return ie.Z.fromSideEffect((t=>e.notify(t)),t.pipe(Bt.M(n),w.U((([e,t])=>({error:e,showGotItButton:t})))))}(e,t.pipe(S.oA)),(()=>t))}const Nt=le.ux.keyframes({"0%":{backgroundPositionX:"-300px"},"85%":{backgroundPositionX:"600px"},"100%":{backgroundPositionX:"600px"}}),Tt=le.ux.style({position:"absolute",top:0,left:0,bottom:0,right:0,pointerEvents:"none",mixBlendMode:"overlay",background:"linear-gradient(90deg, rgba(255, 255, 255, 0) 0px, black 120px, black 150px, black 170px, rgba(255, 255, 255, 0) 300px)",backgroundRepeat:"no-repeat",backgroundPositionX:"-300px",backgroundSize:1e3,animationDelay:"300ms",animationDuration:"1.5s",animationName:Nt,animationTimingFunction:"linear",animationIterationCount:"infinite"}),Gt=()=>ee.createElement("div",{className:Tt}),zt=ie.UI.Node.make((({view:e})=>ee.createElement(re.Zb,{"aria-busy":"true"},ee.createElement(re.Ol,null,e("header")),ee.createElement("div",{className:jt},ee.createElement(Gt,null))))),jt=le.ux.style({height:le.ux.rem(.5),borderRadius:le.ux.rem(se.W9),background:oe.BlueGray5,flexGrow:1,maxWidth:le.ux.rem(22.5),position:"relative",marginBottom:le.ux.rem(se.F2)}),Ft=ie.UI.Node.make((({view:e})=>ee.createElement(re.Zb,{style:Mt},ee.createElement(re.Ol,null,e("header")),ee.createElement(ne.F.div,Object.assign({className:Lt},(0,d.E)(e("text"),[...d.ap,"person"])))))),Dt=ie.UI.Union.make("kind",{loading:zt,loaded:Ft}),Vt=ie.UI.Union.asOption(Dt),Mt={gap:le.ux.rem(se.yC)},Lt=le.ux.style({color:ae.XY.Content.Primary.Default,fontStyle:"normal",fontWeight:400,fontSize:le.ux.rem(.75),lineHeight:le.ux.rem(1.125),fontFeatureSettings:"'ss01' on",$nest:{"& person":{color:oe.Blue60,fontWeight:700,$nest:{"&::before":{content:"''",display:"inline-block",width:le.ux.rem(1),height:le.ux.rem(1),backgroundSize:"cover",verticalAlign:"text-bottom",backgroundRepeat:"no-repeat",backgroundPosition:"center",backgroundImage:`url('data:image/svg+xml;utf8,${encodeURIComponent(`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M7.95768 3.00512C8.95983 3.00512 9.7855 3.83575 9.7855 4.8769V6.01259C9.7855 7.05374 8.95983 7.88437 7.95768 7.88437C6.95553 7.88437 6.12986 7.05374 6.12986 6.01259V4.8769C6.12986 3.83575 6.95553 3.00512 7.95768 3.00512ZM10.5847 4.8769C10.5847 3.40916 9.41586 2.20593 7.95768 2.20593C6.4995 2.20593 5.33067 3.40916 5.33067 4.8769V6.01259C5.33067 7.48032 6.4995 8.68355 7.95768 8.68355C8.20909 8.68355 8.45189 8.64779 8.68159 8.58107C8.68635 8.65317 8.69342 8.72016 8.70392 8.78578C8.81061 9.45248 9.17662 10.0499 9.72211 10.4478C9.88673 10.5679 10.0776 10.6652 10.3757 10.8171L11.2702 11.2732C11.6108 11.4469 11.7408 11.5145 11.8477 11.5924C12.2227 11.866 12.4743 12.2767 12.5477 12.7351C12.5589 12.8055 12.5645 12.8807 12.5672 12.995H9.90666C9.68597 12.995 9.50707 13.1739 9.50707 13.3946C9.50707 13.6152 9.68597 13.7941 9.90666 13.7941H12.9694C13.19 13.7941 13.3689 13.6152 13.3689 13.3946L13.369 13.3588C13.369 13.0242 13.369 12.81 13.3368 12.6088C13.2301 11.9421 12.8641 11.3446 12.3186 10.9468C12.154 10.8267 11.9632 10.7294 11.665 10.5775C11.6546 10.5721 11.644 10.5667 11.6332 10.5612L10.7705 10.1214C10.43 9.94773 10.2999 9.88006 10.1931 9.80215C9.81805 9.52861 9.56642 9.11785 9.49307 8.65949C9.4762 8.55408 9.47217 8.43819 9.47124 8.19619C10.1462 7.71137 10.5847 6.9116 10.5847 6.01259V4.8769Z" fill="${oe.Blue60}"/><path fill-rule="evenodd" clip-rule="evenodd" d="M7.91127 3.00512C6.90913 3.00512 6.08346 3.83575 6.08346 4.8769V6.01259C6.08346 7.05374 6.90913 7.88437 7.91127 7.88437C8.91342 7.88437 9.73909 7.05374 9.73909 6.01259V4.8769C9.73909 3.83575 8.91342 3.00512 7.91127 3.00512ZM5.28427 4.8769C5.28427 3.40916 6.45309 2.20593 7.91127 2.20593C9.36946 2.20593 10.5383 3.40916 10.5383 4.8769V6.01259C10.5383 7.48032 9.36946 8.68355 7.91127 8.68355C7.65987 8.68355 7.41706 8.64779 7.18737 8.58107C7.1826 8.65317 7.17553 8.72016 7.16503 8.78578C7.05834 9.45248 6.69233 10.0499 6.14684 10.4478C5.98222 10.5679 5.7914 10.6652 5.49326 10.8171L4.59875 11.2732C4.25818 11.4469 4.12811 11.5145 4.02129 11.5924C3.64626 11.866 3.39463 12.2767 3.32128 12.7351C3.31001 12.8055 3.30447 12.8807 3.30176 12.995H10.2779C10.4986 12.995 10.6775 13.1739 10.6775 13.3946C10.6775 13.6152 10.4986 13.7941 10.2779 13.7941H2.8996C2.67891 13.7941 2.50001 13.6152 2.50001 13.3946L2.5 13.3588C2.49996 13.0242 2.49994 12.81 2.53214 12.6088C2.63883 11.9421 3.00484 11.3446 3.55033 10.9468C3.71494 10.8267 3.90577 10.7294 4.2039 10.5775C4.21438 10.5721 4.22499 10.5667 4.23574 10.5612L5.09841 10.1214C5.43899 9.94773 5.56906 9.88006 5.67588 9.80215C6.0509 9.52861 6.30254 9.11785 6.37589 8.65949C6.39276 8.55408 6.39678 8.43819 6.39771 8.19619C5.72278 7.71137 5.28427 6.9116 5.28427 6.01259V4.8769Z" fill="${oe.Blue60}"/></svg>`)}')`}}}}});function Kt(e){const t=e.state.view("session").view((0,r.ls)(i.fromPredicate((e=>B.z_.Mode.isQuickReply(e.mode))),i.chain((e=>(0,r.zG)("started"===e.kind?(0,r.zG)(e.context.intent,i.map((e=>({kind:"loaded",text:e})))):i.some({kind:"loading"}),i.map((e=>Object.assign(Object.assign({},e),{header:"Sender’s intent"}))))))));return ie.Z.composeOption(ie.Z.composeUnion({loading:()=>t.pipe(S.oA),loaded:()=>t.pipe(w.U(i.chain((e=>"loaded"===e.kind?i.some({text:e.text,header:e.header}):i.none))),S.oA)},(()=>t.pipe(S.oA))),(()=>t))}var $t=n(80544),Ht=n(79692),Zt=n(9223);const Wt=ee.createContext({notifyUnmount:r.Q1}),qt=({style:e})=>ee.createElement("div",{className:le.ux.style(Yt,e)},ee.createElement("div",{className:Xt}),ee.createElement("div",{className:Qt})),Yt={height:le.ux.rem(2),display:"flex",alignItems:"center",gap:le.ux.rem(se.x),padding:`0 ${le.ux.rem(se.x)} 0 ${le.ux.rem(se.F2)}`,borderRadius:le.ux.rem(se.F2),border:`1px solid ${oe.BlueGray5}`,boxSizing:"border-box"},Xt=le.ux.style({width:le.ux.rem(1.5),height:le.ux.rem(1.5),borderRadius:le.ux.rem(1.5),background:oe.BlueGray5}),Qt=le.ux.style({height:le.ux.rem(.5),borderRadius:le.ux.rem(se.W9),background:oe.BlueGray5,flexGrow:1}),Jt=ie.UI.Node.make((({view:e})=>ee.createElement(re.Zb,{"aria-busy":"true"},ee.createElement(re.Ol,null,e("header")),ee.createElement(ne.F.div,{className:en},ee.createElement(Gt,null),e("isQuickReply").pipe(w.U((0,A.RN)(ee.createElement(ee.Fragment,null,ee.createElement(qt,{style:{width:le.ux.rem(23)}}),ee.createElement(qt,{style:{width:le.ux.rem(21.5)}}),ee.createElement(qt,{style:{width:le.ux.rem(20.5)}})),ee.createElement(ee.Fragment,null,ee.createElement(qt,{style:{width:le.ux.rem(8.375)}}),ee.createElement(qt,{style:{width:le.ux.rem(9.3125)}}),ee.createElement(qt,{style:{width:le.ux.rem(10.5)}}),ee.createElement(qt,{style:{width:le.ux.rem(10.75)}}),ee.createElement(qt,{style:{width:le.ux.rem(4.9375)}}))))))))),en=le.ux.style({display:"flex",flexWrap:"wrap",gap:le.ux.rem(se.x),position:"relative"}),tn=ie.UI.Knot.make(ie.UI.Grid.make((({slots:e,notify:t,state:n})=>{const{ref:i,onMount:r}=Ke.P.useElWatcher(),{notifyUnmount:s}=ee.useContext(Wt),o=ee.useMemo((()=>i.pipe($t.QV(Ht.E),S.oA,l.b((e=>t({kind:B.ix.Kind.mount,name:B.ec.initialActionsList,element:e})())),Zt.x((()=>s({kind:B.ix.Kind.unmount,name:B.ec.initialActionsList}))))),[i]);return Ke.P.useSubscriptionTo(o),ee.createElement(re.Zb,{style:rn,ref:r},ee.createElement(ne.F.Fragment,null,n.pipe(w.U((({isQuickReply:e})=>e?ee.createElement(re.PG,{reportMenuButtonClassName:sn,onClickProvideFeedback:t({kind:B.ix.Kind.openFeedbackFormButtonClick,source:B.x2.Source.quickReplyInitialActions}),onClickReportOffensive:t({kind:B.ix.Kind.reportOffensiveActionsButtonClick}),onOpenChange:e=>t({kind:B.ix.Kind.reportMenuVisibilityChange,trigger:j.uiItem(B.ec.initialActionsList),visible:e})()}):null))),e.actions))})),{actions:ze}),nn=ie.UI.Union.make("kind",{none:ie.UI.Node.empty,loading:Jt,loaded:tn}),rn={position:"relative",padding:`${le.ux.rem(se.F2)} ${le.ux.rem(se.qp)}`},sn=le.ux.style({position:"absolute",top:le.ux.rem(se.qp),right:le.ux.rem(se.qp)});function on(e){const t=e.assistant.state.view("session").view((e=>e.selectedText)),n=e.assistant.state.view("session").view((e=>B.z_.Mode.isQuickReply(e.mode))),s=u.h.combine(t,n,((e,t)=>t?"Ways to reply":i.isSome(e)?`Your text: "${e.value}"`:"Ideas for you")),o=u.h.combine(e.assistant.state.view("contextualActions"),s,n,((e,t,n)=>(0,r.zG)(e,i.map(y.UI(z.BackendAction.make)),i.map((e=>y.of({group:t,actions:n?e:Re()(e)}))))));return ie.Z.composeUnion({none:()=>Q.of(null),loading:()=>u.h.combine(s,n,((e,t)=>({header:e,isQuickReply:t}))),loaded:an(e,o,n)},(()=>u.h.combine(o,e.assistant.state.view("session"),((e,t)=>i.isSome(e)?{kind:"loaded"}:"started"===t.kind?{kind:"none"}:{kind:"loading"}))))}function an(e,t,n){return ie.Z.composeKnot({root:ie.Z.fromSideEffect((t=>e.notify(t)),n.view((e=>({isQuickReply:e})))),actions:Fe(e,t.pipe(S.oA))})}const ln=ie.UI.Node.make((({notify:e})=>ee.createElement(re.Zb,{style:dn},ee.createElement("div",{className:mn},"Set your voice"),ee.createElement("div",{className:pn},"Choose how you want your generated text to sound."),ee.createElement(re.zx.Primary,{className:hn,onClick:e({kind:B.ix.Kind.setVoiceButtonClick}),name:"bannerVoiceProfile",size:"small"},ee.createElement(re.uA,{className:gn}),"Set voice")))),cn=ie.UI.Union.asOption(ln),un="setVoiceBtn",dn={gap:0,backgroundColor:"#D8F2EC",backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"right",backgroundImage:"url('https://d201kpdrh73vuz.cloudfront.net/text-generation/voice-banner.png')"},mn=le.ux.style({fontWeight:700,fontSize:le.ux.rem(.875),lineHeight:le.ux.rem(1.375),color:ae.XY.Content.Primary.Default}),pn=le.ux.style({fontWeight:400,fontSize:le.ux.rem(.75),lineHeight:le.ux.rem(1.125),color:ae.XY.Content.Secondary.Default}),gn=le.ux.style({stroke:"white"}),hn=le.ux.joinClasses([un,le.ux.style(d.Es.buttonOverrideSpecificity({alignSelf:"flex-start",marginTop:le.ux.rem(se.x),padding:`0 ${le.ux.rem(se.x)} 0 ${le.ux.rem(se.F2)}`,lineHeight:le.ux.rem(1.125),gap:le.ux.rem(se.F2),$nest:{"& > i":Object.assign({marginLeft:0},d.Es.iconSizeRems(1.5))}},un))]);function fn(e){const t=e.assistant.state.view("session").view((0,r.ls)(B.z_.toStarted,i.fold(r.jv,(e=>e.voiceProfile.needsSetup))));return ie.Z.composeOption(ie.Z.fromSideEffect((t=>e.notify(t)),null),(()=>t.view((e=>e?i.some(null):i.none))))}const xn=ie.UI.Grid.make((({slots:e})=>ee.createElement("div",{className:bn},e.voiceBanner,e.intent,e.actions))),vn=ie.UI.Knot.make(xn,{voiceBanner:cn,intent:Vt,actions:nn}),bn=le.ux.style({display:"flex",flexDirection:"column",gap:le.ux.rem(se.x)});function yn(e){return ie.Z.composeKnot({voiceBanner:fn(e),intent:Kt(e.assistant),actions:on(e)})}var Cn=n(60135);const kn="primaryBtn",Sn="rephraseBtn",wn="dismissBtn",_n="reportBtn",En=({isActive:e,id:t,children:n,onHovered:i,onFocused:r})=>{const s=ee.useRef(null);return ee.createElement(re.Zb,{ref:s,style:An,"data-active":e,"data-id":t,onMouseEnter:()=>null==i?void 0:i(!0),onMouseLeave:()=>null==i?void 0:i(!1),onFocus:()=>{var e;return null==r?void 0:r((null===(e=s.current)||void 0===e?void 0:e.contains((0,d.vY)(document)))||!1)},onBlur:()=>{var e;return null==r?void 0:r((null===(e=s.current)||void 0===e?void 0:e.contains((0,d.vY)(document)))||!1)}},n)},On={backgroundColor:ae.XY.Surface.Primary.Default,$nest:{[`& .${wn}, & .${_n}`]:{opacity:1,pointerEvents:"auto"},[`& ${d.Es.repeatClassSelector(kn,d.Es.cheetahButtonContentOverrideSpecificity)}`]:{color:ae.XY.Surface.Primary.Default,backgroundColor:d.BO.BrandGreen60,border:"1px solid transparent"}}},An={backgroundColor:"transparent",$nest:{"&:not(:last-of-type)":{borderBottom:`0.5px solid ${oe.BlueGray10}`},[`& ${d.Es.repeatClassSelector(kn,d.Es.cheetahButtonContentOverrideSpecificity)}`]:{lineHeight:le.ux.rem(1.125),backgroundColor:ae.XY.Surface.Primary.Default,color:ae.XY.Content.Secondary.Default,border:`1px solid ${oe.BlueGray5}`,boxSizing:"border-box"},[`& ${d.Es.repeatClassSelector(Sn,d.Es.cheetahButtonContentOverrideSpecificity)}`]:{lineHeight:le.ux.rem(1.5)},[`& .${wn}, & .${_n}`]:{opacity:0,pointerEvents:"none",justifyContent:"center"},"&:focus, &:hover":Object.assign({},On),"&[data-active='true']":Object.assign({},On)}},In=({header:e,footer:t,isActive:n,resultId:i,onHovered:r,onFocused:s,body:o})=>ee.createElement(En,{id:i,isActive:n,onHovered:r,onFocused:s},e,o,t),Pn=({onInsert:e,onRephrase:t,onDismiss:n,onProvideFeedback:i,onReportOffensive:r,onReportMenuVisibilityChange:s,disabled:o})=>ee.createElement("div",{className:Bn},ee.createElement("div",{className:Nn},ee.createElement(re.zx.Primary,{className:jn,name:"insertResult",onClick:e,size:"small"},"Insert"),ee.createElement(re.zx.Tertiary,{className:Fn,name:"rephraseResult",onClick:t,disabled:o,size:"small"},"Rephrase")),ee.createElement("div",{className:Tn},ee.createElement(re.zx.Tertiary,{onClick:n,className:Gn,compact:!0,size:"small",name:"dismissResult",title:"Delete"},ee.createElement(re.L3,{className:Dn})),ee.createElement(re.PG,{reportMenuButtonClassName:zn,onClickProvideFeedback:i,onClickReportOffensive:r,onOpenChange:s}))),Rn="ignoreIcon",Bn=le.ux.style({gap:le.ux.rem(se.x),display:"flex",alignItems:"center",justifyContent:"space-between"}),Un={display:"flex",alignItems:"center",gap:le.ux.rem(se.x)},Nn=le.ux.style(Un),Tn=le.ux.style(Un),Gn=wn,zn=_n,jn=kn,Fn=Sn,Dn=le.ux.joinClasses([Rn,le.ux.style(d.Es.buttonOverrideSpecificity(d.Es.iconSizeRems(1.5),Rn))]),Vn=({header:e,onClick:t,disabled:n})=>ee.createElement(re.zx.Tertiary,{compact:!0,disabled:n,onClick:t,className:Wn,name:"editResultPrompt",size:"small"},ee.createElement("div",{className:qn},ee.createElement("div",Object.assign({className:Qn},(0,d.E)(e))),ee.createElement("div",{className:Hn},"Edit"))),Mn=({iconUrl:e,loading:t,header:n})=>ee.createElement("div",{className:Zn},t?ee.createElement(re.Ho,{className:Xn}):(0,r.zG)(e,i.fold(r.gn,(e=>ee.createElement("img",{src:e,style:{width:le.ux.rem(1.25),height:le.ux.rem(1.25)}})))),ee.createElement("span",Object.assign({className:Qn},(0,d.E)(n)))),Ln="editHeaderBtn",Kn="headerBtn",$n=d.Es.buttonOverrideSpecificity({height:le.ux.rem(1.5),lineHeight:le.ux.rem(1.125),padding:`0 ${le.ux.rem(se.F2)}`,margin:`0 ${le.ux.rem(-se.F2)}`,overflow:"hidden",$nest:{[`& .${Ln}`]:{opacity:0,pointerEvents:"none"},"&:focus, &:hover":{background:oe.BlueGray0,[`& .${Ln}`]:{opacity:1,pointerEvents:"auto",color:ae.XY.Content.Primary.Default}}}},Kn),Hn=Ln,Zn=le.ux.style({display:"flex",alignItems:"center",gap:le.ux.rem(se.x+se.yC),height:le.ux.rem(1.5),fontWeight:400,fontSize:le.ux.rem(.75),lineHeight:le.ux.rem(1.125),color:oe.BlueGray60,overflow:"hidden"}),Wn=le.ux.joinClasses([Kn,le.ux.style($n)]),qn=le.ux.style({display:"flex",justifyContent:"space-between",width:"100%",gap:le.ux.rem(se.F2)}),Yn=le.ux.keyframes({from:{transform:"rotate(0deg)"},to:{transform:"rotate(360deg)"}}),Xn=le.ux.style({marginBottom:`-${le.ux.rem(se.yC)}`,display:"inline-flex",alignItems:"center",justifyContent:"center",animation:`${Yn} 1s linear infinite`,width:le.ux.rem(1),height:le.ux.rem(1),minWidth:le.ux.rem(1),minHeight:le.ux.rem(1)}),Qn=le.ux.style({overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",textAlign:"left"});var Jn=n(18208),ei=n(65223),ti=n(37360);const ni=({title:e,url:t,contextText:n})=>{const s=ee.useRef(null),o=(0,ti.KL)(s,e),a=(0,r.zG)(n,i.getOrElse((()=>o)));return(0,r.zG)(t,i.fold((()=>ee.createElement(si,{tooltip:a},ee.createElement("span",{className:ii,ref:s},e))),(t=>ee.createElement(si,{tooltip:a},ee.createElement("div",{className:ri},ee.createElement(re.dL,{href:t,className:ii,ref:s},e))))))},ii=le.ux.style({display:"inline-block",overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",textAlign:"left",maxWidth:"100%",$nest:{"&:visited":{color:"inherit"}}}),ri=le.ux.style({display:"flex",alignItems:"center",width:"100%",overflow:"hidden"}),si=({children:e,tooltip:t})=>t?ee.createElement(ei.u,{align:"topCenter",title:ee.createElement(oi,{text:t})},e):ee.createElement(ee.Fragment,null,e),oi=({text:e})=>e?ee.createElement("div",{className:ai},e.length>1e3?e.slice(0,1e3).trim()+"...":e):null,ai=le.ux.style({maxWidth:le.ux.rem(80*se.F2),overflowWrap:"normal",whiteSpace:"normal",textAlign:"left"}),li=({title:e,titleId:t,desc:n,descId:i,...r})=>ee.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",stroke:"transparent","aria-labelledby":t,"aria-describedby":i,...r},n?ee.createElement("desc",{id:i},n):null,e?ee.createElement("title",{id:t},e):null,ee.createElement("path",{d:"M12 10.5a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3Zm5 0a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3Zm-10 0a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3Z",fill:"#646B81"})),ci=({title:e,titleId:t,desc:n,descId:i,...r})=>ee.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",stroke:"transparent","aria-labelledby":t,"aria-describedby":i,...r},n?ee.createElement("desc",{id:i},n):null,e?ee.createElement("title",{id:t},e):null,ee.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.194 7.5H7.5v-1H11V10h-1V8.18a4.926 4.926 0 0 0-2.5 4.32 5.002 5.002 0 0 0 3.214 4.672l-.357.934A6.002 6.002 0 0 1 6.5 12.5a5.925 5.925 0 0 1 2.694-5Zm8.306 5c0-2.128-1.33-3.92-3.214-4.64l.357-.934c2.251.86 3.857 3.011 3.857 5.574a5.988 5.988 0 0 1-2.655 5H17.5v1H14V15h1v1.848a4.985 4.985 0 0 0 2.5-4.348Z",fill:"#646B81"}));var ui=n(93002);const di=({onRegenerateWithoutReference:e})=>ee.createElement(re.h_,{name:"referenceMenu",title:"Reference menu","aria-label":"Reference menu",label:ee.createElement(li,null),theme:{button:mi},onAction:t=>{if("regenerateWithoutReference"===t)return e()}},ee.createElement(ui.v.Item,{key:"regenerateWithoutReference",textValue:"regenerateWithoutReference"},ee.createElement(ci,{className:pi}),"Regenerate without this reference")),mi=le.ux.joinClasses([le.ux.style({marginLeft:"auto"}),(0,re.P_)({type:"tertiary",compact:!0,size:"small"})]),pi=le.ux.style({marginRight:le.ux.rem(se.x)}),gi=({className:e,isOpen:t,references:n,onOpenChange:i,onRegenerateWithoutReference:r})=>ee.createElement("div",{className:e},n.length>0?ee.createElement(ee.Fragment,null,ee.createElement(re.zx.Tertiary,{style:hi,onClick:()=>i(!t),name:"collapseReferencesList",size:"small"},ee.createElement("span",{className:xi},n.length," ",Jn.pluralize(n.length,"reference","references")),t?ee.createElement(He.JO.Arrow,{direction:He.n4.up}):ee.createElement(He.JO.Arrow,{direction:He.n4.down})),ee.createElement("ul",{className:bi,hidden:!t,"aria-hidden":!t},n.map((({id:e,title:t,iconUrl:n,url:i,contextText:s},o)=>ee.createElement("li",{key:o,className:yi},ee.createElement("img",{src:n,className:Ci,alt:""}),ee.createElement(ni,{title:t,url:i,contextText:s}),ee.createElement(di,{onRegenerateWithoutReference:()=>r(e)})))))):ee.createElement("span",{className:vi},"0 references")),hi={base:{width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between",paddingLeft:le.ux.rem(se.F2),paddingRight:0}},fi={fontSize:le.ux.rem(se.qp),lineHeight:le.ux.rem(se.mh+se.yC),color:ae.XY.Content.Secondary.Default,userSelect:"none"},xi=le.ux.style(fi),vi=le.ux.style(Object.assign(Object.assign({},fi),{paddingLeft:le.ux.rem(se.F2),display:"flex",alignItems:"center",height:le.ux.rem(1.5)})),bi=le.ux.style({fontSize:le.ux.rem(se.qp),lineHeight:le.ux.rem(se.mh+se.yC),color:ae.XY.Content.Primary.Default,margin:0,padding:0}),yi=le.ux.style({height:le.ux.rem(se.sD),display:"flex",alignItems:"center",borderRadius:le.ux.rem(We.xB)}),Ci=le.ux.style({minWidth:le.ux.rem(se.mh),height:le.ux.rem(se.mh),marginRight:le.ux.rem(se.x)}),ki=({title:e,titleId:t,desc:n,descId:i,...r})=>ee.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",stroke:"transparent","aria-labelledby":t,"aria-describedby":i,...r},n?ee.createElement("desc",{id:i},n):null,e?ee.createElement("title",{id:t},e):null,ee.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M19.784 6.21a.727.727 0 0 1 .006 1.029L9.203 17.943 4.21 12.895a.727.727 0 1 1 1.034-1.023l3.959 4.003 9.553-9.66a.727.727 0 0 1 1.028-.005Z",fill:"#646B81"})),Si=({className:e,title:t,description:n})=>ee.createElement("div",{className:le.ux.joinClasses([wi,e])},ee.createElement("div",{className:_i},ee.createElement("span",{className:Ii},t)),ee.createElement("ul",{className:Ei},n.map(((e,t)=>ee.createElement("li",{className:Oi,key:t},ee.createElement(ki,{className:Ai}),ee.createElement("span",{className:Pi},e)))))),wi=le.ux.style({display:"flex",flexDirection:"column"}),_i=le.ux.style({display:"flex"}),Ei=le.ux.style({display:"flex",flexDirection:"column",listStyle:"none",margin:0,padding:0,$nest:{"& li":{marginTop:le.ux.rem(se.F2)}}}),Oi=le.ux.style({display:"flex",alignItems:"center"}),Ai=le.ux.style({marginRight:le.ux.rem(se.x),width:le.ux.rem(se.mh),maxHeight:le.ux.rem(se.mh+se.yC),$nest:{"& path:first-of-type":{fill:oe.Green60}}}),Ii=le.ux.style({fontSize:le.ux.rem(se.qp),lineHeight:le.ux.rem(se.mh+se.yC),fontWeight:700,color:ae.XY.Content.Secondary.Default}),Pi=le.ux.style({fontSize:le.ux.rem(se.qp),lineHeight:le.ux.rem(se.mh+se.yC),color:ae.XY.Content.Secondary.Default,flex:1}),Ri=({isMyVoice:e,onClick:t})=>ee.createElement(re.zx.Tertiary,{name:"toggleVoice",onClick:t,size:"small",compact:!0,style:Bi(e)},ee.createElement(re.qn,null),e?"My voice":"Generic");function Bi(e){return{base:{display:"flex",alignItems:"center",height:le.ux.rem(1.25),lineHeight:le.ux.rem(1.125),color:e?oe.Green80:oe.BlueGray60,backgroundColor:e?oe.Green0:oe.BlueGray0,padding:`0 ${le.ux.rem(se.F2)}`},icon:{marginRight:le.ux.rem(se.x),minWidth:le.ux.rem(1),minHeight:le.ux.rem(1),$nest:{"& svg":{fill:e?oe.Green60:oe.BlueGray60}}},hovered:{backgroundColor:e?le.ux.color(d.BO.Green10).mix(le.ux.color(d.BO.BlueGray5)).toRGBA().toString():oe.BlueGray10,color:e?oe.Green80:oe.BlueGray60},active:{backgroundColor:e?le.ux.color(d.BO.Green10).mix(le.ux.color(d.BO.BlueGray5)).toRGBA().toString():oe.BlueGray10,color:e?oe.Green80:oe.BlueGray60}}}var Ui=n(36991);const Ni=le.ux.style({whiteSpace:"break-spaces",overflowWrap:"anywhere",fontStyle:"normal",fontWeight:"normal",fontSize:le.ux.rem(.875),fontFeatureSettings:"'ss03' on",lineHeight:le.ux.rem(1.3125),color:ae.XY.Content.Primary.Default}),Ti=({children:e})=>ee.createElement("div",{className:Ni},e);var Gi;!function(e){e.generatedText="generatedText",e.knowledgeHubTerm="knowledgeHubTerm",e.none="none"}(Gi||(Gi={}));const zi=({delta:e})=>ee.createElement(Ti,null,e.map(((e,t)=>{if(!Ui.s.isInsert(e))return null;switch(Fi(e.attributes)){case Gi.generatedText:return ee.createElement(Di,{key:t},e.insert);case Gi.knowledgeHubTerm:return ee.createElement(Vi,{key:t},e.insert);default:return ee.createElement(Mi,{key:t},e.insert)}})));var ji;!function(e){e.generatedText="generatedText",e.knowledgeHubTerm="knowledgeHubTerm"}(ji||(ji={}));const Fi=e=>{switch(!0){case null==e?void 0:e[ji.knowledgeHubTerm]:return Gi.knowledgeHubTerm;case null==e?void 0:e[ji.generatedText]:return Gi.generatedText;default:return Gi.none}},Di=({children:e})=>ee.createElement("span",{className:Li},e),Vi=({children:e})=>ee.createElement(ei.u,{title:"from Knowledge Share"},ee.createElement("span",{className:Ki},e)),Mi=({children:e})=>ee.createElement("span",null,e),Li=le.ux.style({backgroundColor:oe.Green0,borderRadius:le.ux.rem(We.fe)}),Ki=le.ux.style({backgroundColor:oe.Blue0,borderRadius:le.ux.rem(We.fe)}),$i=({text:e})=>""!==e.trim()?ee.createElement(Ti,null,e):null,Hi=ie.UI.Node.make((({state:e})=>ee.createElement(ne.F.Fragment,null,e.pipe(w.U((({result:e})=>ee.createElement(In,{resultId:"in-progress",body:ee.createElement($i,{text:e.text}),header:ee.createElement(Mn,{header:"Working on it...",iconUrl:i.none,loading:!0}),isActive:!0}))))))),Zi=ie.UI.Union.asOption(Hi);function Wi(e){const t=e.state.view("session").view(B.z_.toStarted).view((0,r.ls)(i.chain((e=>e.inProgressResult)),i.map((e=>({result:e})))));return ie.Z.composeOption((()=>t.pipe(S.oA)),(()=>t))}const qi=ie.UI.Grid.make((({slots:e,state:t,notify:n})=>ee.createElement(ne.F.Fragment,null,t.pipe(w.U((({result:t,disabled:s,isActive:o,isReferencesOpen:a,isMyVoice:l})=>ee.createElement(In,{resultId:t.id,body:ee.createElement(zi,{delta:(0,r.zG)(t.delta,h.fold(r.yR,(e=>l?e.userVoice:e.genericVoice)))}),header:e.header,footer:ee.createElement(ee.Fragment,null,(0,r.zG)(t.changesSummary,i.map((e=>ee.createElement(ee.Fragment,null,ee.createElement(re.Z0,{className:Yi}),ee.createElement(Si,{title:e.title,description:e.description,className:Xi})))),i.toNullable),ee.createElement(Pn,{onRephrase:n({kind:B.ix.Kind.resultCardRephraseButtonClick,result:t}),onInsert:n({kind:B.ix.Kind.resultCardInsertButtonClick,result:t}),onDismiss:n({kind:B.ix.Kind.resultCardDismissButtonClick,result:t}),onProvideFeedback:n({kind:B.ix.Kind.openFeedbackFormButtonClick,source:B.x2.Source.resultCard}),onReportOffensive:n({kind:B.ix.Kind.reportOffensiveResultButtonClick,result:t}),onReportMenuVisibilityChange:e=>n({kind:B.ix.Kind.reportMenuVisibilityChange,trigger:j.card(t.id),visible:e})(),disabled:s}),(0,r.zG)(t.references,i.map((e=>ee.createElement(gi,{className:Qi,isOpen:a,references:e,onOpenChange:e=>n({kind:B.ix.Kind.referencesVisibilityChange,visible:e,resultId:t.id})(),onRegenerateWithoutReference:e=>n({kind:B.ix.Kind.regenerateWithoutReferenceButtonClick,result:t,referenceId:e})()}))),i.toNullable)),isActive:o,onHovered:e=>n({kind:B.ix.Kind.resultCardHoverChange,hovered:e,resultId:t.id})(),onFocused:e=>n({kind:B.ix.Kind.resultCardFocusChange,focused:e,resultId:t.id})()})))),e.survey))),Yi=le.ux.style({margin:`${le.ux.rem(se.F2)} 0`}),Xi=le.ux.style({marginBottom:le.ux.rem(se.F2)}),Qi=le.ux.style({marginTop:le.ux.rem(se.x)});var Ji,er=n(17343);!function(e){e.searchLabel="searchLabel",e.clickableSearchLabel="clickableSearchLabel",e.knowledgeHub="knowledgeHub"}(Ji||(Ji={}));const tr=ie.UI.Union.asOption(ie.UI.Node.make((({notify:e,state:t})=>ee.createElement(ne.F.Fragment,null,t.pipe(w.U((t=>ee.createElement(Ri,{key:"voiceButton",isMyVoice:"user"===t.selectedVoice,onClick:e({kind:B.ix.Kind.resultCardToggleGenericVoiceButtonClick,resultId:t.resultId,voice:t.selectedVoice})})))))))),nr=ie.UI.Knot.make(ie.UI.Grid.make((({slots:e,notify:t,state:n})=>ee.createElement(ne.F.div,{className:ir},n.pipe(w.U((e=>{switch(e.kind){case Ji.clickableSearchLabel:return ee.createElement(Vn,{header:e.label,disabled:e.disabled,onClick:t({kind:B.ix.Kind.resultCardHeaderClick,prompt:e.copiablePrompt})});case Ji.searchLabel:return ee.createElement(Mn,{header:e.label,iconUrl:e.iconUrl,loading:!1});case Ji.knowledgeHub:return ee.createElement(Mn,{header:"Knowledge Share content was used.",iconUrl:i.none,loading:!1});default:return(0,P.L0)(e)}}))),e.voiceButton))),{voiceButton:tr}),ir=le.ux.style({display:"grid",gridTemplateColumns:"1fr auto",gap:le.ux.rem(se.x)});function rr(e,t,n){return ie.Z.composeKnot({root:ie.Z.fromSideEffect((t=>e.notify(t)),e.assistant.state.view((({availability:e,activeCards:i,session:s,referencesVisibility:o,overrideCardVoice:a})=>{var l,c;return{disabled:B.a8.isUnavailable(e),result:t,isActive:(0,r.zG)(!!i.has(t.id)||0===i.size&&n&&!sr(B.z_.toStarted(s))),isReferencesOpen:null!==(l=o.get(t.id))&&void 0!==l&&l,isMyVoice:"user"===(null!==(c=a.get(t.id))&&void 0!==c?c:(0,r.zG)(t.delta,h.fold((()=>"generic"),(e=>e.preferVoice))))}}))),survey:ie.Z.composeOption(ie.Z.fromSideEffect((t=>e.notify(t)),e.survey.state.pipe(w.U((e=>(0,r.zG)(e.activeSurvey,i.map((t=>({survey:t,state:e})))))),S.oA,w.U((({survey:e,state:t})=>({survey:e,stage:t.stage,transitionStage:t.transitionStage,rating:t.rating,openAnswer:(0,r.zG)(t.openAnswer,i.getOrElse((0,r.a9)(""))),ratingLabels:(0,r.zG)(t.activeSurvey,i.fold((0,r.a9)([]),(e=>e.ratingLabels))),errors:t.errors}))))),(()=>e.survey.state.view().pipe(w.U((({activeSurvey:e,stage:n})=>(0,r.zG)(e,i.filter((e=>e.resultId===t.id&&n!==B.Bs.Stage.Type.Closed)))))))),header:ie.Z.composeKnot({root:ie.Z.fromSideEffect((t=>e.notify(t)),e.assistant.state.pipe(X.w((e=>{const n=(0,r.zG)(t.header.copiablePrompt,i.fold((()=>({kind:Ji.searchLabel,label:t.header.label,iconUrl:t.header.iconUrl})),(n=>({kind:Ji.clickableSearchLabel,label:t.header.label,disabled:B.a8.isUnavailable(e.availability),copiablePrompt:n}))));return function(e){return(0,r.zG)(e.delta,h.fold(r.yR,(e=>e.genericVoice)),(e=>e.ops.some((e=>{var t;return Ui.s.isInsert(e)&&!!(null===(t=e.attributes)||void 0===t?void 0:t[ji.knowledgeHubTerm])}))))}(t)&&t.timestamp+3e3>Date.now()?L.H(t.timestamp+3e3-Date.now()).pipe(er.h(n),J.O({kind:Ji.knowledgeHub})):Q.of(n)})))),voiceButton:ie.Z.composeOption(ie.Z.fromSideEffect((t=>e.notify(t)),e.assistant.state.pipe(w.U((e=>{var n;return{selectedVoice:null!==(n=e.overrideCardVoice.get(t.id))&&void 0!==n?n:(0,r.zG)(t.delta,h.fold((()=>"generic"),(e=>e.preferVoice))),resultId:t.id}})))),(()=>Q.of((0,r.zG)(t.delta,i.fromEither))))})})}function sr(e){return(0,r.zG)(e,i.fold(r.jv,(e=>i.isSome(e.inProgressResult)||i.isSome(e.error))))}const or=({placeholder:e,error:t,openAnswer:n,onOpenAnswerChange:s,onComplete:o,onCancel:a})=>{const l=ee.useRef(null);return ee.createElement("form",{className:lr,ref:l,onSubmit:e=>{e.preventDefault(),o(n)}},ee.createElement(re.b,{className:mr,placeholder:[null!=e?e:""],text:n,onChange:s,ariaLabel:"Open ended answer",fitContentHeight:!0,theme:{fontSize:le.ux.rem(.75),lineHeight:le.ux.rem(1.125)},onKeyDownShiftEnter:()=>{var e;return null===(e=l.current)||void 0===e?void 0:e.requestSubmit()}}),(0,r.zG)(t,i.fold((()=>null),(e=>ee.createElement("div",{className:pr},e)))),ee.createElement("div",{className:ar},ee.createElement("input",{type:"submit",value:"Submit",hidden:!0}),ee.createElement(re.zx.Secondary,{style:{base:Object.assign(Object.assign({},cr),ur),hovered:dr},onClick:()=>{var e;return null===(e=l.current)||void 0===e?void 0:e.requestSubmit()}},"Submit"),ee.createElement(re.zx.Tertiary,{style:{base:cr},onClick:a},"Dismiss")))},ar=le.ux.style({display:"flex",justifyContent:"flex-start",alignItems:"center"}),lr=le.ux.style({width:le.ux.percent(100)}),cr={minHeight:le.ux.rem(se.sD),lineHeight:le.ux.rem(se.sD)},ur={color:ae.C$.Engagement.Primary.Default,fontWeight:"bold",boxShadow:`inset 0 0 0 1px ${ae.C$.Engagement.Primary.Default}`,marginRight:le.ux.rem(se.x)},dr={color:ae.XY.Surface.Primary.Default,backgroundColor:ae.C$.Engagement.Primary.Default},mr=le.ux.style({border:`1px solid ${oe.BlueGray10}`,minHeight:le.ux.rem(7.5*se.F2),backgroundColor:oe.White,borderRadius:le.ux.rem(se.x),width:le.ux.percent(100),padding:`${le.ux.rem(1.25*se.F2)} ${le.ux.rem(se.x)}`,boxSizing:"border-box"}),pr=le.ux.style({color:ae.vU.DangerAndDeletion.Primary.Default,fontSize:le.ux.rem(.75),marginBottom:le.ux.rem(se.F2)});var gr=n(77678),hr=n(56377);const fr=({rating:e,ratingLabels:t,maxScore:n})=>(0,r.zG)(e,i.fold((()=>t.length>=n&&n>1?ee.createElement("div",{className:br},ee.createElement("span",{className:vr},t[0]),ee.createElement("span",{className:vr},t[n-1])):null),(e=>e-1>=0&&t.length>=e?ee.createElement("div",{className:xr},ee.createElement("span",null,t[e-1])):null))),xr=le.ux.style({display:"flex",justifyContent:"center",alignItems:"center",width:"100%",fontWeight:"bold",fontSize:le.ux.rem(.75),lineHeight:le.ux.rem(.875)}),vr=le.ux.style({color:oe.NeutralGray50}),br=le.ux.style({display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%",fontSize:le.ux.rem(.75),lineHeight:le.ux.rem(.875)});var yr=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n};const Cr=({disabled:e,rating:t,ratingLabels:n,maxScore:s,onSelectionChange:o})=>{const[a,l]=ee.useState(i.none),c=ee.useMemo((()=>[]),[]),u=t=>{e||o(t+1)},d=t=>{e||l(i.some(t+1))},m=()=>{e||l(i.none)};return ee.createElement("div",{role:"slider","aria-valuemin":0,"aria-valuenow":(0,r.zG)(t,i.getOrElse((()=>0))),"aria-valuemax":5,"aria-valuetext":(0,r.zG)(t,i.fold((()=>"Not yet rated"),(e=>n[e-1])))},Array.from({length:s}).map(((o,l)=>ee.createElement(kr,{key:l,onClick:()=>u(l),isFilled:(0,r.zG)(t,i.fold((()=>!1),(e=>l<e)))||(0,r.zG)(a,i.fold((()=>!1),(e=>l<e))),onMouseEnter:()=>d(l),onMouseLeave:m,onFocus:()=>d(l),onBlur:m,isSelected:(0,r.zG)(t,i.fold((()=>!1),(e=>l+1===e))),isFocusable:(0,r.zG)(t,i.fold((()=>0===l),(e=>l+1===e))),ariaLabel:`Rate this generated output as ${n[l]}`,ref:e=>c.push(e),onKeyDown:t=>((t,n)=>{var o,l,d,m;e||("ArrowRight"!==t.key&&"ArrowUp"!==t.key||((0,r.zG)(a,i.fold((()=>!1),(e=>e<s)))?null===(o=c[n+1])||void 0===o||o.focus():null===(l=c[0])||void 0===l||l.focus()),"ArrowLeft"!==t.key&&"ArrowDown"!==t.key||((0,r.zG)(a,i.fold((()=>!1),(e=>e>1)))?null===(d=c[n-1])||void 0===d||d.focus():null===(m=c[4])||void 0===m||m.focus()),"Enter"!==t.key&&" "!==t.key||u(n))})(t,l),disabled:e}))),ee.createElement(fr,{rating:(0,r.zG)(t,i.fold((0,r.a9)(a),(0,r.a9)(t))),ratingLabels:n,maxScore:s}),ee.createElement(hr.L,{small:!0}))},kr=ee.forwardRef(((e,t)=>{var{isFilled:n,ariaLabel:i,disabled:r,isSelected:s,isFocusable:o}=e,a=yr(e,["isFilled","ariaLabel","disabled","isSelected","isFocusable"]);return ee.createElement("button",Object.assign({className:Sr,role:"radio","aria-label":i,disabled:r,"aria-checked":s,tabIndex:o?0:-1,ref:t},a),ee.createElement(re.r7,{className:le.ux.joinClasses([wr,n?_r:""])}))}));kr.displayName="StarButton";const Sr=le.ux.style({border:"none",background:"none",cursor:"pointer",padding:0,borderRadius:le.ux.rem(se.F2),$nest:{"&:focus-visible":{outlineStyle:"none",boxShadow:`0 0 0 2px ${ae.XY.Content.Secondary.Default}`}}}),wr=le.ux.style({padding:`0 ${le.ux.rem(se.mh)}`}),_r=le.ux.style({$nest:{"& path":{fill:gr.CoreYellow50,stroke:gr.CoreYellow50}}});var Er=n(59769),Or=n(46560);const Ar=({stage:e,rating:t,initialTitle:n,acknowledgment:i,acknowledgmentTitle:r,onClose:s,className:o})=>ee.createElement("div",{className:le.ux.joinClasses([Ir,o])},ee.createElement(Er._,{className:Rr,fill:"#000"}),ee.createElement(Br,{stage:e,rating:t,initialTitle:n,acknowledgment:i,acknowledgmentTitle:r}),ee.createElement(re.zx.Tertiary,{"aria-label":"Close survey",style:{base:{marginLeft:"auto",padding:0,minWidth:le.ux.rem(se.qp),minHeight:le.ux.rem(se.qp)},hovered:{backgroundColor:oe.BlueGray10},active:{backgroundColor:oe.BlueGray10}},onClick:s},ee.createElement(Or.B,null))),Ir=le.ux.style({display:"flex",alignItems:"center"}),Pr=le.ux.style({fontSize:le.ux.rem(.75)}),Rr=le.ux.style({marginRight:le.ux.rem(se.qp),$nest:{"& path:first-of-type":{fill:oe.NeutralGray70}}}),Br=({stage:e,rating:t,initialTitle:n,acknowledgmentTitle:s,acknowledgment:o})=>{switch(e){case B.Bs.Stage.Type.Rating:return ee.createElement("span",{className:Pr},n);case B.Bs.Stage.Type.Feedback:return ee.createElement("span",{className:Pr},"Your rating:"," ",Array.from({length:t}).map((()=>"⭐")).join(" "));case B.Bs.Stage.Type.Completed:return ee.createElement("span",{className:Pr},(0,r.zG)(s,i.fold((()=>ee.createElement("b",null,"Thank you!")),(e=>ee.createElement("b",null,e))))," ",(0,r.zG)(o,i.fold((()=>"Your feedback helps us improve."),(e=>e))));case B.Bs.Stage.Type.Closed:return null;default:return(0,P.L0)(e)}},Ur=ie.UI.Union.asOption(ie.UI.Node.make((({notify:e,state:t})=>ee.createElement(ne.F.Fragment,null,t.pipe(w.U((t=>ee.createElement(Nr,Object.assign({},t,{onRatingSelectionChange:t=>{e({kind:B.ix.Kind.surveyRatingSelectionChange,rating:t})()},onOpenAnswerChange:t=>e({kind:B.ix.Kind.surveyOpenAnswerChange,openAnswer:t})(),onComplete:e({kind:B.ix.Kind.surveyComplete}),onClose:e({kind:B.ix.Kind.surveyClose})}))))))))),Nr=({survey:e,stage:t,transitionStage:n,rating:s,errors:o,openAnswer:a,onOpenAnswerChange:l,onRatingSelectionChange:c,onClose:u,onComplete:d})=>ee.createElement("div",{className:Tr},ee.createElement(Ar,{className:le.ux.joinClasses([n===B.Bs.Stage.Type.Feedback?jr:void 0,t===B.Bs.Stage.Type.Feedback?Fr:void 0]),stage:t,rating:(0,r.zG)(s,i.getOrElse((0,r.a9)(1))),initialTitle:e.title,acknowledgment:e.acknowledgment,acknowledgmentTitle:e.acknowledgmentTitle,onClose:u}),t!==B.Bs.Stage.Type.Completed&&ee.createElement(ee.Fragment,null,ee.createElement("div",{className:le.ux.joinClasses([Dr,n===B.Bs.Stage.Type.Feedback?jr:void 0,t===B.Bs.Stage.Type.Feedback?Fr:void 0])},ee.createElement("div",{className:Mr,hidden:"rating"!==t},ee.createElement(Cr,{onSelectionChange:c,rating:s,disabled:i.isSome(s),maxScore:e.maxScore,ratingLabels:e.ratingLabels})),(0,r.zG)(e.openAnswer,i.fold((0,r.a9)("(Optional) Please share your feedback to help us improve."),(e=>e.placeholder)),(e=>ee.createElement("div",{className:Vr,hidden:t!==B.Bs.Stage.Type.Feedback},ee.createElement(or,{placeholder:e,onComplete:d,onOpenAnswerChange:l,openAnswer:a,onCancel:u,error:(0,r.zG)(o,i.chain((e=>e.openAnswerError)))}))))))),Tr=le.ux.style({backgroundColor:oe.BlueGray0,border:`1px solid ${oe.BlueGray10}`,borderRadius:le.ux.rem(se.F2),padding:`${le.ux.rem(se.x)} ${le.ux.rem(se.mh)}`}),Gr=le.ux.keyframes({from:{opacity:1},to:{opacity:.3}}),zr=le.ux.keyframes({from:{opacity:.3},to:{opacity:1}}),jr=le.ux.style({animation:`${Gr} 0.3s ease-in-out`}),Fr=le.ux.style({animation:`${zr} 0.3s ease-in-out`}),Dr=le.ux.style({display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",marginTop:le.ux.rem(se.yC)}),Vr=le.ux.style({width:le.ux.percent(100)}),Mr=le.ux.style({paddingTop:le.ux.rem(se.F2)}),Lr=ie.UI.Knot.make(qi,{header:nr,survey:Ur}),Kr=ie.UI.List.make(v.bw,Lr);const $r=ie.UI.Grid.make((({slots:e,view:t})=>{const{ref:n,onMount:r}=Ke.P.useElWatcher(),s=ee.useMemo((()=>Y.aj([n.pipe(S.oA,w.U((e=>i.fromNullable((0,d.$Q)(e,3)))),S.oA),t("scrollToken").pipe(K.x())]).pipe(w.U(Cn.li),l.b((e=>{e.scrollTop=e.scrollHeight-e.clientHeight})))),[n]);return Ke.P.useSubscriptionTo(s),ee.createElement("div",{className:Qr,ref:r},e.intent,e.history,e.belowHistory)})),Hr=ie.UI.Knot.make(ie.UI.Grid.make((({slots:e,notify:t})=>{const{ref:n,onMount:i}=Ke.P.useElWatcher(),{notifyUnmount:r}=ee.useContext(Wt),s=ee.useMemo((()=>n.pipe($t.QV(Ht.E),S.oA,l.b((e=>t({kind:B.ix.Kind.mount,name:B.ec.followUpActionsList,element:e})())),Zt.x((()=>r({kind:B.ix.Kind.unmount,name:B.ec.followUpActionsList}))))),[n]);return Ke.P.useSubscriptionTo(s),ee.createElement("div",{className:es,ref:i},e.actions)})),{actions:Ie}),Zr=ie.UI.Union.asOption(Hr),Wr=ie.UI.Union.asOption(ie.UI.Composite.make(ie.UI.Grid.make((({slots:e})=>ee.createElement("div",{className:Jr},e.history))),Kr)),qr=ie.UI.Union.make("kind",{inProgressResult:Zi,error:Et,followUpActions:Zr}),Yr=ie.UI.Union.asOption(qr),Xr=ie.UI.Knot.make($r,{intent:Vt,history:Wr,belowHistory:Yr}),Qr=le.ux.style({display:"flex",flexDirection:"column",gap:le.ux.rem(se.x)}),Jr=le.ux.style({display:"flex",flexDirection:"column",gap:le.ux.rem(se.x)}),es=le.ux.style({display:"flex",flexWrap:"wrap",alignItems:"center",justifyContent:"flex-end",flexDirection:"row",width:"100%",gap:le.ux.rem(se.x),marginBottom:le.ux.rem(se.x)});function ts(e,t){return ie.Z.composeOption(function(e,t){return ie.Z.composeList(v.Ot,(()=>t.pipe(w.U((0,r.ls)(v.ke(50),v.Su(((e,t)=>({result:t,isLast:0===e}))),v.GY)))),(({result:t,isLast:n})=>rr(e,t,n)))}(e,t.view(i.getOrElse((()=>[])))),(()=>t))}function ns(e){const t=e.assistant.state.view("session").view(B.z_.toStarted).pipe(w.U(i.map((e=>i.isSome(e.error)?"error":i.isSome(e.inProgressResult)?"inProgressResult":"followUpActions"))));return ie.Z.composeOption(function(e,t){return ie.Z.composeUnion({inProgressResult:Wi(e.assistant),followUpActions:(0,r.zG)(e.assistant.state.view("contextualActions").view((t=>(0,r.zG)(t,i.filter((()=>!B.a8.isUnavailable(e.assistant.state.get().availability))),i.map((0,r.ls)(y.UI(z.BackendAction.make),Re()))))),(t=>ie.Z.composeOption(ie.Z.composeKnot({root:ie.Z.fromSideEffect((t=>e.notify(t)),null),actions:Pe(e,t,"compact")}),(()=>t)))),error:Ut(e)},(()=>t.pipe(S.oA,w.U((e=>({kind:e}))))))}(e,t),(()=>t))}function is(e){const t=e.assistant.state.view("session").view((0,r.ls)(B.z_.toStarted,i.map((e=>e.resultHistory)),i.chain(y.c2)));return ie.Z.composeKnot({root:()=>e.assistant.state.view("session").view((0,r.ls)(B.z_.toStarted,i.chain((e=>e.inProgressResult)),i.map((e=>e.text)))).pipe(S.oA,J.O(""),w.U((e=>({scrollToken:e})))),intent:Kt(e.assistant),history:ts(e,t),belowHistory:ns(e)})}const rs=ie.UI.Union.make("kind",{error:Et,initial:vn,actionHints:Ct,results:Xr}),ss=10,os=34.75,as=ie.UI.Grid.make((({slots:e,state:t,view:n,notify:s})=>{const{rect:o,onMount:a}=Ke.P.useRectWatcher(),c=ee.useMemo((()=>o.pipe(S.oA,l.b((e=>s({kind:"contentSizeChange",height:e.height})())))),[o]);return Ke.P.useSubscriptionTo(c),ee.createElement(ne.F.div,{mount:a,onScroll:e=>s({kind:"contentScroll",scrollTop:e.currentTarget.scrollTop})(),style:{overflow:n("canScroll").pipe(w.U((0,A.RN)("auto","hidden"))),maxHeight:t.pipe(w.U((({assistantMaxHeight:e,promptHeight:t})=>(0,r.zG)(g.Y(i.Applicative)({assistantMaxHeight:e,promptHeight:t}),i.fold((()=>le.ux.rem(os)),(({assistantMaxHeight:e,promptHeight:t})=>(0,r.zG)(function(e,t,n=.25){const i=`calc(${le.ux.rem(ao+lo+2.5)} + ${le.ux.px(t)})`;return`calc(${e}px - ${i} - ${le.ux.rem(n)})`}(e,t),(e=>`max(min(${e}, ${le.ux.rem(os)}), ${le.ux.rem(ss)})`))))))),J.O(le.ux.rem(os)))}},e.content)})),ls=ie.UI.Knot.make(as,{content:rs}),cs=ie.UI.Union.asOption(ls);function us(e){return ie.Z.composeOption(function(e){return()=>e.state.view("selectedDynamicAction").view(i.chain((e=>(0,r.zG)(e.args[0].hints,i.map((t=>({header:e.label,iconUrl:e.iconUrl,hintsHeader:t.header,hintsItems:t.items}))))))).pipe(S.oA)}(e),(()=>e.state.view("selectedDynamicAction").view(i.chain((e=>e.args[0].hints)))))}function ds(e,t){return ie.Z.composeUnion({error:Ut(e),initial:yn(e),results:is(e),actionHints:us(e.assistant)},(()=>t.pipe(S.oA,w.U((e=>({kind:e}))))))}function ms(e,t,n,r){const s=e.assistant.state.pipe(w.U((({activeView:e,availability:t,session:n})=>{switch(e){case"loading":return i.some("initial");case"loadingError":return i.some("error");case"beforeResults":return i.isSome(n.error)?i.some("error"):B.a8.isUnavailable(t)?i.none:i.some("initial");case"actionSelected":return i.some("actionHints");case"afterResults":return i.some("results");case"voiceProfile":case"legacyVoiceProfile":case"feedbackForm":return i.none;default:return(0,P.L0)(e)}})));return ie.Z.composeOption(function(e,t,n,r,s){return ie.Z.composeKnot({root:ie.Z.fromSideEffect((t=>{switch(t.kind){case"contentScroll":return e.assistant.contentOverflowUnderToolbar(t.scrollTop>0);case"contentSizeChange":return n.set(i.some(t.height+8));default:(0,P.L0)(t)}}),u.h.combine(r,s,e.assistant.state.view("canScroll"),((e,t,n)=>({assistantMaxHeight:e,promptHeight:t,canScroll:n})))),content:ds(e,t)})}(e,s,t,n,r),(()=>s))}const ps=({title:e,url:t})=>{const n=ee.useRef(null),s=(0,ti.KL)(n,e);return(0,r.zG)(t,i.fold((()=>ee.createElement("span",{className:gs,title:s,ref:n},e)),(t=>ee.createElement(re.dL,{className:gs,title:s,ref:n,href:t},e))))},gs=le.ux.style({overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",textAlign:"left",$nest:{"&:visited":{color:"inherit"}}}),hs=ie.UI.Node.make((({state:e})=>ee.createElement(ne.F.Fragment,null,e.pipe(w.U((({detectedReferences:e})=>ee.createElement(re.Zb,{style:xs},ee.createElement("span",{className:vs},"Detected references"),ee.createElement("ul",{className:bs},e.map((({title:e,iconUrl:t,url:n},i)=>ee.createElement("li",{key:i,className:ys},ee.createElement("img",{src:t,className:Cs,alt:""}),ee.createElement(ps,{title:e,url:n})))))))))))),fs=ie.UI.Union.asOption(hs),xs={position:"relative",padding:`${le.ux.rem(se.F2)} ${le.ux.rem(se.qp)}`,gap:0},vs=le.ux.style({fontSize:le.ux.rem(se.qp),lineHeight:le.ux.rem(se.mh+se.yC),color:ae.XY.Content.Secondary.Default,userSelect:"none"}),bs=le.ux.style({fontSize:le.ux.rem(se.qp),lineHeight:le.ux.rem(se.mh+se.yC),color:ae.XY.Content.Primary.Default,margin:0,padding:0}),ys=le.ux.style({height:le.ux.rem(se.sD),display:"flex",alignItems:"center",borderRadius:le.ux.rem(We.xB)}),Cs=le.ux.style({minWidth:le.ux.rem(se.mh),height:le.ux.rem(se.mh),marginRight:le.ux.rem(se.x)});function ks(e){const t=e.assistant.state.view((({detectedReferences:e})=>e.length?i.some(!0):i.none));return ie.Z.composeOption(function(e){return()=>e.assistant.state.view("detectedReferences").pipe(w.U((e=>({detectedReferences:e}))))}(e),(()=>t))}const Ss="goBtn",ws=le.ux.style({display:"flex",alignItems:"flex-start",padding:`${le.ux.rem(se.x)} ${le.ux.rem(se.qp)}`,gap:le.ux.rem(se.F2),justifyContent:"space-between"}),_s=le.ux.style({flexGrow:1,$nest:{"&[data-hasheader='false']":{paddingTop:le.ux.rem(se.F2+se.W9)}}}),Es=le.ux.style({width:le.ux.percent(100),border:"none"}),Os=d.Es.buttonOverrideSpecificity({alignSelf:"flex-end",$nest:{"&[data-disabled='true']":{opacity:1,$nest:{"& svg":{fill:oe.BlueGray30}}}}},Ss),As=le.ux.joinClasses([Ss,le.ux.style(Os)]),Is=ie.UI.Node.make((({state:e,view:t,notify:n})=>{const{ref:s,onMount:o}=Ke.P.useElWatcher(),a=ee.useMemo((()=>s.pipe($t.QV(Ht.E),S.oA,l.b((e=>n({kind:B.ix.Kind.mount,name:B.ec.promptInput,element:e})())))),[s]);return Ke.P.useSubscriptionTo(a),ee.createElement(ne.F.div,{className:ws,mount:o},ee.createElement(ne.F.div,{className:_s,"data-hasheader":t("hasHeader")},e.pipe(w.U((({placeholder:e,kind:t,text:s,autofocusToken:o,availability:a})=>ee.createElement(re.b,{text:s,ariaLabel:"custom prompt",className:Es,placeholder:"ready"===t?i.toUndefined(e):void 0,fitContentHeight:!0,autofocus:o,onChange:e=>n({kind:B.ix.Kind.promptFieldTextChange,text:e})(),onKeyDownEnter:"ready"===t?n({kind:B.ix.Kind.promptFieldKeyPressEnter,text:s}):r.Q1,onKeyUpEscape:n({kind:B.ix.Kind.promptFieldKeyPressEscape}),onFocus:n({kind:B.ix.Kind.promptFieldFocusChange,focused:!0}),onBlur:n({kind:B.ix.Kind.promptFieldFocusChange,focused:!1}),onKeyDownArrowUp:n({kind:B.ix.Kind.promptFieldKeyPressArrowUp}),onKeyDownArrowDown:n({kind:B.ix.Kind.promptFieldKeyPressArrowDown}),disabled:B.a8.isUnavailable(a)}))))),e.pipe(w.U((({kind:e,text:t,availability:i})=>"waitingForResult"===e?ee.createElement(re.zx.Tertiary,{onClick:n({kind:B.ix.Kind.generateStopButtonClick}),name:"generateStop",compact:!0,size:"large"},ee.createElement(re.wN,null)):"ready"===e?ee.createElement(re.zx.Tertiary,{className:As,onClick:n({kind:B.ix.Kind.promptSubmitButtonClick,text:t}),disabled:""===t.trim()||B.a8.isUnavailable(i),name:"promptSend",compact:!0,size:"large"},ee.createElement(re.kc,null)):null))))}));var Ps=n(67434);function Rs(e){const t=e.promptMenu.state.pipe(Ps.R(((e,t)=>(0,r.zG)(t,i.fold((()=>e),(()=>e+1)))),0));return ie.Z.fromSideEffect((t=>e.notify(t)),Y.aj([e.assistant.state,t]).pipe(w.U((([e,t])=>{return{kind:(0,r.zG)(B.z_.toStarted(e.session),i.fold((()=>"loading"),(e=>(0,r.zG)(e.inProgressResult,i.fold((()=>"ready"),(()=>"waitingForResult")))))),availability:e.availability,placeholder:(n=e,(0,r.zG)(n.selectedDynamicAction,i.chain((e=>""!==e.args[0].label.trim()?i.some([e.args[0].label]):i.none)),i.alt((()=>(0,r.zG)(n.userPromptAction,i.map((e=>[e.arg.label]))))))),hasHeader:!1,text:e.textBox,autofocusToken:re.vw.create(`${e.activeView}_${(0,r.zG)(B.z_.toStarted(e.session),i.chain((e=>e.inProgressResult)),i.fold((()=>"done"),(()=>"inProgress")))}_${(0,r.zG)(e.selectedDynamicAction,i.fold((()=>"no-selected-action"),(()=>"selected-action")))}_${e.promptAutofocusToken}_promptMenuOpen:${t}`)};var n})),K.x()))}const Bs=ie.UI.Union.asOption(ie.UI.Composite.make(ie.UI.Grid.make((({slots:e})=>ee.createElement("div",{className:Us},e.content))),ze)),Us=le.ux.style({padding:`${le.ux.rem(se.F2)} ${le.ux.rem(se.qp)}`});function Ns(e,t){const n=t.pipe(w.U(i.map((e=>function(e){return(0,r.zG)(e,v.pO((e=>{const{init:t,rest:n}=v.zT((t=>t.group.label===e[0].group.label))(e);return[t,n]})),v.UI((e=>g.Y(i.Applicative)({group:(0,r.zG)(e,v.YM,i.map((e=>e.group.label))),actions:(0,r.zG)(e,v.UI(z.BackendAction.make),y.c2)}))),v.oA,y.c2,i.getOrElse((()=>[{group:e[0].group.label,actions:[z.BackendAction.make(e[0])]}])))}((0,r.zG)(e,y.DY(z.SupportedDynamicActions.ordByGroup)))))));return ie.Z.composeOption(Fe(e,n.pipe(S.oA)),(()=>n))}const Ts=ie.UI.List.make(v.bw,Oe),Gs=ie.UI.Grid.make((({slots:e})=>ee.createElement("div",{className:js},e.customPromptGo,ee.createElement("div",{className:Fs},e.searchResults)))),zs=ie.UI.Knot.make(Gs,{searchResults:Ts,customPromptGo:Oe}),js=le.ux.style({background:"transparent",padding:le.ux.rem(se.qp),display:"flex",flexDirection:"column",alignItems:"flex-start",gap:le.ux.rem(se.x)}),Fs=le.ux.style({display:"flex",flexDirection:"row",flexWrap:"wrap",gap:le.ux.rem(se.x)});function Ds(e,t){return ie.Z.composeKnot({searchResults:Pe(e,t.pipe(w.U(i.map(y.UI(z.BackendAction.make)))),"standard"),customPromptGo:Ae(e,Q.of({kind:"go"}),"standard")})}const Vs=ie.UI.Union.make("kind",{searchResults:zs,actionsStore:Bs}),Ms=ie.UI.Knot.make(ie.UI.Grid.make((({slots:e,view:t,notify:n})=>ee.createElement(ne.F.div,{className:Ks,style:{maxHeight:t("maxHeight")}},ee.createElement(re.zx.Tertiary,{compact:!0,className:$s,onClick:n({kind:B.ix.Kind.collapsePromptMenuButtonClick}),name:"collapsePromptMenu",size:"small"},ee.createElement(He.JO.Arrow,{direction:He.n4.down,className:Ws})),ee.createElement("div",{ref:e=>e&&n({kind:B.ix.Kind.mount,name:B.ec.promptMenuContent,element:e})(),onKeyDown:e=>{"ArrowDown"===e.key?n({kind:B.ix.Kind.promptMenuKeyPressArrowDown})():"ArrowUp"===e.key&&n({kind:B.ix.Kind.promptMenuKeyPressArrowUp})()}},e.content)))),{content:Vs}),Ls=ie.UI.Union.asOption(Ms),Ks=le.ux.style({overflowY:"scroll",borderBottom:`0.5px solid ${ae.XY.Boundaries.Secondary.Default}`}),$s=le.ux.style({position:"absolute",top:le.ux.rem(se.x),right:le.ux.rem(se.x),zIndex:1,$nest:{"&:not(:hover)":{backgroundColor:le.ux.important(oe.White)}}}),Hs="arrowIcon",Zs=d.Es.buttonOverrideSpecificity(d.Es.iconSizeRems(1.5),Hs),Ws=le.ux.joinClasses([Hs,le.ux.style(Zs)]);function qs(e,t){return ie.Z.composeOption(ie.Z.composeKnot({root:ie.Z.fromSideEffect((t=>e.notify(t)),t.pipe(S.oA)),content:ie.Z.composeUnion({searchResults:Ds(e,t.pipe(w.U((0,r.ls)(i.filter((({kind:e})=>"searchResults"===e)),i.map((e=>e.actions)))))),actionsStore:Ns(e,t.pipe(w.U((0,r.ls)(i.filter((({kind:e})=>"actionsStore"===e)),i.map((e=>e.actions))))))},(()=>t.pipe(S.oA)))}),(()=>t))}const Ys=ie.UI.Grid.make((({slots:e,view:t,notify:n})=>{const{onMount:s,rect:o}=Ke.P.useRectWatcher(),a=ee.useMemo((()=>o.pipe(l.b((e=>n({kind:"promptHeightChange",height:(0,r.zG)(e,i.map((e=>e.height)))})())))),[o]);Ke.P.useSubscriptionTo(a);const c=ee.useRef(null);return ee.createElement(ne.F.div,{className:Js},ee.createElement(ne.F.div,{mount:c,className:to,"data-expanded":t("menuExpanded"),onFocus:()=>{var e;return n({kind:B.ix.Kind.promptFieldAndMenuFocusChange,focused:(null===(e=c.current)||void 0===e?void 0:e.contains((0,d.vY)(document)))||!1})()},onBlur:()=>{var e;return n({kind:B.ix.Kind.promptFieldAndMenuFocusChange,focused:(null===(e=c.current)||void 0===e?void 0:e.contains((0,d.vY)(document)))||!1})()}},e.promptMenu,ee.createElement("div",{ref:s},e.promptField)),Y.aj([o,t("menuExpanded")]).pipe(w.U((([e,t])=>(0,r.zG)(e,i.filter((()=>t)),i.fold(r.gn,(e=>ee.createElement("div",{className:no,style:{height:e.height}}))))))))})),Xs=ie.UI.Knot.make(Ys,{promptField:Is,promptHeader:ie.UI.Node.empty,promptMenu:Ls}),Qs=ie.UI.Union.asOption(Xs),Js=le.ux.style({position:"relative"}),eo=e=>le.ux.color(oe.BlueGray40).toRGBA().fade(e).toString(),to=le.ux.style({background:"white",boxShadow:`0px 0px 0px 0.5px ${oe.BlueGray40}, 0px 0px 2px 0.5px ${eo(.5)}, 0px 1px 6px 0.5px ${eo(.25)}`,borderRadius:le.ux.rem(We.xB+We.fe),$nest:{"&[data-expanded='true']":{position:"absolute",bottom:0,width:"100%"}}}),no=le.ux.style({opacity:0,pointerEvents:"none"});var io=n(598);function ro(e,t,n){const s=e.assistant.state.view((({activeView:e})=>"loadingError"!==e?i.some(!0):i.none));return ie.Z.composeOption(function(e,t,n){const s=Y.aj([e.promptMenu.state,t]).pipe(w.U((([e,t])=>(0,r.zG)(g.Y(i.Applicative)({maxHeight:t,menu:e}),i.map((({menu:e,maxHeight:t})=>Object.assign(Object.assign({},e),{maxHeight:t})))))),_.shareReplay({bufferSize:1,refCount:!0}));return ie.Z.composeKnot({root:ie.Z.fromSideEffect((t=>{switch(t.kind){case"promptHeightChange":return n.set(t.height);case B.ix.Kind.promptFieldAndMenuFocusChange:return e.notify(t);default:(0,P.L0)(t)}}),s.pipe(w.U((e=>({menuExpanded:i.isSome(e)}))))),promptField:Rs(e),promptHeader:()=>Q.of(null),promptMenu:qs(e,s)})}(e,s.pipe(S.oA,io.c(t)),n),(()=>s))}const so=ie.UI.Grid.make((({slots:e})=>ee.createElement("div",{className:co},e.content,e.detectedReferences,e.prompt))),oo=ie.UI.Knot.make(so,{content:cs,detectedReferences:fs,prompt:Qs}),ao=se.x,lo=se.x,co=le.ux.style({display:"flex",flexDirection:"column",gap:le.ux.rem(lo)});var uo;function mo(e,t=uo.empty){const n=u.h.create(i.none),r=u.h.create(i.none);return ie.Z.composeKnot({content:ms(e,n,t.assistantMaxHeight,r),detectedReferences:ks(e),prompt:ro(e,n,r)})}!function(e){e.empty={assistantMaxHeight:u.h.create(i.none)}}(uo||(uo={}));const po=(e,t)=>(0,te.Sh)(ho,e===t&&fo),go=le.ux.style({display:"flex",flexDirection:"row",justifyContent:"space-between",paddingLeft:le.ux.rem(se.mh),paddingRight:le.ux.rem(se.mh)}),ho=le.ux.style({width:le.ux.rem(5),height:le.ux.rem(5),cursor:"pointer",display:"flex",alignItems:"center",flexDirection:"column",justifyContent:"center",gap:le.ux.rem(se.x),borderRadius:le.ux.rem(We.HP),fontWeight:400,fontSize:le.ux.rem(.75),lineHeight:le.ux.rem(1.125),$nest:{"&:hover":{backgroundColor:ae.XY.Surface.Secondary.Default}}}),fo=le.ux.style({backgroundColor:oe.Blue10,$nest:{"&:hover":{backgroundColor:oe.Blue10}}}),xo=le.ux.style(Object.assign({},d.Es.iconSizeRems(1.5))),vo="submitBtn",bo={padding:le.ux.rem(se.mh),gap:le.ux.rem(se.mh)},yo={color:ae.XY.Content.Primary.Default,fontWeight:700,fontSize:le.ux.rem(1.25),lineHeight:le.ux.rem(1.5),margin:0},Co={border:`${le.ux.px(1)} solid ${oe.NeutralGray20}`,borderRadius:le.ux.rem(We.xB),padding:`${le.ux.rem(se.x+se.yC)} ${le.ux.rem(se.x)}`,height:le.ux.rem(8)},ko={display:"flex",alignItems:"flex-start",$nest:{"& input[type='checkbox']":{margin:`${le.ux.rem(se.W9)} ${le.ux.rem(se.x)} 0 0`,minWidth:le.ux.rem(1),minHeight:le.ux.rem(1)},"& label":{color:ae.XY.Content.Primary.Default,fontWeight:400,fontSize:le.ux.rem(.75),lineHeight:le.ux.rem(1.125)}}},So=Object.assign({width:le.ux.percent(100)},d.Es.buttonOverrideSpecificity({fontSize:le.ux.rem(.875)},vo)),wo={display:"flex",flexDirection:"column",gap:le.ux.rem(se.x)},_o=bo,Eo=le.ux.style(yo),Oo=le.ux.style(Co),Ao=le.ux.style(ko),Io=(le.ux.style({fontWeight:700}),le.ux.joinClasses([vo,le.ux.style(So)])),Po=le.ux.style(wo),Ro=(0,te.xb)((({selectedScore:e,onSelectScore:t})=>ee.createElement("div",{className:go},ee.createElement("div",Object.assign({},po(B.x2.Mood.dissatisfied,e),{onClick:()=>t(B.x2.Mood.dissatisfied)}),ee.createElement(re.XR,{className:xo}),"I dislike it"),ee.createElement("div",Object.assign({},po(B.x2.Mood.ok,e),{onClick:()=>t(B.x2.Mood.ok)}),ee.createElement(re.R6,{className:xo}),"It′s OK"),ee.createElement("div",Object.assign({},po(B.x2.Mood.satisfied,e),{onClick:()=>t(B.x2.Mood.satisfied)}),ee.createElement(re.OJ,{className:xo}),"I like it!")))),Bo=(0,te.xb)(re.b),Uo=(0,te.xb)(re.Zb),No=ie.UI.Node.make((({state:e,view:t,notify:n})=>{const s="domainCheckbox"+Jn.alphanumeric(5);return ee.createElement(Uo,{style:_o},ee.createElement("h1",{className:Eo},"How do you like Grammarly?"),ee.createElement(Ro,{selectedScore:t("formData").pipe(w.U((e=>e.mood))),onSelectScore:e=>n({kind:B.ix.Kind.feedbackFormChange,feedbackData:{mood:e}})()}),ee.createElement(Bo,{ariaLabel:"tell us why",className:Oo,placeholder:["How can we improve?"],fitContentHeight:!1,text:t("formData").pipe(w.U((({message:e})=>null!=e?e:""))),onChange:e=>n({kind:B.ix.Kind.feedbackFormChange,feedbackData:{message:e}})()}),e.pipe(w.U((({formData:e,domain:t,source:o})=>ee.createElement("div",{className:Po},(0,r.zG)(t,i.fold(r.gn,(t=>ee.createElement("div",{className:Ao},ee.createElement("input",{type:"checkbox",id:s,checked:void 0!==e.domain,onChange:n({kind:B.ix.Kind.feedbackFormChange,feedbackData:{domain:void 0!==e.domain?void 0:t}})}),ee.createElement("label",{htmlFor:s},"Include the domain ",ee.createElement("b",null,t)," with my feedback to help improve Grammarly."))))),(0,r.zG)(i.fromNullable(void 0!==e.mood?Object.assign(Object.assign({},e),{mood:e.mood,source:o}):null),i.fold((()=>ee.createElement(re.zx.Primary,{disabled:!0,className:Io,onClick:r.Q1},"Submit")),(e=>ee.createElement(re.zx.Primary,{disabled:!1,className:Io,onClick:n({kind:B.ix.Kind.feedbackFormSubmitButtonClick,feedbackData:e})},"Submit")))))))))}));var To;function Go(e,t=To.empty){return ie.Z.fromSideEffect((t=>e.notify(t)),e.assistant.state.view((e=>{var n,i;return{formData:e.stagingFeedbackFormData,domain:t.showDomainCheckbox,source:null!==(i=null===(n=e.stagingFeedbackFormData)||void 0===n?void 0:n.source)&&void 0!==i?i:B.x2.Source.resultCard}})))}!function(e){e.empty={showDomainCheckbox:i.none}}(To||(To={}));const zo=ie.UI.Node.make((({view:e,notify:t})=>ee.createElement(ne.F.div,{className:Fo,"data-id":e("id")},e("kind").pipe(w.U((e=>{switch(e){case B.Cl.Kind.feedbackSubmitted:return ee.createElement(ee.Fragment,null,ee.createElement(re.j4,{className:Do}),ee.createElement("div",null,"Thanks for the feedback!"));case B.Cl.Kind.voiceTagRemoved:return ee.createElement(ee.Fragment,null,ee.createElement(re.j4,{className:Do}),ee.createElement("div",null,"Removed"));default:return(0,P.L0)(e)}}))),e("id").pipe(w.U((e=>ee.createElement(re.xx,{name:"notificationClose",onClick:t({kind:"dismissNotification",id:e}),size:"small"}))))))),jo=le.ux.keyframes({from:{transform:`translateY(${le.ux.rem(.25)})`,opacity:0},to:{transform:"translateY(0)",opacity:1}}),Fo=le.ux.style({background:ae.S5.Surface.Primary.Default,color:ae.S5.Content.Primary.Default,borderRadius:le.ux.rem(We.xB+We.fe),display:"flex",flexDirection:"row",alignItems:"center",padding:`${le.ux.rem(se.x)} ${le.ux.rem(se.qp)}`,gap:le.ux.rem(se.qp),fontSize:le.ux.rem(.75),lineHeight:le.ux.rem(1.125),animation:`${jo} 0.1s ease-in`}),Do=le.ux.style(Object.assign({},d.Es.iconSizeRems(1.5)));const Vo=ie.UI.List.make(v.bw,zo),Mo=ie.UI.Grid.make((({slots:e,view:t})=>ee.createElement(ne.F.div,{className:t("contentOverflowUnderToolbar").pipe(w.U((0,A.RN)(Ho,$o)))},e.content))),Lo=ie.UI.Knot.make(Mo,{content:Vo}),Ko={position:"absolute",top:0,right:le.ux.rem(se.x),display:"flex",flexDirection:"column",gap:le.ux.rem(se.x),zIndex:1e3,transition:"top 0.1s ease-in"},$o=le.ux.style(Ko),Ho=le.ux.style(Ko,{top:le.ux.rem(se.F2)});function Zo(e){return ie.Z.composeKnot({root:()=>e.assistant.state.view((({contentOverflowUnderToolbar:e})=>({contentOverflowUnderToolbar:e}))),content:(t=e.notifications,ie.Z.composeList(v.Ot,(()=>t.state.view(v.GY)),(e=>function(e,t){return ie.Z.fromSideEffect((e=>{if("dismissNotification"===e.kind)return t.dismiss(e.id);(0,P.L0)(e.kind)}),e)}(e,t))))});var t}const Wo=({kind:e,label:t,description:n,iconUrl:i,isUnselectable:r,onToggle:s})=>ee.createElement(ei.u,{title:n},ee.createElement("button",{disabled:"disabled"===e,className:qo,"data-kind":e,"data-unselectable":r,onClick:(0,d.m)((()=>{"disabled"!==e&&s("selected"!==e&&("unselected"===e||(0,P.L0)(e)))}))},i?ee.createElement("img",{src:i,style:{width:20,height:20}}):null,ee.createElement("span",null,t),r&&"selected"===e?ee.createElement(re.cv,{className:Yo}):null)),qo=le.ux.style({display:"flex",alignItems:"center",justifyContent:"center",gap:le.ux.rem(se.x),padding:`${le.ux.rem(se.F2)} ${le.ux.rem(.625)} ${le.ux.rem(se.F2)} ${le.ux.rem(se.x)}`,background:ae.XY.Surface.Primary.Default,border:`${le.ux.px(1)} solid transparent`,borderRadius:le.ux.rem(1.875),fontSize:le.ux.rem(.875),lineHeight:le.ux.rem(1.375),boxSizing:"border-box",$nest:{"&[data-kind='unselected']":{border:`${le.ux.px(1)} solid ${oe.BlueGray5}`,color:ae.XY.Content.Primary.Default,cursor:"pointer"},"&[data-kind='disabled']":{border:`${le.ux.px(1)} solid ${oe.BlueGray5}`,color:oe.BlueGray40,cursor:"default"},"&[data-kind='selected']":{border:`${le.ux.px(2)} solid ${d.BO.BrandGreen60}`,padding:`${le.ux.rem(.1875)} ${le.ux.rem(.5625)} ${le.ux.rem(.1875)} ${le.ux.rem(.4375)}`,position:"relative",$nest:{"&[data-unselectable='true']":{cursor:"pointer"}}}}}),Yo=le.ux.style(Object.assign(Object.assign({position:"absolute",top:le.ux.rem(-(se.F2+se.W9)),right:le.ux.rem(-(se.F2+se.W9)),boxSizing:"content-box"},d.Es.iconSizeRems(.75)),{border:`${le.ux.rem(.125)} solid white`,borderRadius:"50%",background:d.BO.BrandGreen60,display:"flex",alignItems:"center",justifyContent:"center"})),Xo=({chips:e,className:t,onToggle:n})=>ee.createElement(ne.F.div,Object.assign({},(0,te.Sh)(Qo,t)),e.pipe(w.U(v.UI((e=>ee.createElement(Wo,Object.assign({},e,{onToggle:t=>n(e,t),key:e.label}))))))),Qo=le.ux.style({display:"flex",flexWrap:"wrap",gap:le.ux.rem(se.F2),$nest:{div:{marginTop:le.ux.rem(se.F2)}}}),Jo={margin:0,padding:le.ux.rem(se.mh),gap:le.ux.rem(se.mh)},ea={color:ae.XY.Content.Primary.Default,fontWeight:700,fontSize:le.ux.rem(.875),lineHeight:le.ux.rem(1.375),margin:0},ta={color:ae.XY.Content.Secondary.Default,fontWeight:400,fontSize:le.ux.rem(.75),lineHeight:le.ux.rem(1.125)},na={marginTop:le.ux.rem(se.x)},ia={color:oe.BlueGray60,fontWeight:400,fontSize:le.ux.rem(.75),lineHeight:le.ux.rem(1.125)},ra={display:"flex",justifyContent:"flex-end",gap:le.ux.rem(se.x)},sa={fontSize:le.ux.important(le.ux.rem(.875))},oa={marginTop:le.ux.rem(se.x)},aa={marginTop:le.ux.rem(se.x)},la={display:"flex",alignItems:"center",gap:le.ux.rem(se.x)},ca={width:le.ux.rem(1.5),height:le.ux.rem(1.5),display:"flex",alignItems:"center",justifyContent:"center"},ua=Jo,da=le.ux.style(ea),ma=le.ux.style(na),pa=le.ux.style(ta),ga=le.ux.style(ia),ha=le.ux.style(ra),fa=le.ux.style(sa),xa=le.ux.style(sa),va=le.ux.style(oa),ba=le.ux.style(aa),ya=le.ux.style(la),Ca=le.ux.style(ca),ka=ie.UI.Node.make((({view:e,state:t,notify:n})=>ee.createElement(re.Zb,{style:ua},ee.createElement("section",null,ee.createElement("h2",{className:da},"Formality"),ee.createElement(Xo,{className:ma,chips:e("styles").pipe(w.U(v.UI((e=>Object.assign(Object.assign({},e),{isUnselectable:!1}))))),onToggle:e=>n({kind:B.ix.Kind.styleToggleClick,id:e.id})()})),ee.createElement("section",null,ee.createElement("h2",{className:da},"Tone"),ee.createElement(ne.F.div,{className:pa},"Select up to"," ",e("maxSelectableTones").pipe(w.U((e=>(0,d.xs)(e)?(0,d.mA)(e):`${e}`)))),ee.createElement(Xo,{className:ma,chips:e("tones").pipe(w.U(v.UI((e=>Object.assign(Object.assign({},e),{isUnselectable:!0}))))),onToggle:(e,t)=>n({kind:B.ix.Kind.toneToggleClick,selected:t,id:e.id})()})),ee.createElement(ne.F.Fragment,null,t.pipe(w.U((e=>(0,r.zG)(e.roles,y.c2,i.fold(r.gn,(t=>ee.createElement("section",null,ee.createElement("h2",{className:da},"Your profession"),ee.createElement(re.pY,{className:va,placeholder:"Product designer",text:e.roleTypeaheadText,onInputChange:e=>n({kind:"updateRoleTypeaheadText",text:e})(),onSelectionChange:e=>n({kind:B.ix.Kind.roleTypeaheadSelectionChange,role:i.fromNullable(e)})(),options:t,label:e=>e.label,clearButton:!0,selectOnBlur:!0}))))))))),ee.createElement("section",null,ee.createElement("h2",{className:da},"I write in"),ee.createElement(ne.F.Fragment,null,t.pipe(w.U((({dialects:e,selectedDialect:t})=>ee.createElement(re.Ph,{className:ba,options:e.filter((e=>!B.LA.Dialect.Id.eq.equals(e.id,t.id))),selection:t,onSelectionChange:e=>n({kind:B.ix.Kind.dialectDropdownSelectionChange,dialect:e})(),label:e=>e.label,renderOption:e=>ee.createElement("div",{className:ya},ee.createElement("div",{className:Ca},ee.createElement("img",{src:e.iconUrl,style:{width:le.ux.rem(1),height:le.ux.rem(1)}})),e.label)})))))),ee.createElement(ne.F.Fragment,null,e("description").pipe(w.U((e=>""!==e.trim()?ee.createElement("div",{className:ga},e):null)))),ee.createElement(ne.F.div,{className:ha},ee.createElement(re.zx.Tertiary,{className:xa,onClick:n({kind:B.ix.Kind.voiceProfileCloseButtonClick}),name:"closeVoiceProfile"},"Close"),e("applyButtonEnabled").pipe(w.U((e=>ee.createElement(re.zx.Primary,{className:fa,onClick:n({kind:B.ix.Kind.voiceProfileUseVoiceButtonClick}),disabled:!e,name:"applyVoiceProfile"},"Use this voice"))))))));function Sa(e){const t=u.h.create("");return ie.Z.fromSideEffect((n=>{"updateRoleTypeaheadText"===n.kind?(t.set(n.text),""===n.text&&e.notify({kind:B.ix.Kind.roleTypeaheadSelectionChange,role:i.none})):(n.kind===B.ix.Kind.roleTypeaheadSelectionChange&&t.set((0,r.zG)(n.role,i.fold((()=>""),(e=>e.label)))),e.notify(n))}),u.h.combine(e.assistant.state,t,(({stagingVoiceProfile:e,session:t},n)=>(0,r.zG)(g.Y(i.Applicative)({voiceProfile:(0,r.zG)(B.z_.toStarted(t),i.map((e=>e.voiceProfile)),i.chain(B.LA.toLegacyVoiceProfile)),stagingVoiceProfile:e}),i.fold((()=>({tones:[],styles:[],roles:[],maxSelectableTones:0,applyButtonEnabled:!1,description:"",roleTypeaheadText:"",dialects:B.LA.Dialect.all(),selectedDialect:B.LA.Dialect.american})),(({stagingVoiceProfile:e,voiceProfile:t})=>(0,r.zG)(t.styles,v.Ew((t=>t.id===e.selectedStyle)),(s=>({styles:(0,r.zG)(t.styles,v.UI((t=>Object.assign(Object.assign({},t),{kind:t.id===e.selectedStyle?"selected":"unselected"})))),tones:(0,r.zG)(s,i.fold((()=>[]),(t=>(0,r.zG)(t.tones,v.UI((n=>Object.assign(Object.assign({},n),{kind:(0,r.zG)(i.fromNullable(e.selectedTonesPerStyle.get(e.selectedStyle)),i.getOrElse((()=>new Set)),(e=>e.has(n.id)?"selected":e.size>=t.maxTones?"disabled":"unselected"))}))))))),roles:t.roles,maxSelectableTones:(0,r.zG)(s,i.fold((()=>3),(e=>e.maxTones))),applyButtonEnabled:!B.LA.Selections.eq.equals(e,t),description:"These voice settings will apply to any text you generate with GrammarlyGO.",roleTypeaheadText:(0,r.zG)(e.selectedRole,i.filter((()=>""===n)),i.chain((e=>i.fromNullable(t.roles.find((t=>t.id===e))))),i.fold((()=>n),(e=>e.label))),dialects:t.dialects,selectedDialect:t.dialects.find((t=>B.LA.Dialect.Id.eq.equals(t.id,e.selectedDialect)))||B.LA.Dialect.american})))))))))}const wa=ee.forwardRef((function({name:e,active:t,onClick:n},i){return ee.createElement("button",{role:"button",tabIndex:0,"aria-label":e,"aria-pressed":t,"data-active":t,onClick:n,ref:i,className:_a},e)})),_a=le.ux.style({display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",height:le.ux.rem(2),borderRadius:le.ux.rem(We.xB),border:`${le.ux.rem(se.yC)} solid transparent`,padding:`'${le.ux.rem(se.yC+se.F2)} ${le.ux.rem(se.x)}'`,backgroundColor:d.BO.Green0,color:d.BO.Green90,$nest:{"&:hover":{backgroundColor:le.ux.color(d.BO.Green10).mix(le.ux.color(d.BO.BlueGray5)).toRGBA().toString(),color:d.BO.Green80},'&[data-active="true"]':{outline:`${le.ux.rem(se.yC)} solid ${d.BO.Green80}`}}}),Ea=({title:e,titleId:t,desc:n,descId:i,...r})=>ee.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",stroke:"transparent","aria-labelledby":t,"aria-describedby":i,...r},n?ee.createElement("desc",{id:i},n):null,e?ee.createElement("title",{id:t},e):null,ee.createElement("path",{d:"M18.5 11.25a.958.958 0 0 1-.064.34l-2.248 4.267a1.009 1.009 0 0 1-.938.643H9.5c-.554 0-1-.446-1-1V10a1 1 0 0 1 .294-.706l4.586-4.587.432.432a.664.664 0 0 1 .188.433l-.016.175-.654 3.151a.5.5 0 0 0 .49.602H18c.274 0 .5.226.5.5v1.25ZM6 9.5a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-.5.5H5a.5.5 0 0 1-.5-.5v-6a.5.5 0 0 1 .5-.5h1Z",stroke:"#646B81",strokeLinejoin:"round"})),Oa=({title:e,titleId:t,desc:n,descId:i,...r})=>ee.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",stroke:"transparent","aria-labelledby":t,"aria-describedby":i,...r},n?ee.createElement("desc",{id:i},n):null,e?ee.createElement("title",{id:t},e):null,ee.createElement("path",{d:"M5 12.75c0-.114.023-.233.065-.34l2.247-4.267.01-.017.007-.017c.155-.357.51-.609.921-.609H14c.554 0 1 .446 1 1V14a1 1 0 0 1-.294.706l-4.586 4.587-.432-.432a.664.664 0 0 1-.188-.433l.016-.175.654-3.151.124-.602H5.5A.503.503 0 0 1 5 14v-1.25Zm12.5 1.75a.5.5 0 0 1-.5-.5V8a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-.5.5h-1Z",stroke:"#646B81"})),Aa=({onKeepClick:e,onRemoveClick:t})=>ee.createElement("div",{className:Ia},ee.createElement("h1",{className:Pa},"Does it sound like you?"),ee.createElement("div",{className:Ra},ee.createElement(re.zx.Primary,{onClick:e,style:Ba},ee.createElement(Ea,null),"Yes, keep it"),ee.createElement(re.zx.Primary,{onClick:t,style:Ba},ee.createElement(Oa,null),"No, remove it"))),Ia=le.ux.style({display:"flex",flexDirection:"column",alignItems:"flex-start"}),Pa=le.ux.style({fontSize:le.ux.rem(.875),lineHeight:le.ux.rem(1.375),fontWeight:700,margin:`0 0 ${le.ux.rem(se.mh)} 0`}),Ra=le.ux.style({display:"flex",alignItems:"center",gap:le.ux.rem(se.x)}),Ba={base:{gap:le.ux.rem(se.F2),padding:`0 ${le.ux.rem(se.x)} 0 ${le.ux.rem(se.F2)}`,color:d.BO.TextBaseDefault,backgroundColor:ae.XY.Surface.Primary.Default},hovered:{color:d.BO.TextBaseDefault,backgroundColor:d.BO.BlueGray5},active:{color:d.BO.TextBaseDefault,backgroundColor:d.BO.BlueGray5}};var Ua=n(17579);const Na={editBtn:"editBtn",cancelBtn:"cancelBtn",saveBtn:"saveBtn"},Ta={base:{backgroundColor:d.BO.BlueGray0}},Ga={gap:0,backgroundImage:"url(https://assets.grammarly.com/cheetah/v1/voice-profile/cheetah-my-voice-bg.svg)",backgroundPosition:"right",backgroundRepeat:"no-repeat",backgroundSize:"auto 100%",$nest:{[`.${Na.editBtn}`]:{opacity:0,pointerEvents:"none",$nest:{"&:focus":{opacity:1,pointerEvents:"auto"}}},[`&:hover .${Na.editBtn}, &:focus .${Na.editBtn}`]:{opacity:1,pointerEvents:"auto"}}},za=e=>le.ux.style({display:"flex",justifyContent:"space-between",marginBottom:e?le.ux.rem(se.x):le.ux.rem(se.yC+se.F2)}),ja=le.ux.style({margin:0,fontSize:le.ux.rem(1.25),lineHeight:le.ux.rem(1.5),fontWeight:700}),Fa=le.ux.style({display:"flex",flexDirection:"row",alignItems:"flex-end",justifyContent:"space-between"}),Da=le.ux.style({display:"flex",flexDirection:"column",gap:le.ux.rem(se.x)}),Va=le.ux.style({display:"flex",flexDirection:"column",gap:le.ux.rem(se.F2)}),Ma=le.ux.style({color:d.BO.TextBaseSubduedColor,fontWeight:400,fontSize:le.ux.rem(.75),lineHeight:le.ux.rem(1.125),margin:0}),La=le.ux.style({display:"flex",alignItems:"center",gap:le.ux.rem(se.x)}),Ka=le.ux.style({width:le.ux.rem(1.5),height:le.ux.rem(1.5),display:"flex",alignItems:"center",justifyContent:"center",$nest:{"& img":{width:le.ux.rem(1),height:le.ux.rem(1)}}}),$a=le.ux.style({display:"flex",flexDirection:"column",gap:le.ux.rem(se.F2)}),Ha=le.ux.style({display:"flex",alignItems:"center",gap:le.ux.rem(se.F2),height:le.ux.rem(1.5),color:d.BO.TextBaseSubduedColor,fontSize:le.ux.rem(.875),lineHeight:le.ux.rem(1.3125),fontWeight:500}),Za=le.ux.style({display:"flex",alignItems:"center",gap:le.ux.rem(se.x)});function Wa({label:e,enabled:t,onChange:n}){return ee.createElement("div",{className:qa},ee.createElement("input",{type:"checkbox",id:"voice-checkbox",checked:t,onChange:n}),ee.createElement("label",{htmlFor:"voice-checkbox"},e))}const qa=le.ux.style({display:"flex",alignItems:"flex-start",$nest:{"& input[type='checkbox']":{margin:`${le.ux.rem(se.W9)} ${le.ux.rem(se.x)} 0 0`,minWidth:le.ux.rem(1),minHeight:le.ux.rem(1),accentColor:oe.Green80,cursor:"pointer"},"& label":{color:ae.XY.Content.Primary.Default,fontWeight:400,fontSize:le.ux.rem(.75),lineHeight:le.ux.rem(1.125),cursor:"pointer"}}}),Ya=({profile:e,activeProfileName:t,activeTagName:n,onCloseButtonClick:s,onKeepClick:o,onRemoveClick:a,onVoiceTagClick:l})=>ee.createElement(re.E2,{id:re.OK.Id.create(e.name),isActive:e.name===i.toNullable(t),className:Xa},e.summary,ee.createElement("div",{className:Ja},e.sections.map((t=>ee.createElement("div",{key:t.name},t.name,ee.createElement("div",{className:el},0===t.tags.length?ee.createElement("div",{className:Qa},"Analyzing your writing..."):t.tags.map((c=>ee.createElement(re.it,{key:c.name,active:(0,r.zG)(n,i.fold(r.jv,(e=>e===c.name))),onCloseButtonClick:s,body:ee.createElement(Aa,{onKeepClick:o,onRemoveClick:()=>a(c.name,e.name,t.name)})},ee.createElement(wa,{name:c.name,active:(0,r.zG)(n,i.fold(r.jv,(e=>e===c.name))),onClick:()=>l(c.name,e.name,t.name)})))))))))),Xa=le.ux.style({fontSize:le.ux.rem(.875),lineHeight:le.ux.rem(1.3125),display:"flex",flexDirection:"column",gap:le.ux.rem(se.qp),paddingTop:le.ux.rem(se.x)}),Qa=le.ux.style({padding:`0 ${le.ux.rem(se.x)}`,background:d.BO.BlueGray0,color:d.BO.TextBaseSubduedColor,borderRadius:le.ux.rem(We.xB),height:le.ux.rem(2),fontSize:le.ux.rem(.875),lineHeight:le.ux.rem(1.3125),display:"flex",justifyContent:"center",alignItems:"center"}),Ja=le.ux.style({display:"flex",flexDirection:"column",gap:le.ux.rem(se.qp)}),el=le.ux.style({marginTop:le.ux.rem(se.x),display:"flex",flexWrap:"wrap",gap:le.ux.rem(se.F2)}),tl=(0,te.xb)((({onEditButtonClick:e,onSaveButtonClick:t,onCancelButtonClick:n,onDialectDropdownChange:s,onRoleDropdownChange:o,userName:a,isEditing:l,selectedRole:c,roles:u,dialects:d,selectedDialect:m})=>ee.createElement(re.Zb,{style:Ga},ee.createElement("div",{className:za(l)},ee.createElement("h1",{className:ja},a),l?null:ee.createElement(re.zx.Secondary,{onClick:e,className:Na.editBtn,style:Ta,size:"small"},"Edit")),l?ee.createElement("div",{className:Fa},ee.createElement("div",{className:Da},0!==u.length&&ee.createElement("div",{className:Va},ee.createElement("h2",{className:Ma},"My role"),ee.createElement(re.Ph,{placeholder:"Select a role...",options:u,selection:i.toUndefined(c),onSelectionChange:o,label:e=>e.id,renderOption:e=>e.id})),ee.createElement("div",{className:Va},ee.createElement("h2",{className:Ma},"I write in"),ee.createElement(re.Ph,{options:d,selection:m,onSelectionChange:s,label:e=>e.label,renderOption:e=>ee.createElement("div",{className:La},ee.createElement("div",{className:Ka},ee.createElement("img",{src:e.iconUrl,alt:""})),e.label)}))),ee.createElement("div",{className:Za},ee.createElement(re.zx.Tertiary,{onClick:n},"Cancel"),ee.createElement(re.zx.Primary,{onClick:t},"Save"))):ee.createElement("div",{className:$a},(0,r.zG)(c,i.fold(r.gn,(e=>ee.createElement("div",{className:Ha},ee.createElement(Ua.N,null),ee.createElement("span",null,e.label))))),ee.createElement("div",{className:Ha},ee.createElement("div",{className:Ka},ee.createElement("img",{src:m.iconUrl,alt:""})),ee.createElement("span",null,m.label)))))),nl=ie.UI.Node.make((({view:e,state:t,notify:n})=>ee.createElement("div",{className:il},ee.createElement(tl,{onEditButtonClick:n({kind:B.ix.Kind.voiceSelectionsEditButtonClick}),onDialectDropdownChange:e=>n({kind:B.ix.Kind.voiceDialectDropdownSelectionChange,dialect:e})(),onRoleDropdownChange:e=>n({kind:B.ix.Kind.voiceRoleDropdownSelectionChange,role:e})(),onSaveButtonClick:n({kind:B.ix.Kind.voiceSelectionsSaveButtonClick}),onCancelButtonClick:n({kind:B.ix.Kind.voiceSelectionsCancelButtonClick}),userName:e("userName"),isEditing:e("isEditing"),selectedRole:e("selectedRole"),selectedDialect:e("selectedDialect"),roles:e("roles"),dialects:e("dialects")}),ee.createElement(re.Zb,{style:rl},ee.createElement(ne.F.div,null,t.pipe(w.U((e=>ee.createElement(ee.Fragment,null,ee.createElement("div",{className:sl},ee.createElement("div",null,ee.createElement("h1",{className:ol},e.title),ee.createElement("h2",{className:al},e.subTitle)),ee.createElement(re.mQ,{key:"Tabs",tabs:e.profiles.map((e=>({id:re.OK.Id.create(e.name),label:e.name}))),activeTabId:re.OK.Id.create(i.toNullable(e.activeProfileName)||""),onActiveTabChange:e=>n({kind:B.ix.Kind.voiceProfileTabChange,profileName:e})()})),e.profiles.map((t=>ee.createElement(Ya,{key:t.name,profile:t,activeProfileName:e.activeProfileName,activeTagName:e.activeTagName,onCloseButtonClick:n({kind:B.ix.Kind.voiceTagPopoverCloseButtonClick}),onKeepClick:n({kind:B.ix.Kind.voiceTagPopoverKeepButtonClick}),onRemoveClick:(e,t,i)=>n({kind:B.ix.Kind.voiceTagPopoverRemoveButtonClick,tagName:e,profileName:t,sectionName:i})(),onVoiceTagClick:(e,t,i)=>n({kind:B.ix.Kind.voiceTagClick,tagName:e,profileName:t,sectionName:i})()})))))))),ee.createElement(re.Z0,null),ee.createElement(ne.F.Fragment,null,t.pipe(w.U((({isEnabledByDefault:e,isEnabledByDefaultLabel:t})=>ee.createElement(Wa,{enabled:e,label:t,onChange:n({kind:B.ix.Kind.applyVoiceToWritingCheckboxChange,checked:!e})}))))))))),il=le.ux.style({display:"flex",flexDirection:"column",gap:le.ux.rem(se.x)}),rl={gap:le.ux.rem(se.mh)},sl=le.ux.style({display:"flex",justifyContent:"space-between",alignItems:"flex-start"}),ol=le.ux.style({fontSize:le.ux.rem(.875),lineHeight:le.ux.rem(1.3125),fontWeight:700,margin:0}),al=le.ux.style({color:d.BO.TextBaseSubduedColor,fontWeight:400,fontSize:le.ux.rem(.75),lineHeight:le.ux.rem(1.125),margin:0});function ll(e){return ie.Z.fromSideEffect((t=>e.notify(t)),e.assistant.state.view((({stagingNewVoiceProfile:e,session:t})=>(0,r.zG)(g.Y(i.Applicative)({sessionVoiceProfile:(0,r.zG)(B.z_.toStarted(t),i.map((e=>e.voiceProfile)),i.chain(B.LA.toNewVoiceProfile)),stagingVoiceProfile:e}),i.fold((()=>({userName:"",title:"",subTitle:"",roles:[],dialects:B.LA.Dialect.all(),selectedDialect:B.LA.Dialect.american,isEnabledByDefault:!0,isEnabledByDefaultLabel:"",profiles:[],activeProfileName:i.none,activeTagName:i.none,isEditing:!1,selectedRole:i.none})),(({sessionVoiceProfile:e,stagingVoiceProfile:t})=>({userName:e.userName,title:e.title,subTitle:e.subTitle,isEnabledByDefault:t.isEnabledByDefault,isEnabledByDefaultLabel:e.isEnabledByDefaultLabel,profiles:t.profiles,roles:(0,r.zG)(cl(t,e),i.fold((()=>e.roles),(t=>e.roles.filter((e=>e.id!==t.id))))),dialects:(0,r.zG)(ul(t,e),(t=>e.dialects.filter((e=>e.id!==t.id)))),selectedRole:cl(t,e),selectedDialect:ul(t,e),activeProfileName:t.activeProfileName,activeTagName:t.activeTagName,isEditing:i.isSome(t.stagingSelections)})))))))}function cl(e,t){return(0,r.zG)(e.stagingSelections,i.chain((e=>e.selectedRole)),i.alt((()=>e.selectedRole)),i.chain((e=>i.fromNullable(t.roles.find((t=>B.LA.Role.Id.eq.equals(t.id,e)))))))}function ul(e,t){return(0,r.zG)(e.stagingSelections,i.fold((()=>e.selectedDialect),(e=>e.selectedDialect)),(e=>t.dialects.find((t=>B.LA.Dialect.Id.eq.equals(t.id,e)))||B.LA.Dialect.american))}const dl=ie.UI.Grid.make((({slots:e})=>ee.createElement("div",{className:gl},e.notifications,e.content))),ml=ie.UI.Union.make("kind",{chat:oo,legacyVoiceProfile:ka,newVoiceProfile:nl,feedbackForm:No}),pl=ie.UI.Knot.make(dl,{content:ml,notifications:Lo}),gl=le.ux.style({position:"relative",padding:le.ux.rem(se.x),paddingTop:0});var hl;function fl(e,t=hl.empty){return ie.Z.composeKnot({content:xl(e,t),notifications:Zo(e)})}function xl(e,t=hl.empty){return ie.Z.composeUnion({chat:mo(e,t.chatFlowOptions),legacyVoiceProfile:Sa(e),newVoiceProfile:ll(e),feedbackForm:Go(e,t.feedbackFormFlowOptions)},(()=>e.assistant.state.view("activeView").view((e=>({kind:"voiceProfile"===e?"newVoiceProfile":"legacyVoiceProfile"===e?"legacyVoiceProfile":"feedbackForm"===e?e:"chat"})))))}!function(e){e.empty={chatFlowOptions:uo.empty,feedbackFormFlowOptions:To.empty}}(hl||(hl={}));var vl=n(13444);const bl=ie.UI.Node.make((({state:e,notify:t})=>{const{ref:n,onMount:i}=Ke.P.useElWatcher(),{ref:r,onMount:s}=Ke.P.useElWatcher(),a=ee.useMemo((()=>n.pipe(S.oA,X.w((e=>c.R(e,"mouseenter").pipe(io.c(Q.of(null).pipe(vl.g(500),o.R(c.R(e,"mouseleave"))))))),l.b(t({kind:B.ix.Kind.creditsInfoHover})))),[n]);Ke.P.useSubscriptionTo(a);const u=ee.useMemo((()=>r.pipe($t.QV(Ht.E),S.oA,l.b((e=>t({kind:B.ix.Kind.mount,name:B.ec.creditsInfoButton,element:e})())))),[r]);return Ke.P.useSubscriptionTo(u),ee.createElement(ne.F.Fragment,null,e.pipe(w.U((({user:e,availability:n})=>{const r=B.a8.isActive(n)?function(e){const t=`${Number(e.promptsRemaining).toLocaleString()}/${Number(e.promptsAllocated).toLocaleString()} prompts left. `,n=B.a8.Active.daysUntilRefillDate(e.refillDate),i=B.a8.Active.hoursUntilRefillDate(e.refillDate);return n>0?t+`Next refill in ${n} ${Jn.pluralize(n,"day","days")}.`:i>0?t+`Next refill in ${i} ${Jn.pluralize(i,"hour","hours")}.`:t+"Next refill in less than an hour."}(n):e.isPremium?"To get more prompts, contact support.":"To get more prompts, upgrade to Premium.",o=B.a8.isActive(n)?`${Number(n.promptsRemaining).toLocaleString()} ${Jn.pluralize(n.promptsRemaining,"prompt","prompts")}`:e.isPremium?"0 prompts":ee.createElement(ee.Fragment,null,"0 prompts. ",ee.createElement("span",{className:kl},"Upgrade"));return e.isPremium&&B.a8.isActive(n)?ee.createElement(ei.u,{title:r},ee.createElement("div",{ref:i,className:Cl},o)):ee.createElement(re.zx.Tertiary,{onClick:t({kind:B.ix.Kind.creditsInfoClick}),title:r,name:"creditsInfo",mount:s},ee.createElement("div",{ref:i},o))}))))})),yl=ie.UI.Union.asOption(bl),Cl=le.ux.style({padding:`${le.ux.rem(se.x)}`,fontSize:le.ux.rem(.75),lineHeight:le.ux.rem(1.125),color:ae.XY.Content.Secondary.Default,cursor:"default"}),kl=le.ux.style({color:oe.Blue60});function Sl(e){const t=e.assistant.state.view((e=>(0,r.zG)(e.availability,i.fromPredicate(B.a8.isActiveOrPassive),i.filter((()=>i.isSome(B.z_.toStarted(e.session)))))));return ie.Z.composeOption(function(e,t,n){return ie.Z.fromSideEffect((t=>e.notify(t)),(0,r.zG)(Y.aj([t,n]),w.U((([e,t])=>({user:e,availability:t})))))}(e,e.assistant.state.view("user"),t.pipe(S.oA)),(()=>u.h.combine(t,e.assistant.state.view("activeView"),((e,t)=>(0,r.zG)(e,i.filter((()=>"voiceProfile"!==t&&"feedbackForm"!==t)))))))}const wl=ie.UI.Node.make((({view:e,notify:t})=>ee.createElement(re.zx.Tertiary,{className:Al,onClick:t({kind:B.ix.Kind.toolbarVoiceButtonClick}),name:"toolbarVoiceProfile"},ee.createElement(re.uA,{className:Il}),ee.createElement(ne.F.span,null,e("styleLabel"))))),_l="voiceBtn",El=d.Es.buttonOverrideSpecificity({padding:0,paddingRight:le.ux.rem(se.x),paddingLeft:le.ux.rem(se.F2),gap:le.ux.rem(se.x),flexWrap:"nowrap",$nest:{"& > i":Object.assign({},d.Es.iconSizeRems(1.5))}},_l),Ol={stroke:oe.BlueGray60},Al=le.ux.joinClasses([_l,le.ux.style(El)]),Il=le.ux.style(Ol),Pl=ie.UI.Node.make((({notify:e,view:t})=>ee.createElement("div",{className:Rl},ee.createElement(re.zx.Tertiary,{compact:!0,onClick:e({kind:B.ix.Kind.toolbarGoBackButtonClick}),name:"goBack"},ee.createElement(He.JO.Arrow,{direction:He.n4.left})),ee.createElement(ne.F.Fragment,null,t("activeViewLabel").pipe(w.U(i.fold(r.gn,(e=>ee.createElement("span",null,e))))))))),Rl=le.ux.style({display:"flex",alignItems:"center",gap:le.ux.rem(se.x),color:oe.BlueGray60,fontWeight:400,fontSize:le.ux.rem(.75),lineHeight:le.ux.rem(1.125)}),Bl="bnrGr",Ul="bnrGo",Nl="goLogo",Tl="betaBadge",Gl="sepAndRight",zl=le.ux.style({display:"flex",alignItems:"center",justifyContent:"space-between",width:le.ux.percent(100),gap:le.ux.rem(se.x),position:"relative",overflow:"hidden"}),jl=le.ux.style({display:"flex",flexDirection:"row",alignItems:"center",gap:le.ux.rem(se.x)}),Fl={height:le.ux.rem(1),borderLeft:`1px solid ${oe.BlueGray20}`},Dl=le.ux.style(Fl),Vl=le.ux.style({display:"flex",flexDirection:"row",alignItems:"center"}),Ml=le.ux.joinClasses([le.ux.style({display:"flex",alignItems:"center",justifyContent:"center",height:le.ux.rem(2),width:le.ux.rem(2.375)}),Nl]),Ll=le.ux.style({display:"flex",flexDirection:"row",alignItems:"center"}),Kl=Tl,$l=le.ux.style({width:le.ux.rem(10),overflowWrap:"normal",whiteSpace:"normal",textAlign:"left"}),Hl=le.ux.style(Object.assign(Object.assign({},Fl),{marginLeft:le.ux.rem(se.x),marginRight:le.ux.rem(se.F2)})),Zl=le.ux.joinClasses([le.ux.style({display:"flex",alignItems:"center"}),Gl]),Wl=le.ux.style({display:"flex",flexDirection:"row",alignItems:"center",height:le.ux.rem(2)}),ql=e=>le.ux.rem(79*(null!=e?e:1)/16),Yl=le.ux.joinClasses([le.ux.style({width:ql(),height:le.ux.rem(1),paddingTop:le.ux.rem(se.W9),marginLeft:le.ux.rem(se.F2+se.yC)}),Bl]),Xl=le.ux.joinClasses([le.ux.style({minWidth:le.ux.rem(1.625)}),Ul]),Ql=le.ux.keyframes({from:{opacity:0},to:{opacity:1}}),Jl=le.ux.keyframes({"0%":{opacity:0},"99%":{opacity:0},"100%":{opacity:1}}),ec=le.ux.keyframes({from:{opacity:1,transform:"translateX(0)"},to:{opacity:0,transform:"translateX(-50%)"}}),tc=le.ux.keyframes({from:{transform:"translateX(0)"},to:{transform:`translateX(${ql(-1)})`}}),nc=le.ux.style({$nest:{[`.${Gl}`]:{animation:`${Ql} 300ms cubic-bezier(0.52, 0, 0.23, 1)`},[`.${Tl}`]:{animation:`${Ql} 300ms cubic-bezier(0.52, 0, 0.23, 1)`},[`.${Nl}`]:{animation:`${Jl} 300ms linear`}}}),ic=le.ux.style({position:"absolute",top:0,zIndex:1,$nest:{[`.${Bl}`]:{animation:`${ec} 300ms cubic-bezier(0.52, 0, 0.23, 1)`},[`.${Ul}`]:{animation:`${tc} 300ms cubic-bezier(0.52, 0, 0.23, 1)`}}}),rc=ie.UI.Grid.make((({slots:e})=>ee.createElement("div",{className:jl},e.back,ee.createElement("div",{className:Dl}),e.voice))),sc=ie.UI.Knot.make(rc,{back:Pl,voice:wl}),oc=()=>ee.createElement("div",{className:Ll},ee.createElement(re.T3,{className:Ml}),ee.createElement(ei.u,{title:ee.createElement("div",{className:$l},"GrammarlyGO is still in beta testing. Please check for any inaccuracies.")},ee.createElement(re.Ct,{className:Kl},"Beta"))),ac=ie.UI.Node.make(oc),lc=ie.UI.Composite.make(ie.UI.Grid.make((({slots:e})=>ee.createElement("div",{className:Vl},ee.createElement(oc,null),ee.createElement("div",{className:Zl},ee.createElement("div",{className:Hl}),e.content)))),wl),cc=ie.UI.Node.make((()=>ee.createElement("div",{className:Wl},ee.createElement(re.Pe,{className:Yl}),ee.createElement(re.T3,{className:Xl})))),uc=ie.UI.Union.make("kind",{goBanner:cc,goLogoOnly:ac,goLogoAndVoiceButton:lc,backButton:Pl,backButtonAndVoiceButton:sc}),dc=ie.UI.Transition.make({toolbarEntry:nc},{bannerExit:ic}),mc=ie.UI.Grid.make((({slots:e})=>ee.createElement("div",{className:zl},e.left,e.right))),pc=ie.UI.Knot.make(mc,{left:ie.UI.Animated.make(dc,uc),right:yl});var gc=n(93756),hc=n(38062),fc=n(23063);function xc(e){return ie.Z.composeKnot({left:ie.Z.animatingFlow(vc(e),((e,t)=>(0,r.zG)(e,i.filter((e=>"goBanner"===e.kind&&("goLogoOnly"===t.kind||"goLogoAndVoiceButton"===t.kind))),i.map((()=>gc.Hk("bannerExit","toolbarEntry")))))),right:Sl(e)})}function vc(e){const t=e.assistant.state.view((({activeView:e,session:t})=>(0,r.zG)(B.z_.toStarted(t),i.fold((()=>"goLogoOnly"),(()=>"loadingError"===e?"goLogoOnly":"loading"===e||"beforeResults"===e||"afterResults"===e?"goLogoAndVoiceButton":"voiceProfile"===e||"feedbackForm"===e||"legacyVoiceProfile"===e?"backButton":"actionSelected"===e?"backButtonAndVoiceButton":(0,P.L0)(e))))));return ie.Z.composeUnion({goBanner:()=>Q.of(null),goLogoOnly:()=>Q.of(null),goLogoAndVoiceButton:kc(e),backButton:bc(e),backButtonAndVoiceButton:Cc(e)},(()=>hc.S3(e.assistant.state.view("contextualActions").pipe(S.oA,fc.q(1),X.w((()=>L.H(1500)))),t.pipe(a.h((e=>"goLogoOnly"!==e&&"goLogoAndVoiceButton"!==e)))).pipe(io.c(t),J.O("goBanner"),w.U((e=>({kind:e}))))))}function bc(e){return ie.Z.fromSideEffect((t=>e.notify(t)),e.assistant.state.view("activeView").view((e=>({activeViewLabel:"voiceProfile"===e?i.some("My voice"):"feedbackForm"===e?i.some("Share your thoughts"):i.none}))))}function yc(e){return(0,r.zG)(e,i.fold((()=>""),(e=>(0,r.zG)(B.LA.toLegacyVoiceProfile(e),i.fold((()=>"My voice"),(e=>(0,r.zG)(i.fromNullable(e.styles.find((t=>B.LA.Style.Id.eq.equals(t.id,e.selectedStyle)))),i.fold((()=>""),(e=>e.label)))))))))}function Cc(e){return ie.Z.fromSideEffect((t=>e.notify(t.action)),e.assistant.state.view("session").view((0,r.ls)(B.z_.toStarted,i.map((e=>e.voiceProfile)))).pipe(w.U((e=>({back:{activeViewLabel:i.none},voice:{styleLabel:yc(e)}})))))}function kc(e){return ie.Z.fromSideEffect((t=>e.notify(t)),e.assistant.state.view("session").view((0,r.ls)(B.z_.toStarted,i.map((e=>e.voiceProfile)))).pipe(w.U((e=>({kind:"goLogoAndVoiceButton",styleLabel:yc(e)})))))}const Sc=ie.UI.Knot.make(ut,{toolbar:pc,content:pl});function wc(e){return ie.UI.Knot.make(ie.UI.Grid.make((({slots:t})=>ee.createElement(Wt.Provider,{value:{notifyUnmount:t=>e.notify(t)}},t.assistant))),{assistant:Sc})}var _c;function Ec(e,t=_c.empty){return ie.Z.composeKnot({assistant:ie.Z.composeKnot({root:ht(e),content:fl(e,Object.assign(Object.assign({},t.contentFlowOptions),{chatFlowOptions:{assistantMaxHeight:u.h.combine(t.contentFlowOptions.chatFlowOptions.assistantMaxHeight,e.position.state,((e,t)=>(0,r.zG)(e,i.alt((()=>(0,r.zG)(t,m,i.chain((e=>e.assistantMaxHeight))))))))}})),toolbar:xc(e)})})}!function(e){e.empty={contentFlowOptions:hl.empty}}(_c||(_c={}));ie.UI.Knot.make(vt,{toolbar:pc,content:pl});var Oc;!function(e){e.empty={fixedContainerFlowOptions:bt.empty,contentFlowOptions:hl.empty}}(Oc||(Oc={}))},56133:(e,t,n)=>{n.d(t,{l:()=>d,Q:()=>c});var i=n(27378),r=n(74204),s=n(5114),o=n(57050),a=n(37360),l=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n};const c=e=>{var{placement:t,onMount:n,onMaxSizeChange:c,children:u}=e,d=l(e,["placement","onMount","onMaxSizeChange","children"]);const[m,p]=i.useState(null),g="initial"===t.kind?t:void 0,h=(0,a.gM)(c),f=(0,a.n4)(),{styles:x}=(0,r.D)(null==g?void 0:g.referenceElement,m,{placement:null==g?void 0:g.placement,modifiers:[h,{name:"preventOverflow",options:{padding:5,mainAxis:!0,altAxis:!0,tether:!1}},f,...(0,o.zG)((null==g?void 0:g.offset)||s.none,s.fold((()=>[]),(e=>[{name:"offset",options:{offset:e}}])))]});return i.createElement("div",Object.assign({ref:e=>{p(e),e&&e!==m&&n(e)},style:"initial"===t.kind?x.popper:{position:"fixed",top:t.referencePosition.top,left:t.referencePosition.left,bottom:t.referencePosition.bottom,right:t.referencePosition.right,transform:`translate(${t.translation.x}px, ${t.translation.y}px)`},tabIndex:0},d),u)};var u=n(38983);const d=i.createContext({portalContainer:u.h.create(s.none)})},62080:(e,t,n)=>{n.d(t,{vw:()=>X,Ct:()=>De,zx:()=>G,Zb:()=>St,Ol:()=>Et,j4:()=>_,xx:()=>He,XR:()=>C,h_:()=>nt,dL:()=>st,CT:()=>c,T3:()=>v,rN:()=>y,Pe:()=>b,k8:()=>u,L3:()=>a,Ho:()=>p,R6:()=>k,kc:()=>x,J2:()=>pt,PG:()=>Ct,Ph:()=>Fe,cv:()=>g,Z0:()=>wt,OJ:()=>S,r7:()=>E,wN:()=>d,OK:()=>ot,E2:()=>ct,mQ:()=>lt,b:()=>H,it:()=>xt,pY:()=>Se,qn:()=>o,uA:()=>s,T6:()=>h,P_:()=>T});var i=n(27378),r=n(31278);const s=e=>i.createElement(r.a1,Object.assign({width:"24",height:"24",viewBox:"0 0 24 24",fill:"none"},e),i.createElement("path",{d:"M12 7L12 17",strokeLinecap:"round"}),i.createElement("path",{d:"M9 9L9 15",strokeLinecap:"round"}),i.createElement("path",{d:"M15 9L15 15",strokeLinecap:"round"}),i.createElement("path",{d:"M18 11L18 13",strokeLinecap:"round"}),i.createElement("path",{d:"M6 11L6 13",strokeLinecap:"round"})),o=e=>i.createElement(r.a1,Object.assign({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},e),i.createElement("rect",{width:"16",height:"16",rx:"2",fill:"inherit",stroke:"none"}),i.createElement("path",{d:"M3 7L3 9",stroke:"white",fill:"none",strokeLinecap:"round"}),i.createElement("path",{d:"M5.5 5.5L5.5 10.5",stroke:"white",fill:"none",strokeLinecap:"round"}),i.createElement("path",{d:"M8 3L8 13",stroke:"white",fill:"none",strokeLinecap:"round"}),i.createElement("path",{d:"M10.5 5.5L10.5 10.5",stroke:"white",fill:"none",strokeLinecap:"round"}),i.createElement("path",{d:"M13 7L13 9",stroke:"white",fill:"none",strokeLinecap:"round"})),a=e=>i.createElement(r.a1,Object.assign({width:"12",height:"15",viewBox:"0 0 12 15",fill:"#99A0B3"},e),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.5 0.5C3.67157 0.5 3 1.17157 3 2V3H0.5C0.223858 3 0 3.22386 0 3.5C0 3.77614 0.223858 4 0.5 4H1.04536L1.82983 12.237C1.95203 13.5201 3.02968 14.5 4.31857 14.5H7.68143C8.97032 14.5 10.048 13.5201 10.1702 12.237L10.9546 4H11.5C11.7761 4 12 3.77614 12 3.5C12 3.22386 11.7761 3 11.5 3H9V2C9 1.17157 8.32843 0.5 7.5 0.5H4.5ZM8 3V2C8 1.72386 7.77614 1.5 7.5 1.5H4.5C4.22386 1.5 4 1.72386 4 2V3H8ZM2.04988 4H9.95012L9.17467 12.1422C9.10135 12.9121 8.45476 13.5 7.68143 13.5H4.31857C3.54524 13.5 2.89865 12.9121 2.82533 12.1422L2.04988 4Z",stroke:"none"}));var l=n(13578);const c=e=>i.createElement(r.a1,Object.assign({width:"24",height:"24",viewBox:"0 0 24 24",fill:"none"},e),i.createElement("path",{d:"M14 11.5H16.7929L8.92289 19.37L10.4851 13.1213L10.6404 12.5H10H7.20711L15.0771 4.62999L13.5149 10.8787L13.3596 11.5H14Z",stroke:l.XY.Content.Secondary.Default,strokeMiterlimit:"4.25735"})),u=e=>i.createElement(r.a1,Object.assign({width:"24",height:"24",viewBox:"0 0 24 24",fill:"none"},e),i.createElement("rect",{x:"4.5",y:"4.5",width:"6",height:"6",rx:"1.5",stroke:l.XY.Content.Secondary.Default}),i.createElement("rect",{x:"4.5",y:"13.5",width:"6",height:"6",rx:"1.5",stroke:l.XY.Content.Secondary.Default}),i.createElement("rect",{x:"13.5",y:"4.5",width:"6",height:"6",rx:"1.5",stroke:l.XY.Content.Secondary.Default}),i.createElement("path",{d:"M14.5513 15.8162L12.9269 16.3577C12.7902 16.4033 12.7902 16.5967 12.9269 16.6423L14.5513 17.1838C15.1485 17.3828 15.6172 17.8515 15.8162 18.4487L16.3577 20.0731C16.4033 20.2098 16.5967 20.2098 16.6423 20.0731L17.1838 18.4487C17.3828 17.8515 17.8515 17.3828 18.4487 17.1838L20.0731 16.6423C20.2098 16.5967 20.2098 16.4033 20.0731 16.3577L18.4487 15.8162C17.8515 15.6172 17.3828 15.1485 17.1838 14.5513L16.6423 12.9269C16.5967 12.7902 16.4033 12.7902 16.3577 12.9269L15.8162 14.5513C15.6172 15.1485 15.1485 15.6172 14.5513 15.8162Z",fill:l.XY.Content.Secondary.Default,stroke:l.XY.Content.Secondary.Default})),d=e=>i.createElement(r.a1,Object.assign({width:"32",height:"32",fill:l.XY.Content.Secondary.Default,viewBox:"0 0 32 32"},e),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M24 16a8 8 0 1 1-16 0 8 8 0 0 1 16 0Zm1 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-11-3a1 1 0 0 0-1 1v4a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1v-4a1 1 0 0 0-1-1h-4Z",stroke:"none"})),m=e=>i.createElement(r.a1,Object.assign({width:"12",height:"15",viewBox:"0 0 12 15",fill:"#99A0B3"},e),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0.5 0.5C0.776142 0.5 1 0.723858 1 1V2H11.5C11.7022 2 11.8845 2.12182 11.9619 2.30866C12.0393 2.4955 11.9966 2.71055 11.8536 2.85355L8.70711 6L11.8536 9.14645C11.9966 9.28945 12.0393 9.5045 11.9619 9.69134C11.8845 9.87818 11.7022 10 11.5 10H1V14.5C1 14.7761 0.776142 15 0.5 15C0.223858 15 0 14.7761 0 14.5V1C0 0.723858 0.223858 0.5 0.5 0.5ZM1 9H10.2929L7.64645 6.35355C7.45118 6.15829 7.45118 5.84171 7.64645 5.64645L10.2929 3H1V9Z",stroke:"none"})),p=e=>i.createElement(r.a1,Object.assign({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},e),i.createElement("circle",{cx:"8",cy:"8",r:"5",stroke:"#C2C6D4",strokeWidth:"2"}),i.createElement("path",{d:"M13 8C13 8.76694 12.8236 9.5236 12.4844 10.2114C12.1452 10.8993 11.6523 11.4999 11.0438 11.9668C10.4354 12.4336 9.72765 12.7543 8.97545 12.9039C8.22325 13.0535 7.44671 13.0281 6.7059 12.8296",stroke:"#05735A",strokeWidth:"2",strokeLinecap:"round"})),g=e=>i.createElement(r.a1,Object.assign({width:"12",height:"12",viewBox:"0 0 12 12",fill:"none"},e),i.createElement("path",{stroke:"#fff",strokeLinecap:"round",strokeWidth:".857",d:"m4 4 2 2m2 2L6 6m0 0 2-2M6 6 4 8"})),h=e=>i.createElement(r.a1,Object.assign({width:"18",height:"18",viewBox:"0 0 18 18",fill:"#99A0B3"},e),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.0607 3.64286C9.5893 2.78571 8.4107 2.78571 7.93926 3.64286L3.16592 12.3214C2.69448 13.1786 3.28378 14.25 4.22667 14.25H13.7733C14.7162 14.25 15.3055 13.1786 14.8341 12.3214L10.0607 3.64286ZM8.25 6C8.25 5.58579 8.58579 5.25 9 5.25C9.41421 5.25 9.75 5.58579 9.75 6V9.75C9.75 10.1642 9.41421 10.5 9 10.5C8.58579 10.5 8.25 10.1642 8.25 9.75V6ZM9.75 12C9.75 12.4142 9.41421 12.75 9 12.75C8.58579 12.75 8.25 12.4142 8.25 12C8.25 11.5858 8.58579 11.25 9 11.25C9.41421 11.25 9.75 11.5858 9.75 12Z",stroke:"none"}));var f=n(68200);const x=e=>i.createElement(r.a1,Object.assign({width:"18",height:"18",viewBox:"0 0 18 18",fill:f.BO.BrandGreen60},e),i.createElement("path",{d:"M17.1056 9.44721L0.992696 17.5037C0.607324 17.6963 0.174955 17.3439 0.285972 16.9276L1.83393 11.1228C1.93505 10.7436 2.24864 10.4586 2.63576 10.394L9.52041 9.2466C9.79894 9.20018 9.79894 8.79982 9.52041 8.7534L2.63576 7.60596C2.24864 7.54144 1.93505 7.25644 1.83393 6.87723L0.285971 1.07239C0.174955 0.656082 0.607322 0.303661 0.992694 0.496347L17.1056 8.55279C17.4741 8.73705 17.4741 9.26295 17.1056 9.44721Z",stroke:"none"})),v=e=>i.createElement(r.a1,Object.assign({width:"26",height:"12",viewBox:"0 0 26 12",fill:f.BO.BrandGreen60},e),i.createElement("path",{d:"M19.3727 0.000327934C16.1036 0.000327934 13.4619 2.6865 13.4619 6.00016C13.4619 9.31383 16.1081 12 19.3727 12C22.6374 12 25.2836 9.31474 25.2836 6.00016C25.2836 2.68559 22.6374 0.000327934 19.3727 0.000327934ZM19.3727 9.73428C17.3867 9.73428 15.7766 8.06247 15.7766 6.00016C15.7766 3.93786 17.3867 2.26604 19.3727 2.26604C21.3587 2.26604 22.9688 3.93786 22.9688 6.00016C22.9688 8.06247 21.3587 9.73428 19.3727 9.73428Z",stroke:"none"}),i.createElement("path",{d:"M12.6746 6.42151H7.39304V8.29493H8.68981C9.01927 8.30238 9.34872 8.28019 9.67419 8.22864L9.69144 8.24589C9.08392 9.13311 7.98875 9.75788 6.70651 9.75788C4.63967 9.75788 2.99964 8.11512 2.99964 5.9938C2.99964 3.87247 4.63967 2.23062 6.70651 2.23062C7.30404 2.23157 7.89242 2.3776 8.42105 2.65615C8.94969 2.93471 9.40278 3.33745 9.74139 3.82979L11.593 2.55844C11.0537 1.76195 10.3255 1.11146 9.47342 0.665066C8.62136 0.218676 7.672 -0.00970839 6.71014 0.000316333C5.92081 -0.00586192 5.13814 0.145157 4.40777 0.444568C3.6774 0.74398 3.01395 1.18579 2.45608 1.74425C1.89822 2.3027 1.45712 2.96663 1.15848 3.69731C0.859842 4.428 0.709651 5.21083 0.716666 6.00015C0.716666 9.35378 3.34108 12 6.60571 12C8.60354 12 10.2626 10.8658 10.9192 9.61622L10.9519 9.63347C10.8546 10.0093 10.8049 10.3958 10.8039 10.784V11.7221L12.6755 11.7167V6.42242L12.6746 6.42151Z",stroke:"none"})),b=e=>i.createElement(r.a1,Object.assign({width:"79",height:"15",viewBox:"0 0 79 15",fill:l.XY.Content.Secondary.Default},e),i.createElement("path",{stroke:"none",d:"M7.76927 3.34994C7.12351 3.34994 6.60106 3.87239 6.60106 4.50309V4.51815C5.97131 3.82626 5.21824 3.28876 3.94178 3.28876C2.05251 3.28782 0.284668 4.67159 0.284668 7.13037V7.16143C0.284668 9.60515 2.02144 11.004 3.94272 11.004C5.18717 11.004 5.94118 10.4966 6.63213 9.66634V10.0664C6.63213 11.5415 5.87906 12.3106 4.28066 12.3106C3.40427 12.3106 2.68226 12.1261 2.00638 11.8192C1.89907 11.7731 1.77575 11.742 1.62231 11.742C1.09987 11.742 0.669676 12.1722 0.669676 12.6946C0.669676 13.1248 0.931369 13.4477 1.3305 13.6011C2.29914 13.9852 3.25177 14.1697 4.34279 14.1697C5.94118 14.1697 7.12445 13.8318 7.89353 13.0636C8.58541 12.3718 8.93841 11.2958 8.93841 9.82072V4.51721C8.93841 3.87145 8.41597 3.349 7.77021 3.349L7.76927 3.34994ZM6.63213 7.16143C6.63213 8.28351 5.75574 9.06765 4.6186 9.06765C3.48146 9.06765 2.62013 8.29951 2.62013 7.16143V7.13037C2.62013 6.00829 3.48052 5.22415 4.6186 5.22415C5.75668 5.22415 6.63213 6.00829 6.63213 7.13037V7.16143Z"}),i.createElement("path",{stroke:"none",d:"M14.3577 3.34988C13.6658 3.34988 13.1133 4.0879 12.7744 4.88709V4.51809C12.7744 3.87233 12.252 3.34988 11.6062 3.34988C10.9604 3.34988 10.438 3.87233 10.438 4.51809V10.6039C10.438 11.2496 10.9604 11.7721 11.6062 11.7721C12.252 11.7721 12.7744 11.2496 12.7744 10.6039V8.42183C12.7744 6.76224 13.4352 5.85479 14.6185 5.57898C15.0948 5.47167 15.4949 5.10266 15.4949 4.48797C15.4949 3.82714 15.0797 3.35083 14.3577 3.35083V3.34988Z"}),i.createElement("path",{stroke:"none",d:"M19.5002 3.34988C18.4092 3.34988 17.61 3.50332 16.872 3.78008C16.5029 3.91845 16.2422 4.27146 16.2422 4.68659C16.2422 5.22409 16.6724 5.63923 17.2108 5.63923C17.3181 5.63923 17.4104 5.62416 17.5488 5.57804C17.994 5.43966 18.5174 5.34741 19.1622 5.34741C20.3304 5.34741 20.9301 5.88491 20.9301 6.85355V6.99193C20.3464 6.79237 19.7468 6.65399 18.9165 6.65399C16.9651 6.65399 15.5964 7.48425 15.5964 9.28221V9.31328C15.5964 10.9427 16.872 11.8342 18.4242 11.8342C19.5614 11.8342 20.3455 11.4191 20.9141 10.7893V10.8044C20.9141 11.2957 21.3593 11.773 22.0361 11.773C22.6659 11.773 23.1733 11.2816 23.1733 10.6509V6.90062C23.1733 5.7936 22.8965 4.88709 22.2818 4.2724C21.6982 3.68877 20.7757 3.34988 19.5002 3.34988ZM20.9602 8.77483C20.9602 9.62016 20.2222 10.2198 19.1312 10.2198C18.3781 10.2198 17.8557 9.85078 17.8557 9.22103V9.18996C17.8557 8.45195 18.4703 8.05282 19.4691 8.05282C20.0377 8.05282 20.5601 8.17614 20.9602 8.36064V8.77577V8.77483Z"}),i.createElement("path",{stroke:"none",d:"M34.4752 3.28764C33.3531 3.28764 32.4927 3.7489 31.7698 4.59422C31.3396 3.76396 30.5253 3.28764 29.4494 3.28764C28.2661 3.28764 27.5592 3.9174 27.0207 4.60929V4.51703C27.0207 3.87127 26.4983 3.34883 25.8525 3.34883C25.2068 3.34883 24.6843 3.87127 24.6843 4.51703V10.6037C24.6843 11.2495 25.2068 11.7719 25.8525 11.7719C26.4983 11.7719 27.0207 11.2495 27.0207 10.6037V7.08407C27.0207 5.978 27.5582 5.40848 28.4346 5.40848C29.311 5.40848 29.8024 5.97705 29.8024 7.08407V10.6037C29.8024 11.2495 30.3248 11.7719 30.9706 11.7719C31.6164 11.7719 32.1388 11.2495 32.1388 10.6037V7.08407C32.1388 5.978 32.6763 5.40848 33.5527 5.40848C34.4291 5.40848 34.9205 5.97705 34.9205 7.08407V10.6037C34.9205 11.2495 35.4429 11.7719 36.0887 11.7719C36.7344 11.7719 37.2569 11.2495 37.2569 10.6037V6.31594C37.2569 4.33347 36.212 3.28858 34.4752 3.28858V3.28764Z"}),i.createElement("path",{stroke:"none",d:"M48.5558 3.28764C47.4337 3.28764 46.5733 3.7489 45.8504 4.59422C45.4202 3.76396 44.6059 3.28764 43.53 3.28764C42.3467 3.28764 41.6397 3.9174 41.1013 4.60929V4.51703C41.1013 3.87127 40.5789 3.34883 39.9331 3.34883C39.2873 3.34883 38.7649 3.87127 38.7649 4.51703V10.6037C38.7649 11.2495 39.2873 11.7719 39.9331 11.7719C40.5789 11.7719 41.1013 11.2495 41.1013 10.6037V7.08407C41.1013 5.978 41.6388 5.40848 42.5152 5.40848C43.3916 5.40848 43.883 5.97705 43.883 7.08407V10.6037C43.883 11.2495 44.4054 11.7719 45.0512 11.7719C45.6969 11.7719 46.2194 11.2495 46.2194 10.6037V7.08407C46.2194 5.978 46.7569 5.40848 47.6333 5.40848C48.5097 5.40848 49.001 5.97705 49.001 7.08407V10.6037C49.001 11.2495 49.5235 11.7719 50.1692 11.7719C50.815 11.7719 51.3374 11.2495 51.3374 10.6037V6.31594C51.3374 4.33347 50.2926 3.28858 48.5558 3.28858V3.28764Z"}),i.createElement("path",{stroke:"none",d:"M56.11 3.34988C55.019 3.34988 54.2198 3.50332 53.4818 3.78008C53.1128 3.91845 52.8521 4.27146 52.8521 4.68659C52.8521 5.22409 53.2822 5.63923 53.8207 5.63923C53.928 5.63923 54.0203 5.62416 54.1586 5.57804C54.6039 5.43966 55.1273 5.34741 55.7721 5.34741C56.9403 5.34741 57.5399 5.88491 57.5399 6.85355V6.99193C56.9563 6.79237 56.3567 6.65399 55.5264 6.65399C53.5741 6.65399 52.2063 7.48425 52.2063 9.28221V9.31328C52.2063 10.9427 53.4818 11.8342 55.0341 11.8342C56.1712 11.8342 56.9554 11.4191 57.5239 10.7893V10.8044C57.5239 11.2957 57.9692 11.773 58.646 11.773C59.2758 11.773 59.7831 11.2816 59.7831 10.6509V6.90062C59.7831 5.7936 59.5064 4.88709 58.8917 4.2724C58.3081 3.68877 57.3856 3.34988 56.11 3.34988ZM57.5701 8.77483C57.5701 9.62016 56.832 10.2198 55.741 10.2198C54.988 10.2198 54.4655 9.85078 54.4655 9.22103V9.18996C54.4655 8.45195 55.0802 8.05282 56.079 8.05282C56.6475 8.05282 57.17 8.17614 57.5701 8.36064V8.77577V8.77483Z"}),i.createElement("path",{stroke:"none",d:"M65.1976 3.34988C64.5057 3.34988 63.9522 4.0879 63.6142 4.88709V4.51809C63.6142 3.87233 63.0918 3.34988 62.446 3.34988C61.8003 3.34988 61.2778 3.87233 61.2778 4.51809V10.6039C61.2778 11.2496 61.8003 11.7721 62.446 11.7721C63.0918 11.7721 63.6142 11.2496 63.6142 10.6039V8.42183C63.6142 6.76224 64.2751 5.85479 65.4583 5.57898C65.9346 5.47167 66.3347 5.10266 66.3347 4.48797C66.3347 3.82714 65.9196 3.35083 65.1976 3.35083V3.34988Z"}),i.createElement("path",{stroke:"none",d:"M68.2759 0.367645C67.6301 0.367645 67.1077 0.890089 67.1077 1.53585V10.6038C67.1077 11.2495 67.6301 11.772 68.2759 11.772C68.9216 11.772 69.4441 11.2495 69.4441 10.6038V1.53585C69.4441 0.890089 68.9216 0.367645 68.2759 0.367645Z"}),i.createElement("path",{stroke:"none",d:"M77.1111 3.34988C76.5115 3.34988 76.1736 3.74901 75.9891 4.24133L74.2673 9.02146L72.4844 4.22627C72.2849 3.67276 71.9469 3.34988 71.3624 3.34988C70.7166 3.34988 70.2092 3.81114 70.2092 4.47196C70.2092 4.6254 70.2704 4.85603 70.3325 5.00947L73.1453 11.5264L73.0681 11.7109C72.8525 12.126 72.6529 12.2023 72.2378 12.2023C72.0684 12.2023 71.946 12.1712 71.7464 12.11C71.6542 12.0789 71.5469 12.0488 71.3624 12.0488C70.8861 12.0488 70.4399 12.4329 70.4399 13.0015C70.4399 13.57 70.8399 13.8468 71.1779 13.9701C71.5619 14.1085 71.9309 14.1857 72.4534 14.1857C73.8522 14.1857 74.5432 13.5559 75.235 11.8803L78.109 4.97935C78.1551 4.87203 78.2163 4.61034 78.2163 4.42584C78.2163 3.81114 77.7089 3.34988 77.1093 3.34988H77.1111Z"})),y=()=>i.createElement("svg",{width:"240",height:"35",viewBox:"0 0 240 35",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("path",{d:"M209.923 15.8961H197.325V20.5059H200.418C201.204 20.5238 201.989 20.4701 202.766 20.3428L202.807 20.3852C201.358 22.5683 198.746 24.1056 195.687 24.1056C190.757 24.1056 186.845 20.0635 186.845 14.8437C186.845 9.62393 190.757 5.58174 195.687 5.58174C197.113 5.58398 198.514 5.94373 199.775 6.62748C201.035 7.31123 202.116 8.30558 202.926 9.51667L207.343 6.39063C206.054 4.42875 204.315 2.82438 202.279 1.72725C200.245 0.627883 197.977 0.0692616 195.685 0.0960754C193.807 0.080434 191.94 0.449124 190.2 1.18651C188.461 1.92165 186.88 3.00985 185.55 4.38406C184.22 5.75827 183.169 7.39168 182.456 9.19044C181.746 10.9892 181.384 12.9153 181.402 14.8593C181.402 23.1113 187.662 29.6226 195.449 29.6226C200.219 29.6226 204.172 26.8317 205.738 23.7571L205.816 23.7995C205.584 24.7246 205.465 25.6743 205.463 26.6306V28.9388L209.927 28.9254H209.923V15.8984V15.8961Z",fill:"white"}),i.createElement("path",{d:"M225.901 0C218.113 0 211.801 6.62972 211.801 14.8102C211.801 22.9906 218.113 29.6204 225.901 29.6204C233.688 29.6204 240 22.9906 240 14.8102C240 6.62972 233.688 0 225.901 0ZM226.018 24.1191C221.187 24.1191 217.271 20.0054 217.271 14.9308C217.271 9.85632 221.187 5.74263 226.018 5.74263C230.848 5.74263 234.765 9.85632 234.765 14.9308C234.765 20.0054 230.848 24.1191 226.018 24.1191Z",fill:"white"}),i.createElement("path",{d:"M17.223 8.39048C15.737 8.39048 14.5348 9.63062 14.5348 11.1277V11.1635C13.0857 9.52113 11.3528 8.24524 8.41547 8.24524C4.06802 8.24301 0 11.5277 0 17.3642V17.4379C0 23.2386 3.99653 26.5591 8.41763 26.5591C11.2813 26.5591 13.0164 25.3547 14.6063 23.3839V24.3335C14.6063 27.835 12.8734 29.6606 9.19528 29.6606C7.1786 29.6606 5.51717 29.2226 3.96188 28.4942C3.71494 28.3847 3.43117 28.3109 3.07809 28.3109C1.87588 28.3109 0.885953 29.3321 0.885953 30.5722C0.885953 31.5934 1.48814 32.3598 2.40659 32.724C4.63555 33.6357 6.82768 34.0737 9.33824 34.0737C13.0164 34.0737 15.7392 33.2715 17.5089 31.4482C19.1011 29.8058 19.9134 27.2518 19.9134 23.7503V11.1612C19.9134 9.62839 18.7111 8.38825 17.2252 8.38825L17.223 8.39048ZM14.6063 17.4379C14.6063 20.1014 12.5896 21.9628 9.97293 21.9628C7.35622 21.9628 5.3742 20.1394 5.3742 17.4379V17.3642C5.3742 14.7007 7.35406 12.8393 9.97293 12.8393C12.5918 12.8393 14.6063 14.7007 14.6063 17.3642V17.4379Z",fill:"white"}),i.createElement("path",{d:"M32.3836 8.39038C30.7914 8.39038 29.5199 10.1422 28.7401 12.0393V11.1634C28.7401 9.63052 27.5379 8.39038 26.0519 8.39038C24.5659 8.39038 23.3637 9.63052 23.3637 11.1634V25.6093C23.3637 27.1422 24.5659 28.3823 26.0519 28.3823C27.5379 28.3823 28.7401 27.1422 28.7401 25.6093V20.4298C28.7401 16.4904 30.2607 14.3364 32.9836 13.6816C34.0797 13.4269 35.0003 12.551 35.0003 11.0919C35.0003 9.52327 34.045 8.39262 32.3836 8.39262V8.39038Z",fill:"white"}),i.createElement("path",{d:"M44.2178 8.39038C41.7072 8.39038 39.8682 8.7546 38.1699 9.41154C37.3208 9.74001 36.7207 10.5779 36.7207 11.5634C36.7207 12.8392 37.7107 13.8247 38.9497 13.8247C39.1967 13.8247 39.4089 13.7889 39.7274 13.6794C40.7519 13.3509 41.9563 13.132 43.4401 13.132C46.1283 13.132 47.5081 14.4079 47.5081 16.7071V17.0356C46.1651 16.5619 44.7853 16.2334 42.8748 16.2334C38.3843 16.2334 35.2348 18.2042 35.2348 22.4721V22.5459C35.2348 26.4138 38.1699 28.5298 41.7419 28.5298C44.3586 28.5298 46.163 27.5444 47.4713 26.0495V26.0853C47.4713 27.2517 48.4959 28.3846 50.0534 28.3846C51.5025 28.3846 52.6701 27.2182 52.6701 25.7211V16.8189C52.6701 14.1911 52.0332 12.0393 50.6187 10.5802C49.2757 9.1948 47.1529 8.39038 44.2178 8.39038ZM47.5775 21.2677C47.5775 23.2743 45.8792 24.6977 43.3686 24.6977C41.6357 24.6977 40.4335 23.8217 40.4335 22.3269V22.2531C40.4335 20.5013 41.848 19.5539 44.1463 19.5539C45.4546 19.5539 46.6568 19.8466 47.5775 20.2846V21.27V21.2677Z",fill:"white"}),i.createElement("path",{d:"M78.6766 8.24286C76.0945 8.24286 74.1147 9.33776 72.4511 11.3443C71.4611 9.37351 69.5874 8.24286 67.1115 8.24286C64.3887 8.24286 62.7619 9.73773 61.5229 11.3801V11.1611C61.5229 9.62824 60.3207 8.3881 58.8347 8.3881C57.3487 8.3881 56.1465 9.62824 56.1465 11.1611V25.6093C56.1465 27.1422 57.3487 28.3823 58.8347 28.3823C60.3207 28.3823 61.5229 27.1422 61.5229 25.6093V17.2545C61.5229 14.629 62.7597 13.2772 64.7764 13.2772C66.7931 13.2772 67.9238 14.6268 67.9238 17.2545V25.6093C67.9238 27.1422 69.126 28.3823 70.612 28.3823C72.098 28.3823 73.3002 27.1422 73.3002 25.6093V17.2545C73.3002 14.629 74.5371 13.2772 76.5537 13.2772C78.5704 13.2772 79.7011 14.6268 79.7011 17.2545V25.6093C79.7011 27.1422 80.9034 28.3823 82.3893 28.3823C83.8753 28.3823 85.0775 27.1422 85.0775 25.6093V15.4312C85.0775 10.7254 82.6731 8.24509 78.6766 8.24509V8.24286Z",fill:"white"}),i.createElement("path",{d:"M111.077 8.24286C108.495 8.24286 106.516 9.33776 104.852 11.3443C103.862 9.37351 101.988 8.24286 99.5124 8.24286C96.7895 8.24286 95.1628 9.73773 93.9237 11.3801V11.1611C93.9237 9.62824 92.7215 8.3881 91.2355 8.3881C89.7496 8.3881 88.5474 9.62824 88.5474 11.1611V25.6093C88.5474 27.1422 89.7496 28.3823 91.2355 28.3823C92.7215 28.3823 93.9237 27.1422 93.9237 25.6093V17.2545C93.9237 14.629 95.1606 13.2772 97.1773 13.2772C99.194 13.2772 100.325 14.6268 100.325 17.2545V25.6093C100.325 27.1422 101.527 28.3823 103.013 28.3823C104.499 28.3823 105.701 27.1422 105.701 25.6093V17.2545C105.701 14.629 106.938 13.2772 108.955 13.2772C110.971 13.2772 112.102 14.6268 112.102 17.2545V25.6093C112.102 27.1422 113.304 28.3823 114.79 28.3823C116.276 28.3823 117.478 27.1422 117.478 25.6093V15.4312C117.478 10.7254 115.074 8.24509 111.077 8.24509V8.24286Z",fill:"white"}),i.createElement("path",{d:"M128.461 8.39038C125.95 8.39038 124.111 8.7546 122.413 9.41154C121.564 9.74001 120.964 10.5779 120.964 11.5634C120.964 12.8392 121.954 13.8247 123.193 13.8247C123.44 13.8247 123.652 13.7889 123.97 13.6794C124.995 13.3509 126.199 13.132 127.683 13.132C130.371 13.132 131.751 14.4079 131.751 16.7071V17.0356C130.408 16.5619 129.028 16.2334 127.118 16.2334C122.625 16.2334 119.478 18.2042 119.478 22.4721V22.5459C119.478 26.4138 122.413 28.5298 125.985 28.5298C128.602 28.5298 130.406 27.5444 131.714 26.0495V26.0853C131.714 27.2517 132.739 28.3846 134.296 28.3846C135.745 28.3846 136.913 27.2182 136.913 25.7211V16.8189C136.913 14.1911 136.276 12.0393 134.862 10.5802C133.519 9.1948 131.396 8.39038 128.461 8.39038ZM131.82 21.2677C131.82 23.2743 130.122 24.6977 127.612 24.6977C125.879 24.6977 124.676 23.8217 124.676 22.3269V22.2531C124.676 20.5013 126.091 19.5539 128.389 19.5539C129.698 19.5539 130.9 19.8466 131.82 20.2846V21.27V21.2677Z",fill:"white"}),i.createElement("path",{d:"M149.373 8.39038C147.781 8.39038 146.507 10.1422 145.73 12.0393V11.1634C145.73 9.63052 144.527 8.39038 143.041 8.39038C141.555 8.39038 140.353 9.63052 140.353 11.1634V25.6093C140.353 27.1422 141.555 28.3823 143.041 28.3823C144.527 28.3823 145.73 27.1422 145.73 25.6093V20.4298C145.73 16.4904 147.25 14.3364 149.973 13.6816C151.069 13.4269 151.99 12.551 151.99 11.0919C151.99 9.52327 151.034 8.39262 149.373 8.39262V8.39038Z",fill:"white"}),i.createElement("path",{d:"M156.456 1.31152C154.97 1.31152 153.768 2.55166 153.768 4.08452V25.6093C153.768 27.1422 154.97 28.3823 156.456 28.3823C157.942 28.3823 159.144 27.1422 159.144 25.6093V4.08452C159.144 2.55166 157.942 1.31152 156.456 1.31152Z",fill:"white"}),i.createElement("path",{d:"M176.788 8.39038C175.408 8.39038 174.63 9.3378 174.206 10.5064L170.244 21.8532L166.141 10.4707C165.682 9.15681 164.904 8.39038 163.559 8.39038C162.073 8.39038 160.906 9.48528 160.906 11.0539C160.906 11.4181 161.046 11.9656 161.189 12.3298L167.662 27.7991L167.484 28.2371C166.988 29.2225 166.529 29.4035 165.574 29.4035C165.184 29.4035 164.902 29.3298 164.443 29.1845C164.231 29.1108 163.984 29.0393 163.559 29.0393C162.463 29.0393 161.436 29.9509 161.436 31.3006C161.436 32.6502 162.357 33.3071 163.135 33.5999C164.018 33.9283 164.867 34.1116 166.07 34.1116C169.289 34.1116 170.879 32.6167 172.471 28.6393L179.084 12.2583C179.19 12.0035 179.331 11.3824 179.331 10.9444C179.331 9.48528 178.163 8.39038 176.783 8.39038H176.788Z",fill:"white"})),C=e=>i.createElement(r.a1,Object.assign({width:"24",height:"24",fill:"none",viewBox:"0.5 0 24 24"},e),i.createElement("path",{d:"M12.5 23.25C18.7132 23.25 23.75 18.2132 23.75 12C23.75 5.7868 18.7132 0.75 12.5 0.75C6.2868 0.75 1.25 5.7868 1.25 12C1.25 18.2132 6.2868 23.25 12.5 23.25Z",fill:"url(#paint0_linear_4506_11023_disheartening_emoji)",stroke:"none"}),i.createElement("path",{d:"M8.97126 19.5491C10.9569 18.1193 14.0431 18.1193 16.0295 19.5491C16.3344 19.7674 16.5155 19.5315 16.4184 19.3455C14.4879 15.6555 10.5121 15.6555 8.58164 19.3455C8.48451 19.5315 8.66564 19.7674 8.97126 19.5491Z",fill:"#302C3B",stroke:"none"}),i.createElement("path",{d:"M19.895 12.8239C17.9806 13.5491 15.4865 12.8809 14.1909 11.2954C13.9925 11.0531 13.7945 11.2046 13.8328 11.376C14.5936 14.775 17.807 15.6364 20.1654 13.0721C20.2839 12.9435 20.1886 12.7133 19.895 12.8239Z",fill:"#302C3B",stroke:"none"}),i.createElement("path",{d:"M10.8091 11.2954C9.51351 12.8813 7.01976 13.5491 5.10501 12.8239C4.81176 12.7133 4.71614 12.9431 4.83464 13.0721C7.19301 15.6364 10.4064 14.775 11.1673 11.376C11.2059 11.2046 11.0079 11.0531 10.8091 11.2954Z",fill:"#302C3B",stroke:"none"}),i.createElement("defs",null,i.createElement("linearGradient",{id:"paint0_linear_4506_11023_disheartening_emoji",x1:"12.5002",y1:"23.25",x2:"12.5002",y2:"0.750188",gradientUnits:"userSpaceOnUse"},i.createElement("stop",{stopColor:"#FFA027"}),i.createElement("stop",{offset:"0.2723",stopColor:"#FFC151"}),i.createElement("stop",{offset:"0.7633",stopColor:"#FFC93F"}),i.createElement("stop",{offset:"1",stopColor:"#FFE261"})))),k=e=>i.createElement(r.a1,Object.assign({width:"24",height:"24",fill:"none",viewBox:"0.5 0 24 24"},e),i.createElement("path",{d:"M12.5 23.25C18.7132 23.25 23.75 18.2132 23.75 12C23.75 5.7868 18.7132 0.75 12.5 0.75C6.2868 0.75 1.25 5.7868 1.25 12C1.25 18.2132 6.2868 23.25 12.5 23.25Z",fill:"url(#paint0_linear_4506_11027_neutral_emoji)",stroke:"none"}),i.createElement("path",{d:"M17.3266 17.25H7.6726C6.7336 17.25 6.7336 15.75 7.6726 15.75H17.3266C18.2656 15.75 18.2656 17.25 17.3266 17.25Z",fill:"#302C3B",stroke:"none"}),i.createElement("path",{d:"M8.7496 12.1875C9.68158 12.1875 10.4371 11.1801 10.4371 9.9375C10.4371 8.69486 9.68158 7.6875 8.7496 7.6875C7.81762 7.6875 7.0621 8.69486 7.0621 9.9375C7.0621 11.1801 7.81762 12.1875 8.7496 12.1875Z",fill:"#302C3B",stroke:"none"}),i.createElement("path",{d:"M16.2496 12.1875C17.1816 12.1875 17.9371 11.1801 17.9371 9.9375C17.9371 8.69486 17.1816 7.6875 16.2496 7.6875C15.3176 7.6875 14.5621 8.69486 14.5621 9.9375C14.5621 11.1801 15.3176 12.1875 16.2496 12.1875Z",fill:"#302C3B",stroke:"none"}),i.createElement("defs",null,i.createElement("linearGradient",{id:"paint0_linear_4506_11027_neutral_emoji",x1:"12.5002",y1:"23.25",x2:"12.5002",y2:"0.750188",gradientUnits:"userSpaceOnUse"},i.createElement("stop",{stopColor:"#FFA027"}),i.createElement("stop",{offset:"0.2723",stopColor:"#FFC151"}),i.createElement("stop",{offset:"0.7633",stopColor:"#FFC93F"}),i.createElement("stop",{offset:"1",stopColor:"#FFE261"})))),S=e=>i.createElement(r.a1,Object.assign({width:"24",height:"24",fill:"none",viewBox:"0.5 0 24 24"},e),i.createElement("path",{d:"M12.5 23.25C18.7132 23.25 23.75 18.2132 23.75 12C23.75 5.7868 18.7132 0.75 12.5 0.75C6.2868 0.75 1.25 5.7868 1.25 12C1.25 18.2132 6.2868 23.25 12.5 23.25Z",fill:"url(#paint0_linear_11994_841_smiling_emoji)",stroke:"none"}),i.createElement("path",{d:"M5.82085 15.8453C7.89191 15.8453 9.57085 14.1663 9.57085 12.0953C9.57085 10.0242 7.89191 8.34528 5.82085 8.34528C3.74978 8.34528 2.07085 10.0242 2.07085 12.0953C2.07085 14.1663 3.74978 15.8453 5.82085 15.8453Z",fill:"url(#paint1_radial_11994_841_smiling_emoji)",stroke:"none"}),i.createElement("path",{d:"M19.1792 15.75C21.2502 15.75 22.9292 14.0711 22.9292 12C22.9292 9.92893 21.2502 8.25 19.1792 8.25C17.1081 8.25 15.4292 9.92893 15.4292 12C15.4292 14.0711 17.1081 15.75 19.1792 15.75Z",fill:"url(#paint2_radial_11994_841_smiling_emoji)",stroke:"none"}),i.createElement("path",{d:"M14.0844 9.3015C15.5 7.72425 17.7012 7.7235 19.1176 9.3015C19.3344 9.543 19.4634 9.282 19.3944 9.07725C18.0181 5.0055 15.1831 5.0055 13.8069 9.07725C13.7379 9.282 13.8669 9.54262 14.0844 9.3015Z",fill:"#302C3B",stroke:"none"}),i.createElement("path",{d:"M5.88312 9.3015C7.29949 7.72425 9.49999 7.7235 10.9164 9.3015C11.1331 9.543 11.2629 9.282 11.1931 9.07725C9.81687 5.0055 6.98187 5.0055 5.60562 9.07725C5.53699 9.282 5.66562 9.54262 5.88312 9.3015Z",fill:"#302C3B",stroke:"none"}),i.createElement("path",{d:"M17.1961 13.647C14.3352 15.7061 10.6614 15.705 7.802 13.647C7.397 13.356 7.15512 13.6706 7.28487 13.9178C9.4805 18.1151 15.5187 18.1144 17.7147 13.9178C17.8437 13.6703 17.6026 13.3556 17.1961 13.647Z",fill:"#302C3B",stroke:"none"}),i.createElement("defs",null,i.createElement("linearGradient",{id:"paint0_linear_11994_841_smiling_emoji",x1:"12.5002",y1:"23.25",x2:"12.5002",y2:"0.750188",gradientUnits:"userSpaceOnUse"},i.createElement("stop",{stopColor:"#FFA027"}),i.createElement("stop",{offset:"0.2723",stopColor:"#FFC151"}),i.createElement("stop",{offset:"0.7633",stopColor:"#FFC93F"}),i.createElement("stop",{offset:"1",stopColor:"#FFE261"})),i.createElement("radialGradient",{id:"paint1_radial_11994_841_smiling_emoji",cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"translate(5.82103 12.0952) scale(3.75 3.75)"},i.createElement("stop",{stopColor:"#F18D84"}),i.createElement("stop",{offset:"0.2514",stopColor:"#F29180",stopOpacity:"0.7486"}),i.createElement("stop",{offset:"0.5118",stopColor:"#F49E73",stopOpacity:"0.4882"}),i.createElement("stop",{offset:"0.7755",stopColor:"#F8B25F",stopOpacity:"0.2245"}),i.createElement("stop",{offset:"1",stopColor:"#FDCA47",stopOpacity:"0"})),i.createElement("radialGradient",{id:"paint2_radial_11994_841_smiling_emoji",cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"translate(19.179 12) scale(3.75)"},i.createElement("stop",{stopColor:"#F18D84"}),i.createElement("stop",{offset:"0.2514",stopColor:"#F29180",stopOpacity:"0.7486"}),i.createElement("stop",{offset:"0.5118",stopColor:"#F49E73",stopOpacity:"0.4882"}),i.createElement("stop",{offset:"0.7755",stopColor:"#F8B25F",stopOpacity:"0.2245"}),i.createElement("stop",{offset:"1",stopColor:"#FDCA47",stopOpacity:"0"}))));var w=n(62172);const _=e=>i.createElement(r.a1,Object.assign({width:"24",height:"24",viewBox:"0 0 24 24",fill:w.Green30},e),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22ZM18.2071 9.20711C18.5976 8.81658 18.5976 8.18342 18.2071 7.79289C17.8166 7.40237 17.1834 7.40237 16.7929 7.79289L10 14.5858L8.20711 12.7929C7.81658 12.4024 7.18342 12.4024 6.79289 12.7929C6.40237 13.1834 6.40237 13.8166 6.79289 14.2071L10 17.4142L18.2071 9.20711Z",stroke:"none"})),E=e=>i.createElement(r.a1,Object.assign({width:"18",height:"17",viewBox:"0 0 18 17",fill:"none"},e),i.createElement("path",{d:"M9 1L11.069 6.15226L16.6085 6.52786L12.3477 10.0877L13.7023 15.4721L9 12.52L4.29772 15.4721L5.65228 10.0877L1.39155 6.52786L6.931 6.15226L9 1Z",fill:"transparent",stroke:w.NeutralGray50,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}));var O=n(64757),A=n(12187),I=n(88392),P=n(9546),R=n(89894);const B="button",U=e=>({minWidth:R.ux.rem(e),minHeight:R.ux.rem(e),lineHeight:R.ux.rem(e)}),N=e=>{const t=(t,n)=>{var i;return Object.assign({"& > i":Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},e.compact?{marginLeft:0}:{marginLeft:R.ux.rem(-.25)}),"small"===e.size?{minWidth:R.ux.rem(1.5)}:{}),"medium"===e.size?{minWidth:R.ux.rem(1.75)}:{}),"large"===e.size?{minWidth:R.ux.rem(2)}:{}),t),"&[data-disabled='true']":Object.assign({opacity:.4,cursor:"not-allowed"},null===(i=e.style)||void 0===i?void 0:i.disabled)},n)};return f.Es.specificity(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({borderRadius:R.ux.rem(I.xB),fontSize:R.ux.rem(.75),textAlign:"center",padding:`0 ${R.ux.rem(P.x)}`,userSelect:"none",display:"inline-flex",alignItems:"center",justifyContent:"center"},e.compact?{padding:0}:{}),"small"===e.size?U(1.5):{}),"medium"===e.size?U(1.75):{}),"large"===e.size?U(2):{}),"primary"===e.type?((e,t)=>Object.assign(Object.assign({color:l.XY.Content.OnPrimary.Default,backgroundColor:f.BO.BrandGreen60,transitionProperty:"border, background, color",fontWeight:"bold"},null==t?void 0:t.base),{$nest:e((null==t?void 0:t.icon)||{},{"&:not([data-disabled='true'])":{$nest:{"&[data-hovered='true']":Object.assign({backgroundColor:f.BO.BrandGreen80},null==t?void 0:t.hovered),"&:focus-visible":Object.assign({boxShadow:`0 0 0 2px ${l.XY.Surface.Primary.Default}, 0 0 0 4px ${f.BO.BrandGreen80}`},null==t?void 0:t.focusVisible),"&[data-active='true'], &:active":Object.assign({backgroundColor:f.BO.BrandGreen60,color:l.XY.Surface.Primary.Default},null==t?void 0:t.active)}}})}))(t,e.style):{}),"secondary"===e.type?((e,t)=>Object.assign(Object.assign({backgroundColor:"transparent",fontWeight:"normal",color:w.BlueGray80,stroke:w.BlueGray80,boxShadow:`inset 0 0 0 1px ${w.BlueGray5}`,transitionProperty:"border, background, color"},null==t?void 0:t.base),{$nest:e(Object.assign({stroke:R.ux.important(w.BlueGray80),fill:R.ux.important(w.BlueGray80)},null==t?void 0:t.icon),{"&:not([data-disabled='true'])":{$nest:{"&[data-hovered='true']":Object.assign({backgroundColor:w.BlueGray0},null==t?void 0:t.hovered),"&:focus-visible":Object.assign({boxShadow:`inset 0 0 0 1px ${w.BlueGray80}, 0 0 0 1px ${w.BlueGray80}, 0 0 0 2px ${l.XY.Surface.Primary.Default}, 0 0 0 4px ${w.BlueGray80}`},null==t?void 0:t.focusVisible),"&[data-active='true'], &:active":Object.assign({backgroundColor:"transparent",color:w.BlueGray80},null==t?void 0:t.active)}}})}))(t,e.style):{}),"tertiary"===e.type?((e,t,n)=>Object.assign(Object.assign({backgroundColor:"transparent",fontWeight:"normal",color:l.XY.Content.Secondary.Default,transitionProperty:"border, background, color"},null==n?void 0:n.base),{$nest:t(Object.assign({stroke:R.ux.important(l.XY.Content.Secondary.Default),fill:R.ux.important(l.XY.Content.Secondary.Default)},null==n?void 0:n.icon),{"&:not([data-disabled='true'])":{$nest:Object.assign(Object.assign({"&[data-hovered='true'], &[data-active='true'], &:active":Object.assign({backgroundColor:w.BlueGray0,color:l.XY.Content.Secondary.Default},null==n?void 0:n.active)},"dark"===e.theme?{"&[data-hovered='true'], &[data-active='true'], &:active":Object.assign({backgroundColor:R.ux.color(w.BlueGray0).toRGBA().fade(.2).toString()},null==n?void 0:n.active)}:{}),{"&:focus-visible":Object.assign({boxShadow:`0 0 0 2px ${l.XY.Surface.Primary.Default}, 0 0 0 4px ${l.XY.Content.Secondary.Default}`},null==n?void 0:n.focusVisible)})}})}))(e,t,e.style):{}),B,f.Es.baseButtonContentOverrideSpecificity)},T=e=>R.ux.joinClasses([B,R.ux.style(N(e))]);var G,z=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n};!function(e){e.Primary=e=>{var{className:t,compact:n,theme:r,children:s,onClick:o,size:a,style:l}=e,c=z(e,["className","compact","theme","children","onClick","size","style"]);return i.createElement(O.zx.Primary,Object.assign({},(0,A.Sh)(T({compact:n,theme:null!=r?r:"light",size:null!=a?a:"large",type:"primary",style:l}),t),c,{onClick:(0,f.m)(o)}),s)},e.Secondary=e=>{var{className:t,compact:n,theme:r,children:s,onClick:o,size:a,style:l}=e,c=z(e,["className","compact","theme","children","onClick","size","style"]);return i.createElement(O.zx.Ghost,Object.assign({},(0,A.Sh)(T({compact:n,theme:null!=r?r:"light",size:null!=a?a:"large",type:"secondary",style:l}),t),c,{onClick:(0,f.m)(o)}),s)},e.Tertiary=e=>{var{className:t,compact:n,theme:r,children:s,onClick:o,size:a,style:l}=e,c=z(e,["className","compact","theme","children","onClick","size","style"]);return i.createElement(O.zx.Tertiary,Object.assign({},(0,A.Sh)(T({compact:n,theme:null!=r?r:"light",size:null!=a?a:"large",type:"tertiary",style:l}),t),c,{onClick:(0,f.m)(o)}),s)}}(G||(G={}));var j=n(31542),F=n(5114),D=n(15073),V=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n};const M="#161719",L="#646B81",K=e=>{var{children:t,style:n,dataGrammarlyPart:r="ui-kit-iframe"}=e,s=V(e,["children","style","dataGrammarlyPart"]);const[o,a]=i.useState(null),l=i.useCallback((e=>{var t,n;let i=null;"contentDocument"in e.target&&(i=null!==(n=null===(t=e.target.contentDocument)||void 0===t?void 0:t.body)&&void 0!==n?n:null),a(i),i&&(i.style.margin="0",i.style.height="100vh",i.style.overflowY="hidden")}),[]),c=i.useContext(D.u.Context);return i.useEffect((()=>{const e=c.subscribe((e=>{o&&D.u.setRootCssVar(o,F.some(e))}));return()=>e.unsubscribe()}),[o]),i.createElement("iframe",Object.assign({},s,{style:Object.assign({},n),onLoad:l,srcDoc:"<html><body></body></html>","data-grammarly-part":r}),o&&(0,j.createPortal)(t,o))},$=1.375,H=({fitContentHeight:e,text:t,ariaLabel:n,onChange:r,placeholder:s,disabled:o,className:a,onFocus:l,onBlur:c,onKeyDownEnter:u,autofocus:d,onKeyUpEscape:m,onKeyDownArrowUp:p,onKeyDownArrowDown:g,onKeyDownShiftEnter:h,theme:f})=>{var x,v,b;const y=$*(s?s.length:1),[C,k]=i.useState({kind:"rem",value:y}),[S,w]=i.useState(null);return i.useEffect((()=>{S&&void 0!==d&&(S.focus(),S.selectionStart=t.length,S.selectionEnd=t.length)}),[d,S]),i.useLayoutEffect((()=>{if(""===t)k({kind:"rem",value:y});else{const e=null==S?void 0:S.scrollHeight;k(e?{kind:"px",value:e}:{kind:"rem",value:y})}}),[t,S,s]),i.createElement(K,{className:a,style:{height:e?"rem"===C.kind?R.ux.rem(C.value):R.ux.px(C.value):void 0},title:`${n} container`},i.createElement("style",{dangerouslySetInnerHTML:{__html:`\n      .container {\n        position: relative;\n        width: 100%;\n        height: 100%;\n      }\n      .textarea {\n        box-sizing: border-box;\n        border-radius: ${R.ux.rem(I.xB)};\n        overflow-y: auto;\n        width: 100%;\n        height: 100%;\n        border: none;\n        padding: 0px;\n        background: transparent;\n        resize: none;\n        font-family: Inter, sans-serif;\n        font-size: ${null!==(x=null==f?void 0:f.fontSize)&&void 0!==x?x:R.ux.rem(.875)};\n        font-weight: 400;\n        color: ${null!==(v=null==f?void 0:f.color)&&void 0!==v?v:M};\n      }\n      .textarea::placeholder {\n        color: ${L};\n      }\n      .textarea:focus {\n        outline: none;\n      }\n      .placeholder {\n        position: absolute;\n        top: 0px;\n        left: 0px;\n        width: 100%;\n        height: 100%;\n        background: transparent;\n        font-family: Inter, sans-serif;\n        font-size: ${R.ux.rem(.875)};\n        font-weight: 400;\n        z-index: -1;\n        color: ${L};\n      }\n      `}}),i.createElement("div",{className:"container"},i.createElement("textarea",{"aria-label":n,className:"textarea",style:{lineHeight:null!==(b=null==f?void 0:f.lineHeight)&&void 0!==b?b:R.ux.rem($)},value:t,ref:w,onChange:e=>r(e.target.value),placeholder:1===(null==s?void 0:s.length)?s[0]:void 0,disabled:o,onFocus:()=>null==l?void 0:l(),onBlur:()=>null==c?void 0:c(),onKeyDown:e=>{var t;u&&"Enter"===e.key&&!e.shiftKey?(e.preventDefault(),e.stopPropagation(),u()):"ArrowUp"===e.key&&p&&(Z(t=e.currentTarget)&&0===t.selectionStart)?(e.preventDefault(),e.stopPropagation(),p()):"ArrowDown"===e.key&&g&&function(e){return Z(e)&&e.selectionStart===e.value.length}(e.currentTarget)?(e.preventDefault(),e.stopPropagation(),g()):"Enter"===e.key&&e.shiftKey&&(e.preventDefault(),e.stopPropagation(),null==h||h())},onKeyUp:e=>{m&&"Escape"===e.key&&(e.preventDefault(),e.stopPropagation(),m())}}),((null==s?void 0:s.length)||0)>1&&""===t?i.createElement("div",{className:"placeholder",style:{lineHeight:R.ux.rem($)}},(s||[]).map(((e,t)=>i.createElement(i.Fragment,{key:t},e,i.createElement("br",null))))):null))};function Z(e){return e.selectionStart===e.selectionEnd}var W=n(22232),q=function(){function e(e,t,n){void 0===t&&(t=0),void 0===n&&(n=!0),this._capacity=e,this._start=t,this._allowOverflow=n,this._nextId=t}return Object.defineProperty(e.prototype,"id",{get:function(){return this._nextId},enumerable:!1,configurable:!0}),e.prototype.newId=function(){var e=this._nextId;if(e>this._capacity){if(!this._allowOverflow)throw new W.ej("ids limit reached: "+this._capacity);this._nextId=e=0}return this._nextId++,e},e.prototype.reset=function(){this._nextId=this._start},e}();const Y=new q(999999);var X;!function(e){e.create=function(e){return null!=e?e:Y.newId()}}(X||(X={}));var Q=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n};const J=e=>{var{text:t,onChange:n,placeholder:r,disabled:s,className:o,onFocus:a,onBlur:l,onKeyPressEnter:c,autofocus:u,onKeyUpEscape:d}=e,m=Q(e,["text","onChange","placeholder","disabled","className","onFocus","onBlur","onKeyPressEnter","autofocus","onKeyUpEscape"]);const[p,g]=i.useState(null);return i.useEffect((()=>{p&&void 0!==u&&p.focus()}),[u,p]),i.createElement(K,{className:o,style:{height:R.ux.rem(1.375)}},i.createElement("style",{dangerouslySetInnerHTML:{__html:`\n      .textBox {\n        box-sizing: border-box;\n        border-radius: ${R.ux.rem(I.xB)};\n        overflow-y: auto;\n        width: 100%;\n        height: 100%;\n        border: none;\n        padding: 0;\n        background: transparent;\n        resize: none;\n        font-family: Inter, sans-serif;\n        font-size: ${R.ux.rem(.875)};\n        font-weight: 400;\n        color: ${M};\n      }\n      .textBox::placeholder {\n        color: ${L};\n      }\n      .textBox:focus {\n        outline: none;\n      }\n      `}}),i.createElement("input",Object.assign({},m,{className:"textBox",style:{lineHeight:R.ux.rem(1.375)},value:t,ref:g,onChange:e=>n(e.target.value),placeholder:r,disabled:s,onFocus:()=>null==a?void 0:a(),onBlur:()=>null==l?void 0:l(),onKeyPress:e=>{c&&"Enter"===e.key&&!e.shiftKey&&(e.preventDefault(),e.stopPropagation(),c())},onKeyDown:e=>{d&&"Escape"===e.key&&(e.preventDefault(),e.stopPropagation(),d())}})))};var ee=n(74204),te=n(64015),ne=n(57050),ie=n(90845),re=n(32952),se=n(78674),oe=n(85985),ae=n(2834);const le={padding:`${R.ux.rem(P.F2)} ${R.ux.rem(P.F2+P.Ze)} ${R.ux.rem(P.F2)} ${R.ux.rem(P.qp)}`,border:`1px solid ${l.S5.InteractiveNeutral.Primary.Default}`,borderRadius:R.ux.rem(I.xB),width:R.ux.rem(15),height:R.ux.rem(2),boxSizing:"border-box",position:"relative"},ce={position:"absolute",right:R.ux.rem(P.x),top:R.ux.rem(.1875),border:"none",background:"transparent",display:"flex",alignItems:"center",cursor:"pointer",width:R.ux.rem(1.5),height:R.ux.rem(1.5),padding:0},ue=Object.assign(Object.assign({},f.Es.iconSizeRems(1.5)),{$nest:{"& svg":{stroke:l.XY.Content.Secondary.Default}}}),de=e=>R.ux.color(w.BlueGray40).toRGBA().fade(e).toString(),me={padding:R.ux.rem(P.F2),background:"white",boxShadow:`0px 0px 0px 0.5px ${w.BlueGray40}, 0px 0px 2px 0.5px ${de(.5)}, 0px 1px 6px 0.5px ${de(.25)}`,borderRadius:R.ux.rem(I.xB),width:R.ux.rem(15),boxSizing:"border-box",overflowY:"auto",maxHeight:R.ux.rem(8.125),zIndex:9999,$nest:{"& > ul":{listStyle:"none",padding:0,margin:0,$nest:{"& > li":{padding:0,margin:0}}}}},pe={border:"none",background:"transparent",width:"100%",cursor:"pointer",overflow:"hidden",textOverflow:"ellipsis",fontSize:R.ux.rem(.875),lineHeight:R.ux.rem(1.375),color:l.XY.Content.Primary.Default,padding:`${R.ux.rem(.1875)} ${R.ux.rem(P.qp)}`,borderRadius:R.ux.rem(I.xB),display:"flex",justifyContent:"flex-start",$nest:{"&:hover":{background:w.Blue0},"& mark":{backgroundColor:"unset",fontWeight:"bold"}}},ge={width:R.ux.percent(100),border:"none"},he=R.ux.style(le),fe=R.ux.style(ce),xe=R.ux.style(ue),ve=R.ux.style(me),be=R.ux.style(pe),ye=R.ux.style({whiteSpace:"pre"}),Ce=R.ux.style(ge),ke=new q(999999);function Se({text:e,placeholder:t,clearButton:n,selectOnBlur:s,label:o,options:a,className:l,filterBy:c=((e,t)=>o(e).toLowerCase().includes(t.toLowerCase())),onInputChange:u,onSelectionChange:d}){const[m,p]=i.useState(!1),g=i.useRef(ke.newId().toString()),[h,x]=i.useState(null),[v,b]=i.useState(null),{styles:y,attributes:C}=(0,ee.D)(h,v,{placement:"bottom-start",modifiers:[{name:"offset",options:{offset:[0,4]}}]}),k=a.filter((t=>c(t,e.trim()))),S=m&&k.length>0,w=i.useMemo((()=>new re.xQ),[]);return ie.P.useSubscriptionTo(w.pipe(se.b(50),oe.h((e=>!e)),ae.b((()=>{p(!1),s&&""!==e.trim()&&d(k.length>0?k[0]:null)})))),i.createElement("div",Object.assign({},(0,A.Sh)(he,l),{ref:x}),i.createElement(J,{className:Ce,placeholder:t,onChange:u,text:e,onFocus:()=>{p(!0),w.next(!0)},onBlur:()=>w.next(!1),role:"combobox","aria-haspopup":"listbox","aria-owns":g.current,"aria-expanded":S}),""!==e.trim()&&!!n&&i.createElement("button",{onClick:(0,f.m)((()=>d(null))),className:fe,"aria-label":"Clear",type:"button"},i.createElement(r.JO.Close,{className:xe})),S&&i.createElement("div",Object.assign({ref:b,style:y.popper},C.popper,{className:ve,onFocus:()=>w.next(!0),onBlur:()=>w.next(!1)}),i.createElement("ul",{"aria-label":"menu-options",role:"listbox",id:g.current},k.map((t=>{const n=o(t);return i.createElement("li",{key:n,"aria-label":n,role:"option"},i.createElement("button",{className:be,onClick:(0,f.m)((()=>{d(t),p(!1)}))},i.createElement(we,{label:n,pattern:e})))})))))}const we=({label:e,pattern:t})=>{if(""===t.trim())return i.createElement(i.Fragment,null,e);const n=t.trim(),r=e.split(new RegExp(n,"i")),s=(0,ne.zG)(r.map(((e,t)=>({token:e,mark:!1,end:t*n.length+r.slice(0,t).join("").length+e.length}))),te.iD({token:"",mark:!0,end:0})).map(((t,i,r)=>t.mark&&i>0?{token:e.slice(r[i-1].end,r[i-1].end+n.length),mark:!0}:{token:t.token,mark:!1})).filter((e=>e.token.length>0));return i.createElement(i.Fragment,null,s.map(((e,t)=>e.mark?i.createElement("mark",{key:t,className:ye},e.token):i.createElement("span",{key:t,className:ye},e.token))))},_e={border:`1px solid ${l.S5.InteractiveNeutral.Primary.Default}`,borderRadius:R.ux.rem(I.xB),width:R.ux.rem(15),height:R.ux.rem(2),boxSizing:"border-box",position:"relative"},Ee={padding:`${R.ux.rem(P.F2)} ${R.ux.rem(P.F2+P.Ze)} ${R.ux.rem(P.F2)} ${R.ux.rem(P.qp)}`,width:"100%",height:"100%",border:"none",background:"transparent",position:"relative",cursor:"pointer",display:"flex",alignItems:"center"},Oe={fontWeight:400,fontSize:R.ux.rem(.875),lineHeight:R.ux.rem(1.375),color:l.XY.Content.Primary.Default},Ae=Object.assign(Object.assign({position:"absolute",top:R.ux.rem(P.F2),right:R.ux.rem(P.x)},f.Es.iconSizeRems(1.5)),{$nest:{"& svg":{stroke:l.XY.Content.Secondary.Default}}}),Ie=e=>R.ux.color(w.BlueGray40).toRGBA().fade(e).toString(),Pe={padding:R.ux.rem(P.F2),background:"white",boxShadow:`0px 0px 0px 0.5px ${w.BlueGray40}, 0px 0px 2px 0.5px ${Ie(.5)}, 0px 1px 6px 0.5px ${Ie(.25)}`,borderRadius:R.ux.rem(I.xB),width:R.ux.rem(15),boxSizing:"border-box",overflowY:"auto",maxHeight:R.ux.rem(8.125),zIndex:9999,$nest:{"& > ul":{listStyle:"none",padding:0,margin:0,$nest:{"& > li":{padding:0,margin:0}}}}},Re={border:"none",background:"transparent",width:"100%",cursor:"pointer",overflow:"hidden",textOverflow:"ellipsis",fontSize:R.ux.rem(.875),lineHeight:R.ux.rem(1.375),color:l.XY.Content.Primary.Default,padding:`${R.ux.rem(.1875)} ${R.ux.rem(P.qp)}`,borderRadius:R.ux.rem(I.xB),display:"flex",justifyContent:"flex-start",$nest:{"&:hover":{background:w.Blue0}}},Be=R.ux.style(_e),Ue=R.ux.style(Ee),Ne=R.ux.style(Oe),Te=R.ux.style(Pe),Ge=R.ux.style(Re),ze=R.ux.style(Ae),je=new q(999999);function Fe({label:e,selection:t,className:n,placeholder:s,options:o,onSelectionChange:a,renderOption:l}){const[c,u]=i.useState(!1),d=i.useRef(je.newId().toString()),m=i.useRef(je.newId().toString()),p=i.useRef(null),[g,h]=i.useState(null),[x,v]=i.useState(null),{styles:b,attributes:y}=(0,ee.D)(g,x,{placement:"bottom-start",modifiers:[{name:"offset",options:{offset:[0,4]}}]}),C=i.useMemo((()=>new re.xQ),[]),k=i.useMemo((()=>C.pipe(se.b(100),oe.h((e=>!e)),ae.b((()=>{u(!1)})))),[C,u]);return ie.P.useSubscriptionTo(k),i.createElement("div",Object.assign({},(0,A.Sh)(Be,n),{ref:h}),i.createElement("button",{ref:p,className:Ue,onClick:()=>{var e;u(!0),C.next(!0),null===(e=p.current)||void 0===e||e.focus()},onFocus:()=>{u(!0),C.next(!0)},onBlur:()=>C.next(!1),type:"button","aria-haspopup":"listbox","aria-owns":d.current,"aria-expanded":c,"aria-labelledby":m.current},i.createElement("div",{id:m.current,className:Ne},t?l?l(t):e(t):s),i.createElement(r.JO.Arrow,{direction:r.n4.down,className:ze})),c&&i.createElement("div",Object.assign({ref:v,style:b.popper},y.popper,{className:Te,onFocus:()=>C.next(!0),onBlur:()=>C.next(!1)}),i.createElement("ul",{"aria-label":"menu-options",role:"listbox",id:d.current},o.map(((t,n)=>{const r=e(t);return i.createElement("li",{key:n,"aria-label":r,role:"option"},i.createElement("button",{className:Ge,onClick:(0,f.m)((()=>{a(t),u(!1)}))},l?l(t):e(t)))})))))}const De=({className:e,children:t})=>i.createElement("div",Object.assign({},(0,A.Sh)(Ve,e)),t),Ve=R.ux.style({color:w.BlueGray60,fontWeight:400,fontSize:R.ux.rem(.625),lineHeight:R.ux.rem(1),background:w.BlueGray0,borderRadius:R.ux.rem(I.fe),padding:`0 ${R.ux.rem(P.F2)}`,cursor:"default"}),Me="closeBtn",Le="closeIcon",Ke=f.Es.buttonOverrideSpecificity({$nest:{[`& .${Le}`]:Object.assign(Object.assign({},f.Es.iconSizeRems(1.5)),{stroke:R.ux.important(l.S5.Content.Primary.Default)})}},Me),$e={closeButton:R.ux.joinClasses([Me,R.ux.style(Ke)]),closeIcon:Le},He=({name:e,className:t,size:n,onClick:s})=>i.createElement(G.Tertiary,Object.assign({},(0,A.Sh)($e.closeButton,t),{onClick:s,compact:!0,size:n,theme:"dark",name:e}),i.createElement(r.JO.Close,{className:$e.closeIcon}));var Ze=n(93002),We=n(66310),qe=n(80900),Ye=n(77176),Xe=n(8125),Qe=n(38983),Je=n(5739),et=n(56133),tt=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n};function nt(e){var{children:t,onOpenChange:n,title:r,placement:s="bottom end",appearanceBehavior:o="mouseClick"}=e,a=tt(e,["children","onOpenChange","title","placement","appearanceBehavior"]);const l=i.useMemo((()=>Qe.h.create(!1)),[]),c=i.useMemo((()=>l.pipe(oe.h((e=>!0===e)),We.w((()=>qe.H(250))),ae.b((()=>l.set(!1))))),[l]);return ie.P.useSubscriptionTo(c),i.createElement(et.l.Consumer,null,(({portalContainer:e})=>i.createElement(Je.F.Fragment,null,e.view(F.fold(ne.gn,(e=>i.createElement(Ze.v.Dropdown,Object.assign({title:l.pipe(Ye.U((0,Xe.RN)(void 0,r))),placement:s,appearanceBehavior:o,portalContainer:e,onOpenChange:e=>{e||l.set(!0),null==n||n(e)}},a),t)))))))}var it=n(18208),rt=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n};const st=i.forwardRef((function(e,t){var{children:n,rel:r}=e,s=rt(e,["children","rel"]);const o=i.useMemo((()=>it.alphanumeric(10)),[]);return i.createElement(i.Fragment,null,i.createElement("span",{hidden:!0,id:o},"Opens an external site in a new window"),i.createElement("a",Object.assign({},s,{"aria-describedby":o,target:"_blank",rel:null!=r?r:"noopener noreferrer",ref:t}),n))}));var ot,at=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n};!function(e){let t;!function(e){e.create=function(e){return e}}(t=e.Id||(e.Id={}))}(ot||(ot={}));const lt=({tabs:e,activeTabId:t,onActiveTabChange:n,children:r})=>i.createElement(i.Fragment,null,i.createElement("div",{className:ut,role:"tablist"},e.map((e=>i.createElement("button",{key:e.id,onClick:()=>n(e.id),tabIndex:0,className:dt,id:`tab-${e.id}`,"aria-label":`${e.label} ${e.id===t?"Selected.":""}`,"aria-controls":`tabpanel-${e.id}`,"aria-selected":t===e.id,role:"tab",type:"button"},e.label)))),r),ct=e=>{var{id:t,isActive:n,children:r,className:s,style:o}=e,a=at(e,["id","isActive","children","className","style"]);return i.createElement("div",Object.assign({role:"tabpanel",id:`tabpanel-${t}`,"aria-labelledby":`tab-${t}`,hidden:!n,style:n?o:void 0,className:n?s:void 0},a),r)},ut=R.ux.style({display:"flex",alignContent:"flex-start",gap:R.ux.rem(P.x)}),dt=R.ux.style({cursor:"pointer",border:"none",display:"flex",alignItems:"center",background:"transparent",borderBottom:`${R.ux.rem(P.yC)} solid transparent`,fontWeight:400,fontSize:R.ux.rem(.75),lineHeight:R.ux.rem(1.125),height:R.ux.rem(1.5),color:f.BO.TextBaseSubduedColor,$nest:{'&[aria-selected="true"]':{borderBottomColor:f.BO.TextBaseSubduedColor,fontWeight:700},'&[aria-selected="false"]:hover':{borderBottomColor:w.BlueGray10}}});var mt=n(37360);const pt=({reference:e,children:t,placement:n,offset:r,theme:s,boundaryAreaPadding:o})=>{var a,l;const[c,u]=i.useState(null),[d,m]=i.useState(null),p=(0,mt.sJ)(),{styles:g,attributes:h,state:f}=(0,ee.D)(e,c,{placement:null!=n?n:"top",modifiers:[{name:"offset",options:{offset:[0,12+(null!=r?r:0)]}},{name:"arrow",options:{element:d,padding:12}},{name:"preventOverflow",options:{padding:null!=o?o:5}},p]});return e?i.createElement("div",Object.assign({ref:u,style:g.popper},h.popper,{className:ht(s)}),i.createElement("div",{ref:m,style:g.arrow,className:ft(null==s?void 0:s.bgColor),"data-placement":(null===(a=null==f?void 0:f.placement)||void 0===a?void 0:a.startsWith("bottom"))?"bottom":(null==f?void 0:f.placement.startsWith("top"))?"top":(null==f?void 0:f.placement.startsWith("right"))?"right":(null===(l=null==f?void 0:f.placement)||void 0===l?void 0:l.startsWith("left"))?"left":void 0}),t):null},gt=R.ux.keyframes({from:{opacity:0},to:{opacity:1}});function ht(e){var t,n,i;return R.ux.style({animation:`${gt} linear 0.1s`,background:null!==(t=null==e?void 0:e.bgColor)&&void 0!==t?t:l.S5.Surface.Primary.Default,borderRadius:R.ux.rem(P.x),width:null==e?void 0:e.width,color:null!==(n=null==e?void 0:e.fgColor)&&void 0!==n?n:l.S5.Content.Primary.Default,padding:null!==(i=null==e?void 0:e.padding)&&void 0!==i?i:R.ux.rem(P.mh),fontSize:R.ux.rem(.875),lineHeight:R.ux.rem(1.375),display:"flex",flexDirection:"column",gap:R.ux.rem(P.yC),$nest:{"&[data-popper-reference-hidden='true']":{visibility:"hidden"}}})}function ft(e=l.S5.Surface.Primary.Default,t=R.ux.rem(.5),n=R.ux.rem(-.5)){return R.ux.style({$nest:{"&[data-placement='bottom']":{top:n,borderLeft:`${t} solid transparent`,borderRight:`${t} solid transparent`,borderBottom:`${t} solid ${e}`},"&[data-placement='top']":{bottom:n,borderLeft:`${t} solid transparent`,borderRight:`${t} solid transparent`,borderTop:`${t} solid ${e}`},"&[data-placement='right']":{left:n,borderTop:`${t} solid transparent`,borderBottom:`${t} solid transparent`,borderRight:`${t} solid ${e}`},"&[data-placement='left']":{right:n,borderTop:`${t} solid transparent`,borderBottom:`${t} solid transparent`,borderLeft:`${t} solid ${e}`}}})}const xt=({children:e,theme:t,body:n,placement:r,active:s,onCloseButtonClick:o})=>{const a=i.useRef(null);return i.createElement(i.Fragment,null,i.createElement(pt,{placement:r,reference:s&&a.current||void 0,theme:t},i.createElement(He,{onClick:o,name:"tooltipClose",className:vt,size:"small"}),n),i.cloneElement(e,{ref:a}))},vt=R.ux.style({position:"absolute",top:R.ux.rem(P.x),right:R.ux.rem(P.x)}),bt="reportMenuBtnIcon",yt=f.Es.buttonOverrideSpecificity(f.Es.iconSizeRems(1.5),bt),Ct=({reportMenuButtonClassName:e,onClickReportOffensive:t,onClickProvideFeedback:n,onOpenChange:s})=>i.createElement(nt,{"aria-label":"Provide feedback",title:"Provide feedback",name:"reportMenu",label:i.createElement(m,{className:R.ux.joinClasses([bt,R.ux.style(yt)])}),theme:{button:R.ux.joinClasses([e,T({type:"tertiary",compact:!0,size:"small"})])},onAction:e=>{switch(e){case"provideFeedback":return n();case"reportOffensive":return t()}},onOpenChange:s},i.createElement(Ze.v.Item,{key:"provideFeedback",textValue:"provideFeedback"},i.createElement(r.JO.AssistantFeedback,null),"Share your thoughts"),i.createElement(Ze.v.Item,{key:"reportOffensive",textValue:"reportOffensive"},i.createElement(r.JO.Report,null),"Report as offensive"));var kt=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n};const St=i.forwardRef((function(e,t){var{children:n,style:r}=e,s=kt(e,["children","style"]);return i.createElement("section",Object.assign({className:R.ux.style({display:"flex",flexDirection:"column",padding:R.ux.rem(P.qp),gap:R.ux.rem(P.x),background:"transparent",border:`0.5px solid ${w.BlueGray10}`,borderRadius:R.ux.rem(I.xB+I.fe),backgroundColor:l.XY.Surface.Primary.Default,color:l.XY.Content.Primary.Default},r)},s,{ref:t}),n)})),wt=({className:e})=>i.createElement("div",Object.assign({role:"separator"},(0,A.Sh)(_t,e))),_t=R.ux.style({position:"relative",width:"100%",borderBottom:`0.5px solid ${w.BlueGray10}`}),Et=({children:e})=>i.createElement(Je.F.h1,{className:Ot},e),Ot=R.ux.style({color:l.XY.Content.Secondary.Default,margin:0,fontWeight:400,fontSize:R.ux.rem(.75),lineHeight:R.ux.rem(1.125),overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"})},37360:(e,t,n)=>{n.d(t,{n4:()=>o,gM:()=>s,sJ:()=>a,KL:()=>l});var i=n(27378),r=n(34530);function s(e){return i.useMemo((()=>({name:"maxSize",phase:"main",enabled:!0,requiresIfExists:["offset","preventOverflow","flip"],fn({state:t,name:n}){const i=(0,r.Z)(t),{x:s,y:o}=t.modifiersData.preventOverflow||{x:0,y:0},{width:a,height:l}=t.rects.popper,[c]=t.placement.split("-"),u="top"===c?"top":"bottom",d={width:a-i["left"===c?"left":"right"]-s,height:l-i[u]-o};t.modifiersData[n]=d,null==e||e(d)}})),[])}function o(){return i.useMemo((()=>({name:"forcePopperUpdateEffect",phase:"afterMain",enabled:!0,fn:()=>{},effect:({instance:e})=>{const t=setTimeout((()=>e.forceUpdate()),0);return()=>clearTimeout(t)}})),[])}const a=o;function l(e,t){var n,r;const[s,o]=(0,i.useState)(void 0);return(0,i.useEffect)((()=>{e.current&&e.current.scrollWidth>e.current.clientWidth&&o(t)}),[null===(n=e.current)||void 0===n?void 0:n.scrollWidth,null===(r=e.current)||void 0===r?void 0:r.clientWidth,t]),s}},70288:(e,t,n)=>{n.d(t,{Xd:()=>i,gy:()=>ze,kF:()=>z,Bx:()=>Fe});var i,r=n(5114),s=n(57050),o=n(14601),a=n(32952),l=n(98403),c=n(77176),u=n(93508),d=n(16118),m=n(85985),p=n(2844),g=n(28043),h=n(41398),f=n(60797),x=n(67434),v=n(22232),b=n(38983),y=n(93962);!function(e){e.isTooltipOnboardingStep=function(e){return y.TG.StepName.isTooltipOnboardingStep(e.name)}}(i||(i={}));class C{constructor(e){var t,n,i,f,x;this._params=e,this._subs=new o.w,this._assistantElements=b.h.create({}),this._externalElements=b.h.create({}),this._hideAssistantTooltips=b.h.create(!1),this._nextCandidateStep=b.h.create(r.none),this._uiActions=new a.xQ,this.uiActions=this._uiActions.asObservable(),this.activeStep=b.h.combine(this._nextCandidateStep,this._assistantElements,this._externalElements,this._hideAssistantTooltips,((e,t,n,i)=>(0,s.zG)(e,r.chain((e=>function(e,t,n,i){switch(e){case y.TG.StepName.initial:return(0,s.zG)(r.fromNullable(n[y.nF.initialPopupAnchor]),r.map((e=>({name:y.TG.StepName.initial,reference:e.reference,placement:e.placement,offset:e.offset,boundaryAreaPadding:e.boundaryAreaPadding,show:!0}))));case y.TG.StepName.rewrite:return(0,s.zG)(r.fromNullable(n[y.nF.rewriteTooltipAnchor]),r.map((e=>({name:y.TG.StepName.rewrite,reference:e.reference,placement:e.placement,offset:e.offset,boundaryAreaPadding:e.boundaryAreaPadding,show:!0}))));case y.TG.StepName.prompts:return(0,s.zG)(r.fromNullable(t[y.ec.initialActionsList]),r.map((e=>({name:y.TG.StepName.prompts,reference:e.reference,placement:e.placement,offset:e.offset,boundaryAreaPadding:e.boundaryAreaPadding,show:!i}))));case y.TG.StepName.review:return(0,s.zG)(r.fromNullable(t[y.ec.followUpActionsList]),r.map((e=>({name:y.TG.StepName.review,reference:e.reference,placement:e.placement,offset:e.offset,boundaryAreaPadding:e.boundaryAreaPadding,show:!i}))));case y.TG.StepName.knowledgeHub:return(0,s.zG)(r.fromNullable(t[y.ec.promptInput]),r.map((e=>({name:y.TG.StepName.knowledgeHub,reference:e.reference,placement:e.placement,offset:e.offset,boundaryAreaPadding:e.boundaryAreaPadding,show:!i}))));default:return(0,v.L0)(e)}}(e,t,n,i)))))),this.promptsAllocated=this._params.promptsAllocated,this._subs.add((t=this._params.upstreamOnboardingState,n=this._params.session,i=this._params.textStats,f=this._params.forceDisabledOnboardingSteps,x=this._params.client,p.aj([n,t,i.pipe(k()),n.pipe(c.U(r.isSome),g.x(),h.M(t),c.U((([e,t])=>e?r.some(t):r.none)))]).pipe(c.U((([e,t,n,i])=>{return r.isNone(e)?!f.has(y.TG.StepName.initial)&&(0,s.zG)(t.initial[x],(({completed:e,lastSeen:t})=>!e&&void 0===t))?r.some(y.TG.StepName.initial):!f.has(y.TG.StepName.rewrite)&&!t.rewrite[x].completed&&t.initial[x].completed&&n>=30?r.some(y.TG.StepName.rewrite):r.none:y.Zq.Step.anyClientCompleted(t.prompts)||f.has(y.TG.StepName.prompts)?y.Zq.Step.anyClientCompleted(t.review)||f.has(y.TG.StepName.review)?y.Zq.Step.anyClientCompleted(t.knowledgeHub)||f.has(y.TG.StepName.knowledgeHub)||(o=i,!(0,s.zG)(o,r.fold(s.jv,(({prompts:e,review:t})=>{const n={prompts:y.Zq.Step.anyClientCompleted(e),review:y.Zq.Step.anyClientCompleted(t)};return Object.values(n).every(s.yR)}))))?r.none:r.some(y.TG.StepName.knowledgeHub):r.some(y.TG.StepName.review):r.some(y.TG.StepName.prompts);var o})))).subscribe(l.wW(this._nextCandidateStep))),this._subs.add(this._params.assistantMountActions.subscribe((({name:e,element:t})=>this._assistantElements.modify((n=>Object.assign(Object.assign({},n),{[e]:{reference:t,placement:"left"}})))))),this._subs.add(this._params.assistantUnmountActions.subscribe((({name:e})=>this._assistantElements.modify((t=>Object.assign(Object.assign({},t),{[e]:void 0})))))),this._subs.add(this._params.externalElements.subscribe(l.wW(this._externalElements))),this._subs.add(this._params.hideAssistantOnboardingTooltips.subscribe(l.wW(this._hideAssistantTooltips))),this._subs.add(this._params.session.pipe(c.U(r.isSome),u.O(!1),d.G(),m.h((([e,t])=>e&&!t))).subscribe((()=>this._assistantElements.set({}))))}notify(e){this._uiActions.next(e)}dispose(){this._subs.unsubscribe()}}function k(){return(0,s.ls)(f.oA,c.U((e=>e.wordCount)),u.O(0),d.G(),x.R(((e,[t,n])=>(0,s.zG)(Math.abs(n-t),(t=>t<=2?e+t:e))),0),u.O(0),g.x())}var S,w=n(64015),_=n(66310),E=n(80544),O=n(79692),A=n(2834),I=n(24209),P=n(17343),R=n(40151),B=n(8125),U=n(83078);function N(e,t,n,i,r=1e3){return e.pipe(m.h(y.lG.is(y.lG.Kind.mount)),m.h((e=>n(e.step))),_.w((({step:e})=>t.pipe(c.U(U.contains(e)),_.w((e=>e?i.pipe(P.h(Date.now())):R.E)),m.h((e=>Date.now()-e>=r)),P.h(e)))))}!function(e){e.completeInitialOrRewriteStepOnSessionInit=({session:e})=>e.pipe(u.O(r.none),d.G(),c.U((([e,t])=>r.isNone(e)&&r.isSome(t)?r.some(t):r.none)),f.oA,_.w((e=>(0,s.zG)([r.some(y.TG.StepName.initial),y.z_.Mode.isRewriteOrQuickRewrite(e.value.mode)?r.some(y.TG.StepName.rewrite):r.none],w.oA)))),e.completeReviewStepOnSecondResultReceived=({session:e,activeStep:t})=>e.pipe(c.U((0,s.ls)(r.chain(y.z_.toStarted),r.fold((()=>0),(e=>e.resultHistory.length)))),d.G(),m.h((([e,t])=>1===e&&2===t)),h.M(t),c.U((([e,t])=>(0,s.zG)(t,r.filter((e=>e===y.TG.StepName.review))))),f.oA),e.completeActiveAssistantStepOnSessionEnd=({session:e,activeStep:t,visibleForMs:n,onboardingUIActions:i})=>N(i,t.pipe(E.QV(O.E)),y.TG.StepName.isAssistantOnboardingStep,e.pipe(d.G(),m.h((([e,t])=>r.isSome(e)&&r.isNone(t)))),n),e.completeStepOnCloseClick=({onboardingUIActions:e,trackingService:t})=>e.pipe(m.h(y.lG.is(y.lG.Kind.close)),c.U((e=>(e.step===y.TG.StepName.initial&&t.trackOnboardingPopupSkip(),e.step)))),e.completeInitialStepOnTryItOutClick=({onboardingUIActions:e,trackingService:t})=>e.pipe(m.h(y.lG.is(y.lG.Kind.tryItOut)),c.U((()=>(t.trackOnboardingPopupNext(),y.TG.StepName.initial)))),e.completeReviewStepOnResultInteraction=({assistantUIActions:e})=>e.pipe(m.h(y.ix.isResultAction),m.h((e=>"complete"===e.result.kind)),c.U((()=>y.TG.StepName.review))),e.completeAssistantStepsOnUserActions=({assistantUIActions:e,activeStep:t})=>e.pipe(m.h((0,B.Kg)(y.ix.is(y.ix.Kind.actionBrickClick),y.ix.is(y.ix.Kind.promptSubmitButtonClick),y.ix.is(y.ix.Kind.promptFieldKeyPressEnter),y.ix.is(y.ix.Kind.toolbarVoiceButtonClick),y.ix.is(y.ix.Kind.setVoiceButtonClick),y.ix.is(y.ix.Kind.openFeedbackFormButtonClick))),h.M(t),c.U((([e,t])=>(0,s.zG)(t,r.filter(y.TG.StepName.isAssistantOnboardingStep)))),f.oA),e.completeInitialStepOnDispose=({onboardingUIActions:e,activeStep:t,disposed:n,visibleForMs:i})=>N(e,t,(e=>e===y.TG.StepName.initial),n,i);const t=e=>t=>n=>t(n).pipe(A.b((t=>{var i;return null===(i=n.logger)||void 0===i?void 0:i.debug(`${e} - step to complete: ${t}`)})));function n(e){return e.pipe(x.R(((e,t)=>({seen:new Set(e.seen).add(t),step:e.seen.has(t)?r.none:r.some(t)})),{seen:new Set,step:r.none}),c.U((e=>e.step)),f.oA)}e.defaultCompletionSources=[t("session init")(e.completeInitialOrRewriteStepOnSessionInit),t("second result received")(e.completeReviewStepOnSecondResultReceived),t("session end")(e.completeActiveAssistantStepOnSessionEnd),t("user closed step")(e.completeStepOnCloseClick),t("user clicked try-it-out")(e.completeInitialStepOnTryItOutClick),t("user interacted with results")(e.completeReviewStepOnResultInteraction),t("user interacted with assistant")(e.completeAssistantStepsOnUserActions),t("feature disposed")(e.completeInitialStepOnDispose)],e.extractStepsToComplete=function(e,t){return I.T(...e.map((e=>e(t)))).pipe(n)}}(S||(S={}));var T=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n};class G extends C{constructor(e,t){super(e),this._onDispose=t}dispose(){super.dispose(),this._onDispose()}}function z(e){var{assistantUIActions:t,trackingService:n,completeOnboardingStep:i,stepCompletionSources:s,disposed:a,logger:l}=e,c=T(e,["assistantUIActions","trackingService","completeOnboardingStep","stepCompletionSources","disposed","logger"]);const u=new o.w,d=new G(Object.assign(Object.assign({},c),{assistantMountActions:t.pipe(m.h(y.ix.is(y.ix.Kind.mount))),assistantUnmountActions:t.pipe(m.h(y.ix.is(y.ix.Kind.unmount)))}),(()=>u.unsubscribe()));return u.add(S.extractStepsToComplete(null!=s?s:S.defaultCompletionSources,{onboardingUIActions:d.uiActions,assistantUIActions:t,activeStep:d.activeStep.view(r.map((e=>e.name))),session:c.session,trackingService:n,disposed:a,logger:l}).subscribe(i)),u.add(function(e,t){return e.pipe(m.h(y.lG.is(y.lG.Kind.mount)),A.b((e=>{switch(e.step){case y.TG.StepName.initial:return t.trackOnboardingPopupView();case y.TG.StepName.prompts:return t.trackOnboardingPromptsTooltipView();case y.TG.StepName.review:return t.trackOnboardingReviewTooltipView();case y.TG.StepName.rewrite:return t.trackOnboardingRewriteTooltipView();case y.TG.StepName.knowledgeHub:return t.trackOnboardingKnowledgeHubTooltipView();default:return(0,v.L0)(e.step)}})))}(d.uiActions,n).subscribe()),d}var j=n(34217),F=n(27378),D=n(13578),V=n(90845),M=n(62080),L=n(74204),K=n(62172),$=n(88392),H=n(89894),Z=n(12187),W=n(37360);const q=F.forwardRef((function({placement:e,style:t,arrowColor:n},i){return F.createElement("div",{ref:i,style:{width:33}},F.createElement("svg",{width:33,height:12,viewBox:"0 0 33 12.5",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:Object.assign(Object.assign(Object.assign({position:"absolute"},t),{transform:`${(null==t?void 0:t.transform)||""} rotate(${Y(e)}deg)`.trimStart()}),X(e))},F.createElement("path",{d:"M0.5 3.41877e-07C3.5 3.41877e-07 29.5 3.41877e-07 32.5 3.41877e-07C28.5 3.41877e-07 26.4111 0.903505 24.1814 3.69994L17.5562 11.4728C16.957 12.1757 15.8652 12.1757 15.2661 11.4728L8.64084 3.69994C6.41113 0.903505 4.5 3.41877e-07 0.5 3.41877e-07Z",fill:n||"white"})))}));function Y(e){return(null==e?void 0:e.startsWith("right"))?90:(null==e?void 0:e.startsWith("bottom"))?180:(null==e?void 0:e.startsWith("left"))?270:0}function X(e){return(null==e?void 0:e.startsWith("bottom"))?{top:-12}:(null==e?void 0:e.startsWith("top"))?{bottom:-12}:(null==e?void 0:e.startsWith("right"))?{transformOrigin:"top left",top:-16.5,left:0}:(null==e?void 0:e.startsWith("left"))?{transformOrigin:"top right",top:-16.5,right:0}:{}}const Q=(0,Z.xb)((({reference:e,placement:t,offset:n,boundaryAreaPadding:i,className:r,arrowColor:s,children:o})=>{const[a,l]=F.useState(null),[c,u]=F.useState(null),d=(0,W.sJ)(),{styles:m,attributes:p,state:g}=(0,L.D)(e,a,{placement:t,modifiers:[{name:"offset",options:{offset:[0,12+(null!=n?n:0)]}},{name:"arrow",options:{element:c,padding:12}},{name:"preventOverflow",options:{padding:null!=i?i:5}},d]});return F.createElement("div",Object.assign({ref:l,style:m.popper},p.popper,(0,Z.Sh)(ee,r)),F.createElement(q,{ref:u,style:m.arrow,placement:null==g?void 0:g.placement,arrowColor:s}),o)})),J=e=>H.ux.color(K.BlueGray40).toRGBA().fade(e).toString(),ee=H.ux.style({filter:`drop-shadow(0px 0px 0.5px ${K.BlueGray40}) drop-shadow(0px 0px 2px ${J(.5)}) drop-shadow(0px 1px 6px ${J(.25)})`,borderRadius:H.ux.rem($.xB+$.fe)});var te=n(9546),ne=n(68200);const ie="tryItOutBtn",re="skipBtn",se=H.ux.rem($.xB+$.fe),oe={width:H.ux.rem(25.875),background:D.XY.Surface.Primary.Default},ae={display:"flex",alignItems:"center",justifyContent:"center",height:H.ux.rem(14.5625),width:"100%",backgroundColor:"#00231F",backgroundImage:"url(https://assets.grammarly.com/icons/v1/cheetah-onboarding.2x.png)",backgroundPosition:`top ${H.ux.rem(1)} left 0`,backgroundSize:"100%",backgroundRepeat:"no-repeat",borderTopLeftRadius:se,borderTopRightRadius:se},le={display:"flex",flexDirection:"column",gap:H.ux.rem(te.F2),padding:`${H.ux.rem(te.mh)} ${H.ux.rem(te.x0)} ${H.ux.rem(te.sD)} ${H.ux.rem(te.sD)}`,color:D.XY.Content.Primary.Default},ce={display:"flex",flexDirection:"row",alignItems:"center",gap:H.ux.rem(te.x),fontWeight:"bold",fontSize:H.ux.rem(1),lineHeight:H.ux.rem(1.5)},ue={fontSize:H.ux.rem(.875),lineHeight:H.ux.rem(1.375)},de={display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",borderBottomLeftRadius:se,borderBottomRightRadius:se,padding:`${H.ux.rem(te.qp)} ${H.ux.rem(te.sD)} ${H.ux.rem(te.qp)} ${H.ux.rem(te.sD)}`,backgroundColor:D.XY.Surface.Secondary.Default,color:D.XY.Content.Secondary.Default,fontSize:H.ux.rem(.875),lineHeight:H.ux.rem(1.3125),$nest:{a:{color:"inherit"}}},me={width:H.ux.rem(12),lineHeight:H.ux.rem(1.25)},pe=Object.assign({marginRight:H.ux.rem(.5)},ne.Es.buttonOverrideSpecificity({fontSize:H.ux.rem(.875)},re)),ge=ne.Es.buttonOverrideSpecificity({fontSize:H.ux.rem(.875),fontWeight:"bold"},ie),he={position:"absolute",top:H.ux.rem(te.x),right:H.ux.rem(te.x)},fe=H.ux.style(oe),xe=H.ux.style(ae),ve=H.ux.style(le),be=H.ux.style(ce),ye=H.ux.style(ue),Ce=H.ux.style(de),ke=H.ux.style(me),Se=H.ux.style({display:"flex",flexDirection:"row",alignItems:"flex-end"}),we=H.ux.joinClasses([re,H.ux.style(pe)]),_e=H.ux.joinClasses([ie,H.ux.style(ge)]),Ee=H.ux.style({display:"inline"}),Oe=H.ux.style(he),Ae=j.UI.Node.make((({view:e,notify:t})=>{const{ref:n,onMount:i}=V.P.useElWatcher(),r=F.useMemo((()=>n.pipe(E.QV(O.E),f.oA,A.b((e=>t({kind:y.lG.Kind.mount,step:y.TG.StepName.initial,element:e})())))),[n]);return V.P.useSubscriptionTo(r),F.createElement(Q,{className:fe,reference:e("reference"),placement:e("placement"),offset:e("offset"),boundaryAreaPadding:e("boundaryAreaPadding"),arrowColor:D.XY.Surface.Secondary.Default},F.createElement(M.xx,{onClick:t({kind:y.lG.Kind.close,step:y.TG.StepName.initial}),name:"onboardingClose",size:"medium",className:Oe}),F.createElement("div",{className:xe},F.createElement(M.rN,null)),F.createElement("div",{className:ve,ref:i},F.createElement("div",{className:be},F.createElement("div",null,"Write faster with GrammarlyGO"),F.createElement(M.Ct,null,"Beta")),F.createElement("div",{className:ye},"Brainstorm, write, and rewrite with generative AI assistance at your fingertips.")),F.createElement("div",{className:Ce},F.createElement("div",{className:ke},"If you use GrammarlyGO,"," ",F.createElement(M.dL,{href:"https://grammarly.com/terms",className:Ee},"additional terms")," ","apply."),F.createElement("div",{className:Se},F.createElement(M.zx.Tertiary,{onClick:t({kind:y.lG.Kind.close,step:y.TG.StepName.initial}),className:we,name:"skip"},"Skip"),F.createElement(M.zx.Primary,{onClick:t({kind:y.lG.Kind.tryItOut}),className:_e,name:"tryItOut"},"Try it out"))))}));function Ie(e){return j.Z.fromSideEffect((t=>e.notify(t)),e.activeStep.pipe(f.oA))}const Pe=(0,Z.xb)((({reference:e,placement:t,offset:n,boundaryAreaPadding:i,children:r,name:s})=>F.createElement(M.J2,{reference:e,placement:t,offset:n,boundaryAreaPadding:i,theme:{bgColor:K.Green80,fgColor:D.S5.Content.Primary.Default,padding:H.ux.rem(te.mh),width:s===y.TG.StepName.knowledgeHub?H.ux.rem(16):H.ux.rem(13.75)}},r))),Re={[y.TG.StepName.prompts]:{title:"Start with a prompt",description:e=>e?`Choose a suggested prompt, or type your own to get started. You’ll get ${Number(e).toLocaleString()} each month.`:"Choose a suggested prompt, or type your own to get started."},[y.TG.StepName.review]:{title:"How does this sound?",description:"Adjust it to your liking with additional prompts. Don’t forget to check for any inaccuracies. "},[y.TG.StepName.rewrite]:{title:"Want help rewriting?",description:"Select your text to rewrite it with GrammarlyGO."},[y.TG.StepName.knowledgeHub]:{title:"Using organizational language?",description:"Prompt GrammarlyGO using terms and project names from Knowledge Share to automatically insert organizational context."}},Be=j.UI.Node.make((({state:e,view:t,notify:n})=>{const{ref:i,onMount:r}=V.P.useElWatcher(),s=F.useMemo((()=>i.pipe(f.oA,h.M(t("name")),E.QV(O.E),c.U((([e,t])=>({element:e,stepName:t}))),A.b((({element:e,stepName:t})=>n({kind:y.lG.Kind.mount,step:t,element:e})())))),[i]);return V.P.useSubscriptionTo(s),F.createElement(Pe,{name:t("name"),reference:t("reference"),placement:t("placement"),offset:t("offset"),boundaryAreaPadding:t("boundaryAreaPadding")},e.pipe(c.U((e=>F.createElement(F.Fragment,null,F.createElement(M.xx,{onClick:n({kind:y.lG.Kind.close,step:e.name}),name:"tooltipClose",className:Te,size:"small"}),F.createElement("div",{className:Ne},Re[e.name].title),F.createElement("div",{ref:r},e.name===y.TG.StepName.prompts?Re[e.name].description(e.promptsAllocated):Re[e.name].description))))))})),Ue=j.UI.Union.asOption(Be),Ne=H.ux.style({fontWeight:700}),Te=H.ux.style({position:"absolute",top:H.ux.rem(te.x),right:H.ux.rem(te.x)});function Ge(e){return j.Z.composeOption(function(e){return j.Z.fromSideEffect((t=>e.notify(t)),e.activeStep.pipe(f.oA,m.h(i.isTooltipOnboardingStep),h.M(e.promptsAllocated.pipe(c.U(r.toUndefined))),c.U((([e,t])=>Object.assign(Object.assign({},e),{promptsAllocated:t})))))}(e),(()=>e.activeStep.pipe(c.U(r.filter(i.isTooltipOnboardingStep)))))}const ze=j.UI.Union.make("kind",{none:j.UI.Node.empty,initial:Ae,tooltip:Ue});var je=n(76974);function Fe(e){return j.Z.composeUnion({none:()=>je.of(null),initial:Ie(e),tooltip:Ge(e)},(()=>e.activeStep.view(De).view((e=>({kind:e})))))}function De(e){return(0,s.zG)(e,r.filter((e=>e.show)),r.fold((()=>"none"),(e=>{switch(e.name){case y.TG.StepName.initial:return"initial";case y.TG.StepName.prompts:case y.TG.StepName.review:case y.TG.StepName.rewrite:case y.TG.StepName.knowledgeHub:return"tooltip";default:return(0,v.L0)(e.name)}})))}},68200:(e,t,n)=>{n.d(t,{Es:()=>i,BO:()=>s,eG:()=>V,E9:()=>g,ap:()=>m,$d:()=>G,mA:()=>D,vY:()=>u,$Q:()=>c,JY:()=>U,C7:()=>h,Re:()=>d,xs:()=>F,uj:()=>A,ni:()=>Z,m:()=>I,NN:()=>f,tt:()=>$,E:()=>p,DO:()=>j,lA:()=>T});var i={};n.r(i),n.d(i,{baseButtonContentOverrideSpecificity:()=>ee,buttonOverrideSpecificity:()=>ne,cheetahButtonContentOverrideSpecificity:()=>te,heightAndMinHeightRems:()=>Y,iconSizeRems:()=>X,repeatClassSelector:()=>Q,specificity:()=>J,widthAndMinWidthRems:()=>q});var r=n(62172);const s=Object.assign(Object.assign({},r),{BrandGreen60:"#018374",BrandGreen80:"#017467",TextBaseSubduedColor:"#646B81",TextBaseDefault:"#161719"});var o=n(31699),a=n(77176);function l(e){const t=function(e){const t=e.ownerDocument;if(t)return t;throw new Error("target does not have ownerDocument")}(e).defaultView;if(t)return t;throw new Error("active document is detached from a window")}function c(e,t=3){if(e&&t>0){const n=function(e){const t=(null===(r=null===(i=(n=e).ownerDocument)||void 0===i?void 0:i.defaultView)||void 0===r?void 0:r.getComputedStyle(n))||null;var n,i,r;return t?"auto"===t.overflow||"scroll"===t.overflow||"auto"===t.overflowY||"scroll"===t.overflowY||"auto"===t.overflowX||"scroll"===t.overflowX:null}(e);return n?e:null===n?null:c(null==e?void 0:e.parentElement,t-1)}return null}function u(e){var t,n;return null===(n=(null===(t=e.activeElement)||void 0===t?void 0:t.shadowRoot)||e)||void 0===n?void 0:n.activeElement}function d(e){return e instanceof HTMLElement}const m=["b","i"];function p(e,t=m){return"string"==typeof e?{dangerouslySetInnerHTML:{__html:(0,o.sanitize)(e,{ALLOWED_TAGS:Array.from(t)})}}:{dangerouslySetInnerHTML:e.pipe(a.U((e=>({__html:(0,o.sanitize)(e,{ALLOWED_TAGS:Array.from(t)})}))))}}var g;function h(e=document){return{top:0,left:0,height:e.documentElement.clientHeight,width:e.documentElement.clientWidth}}function f(e,t){return n=>{const i=function(e,t){const n=e.left<t.left?t.left:e.left+e.width>t.left+t.width?t.left+t.width-e.width:e.left,i=e.top<t.top?t.top:e.top+e.height>t.top+t.height?t.top+t.height-e.height:e.top;return Object.assign(Object.assign({},e),{left:n,top:i})}({left:e.left+n.x,top:e.top+n.y,width:e.width,height:e.height},t);return{x:i.left-e.left,y:i.top-e.top}}}!function(e){e.fromCartesian=function({x:e,y:t}){return{top:t,left:e}},e.l1Distance=function(e,t){return Math.abs(e.top-t.top)+Math.abs(e.left-t.left)}}(g||(g={}));var x,v=n(57050),b=n(85985),y=n(28043),C=n(66310),k=n(49708),S=n(2834),w=n(2768),_=n(55721),E=n(39719),O=n(67434);function A(){return(0,v.ls)(b.h((e=>!!e)),y.x(),C.w((e=>k.R(e,"mousedown").pipe(b.h((e=>!e.button)),S.b((e=>e.preventDefault())),a.U((t=>({element:e,startPos:{x:t.clientX,y:t.clientY}}))),C.w((e=>k.R(l(e.element),"mousemove").pipe(w.R(k.R(l(e.element),"mouseup",{capture:!0})),_.p(10),a.U((({clientX:t,clientY:n})=>({kind:"dragInProgress",element:e.element,startPos:e.startPos,delta:{x:t-e.startPos.x,y:n-e.startPos.y}}))),E.l({kind:"dragDone"}))))))),O.R(((e,t)=>"dragDone"===t.kind?{translate:e.translate,lastTranslate:e.translate,dragging:!1,dragStart:!1,dragEnd:e.dragging}:{dragging:!0,dragStart:!e.dragging,dragEnd:!1,lastTranslate:e.lastTranslate,translate:{x:t.delta.x+e.lastTranslate.x,y:t.delta.y+e.lastTranslate.y}}),x.create()))}function I(e){return t=>{(null==t?void 0:t.isTrusted)&&(null==e||e(t))}}!function(e){e.create=function(){return{translate:{x:0,y:0},lastTranslate:{x:0,y:0},dragging:!1,dragStart:!1,dragEnd:!1}}}(x||(x={}));var P=n(5114),R=n(45701),B=n(64015);function U(){return R.contramap((({matchScore:e})=>e))(R.ordNumber)}function N(e){return e.split(/\s+/).map((e=>e.trim())).filter((e=>""!==e))}function T(e,t,n){const i=N(e),r=[...N(t),...(0,v.zG)(n,B.tS((e=>N(e))))],s=i.map((()=>null));let o=0;for(const e of r){if(o>=i.length)break;e.toLowerCase().includes(i[o].toLowerCase())&&(s[o]=0,++o)}return s.includes(null)?P.none:P.some(s.map((e=>null!=e?e:0)).reduce(((e,t)=>e+t),0))}const G=()=>e=>e;var z=n(8709);function j(e){return(0,v.zG)(P.fromNullable(null==e?void 0:e.ops),P.filter(Array.isArray),P.map((e=>new z.i([...e]))))}function F(e){return Number.isInteger(e)&&e>=0&&e<10}function D(e){return["zero","one","two","three","four","five","six","seven","eight","nine"][e]}var V,M=n(95195),L=n(7514),K=function(e,t,n,i){return new(n||(n=Promise))((function(r,s){function o(e){try{l(i.next(e))}catch(e){s(e)}}function a(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}l((i=i.apply(e,t||[])).next())}))};function $(e,t,n,i,r){return K(this,void 0,void 0,(function*(){try{const s=yield t();M.isLeft(s)?(null==n||n.error("runTaskEither() - error running task",{taskName:e,result:s}),null==r||r(s.left)):(null==n||n.debug("runTaskEither() - task successful",{taskName:e,result:s.right}),null==i||i(s.right))}catch(t){null==n||n.error("runTaskEither() - promise rejection running task",L.jI.isErrorLike(t)?t:new Error(String(t)),{taskName:e})}}))}!function(e){e.set=function(e,t){return n=>Object.assign(Object.assign({},n),{[e]:t})}}(V||(V={}));var H=n(48044);function Z(e){return(t,n)=>i=>(0,v.zG)(i,H.cq(e)(t,(0,v.ls)(P.some,n)),P.getOrElse((()=>(0,v.zG)(i,H.ZQ(e)(t,n(P.none))))))}var W=n(89894);function q(e){return{width:W.ux.rem(e),minWidth:W.ux.rem(e)}}function Y(e){return{height:W.ux.rem(e),minHeight:W.ux.rem(e)}}function X(e,t){return Object.assign(Object.assign({},q(e)),Y(null!=t?t:e))}function Q(e,t){return`.${e}`.repeat(t)}function J(e,t,n){return{$nest:{[`&${Q(t,n)}`]:e}}}const ee=6,te=ee+1;function ne(e,t){return J(e,t,te)}},56377:(e,t,n)=>{n.d(t,{L:()=>l});var i,r=n(59312),s=n(27378),o=n(12187),a=n(89894),l=function(e){var t=e.double,n=e.triple,i=e.small;return s.createElement("div",(0,r.__assign)({},(0,o.Sh)(d,!0===t&&p,!0===n&&h,!0===i&&f)))},c=.875,u="spacer",d=a.ux.joinClasses([u,a.ux.style({margin:0,minHeight:a.ux.rem(c),maxHeight:a.ux.rem(1),width:a.ux.percent(100),height:a.ux.rem(1)})]),m="spacerDouble",p=a.ux.joinClasses([m,a.ux.style({minHeight:a.ux.rem(1.75),maxHeight:a.ux.rem(2),height:a.ux.rem(2)})]),g="spacerTriple",h=a.ux.joinClasses([g,a.ux.style({minHeight:a.ux.rem(2.625),maxHeight:a.ux.rem(3),height:a.ux.rem(3)})]),f=a.ux.style({$nest:(i={},i["&.".concat(u)]={minHeight:a.ux.rem(.4375),maxHeight:a.ux.rem(.5),height:a.ux.rem(.5)},i["&.".concat(m)]={minHeight:a.ux.rem(c),maxHeight:a.ux.rem(1),height:a.ux.rem(1)},i["&.".concat(g)]={minHeight:a.ux.rem(1.3125),maxHeight:a.ux.rem(1.5),height:a.ux.rem(1.5)},i)})},51369:(e,t,n)=>{n.d(t,{X:()=>I});var i,r=n(59312),s=n(27378),o=n(57050),a=n(5114),l=n(19962),c=n(44060),u=n(11413),d=n(89894),m=n(32096),p=n(40327),g=n(5739),h=n(49708),f=n(85985),x=n(41398),v=n(24209),b=n(17343),y=n(98403),C=n(38194),k=n(598),S=n(50628),w=n(25781),_=n(83078),E=n(18625);!function(e){var t="scrollaction";e.emit=function(e){return self.dispatchEvent(new CustomEvent(t,{detail:e}))},e.observe=E.P((function(){return h.R(self,t)}))}(i||(i={}));var O=n(42103),A=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._subs=[],t._outOfTarget=function(e){return function(t){return!l.Rect.hasPoint(t.getBoundingClientRect(),e)}},t}return(0,r.__extends)(t,e),t.prototype.componentDidMount=function(){this._listenTooltipAppearance()},t.prototype.componentWillUnmount=function(){this._subs.forEach((function(e){return e.unsubscribe()})),this._subs=[],this.context.hide()},t.prototype.render=function(){return s.createElement(g.F.div,{"data-role":"tooltip"},this.context.state.view(this.props.children))},t.prototype._listenTooltipAppearance=function(){var e=this,t=h.R(document,"keydown").pipe(f.h((function(e){return e.keyCode===w.R.ESC_CODE}))),n=h.R(document,"mousedown").pipe(x.M(this.context.state),f.h((function(t){var n=t[0],i=t[1];return(0,p.pipe)(i,a.map((function(e){return e.target})),a.filter((function(){return l.isDisabled(n.target)})),_.forAll(e._outOfTarget({x:n.clientX,y:n.clientY})))}))),r=v.T(t,n,h.R(document,"scroll"),i.observe.pipe(f.h((function(e){return"show"===e.detail})))).pipe(b.h(y.PU),C.B());this._subs=[this.context.hasContent.pipe(f.h(Boolean),k.c(r.pipe(S.P()))).subscribe(this.context.hide),this.context.hasContent.pipe(f.h(Boolean),k.c(v.T(y.gw(!0,500),r.pipe(b.h(!1))).pipe(S.P())),f.h(Boolean)).subscribe(this.context.show)]},t.contextType=O.G.Context,t}(s.Component),I=function(){return s.createElement(A,null,(0,o.ls)(a.map((function(e){return s.createElement(u.t.ByAbsoluteRect,(0,r.__assign)({rect:l.Rect.fromEl(e.target),className:B.container},u.t.Alignment.toSelector(e.alignment),{withPin:!0}),s.createElement("div",{className:B.content},e.content))})),a.toNullable))},P={position:"fixed",zIndex:m.DY,pointerEvents:"none",$nest:{"@media print":{visibility:"hidden"}}},R={padding:"".concat(d.ux.rem(.25)," ").concat(d.ux.rem(1)),borderRadius:d.ux.rem(m.fx),background:c.Il.BackgroundTooltip,color:c.Il.CoreNeutral1,textAlign:"center",whiteSpace:"nowrap",letterSpacing:d.ux.px(.25),fontSize:d.ux.rem(.75),lineHeight:d.ux.rem(1)},B=d.ux.stylesheet({container:[P],content:[R]})},13853:(e,t,n)=>{n.d(t,{$T:()=>_,AO:()=>a,DZ:()=>P,Eh:()=>l,G:()=>c,G0:()=>f,KX:()=>p,Lf:()=>y,Lx:()=>S,Od:()=>E,UI:()=>u,ZN:()=>s,e5:()=>b,hX:()=>g,jV:()=>x,nI:()=>O,oA:()=>A,oP:()=>C,ri:()=>w,t9:()=>h,tS:()=>m,tV:()=>v,u4:()=>k,xu:()=>I,yW:()=>d});var i=n(73975),r=n(57050);function s(e){return{show:function(t){var n="";return t.forEach((function(t){n+=e.show(t)+", "})),""!==n&&(n=n.substring(0,n.length-2)),"new Set(["+n+"])"}}}var o=new Set;function a(e){return function(t){var n=[];return t.forEach((function(e){return n.push(e)})),n.sort(e.compare)}}function l(e){var t=p(e);return(0,i.f7)((function(e,n){return t(e,n)&&t(n,e)}))}function c(e){return function(t){for(var n,i=t.values(),r=!1;!r&&!(n=i.next()).done;)r=e(n.value);return r}}function u(e){var t=h(e);return function(e){return function(n){var i=new Set;return n.forEach((function(n){var r=e(n);t(r,i)||i.add(r)})),i}}}function d(e){return(0,r.ff)(c((0,r.ff)(e)))}function m(e){var t=h(e);return function(e){return function(n){var i=new Set;return n.forEach((function(n){e(n).forEach((function(e){t(e,i)||i.add(e)}))})),i}}}function p(e){var t=h(e);return function(n,i){if(void 0===i){var r=p(e);return function(e){return r(e,n)}}return d((function(e){return t(e,i)}))(n)}}function g(e){return function(t){for(var n,i=t.values(),r=new Set;!(n=i.next()).done;){var s=n.value;e(s)&&r.add(s)}return r}}function h(e){return function(t,n){if(void 0===n){var i=h(e);return function(e){return i(t,e)}}for(var r,s=n.values(),o=!1;!o&&!(r=s.next()).done;)o=e.equals(t,r.value);return o}}function f(e){var t=h(e);return function(n,i){if(void 0===i){var r=f(e);return function(e){return r(n,e)}}if(n===o)return i;if(i===o)return n;var s=new Set(n);return i.forEach((function(e){t(e,s)||s.add(e)})),s}}function x(e){var t=h(e);return function(n,i){if(void 0===i){var r=x(e);return function(e){return r(e,n)}}if(n===o||i===o)return o;var s=new Set;return n.forEach((function(e){t(e,i)&&s.add(e)})),s}}function v(e,t){return function(n){return function(i){for(var r,s=i.values(),o=new Set,a=new Set,l=h(e),c=h(t);!(r=s.next()).done;){var u=n(r.value);switch(u._tag){case"Left":l(u.left,o)||o.add(u.left);break;case"Right":c(u.right,a)||a.add(u.right)}}return{left:o,right:a}}}}function b(e){var t=h(e);return function(n,i){if(void 0===i){var r=b(e);return function(e){return r(e,n)}}return g((function(e){return!t(e,i)}))(n)}}function y(e){return{concat:f(e),empty:o}}function C(e){return{concat:x(e)}}function k(e){var t=a(e);return function(e,n){return function(i){return t(i).reduce(n,e)}}}function S(e,t){var n=a(e);return function(e){return function(i){return n(i).reduce((function(n,i){return t.concat(n,e(i))}),t.empty)}}}function w(e){return new Set([e])}function _(e){var t=h(e);return function(e){return function(n){if(t(e)(n))return n;var i=new Set(n);return i.add(e),i}}}function E(e){return function(t){return function(n){return g((function(n){return!e.equals(t,n)}))(n)}}}function O(e){return function(t){for(var n=t.length,i=new Set,r=h(e),s=0;s<n;s++){var o=t[s];r(o,i)||i.add(o)}return i}}function A(e){return P(e)(r.yR)}function I(e,t){return function(n){var i=h(e),r=h(t),s=new Set,o=new Set;return n.forEach((function(e){switch(e._tag){case"Left":i(e.left,s)||s.add(e.left);break;case"Right":r(e.right,o)||o.add(e.right)}})),{left:s,right:o}}}function P(e){var t=h(e);return function(e){return function(n){var i=new Set;return n.forEach((function(n){var r=e(n);"Some"!==r._tag||t(r.value,i)||i.add(r.value)})),i}}}}}]);