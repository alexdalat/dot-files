(self.webpackChunk=self.webpackChunk||[]).push([[1896],{1226:(e,t,n)=>{n.d(t,{aU:()=>r,pY:()=>i,Cl:()=>B,ix:()=>w,ec:()=>_,a8:()=>k,JZ:()=>P,_y:()=>o,nF:()=>E,x2:()=>h,_H:()=>U,TG:()=>C,lG:()=>S,H3:()=>a,s3:()=>T,x4:()=>u,z_:()=>f.z,Z7:()=>g,Zq:()=>y,LA:()=>p});var i,r,o,s=n(57050);!function(e){let t,n;!function(e){e.create=function(e){return e}}(t=e.Id||(e.Id={})),function(e){e.create=function(e,t){return{id:e,kind:"string",value:t}}}(n=e.StringValue||(e.StringValue={}))}(i||(i={})),function(e){function t(e){return"userPrompt"===e.kind}function n(e){return"dynamic"===e.kind}function r(e){return"quickRewrite"===e.kind}let o,a,l,c,u;e.isUserPrompt=t,e.isDynamic=n,e.isQuickRewrite=r,e.willGenerateResult=function(e){return t(e)||r(e)||n(e)&&e.generatesResult},function(e){e.create=function(e){return e}}(o=e.Id||(e.Id={})),function(e){e.isFollowUpQuestion=function(e){return 1===e.args.length&&"string"===e.args[0].kind},e.isQuickAction=function(e){return 0===e.args.length}}(a=e.DynamicInput||(e.DynamicInput={})),function(e){e.fromInputAndValue=function(e,t){return Object.assign(Object.assign({},e),{args:[(0,s.zG)(e.args[0],(e=>i.StringValue.create(e.id,t)))]})}}(l=e.FollowUpQuestionValue||(e.FollowUpQuestionValue={})),function(e){e.fromInput=function(e,t){return Object.assign(Object.assign({},e),{arg:i.StringValue.create(e.arg.id,t)})}}(c=e.UserPromptValue||(e.UserPromptValue={})),function(e){e.fromInput=function(e){return Object.assign(Object.assign({},e),{args:[]})}}(u=e.QuickRewriteValue||(e.QuickRewriteValue={}))}(r||(r={})),function(e){let t;!function(e){e.create=function(e){return e}}(t=e.Id||(e.Id={})),e.isPending=function(e){return"pending"===e.kind},e.isReceived=function(e){return"received"===e.kind}}(o||(o={}));var a,l=n(5114),c=n(26328);!function(e){let t,n;e.fromOuterContext=function(e){var n,i,r,o;const a=e=>(0,s.zG)(l.fromNullable(null==e?void 0:e.from),l.chain(c.nI),l.map(c.YM),l.fold((()=>t.empty),t.fromNameAndEmailString)),u=e=>(0,s.zG)(l.fromNullable(null==e?void 0:e.to),l.chain(c.nI),l.map(c.UI(t.fromNameAndEmailString)),l.getOrElseW((()=>[]))),d=(0,s.zG)(l.fromNullable(e.items),l.chain(c.nI),l.map(c.YM),l.getOrElseW((()=>{})));return{previousMessageInfo:{author:a(null==d?void 0:d.people),directRecipients:u(null==d?void 0:d.people),text:null!==(n=null==d?void 0:d.text)&&void 0!==n?n:""},title:null!==(i=e.title)&&void 0!==i?i:"",author:a(e.people),directRecipients:u(e.people),indirectRecipients:(0,s.zG)(l.fromNullable(null===(r=e.people)||void 0===r?void 0:r.cc),l.chain(c.nI),l.map(c.UI(t.fromNameAndEmailString)),l.getOrElseW((()=>[]))),undisclosedRecipients:(0,s.zG)(l.fromNullable(null===(o=e.people)||void 0===o?void 0:o.bcc),l.chain(c.nI),l.map(c.UI(t.fromNameAndEmailString)),l.getOrElseW((()=>[])))}},e.toOuterContext=function(t){return{title:t.title,people:{from:[e.Person.extractNameAndEmailString(t.author)],to:t.directRecipients.map(e.Person.extractNameAndEmailString),cc:t.indirectRecipients.map(e.Person.extractNameAndEmailString),bcc:t.undisclosedRecipients.map(e.Person.extractNameAndEmailString)},items:[{text:t.previousMessageInfo.text,people:{from:[e.Person.extractNameAndEmailString(t.previousMessageInfo.author)],to:t.previousMessageInfo.directRecipients.map(e.Person.extractNameAndEmailString)}}]}},e.empty={previousMessageInfo:{author:{name:"",email:""},directRecipients:[],text:""},title:"",author:{name:"",email:""},directRecipients:[],indirectRecipients:[],undisclosedRecipients:[]},function(e){e.empty={name:"",email:""},e.fromNameAndEmailString=function(t){return(0,s.zG)(l.fromNullable(t.match(/^([^<]*)<(.*)>$/)),l.map((e=>{var t,n,i,r;return{name:null!==(n=null===(t=e[1])||void 0===t?void 0:t.trim())&&void 0!==n?n:"",email:null!==(r=null===(i=e[2])||void 0===i?void 0:i.trim())&&void 0!==r?r:""}})),l.getOrElse((()=>e.empty)))},e.extractNameAndEmailString=function(e){const t=""!==e.email?`<${e.email}>`:"";return[e.name,t].filter((e=>""!==e)).join(" ")}}(t=e.Person||(e.Person={})),function(e){e.empty={author:{name:"",email:""},directRecipients:[],text:""}}(n=e.PreviousMessageInfo||(e.PreviousMessageInfo={}))}(a||(a={}));var u,d=n(73975),m=n(8125);!function(e){let t,n;!function(e){e.create=function(e){return`${e}`},e.toPrimitive=function(e){return parseInt(e)},e.eq=d.yv}(t=e.Id||(e.Id={})),function(e){e.insert="insert",e.reportOffensive="reportOffensive"}(n=e.Feedback||(e.Feedback={})),e.hasId=function(e){return"id"in e},e.isComplete=function(e){return"complete"===e.kind},e.isInProgressOngoing=function(e){return"inProgressOngoing"===e.kind},e.isInProgressPending=function(e){return"inProgressPending"===e.kind},e.isInProgressInterrupted=function(e){return"inProgressInterrupted"===e.kind},e.isInProgress=(0,m.Kg)(e.isInProgressOngoing,e.isInProgressPending)}(u||(u={}));var p,h,g,f=n(45626),x=n(48044),b=n(13853),v=n(22232);!function(e){let t,n,i,r,o;!function(e){let t;!function(e){e.create=function(e){return e},e.eq=d.yv}(t=e.Id||(e.Id={}))}(t=e.Tone||(e.Tone={})),function(e){let t;!function(e){e.create=function(e){return e},e.eq=d.yv}(t=e.Id||(e.Id={}))}(n=e.Style||(e.Style={})),function(e){let t;!function(e){e.create=function(e){return e},e.eq=d.yv}(t=e.Id||(e.Id={}))}(i=e.Role||(e.Role={})),function(e){let t,n;function i(e){switch(e){case t.american:return"American English";case t.australian:return"Australian English";case t.british:return"British English";case t.canadian:return"Canadian English";case t.indian:return"Indian English";default:return(0,v.L0)(e)}}function r(e){switch(e){case t.american:return"https://assets.grammarly.com/emoji/v1/1f1fa-1f1f8.svg";case t.australian:return"https://assets.grammarly.com/emoji/v1/1f1e6-1f1fa.svg";case t.british:return"https://assets.grammarly.com/emoji/v1/1f1ec-1f1e7.svg";case t.canadian:return"https://assets.grammarly.com/emoji/v1/1f1e8-1f1e6.svg";case t.indian:return"https://assets.grammarly.com/emoji/v1/1f1ee-1f1f3.svg";default:return(0,v.L0)(e)}}!function(e){e.fromString=function(t){switch(t){case"american":return e.american;case"australian":return e.australian;case"british":return e.british;case"canadian":return e.canadian;case"indian":return e.indian;default:return(0,v.L0)(t)}}}(t=e.Value||(e.Value={})),function(e){e.american="american",e.australian="australian",e.british="british",e.canadian="canadian",e.indian="indian"}(t=e.Value||(e.Value={})),function(e){e.create=function(e){return e},e.eq=d.yv}(n=e.Id||(e.Id={})),e.american={id:n.create(t.american),label:i(t.american),iconUrl:r(t.american)},e.australian={id:n.create(t.australian),label:i(t.australian),iconUrl:r(t.australian)},e.british={id:n.create(t.british),label:i(t.british),iconUrl:r(t.british)},e.canadian={id:n.create(t.canadian),label:i(t.canadian),iconUrl:r(t.canadian)},e.indian={id:n.create(t.indian),label:i(t.indian),iconUrl:r(t.indian)},e.all=function(){return[e.american,e.australian,e.british,e.canadian,e.indian]}}(r=e.Dialect||(e.Dialect={})),function(e){e.eq=d.MW({selectedStyle:n.Id.eq,selectedTonesPerStyle:x.Eh(n.Id.eq,b.Eh(t.Id.eq)),selectedRole:l.getEq(i.Id.eq),selectedDialect:r.Id.eq})}(o=e.Selections||(e.Selections={}))}(p||(p={})),function(e){let t,n;!function(e){e.ok="ok",e.satisfied="satisfied",e.dissatisfied="dissatisfied"}(t=e.Mood||(e.Mood={})),function(e){e.resultCard="resultCard",e.quickReplyInitialActions="quickReplyInitialActions"}(n=e.Source||(e.Source={}))}(h||(h={})),function(e){let t,n,i,r,o,a,l;!function(e){let t;!function(e){e.rephrase="rephrase",e.dismiss="dismiss",e.insert="insert",e.offensive="offensive"}(t=e.UserAction||(e.UserAction={}))}(t=e.Result||(e.Result={})),function(e){let t;!function(e){e.open="open",e.skip="skip",e.openFromBanner="openFromBanner"}(t=e.UserAction||(e.UserAction={}))}(n=e.VoiceProfile||(e.VoiceProfile={})),function(e){let t;!function(e){e.openStore="openStore",e.offensive="offensive"}(t=e.UserAction||(e.UserAction={}))}(i=e.Actions||(e.Actions={})),function(e){let t;!function(e){e.search="search"}(t=e.UserAction||(e.UserAction={}))}(r=e.Prompt||(e.Prompt={})),function(e){let t;!function(e){e.hover="hover",e.click="click"}(t=e.UserAction||(e.UserAction={}))}(o=e.UsageInfo||(e.UsageInfo={})),function(e){let t;!function(e){e.view="view",e.skip="skip",e.next="next"}(t=e.UserAction||(e.UserAction={}))}(a=e.Onboarding||(e.Onboarding={})),function(e){let t;!function(e){e.close="close"}(t=e.UserAction||(e.UserAction={}))}(l=e.Assistant||(e.Assistant={})),e.getComponentId=function(e,t){return(0,s.zG)(e.kind,(t=>{switch(t){case"result":return"card";case"voiceProfile":return"voice";case"actions":return e.userAction===i.UserAction.openStore?"group":"card";case"assistant":return"widget";case"onboardingPromptsTooltip":return"onboardingPromptTooltip";case"onboardingReviewTooltip":return"onboardingReviewtextTooltip";case"usageInfo":case"prompt":case"onboardingPopup":case"onboardingRewriteTooltip":case"onboardingKnowledgeHubTooltip":return t;default:return(0,v.L0)(t)}}),(e=>`cheetah:${e}${t?`:${t}`:""}`))},e.getUserAction=function(e){return(0,s.zG)(e.kind,(t=>{switch(t){case"actions":return e.userAction===i.UserAction.openStore?"All Ideas":e.userAction;case"assistant":return e.userAction===l.UserAction.close?"dismiss":e.userAction;case"result":case"voiceProfile":case"prompt":case"usageInfo":case"onboardingPopup":case"onboardingPromptsTooltip":case"onboardingReviewTooltip":case"onboardingRewriteTooltip":case"onboardingKnowledgeHubTooltip":return e.userAction;default:return(0,v.L0)(t)}}))}}(g||(g={}));var y,C,k,w,S,_,E,O=n(69243),I=n(64015),A=n(95195),R=n(16188);!function(e){const t=(0,R.$d)()(["initial","prompts","review","rewrite","knowledgeHub"]),n=(0,R.$d)()(["extension","editor","llamaMac","llamaWin"]);function i(e,t){return`${e}|${t}`}function r(e,t,n){return`${e}|${t}|${n}`}function o(e){return l.isSome(g(e))}function a(e){return l.isSome(f(e))}const c=new O.Type("CompletedStepName",(e=>"string"==typeof e&&o(e)),((e,t)=>"string"==typeof e&&o(e)?O.success(e):O.failure(e,t)),O.identity),u=new O.Type("LastSeenStepName",(e=>"string"==typeof e&&a(e)),((e,t)=>"string"==typeof e&&a(e)?O.success(e):O.failure(e,t)),O.identity),d=O.readonly(O.partial({completed:O.readonlyArray(c),lastSeen:O.readonlyArray(u)}));let m,p,h;function g(e){return(0,s.zG)(l.some(e.split("|")),l.filter((e=>2===e.length)),l.filter((e=>t.includes(e[0])&&n.includes(e[1]))))}function f(e){return(0,s.zG)(l.some(e.split("|")),l.filter((e=>3===e.length)),l.filter((e=>t.includes(e[0])&&n.includes(e[1]))),l.filterMap((e=>(0,s.zG)(parseInt(e[2],10),(t=>Number.isNaN(t)?l.none:l.some([e[0],e[1],t]))))))}function x(e,t,n){var i,r,o,s;return{extension:{completed:t.some((t=>t[0]===e&&"extension"===t[1])),lastSeen:null===(i=n.find((t=>t[0]===e&&"extension"===t[1])))||void 0===i?void 0:i[2]},editor:{completed:t.some((t=>t[0]===e&&"editor"===t[1])),lastSeen:null===(r=n.find((t=>t[0]===e&&"editor"===t[1])))||void 0===r?void 0:r[2]},llamaMac:{completed:t.some((t=>t[0]===e&&"llamaMac"===t[1])),lastSeen:null===(o=n.find((t=>t[0]===e&&"llamaMac"===t[1])))||void 0===o?void 0:o[2]},llamaWin:{completed:t.some((t=>t[0]===e&&"llamaWin"===t[1])),lastSeen:null===(s=n.find((t=>t[0]===e&&"llamaWin"===t[1])))||void 0===s?void 0:s[2]}}}e.emptyClientStep={completed:!1,lastSeen:void 0},function(e){function t(e){return t=>e(t.extension)||e(t.editor)||e(t.llamaMac)||e(t.llamaWin)}e.anyClient=t,e.anyClientCompleted=t((e=>e.completed))}(m=e.Step||(e.Step={})),e.emptyStep={extension:e.emptyClientStep,llamaMac:e.emptyClientStep,llamaWin:e.emptyClientStep,editor:e.emptyClientStep},e.codec=new O.Type("UpstreamOnboarding",(e=>d.is(e)),((e,t)=>(0,s.zG)(d.validate(e,t),A.map((e=>{const t=(0,s.zG)(e.completed||[],I.UI(g),I.oA),n=(0,s.zG)(e.lastSeen||[],I.UI(f),I.oA);return{initial:x("initial",t,n),prompts:x("prompts",t,n),review:x("review",t,n),rewrite:x("rewrite",t,n),knowledgeHub:x("knowledgeHub",t,n)}})))),(e=>({completed:(0,s.zG)(Object.entries(e),I.tS((([e,t])=>function(e,t){return(0,s.zG)(Object.entries(t),I.tS((([t,n])=>n.completed?[i(e,t)]:[])))}(e,t)))),lastSeen:(0,s.zG)(Object.entries(e),I.tS((([e,t])=>function(e,t){return(0,s.zG)(Object.entries(t),I.tS((([t,n])=>n.lastSeen?[r(e,t,n.lastSeen)]:[])))}(e,t))))}))),function(t){t.empty={initial:e.emptyStep,prompts:e.emptyStep,review:e.emptyStep,rewrite:e.emptyStep,knowledgeHub:e.emptyStep},t.toClientState=function(e,t){return{initial:e.initial[t],prompts:e.prompts[t],review:e.review[t],rewrite:e.rewrite[t],knowledgeHub:e.knowledgeHub[t]}},t.patch=function(e,t){return n=>({initial:Object.assign(Object.assign({},n.initial),{[t]:e.initial}),prompts:Object.assign(Object.assign({},n.prompts),{[t]:e.prompts}),review:Object.assign(Object.assign({},n.review),{[t]:e.review}),rewrite:Object.assign(Object.assign({},n.rewrite),{[t]:e.rewrite}),knowledgeHub:Object.assign(Object.assign({},n.knowledgeHub),{[t]:e.knowledgeHub})})}}(p=e.State||(e.State={})),function(t){t.empty={initial:e.emptyClientStep,prompts:e.emptyClientStep,review:e.emptyClientStep,rewrite:e.emptyClientStep,knowledgeHub:e.emptyClientStep}}(h=e.ClientState||(e.ClientState={}))}(y||(y={})),function(e){let t;!function(e){e.initial="initial",e.prompts="prompts",e.review="review",e.rewrite="rewrite",e.knowledgeHub="knowledgeHub"}(t=e.StepName||(e.StepName={})),function(e){e.isAssistantOnboardingStep=function(t){switch(t){case e.prompts:case e.review:case e.knowledgeHub:return!0;case e.initial:case e.rewrite:return!1;default:return(0,v.L0)(t)}},e.isTooltipOnboardingStep=function(t){switch(t){case e.prompts:case e.review:case e.rewrite:case e.knowledgeHub:return!0;case e.initial:return!1;default:return(0,v.L0)(t)}}}(t=e.StepName||(e.StepName={}))}(C||(C={})),function(e){let t,n,i;function r(e){return e.kind===t.active}function o(e){return e.kind===t.passive}function a(e){return e.kind===t.unknown}function c(e){return r(e)||a(e)}!function(e){e.unavailable="unavailable",e.active="active",e.passive="passive",e.disabled="disabled",e.pending="pending",e.unknown="unknown"}(t=e.Kind||(e.Kind={})),function(e){const t=(0,m.HP)((e=>{const t=Date.parse(e);return isNaN(t)?0:t}));function n(e){const t=e-Date.now();return Math.floor(t/36e5)}e.parseRefillDate=function(e){return t(e)},e.hoursUntilRefillDate=n,e.daysUntilRefillDate=function(e){return Math.floor(n(e)/24)}}(n=e.Active||(e.Active={})),function(t){t.empty={kind:e.Kind.passive,promptsAllocated:0,promptsRemaining:0,refillDate:0}}(i=e.Passive||(e.Passive={})),e.isActive=r,e.isPassive=o,e.isActiveOrPassive=(0,m.Kg)(r,o),e.isUnknown=a,e.isUsable=c,e.isVisible=function(e){return c(e)||o(e)},e.isDisabled=function(e){return e.kind===t.disabled},e.isUnavailable=function(e){return e.kind===t.pending||e.kind===t.unavailable||e.kind===t.disabled},e.fromUsage=function(n){return(0,s.zG)(l.fromNullable(n),l.map((n=>{const i=e.Active.parseRefillDate(n.refillDate);return n.promptsRemaining<0?{kind:t.unknown}:n.promptsRemaining>0?{kind:t.active,promptsRemaining:n.promptsRemaining,promptsAllocated:n.promptsAllocated,refillDate:i}:{kind:t.passive,promptsRemaining:n.promptsRemaining,promptsAllocated:n.promptsAllocated,refillDate:i}})),l.getOrElse((()=>({kind:e.Kind.unknown}))))}}(k||(k={})),function(e){let t;!function(e){e.mount="mount",e.unmount="unmount",e.toolbarCloseButtonClick="toolbarCloseButtonClick",e.toolbarGoBackButtonClick="toolbarGoBackButtonClick",e.toolbarVoiceButtonClick="toolbarVoiceButtonClick",e.setVoiceButtonClick="setVoiceButtonClick",e.voiceProfileCloseButtonClick="voiceProfileCloseButtonClick",e.voiceProfileUseVoiceButtonClick="voiceProfileUseVoiceButtonClick",e.toneToggleClick="toneToggleClick",e.styleToggleClick="styleToggleClick",e.roleTypeaheadSelectionChange="roleTypeaheadSelectionChange",e.dialectDropdownSelectionChange="dialectDropdownSelectionChange",e.promptFieldTextChange="promptFieldTextChange",e.promptFieldFocusChange="promptFieldFocusChange",e.promptFieldAndMenuFocusChange="promptFieldAndMenuFocusChange",e.actionBrickClick="actionBrickClick",e.promptSubmitButtonClick="promptSubmitButtonClick",e.generateStopButtonClick="generateStopButtonClick",e.promptFieldKeyPressEscape="promptFieldKeyPressEscape",e.promptFieldKeyPressEnter="promptFieldKeyPressEnter",e.promptFieldKeyPressArrowDown="promptFieldKeyPressArrowDown",e.promptFieldKeyPressArrowUp="promptFieldKeyPressArrowUp",e.promptMenuKeyPressArrowDown="promptMenuKeyPressArrowDown",e.promptMenuKeyPressArrowUp="promptMenuKeyPressArrowUp",e.resultCardInsertButtonClick="resultCardInsertButtonClick",e.resultCardRephraseButtonClick="resultCardRephraseButtonClick",e.resultCardDismissButtonClick="resultCardDismissButtonClick",e.resultCardToggleGenericVoiceButtonClick="resultCardToggleGenericVoiceButtonClick",e.errorCardOkButtonClick="errorCardOkButtonClick",e.openFeedbackFormButtonClick="openFeedbackFormButtonClick",e.feedbackFormChange="feedbackFormChange",e.feedbackFormSubmitButtonClick="feedbackFormSubmitButtonClick",e.reportOffensiveResultButtonClick="reportOffensiveResultButtonClick",e.reportOffensiveActionsButtonClick="reportOffensiveActionsButtonClick",e.resultCardHeaderClick="resultCardHeaderClick",e.collapsePromptMenuButtonClick="collapsePromptMenuButtonClick",e.creditsInfoHover="creditsInfoHover",e.creditsInfoClick="creditsInfoClick",e.resultCardHoverChange="resultCardHoverChange",e.resultCardFocusChange="resultCardFocusChange",e.reportMenuVisibilityChange="reportMenuVisibilityChange",e.referencesVisibilityChange="referencesVisibilityChange"}(t=e.Kind||(e.Kind={})),e.is=function(e){return t=>t.kind===e},e.isResultAction=(0,m.Kg)(e.is(e.Kind.resultCardInsertButtonClick),e.is(e.Kind.resultCardRephraseButtonClick),e.is(e.Kind.resultCardDismissButtonClick),e.is(e.Kind.reportOffensiveResultButtonClick))}(w||(w={})),(0,v.L0)(void 0),function(e){let t;!function(e){e.close="close",e.tryItOut="tryItOut",e.mount="mount"}(t=e.Kind||(e.Kind={})),e.is=function(e){return t=>t.kind===e}}(S||(S={})),(0,v.L0)(void 0),function(e){e.initialActionsList="initialActionsList",e.followUpActionsList="followUpActionsList",e.creditsInfoButton="creditsInfoButton",e.promptInput="promptInput",e.promptMenuContent="promptMenuContent"}(_||(_={})),function(e){e.initialPopupAnchor="initialPopupAnchor",e.rewriteTooltipAnchor="rewriteTooltipAnchor"}(E||(E={}));var P,U,B,T,F=n(63513),G=n(17771);!function(e){let t;function n(e){switch(e){case t.sensitiveResult:return{header:"Assistance is unavailable",text:"GrammarlyGO assistance is unavailable for that text or prompt.\nTry something else."};case t.overload:return{header:"Couldn’t generate text",text:"We’re handling a lot of prompts right now and couldn’t generate that text.\nPlease try again later."};case t.unsupportedLanguage:return{header:"Hmm, don’t know that language",text:"GrammarlyGO assistance is currently only available for English."};case t.critical:case t.timeout:case t.emptyResult:case t.truncatedResult:case t.usageExceeded:return{header:"Something went wrong",text:"We’re not sure what happened, but we couldn’t generate that text.\nPlease try again."};default:return(0,v.L0)(e)}}!function(e){e.create=function(t){switch(t){case F.vv.Schema.ErrorKind.Generic:return e.critical;case F.vv.Schema.ErrorKind.Overflow:return e.truncatedResult;case F.vv.Schema.ErrorKind.PromptsLimitExceeded:return e.usageExceeded;case F.vv.Schema.ErrorKind.SensitiveContent:return e.sensitiveResult;case F.vv.Schema.ErrorKind.ServerOverloaded:return e.overload;case F.vv.Schema.ErrorKind.UnsupportedLanguage:return e.unsupportedLanguage;default:return(0,v.L0)(t)}}}(t=e.Reason||(e.Reason={})),function(e){e.emptyResult="emptyResult",e.truncatedResult="truncatedResult",e.sensitiveResult="sensitiveResult",e.usageExceeded="usageExceeded",e.unsupportedLanguage="unsupportedLanguage",e.overload="overload",e.timeout="timeout",e.critical="critical"}(t=e.Reason||(e.Reason={})),e.create=function(e){const i=t.create(e.kind),r=(0,s.zG)(G.Y(l.Applicative)({header:(0,s.zG)(l.fromNullable(e.title),l.filter((e=>""!==e.trim()))),text:(0,s.zG)(l.fromNullable(e.text),l.filter((e=>""!==e.trim())))}),l.getOrElse((()=>n(i))));return Object.assign({reason:i},r)},e.createCriticalError=function(e){return{reason:t.critical,header:"Something went wrong",text:e?"We’re not sure what happened.\nPlease try again later.":"We’re not sure what happened, but we couldn’t generate that text.\nPlease try again."}},e.createEmptyResultError=function(){return Object.assign({reason:t.emptyResult},n(t.emptyResult))}}(P||(P={})),function(e){let t,n,i,r;e.toJSON=function(e){var t;let o={kind:e.kind,name:String(e.name),sessionMode:e.sessionMode};return(0,m.Kg)(n.StartSession.is,n.Action.is,r.WaitForResultTimeout.is)(e)||((0,m.Kg)(r.WaitForAckTimeout.is,r.WaitForContextTimeout.is)(e)?o=Object.assign(Object.assign({},o),{sourceEvent:e.sourceEvent}):(0,m.Kg)(r.AssistantCloseFailed.is,r.SetVoiceProfileFailed.is,r.SubmitFeedbackFailed.is,r.ReportUphookShowFailed.is,r.ReportUphookClickFailed.is)(e)?o=Object.assign(Object.assign({},o),{rawErrorName:e.rawError.name,rawErrorMessage:e.rawError.message,rawErrorStack:null!==(t=e.rawError.stack)&&void 0!==t?t:""}):(0,m.Kg)(i.UnexpectedChunkReceived.is,i.UnexpectedResultReceived.is)(e)?o=Object.assign(Object.assign({},o),{expectedInProgressResultId:l.toNullable(e.expectedInProgressResultId),receivedInProgressResultId:e.receivedInProgressResultId}):(0,v.L0)(e)),JSON.stringify(o)},function(e){e.info="info",e.warning="warning",e.error="error"}(t=e.Kind||(e.Kind={})),function(e){let n,i,r;e.is=function(e){return e.kind===t.info},function(e){e.startSession="startSession",e.action="action"}(n=e.Name||(e.Name={})),function(e){e.create=function(e){return{kind:t.info,name:n.startSession,sessionMode:e}},e.is=function(e){return e.name===n.startSession}}(i=e.StartSession||(e.StartSession={})),function(e){e.create=function(e){return{kind:t.info,name:n.action,sessionMode:e}},e.is=function(e){return e.name===n.action}}(r=e.Action||(e.Action={}))}(n=e.Info||(e.Info={})),function(e){let n,i,r;e.is=function(e){return e.kind===t.warning},function(e){e.unexpectedChunkReceived="unexpectedChunkReceived",e.unexpectedResultReceived="unexpectedResultReceived"}(n=e.Name||(e.Name={})),function(e){e.is=function(e){return e.name===n.unexpectedChunkReceived},e.create=function(e,i,r){return{kind:t.warning,name:n.unexpectedChunkReceived,sessionMode:e,expectedInProgressResultId:i,receivedInProgressResultId:r}}}(i=e.UnexpectedChunkReceived||(e.UnexpectedChunkReceived={})),function(e){e.is=function(e){return e.name===n.unexpectedResultReceived},e.create=function(e,i,r){return{kind:t.warning,name:n.unexpectedResultReceived,sessionMode:e,expectedInProgressResultId:i,receivedInProgressResultId:r}}}(r=e.UnexpectedResultReceived||(e.UnexpectedResultReceived={}))}(i=e.Warning||(e.Warning={})),function(e){let n,i,r,o,s,a,l,c,u,d;e.is=function(e){return e.kind===t.error},function(e){e.waitForContextTimeout="waitForContextTimeout",e.waitForResultTimeout="waitForResultTimeout",e.waitForAckTimeout="waitForAckTimeout",e.assistantCloseFailed="assistantCloseFailed",e.setVoiceProfileFailed="setVoiceProfileFailed",e.submitFeedbackFailed="submitFeedbackFailed",e.reportUphookShowFailed="reportUphookShowFailed",e.reportUphookClickFailed="reportUphookClickFailed"}(n=e.Name||(e.Name={})),function(e){e.startSession="startSession",e.action="action"}(i=e.SourceEvent||(e.SourceEvent={})),function(e){e.create=function(e,i){return{kind:t.error,name:n.waitForAckTimeout,sourceEvent:i,sessionMode:e}},e.is=function(e){return e.name===n.waitForAckTimeout}}(r=e.WaitForAckTimeout||(e.WaitForAckTimeout={})),function(e){e.create=function(e,i){return{kind:t.error,name:n.waitForContextTimeout,sourceEvent:i,sessionMode:e}},e.is=function(e){return e.name===n.waitForContextTimeout}}(o=e.WaitForContextTimeout||(e.WaitForContextTimeout={})),function(e){e.create=function(e){return{kind:t.error,name:n.waitForResultTimeout,sessionMode:e}},e.is=function(e){return e.name===n.waitForResultTimeout}}(s=e.WaitForResultTimeout||(e.WaitForResultTimeout={})),function(e){e.create=function(e,i){return{kind:t.error,name:n.assistantCloseFailed,sessionMode:e,rawError:i}},e.is=function(e){return e.name===n.assistantCloseFailed}}(a=e.AssistantCloseFailed||(e.AssistantCloseFailed={})),function(e){e.create=function(e,i){return{kind:t.error,name:n.setVoiceProfileFailed,sessionMode:e,rawError:i}},e.is=function(e){return e.name===n.setVoiceProfileFailed}}(l=e.SetVoiceProfileFailed||(e.SetVoiceProfileFailed={})),function(e){e.create=function(e,i){return{kind:t.error,name:n.submitFeedbackFailed,sessionMode:e,rawError:i}},e.is=function(e){return e.name===n.submitFeedbackFailed}}(c=e.SubmitFeedbackFailed||(e.SubmitFeedbackFailed={})),function(e){e.create=function(e,i){return{kind:t.error,name:n.reportUphookShowFailed,sessionMode:e,rawError:i}},e.is=function(e){return e.name===n.reportUphookShowFailed}}(u=e.ReportUphookShowFailed||(e.ReportUphookShowFailed={})),function(e){e.create=function(e,i){return{kind:t.error,name:n.reportUphookClickFailed,sessionMode:e,rawError:i}},e.is=function(e){return e.name===n.reportUphookClickFailed}}(d=e.ReportUphookClickFailed||(e.ReportUphookClickFailed={}))}(r=e.Error||(e.Error={}))}(U||(U={})),function(e){let t;!function(e){e.feedbackSubmitted="feedbackSubmitted"}(t=e.Kind||(e.Kind={}))}(B||(B={})),function(e){let t;!function(e){e.create=e=>e}(t=e.Id||(e.Id={}))}(T||(T={}))},1651:(e,t,n)=>{n.d(t,{$C:()=>G,gz:()=>S,ZP:()=>O,c3:()=>z});var i=n(31699),r=n(57050),o=n(5114),s=n(64015),a=n(62965),l=n(17889),c=n(17771),u=n(95195),d=n(8709),m=n(63513),p=n(9922),h=n(85985),g=n(98403),f=n(80900),x=n(38983),b=n(81531),v=n(46680),y=n(22232),C=n(8125),k=n(1226),w=n(32952);class S{constructor(){this._events=new w.xQ}static getInstance(){return null===S.instance&&(S.instance=new S),S.instance}notify(e){this._events.next(e)}get events(){return this._events.asObservable()}}S.instance=null;var _=n(16188),E=n(90732);class O{constructor(e){var t,n,i,r,o,s;this._params=e,this._subs=new p.w.Keeper,this._session=x.h.create(k.z_.Starting.initial),this._resultById=new Map,this._contextIdByResultId=new Map,this._contextById=new Map,this._stateBlobByContextId=new Map,this._initialReceivedContext=null,this._upstreamDialect=x.h.create(k.LA.Dialect.Id.create(k.LA.Dialect.Value.american)),this._cheetahAckIds=new Set,this._cheetahAckHandlers=new Array,this._resultTimeout=void 0,this._contextTimeout=void 0,this._cheetahAckTimeout=void 0,this._resultTimeoutMs=null!==(t=this._params.resultTimeoutMs)&&void 0!==t?t:1e4,this._contextTimeoutMs=null!==(n=this._params.contextTimeoutMs)&&void 0!==n?n:1e4,this._cheetahAckTimeoutMs=null!==(i=this._params.cheetahAckTimeoutMs)&&void 0!==i?i:1e4,this._monitoringService=null!==(r=this._params.monitoringService)&&void 0!==r?r:S.getInstance(),this._logger=null!==(o=this._params.logger)&&void 0!==o?o:b.C8.Logging.getLogger("CheetahWeb.SessionServiceImpl",v.i.DEBUG),this.session=this._session.view(),s=this._params.startSessionOptions,k.z_.Mode.isRewriteOrQuickRewrite(s.mode)?(0,E.tt)("getText",this._params.textEditorService.getText(this._params.startSessionOptions.selectedRange),this._logger,(e=>{this._init(e)})):this._init()}_init(e){this._session.set({kind:"starting",mode:this._params.startSessionOptions.mode,selectedText:o.fromNullable(e),quickReplyContext:o.fromNullable(this._params.startSessionOptions.mode===k.z_.Mode.quickReply?this._params.startSessionOptions.quickReplyContext:void 0),error:o.none}),this._subs.push(this._params.capiService.capiEvents.pipe(h.h((e=>"cheetah:ack"===e.kind))).subscribe((e=>this._handleCheetahAck(e)))),this._subs.push(this._params.capiService.capiEvents.pipe(h.h((e=>"cheetah:setContext"===e.kind))).subscribe((e=>this._handleCheetahSetContext(e)))),this._subs.push(this._params.capiService.capiEvents.pipe(h.h((e=>"cheetah:chunk"===e.kind))).subscribe((e=>this._handleCheetahChunk(e)))),this._subs.push(this._params.capiService.capiEvents.pipe(h.h((e=>"cheetah:result"===e.kind))).subscribe((e=>this._handleCheetahResult(e)))),this._subs.push(this._params.capiService.capiEvents.pipe(h.h((e=>"cheetah:error"===e.kind))).subscribe((e=>this._handleCheetahError(e)))),this._subs.push(this._params.capiService.capiEvents.pipe(h.h((e=>"error"===e.kind))).subscribe((e=>this._handleError(e)))),this._subs.push(this._params.userService.user.view("dialect").subscribe((e=>g.wW(this._upstreamDialect)(k.LA.Dialect.Id.create(e))))),this._subs.push(this._upstreamDialect.subscribe((e=>this._handleUpstreamDialectChange(e)))),this._subs.push(this._session.subscribe((e=>this._logger.debug("session updated",e)))),this._startSession(this._params.startSessionOptions)}_startSession(e,t){this._logger.debug("_startSession()",{startSessionOptions:e}),(0,E.tt)("flush",this._params.textEditorService.flush(),this._logger,(()=>{const n=o.fromNullable(e.mode===k.z_.Mode.rewrite||e.mode===k.z_.Mode.quickRewrite?e.selectedRange:void 0),i=o.fromNullable(e.mode===k.z_.Mode.quickReply?e.quickReplyContext:void 0);this._setupCheetahAckHandler(k._H.Error.SourceEvent.startSession,(()=>{this._setupContextTimeout(k._H.Error.SourceEvent.startSession)}));const s={entryPoint:this._prepareEntryPoint(e.mode),selectedRange:(0,r.zG)(n,o.getOrElse((()=>({start:0,end:0})))),outerContext:(0,r.zG)(i,o.map(k.H3.toOuterContext),o.toUndefined),stateBlob:t,metadata:e.metadata};this._logger.debug("_startSession() - sending `cheetah:startSession` to CAPI",{data:s}),(0,E.tt)("cheetahStartSession",this._params.capiService.cheetahStartSession(s),this._logger,(()=>this._monitoringService.notify(k._H.Info.StartSession.create(this._session.get().mode))))}))}submitAction(e){this._logger.debug("submitAction()",{action:e}),this._submitAction(e)}setVoiceProfile(e){return this._logger.debug("setVoiceProfile()",{voiceProfileSelections:e}),(0,r.zG)((t=this._session.get(),a.fj((()=>"started"===t.kind?u.right(t):u.left(new Error("Session not started"))))),a.UI((t=>(this._session.set(Object.assign(Object.assign({},t),{voiceProfile:Object.assign(Object.assign({},t.voiceProfile),e),context:Object.assign(Object.assign({},t.context),{kind:"pending",loadingMessage:"Working on it..."})})),t))),a.tS((t=>(0,r.zG)(this._params.capiService.cheetahSetVoice({voice:{selectedStyle:e.selectedStyle,selectedTones:Array.from(e.selectedTonesPerStyle.get(e.selectedStyle)||[]),selectedRole:(0,r.zG)(e.selectedRole,o.toUndefined),needSetup:!1}}),a.Pd((e=>new Error(`CAPIService.cheetahSetVoice error: ${e.message}`)),(()=>!k.LA.Dialect.Id.eq.equals(t.voiceProfile.selectedDialect,e.selectedDialect))),a.tS((t=>t?c.g(a.qA)((0,r.zG)(this._params.capiService.setContext({goals:o.none,domain:o.none,audience:o.none,style:o.none,dialect:o.some(e.selectedDialect),outcomeContext:o.none}),a.Vn((e=>new Error(`CAPIService.setContext error: ${e.message}`)))),(0,r.zG)(this._params.userService.setDialect(e.selectedDialect),a.Vn((e=>new Error(`CAPIService.setDialect error: ${e.message}`))))):a.of(null))),a.Pd((e=>(this._monitoringService.notify(k._H.Error.SetVoiceProfileFailed.create(this._session.get().mode,e)),e)),r.Q1)))));var t}stopInProgressResult(){return this._logger.debug("stopInProgressResult()"),(0,r.zG)(a.tD((()=>this._session.get())),a.Y$(k.z_.isStartedWithInProgressResult,(()=>new Error("Session has no in-progress result"))),a.tS((e=>(this._clearAllTimeouts(),this._session.modify((t=>Object.assign(Object.assign({},t),{context:(0,r.zG)(e.resultHistory.length>0?this._extractLatestResultContext(e):this._extractInitialContext(),o.getOrElse((()=>e.context))),inProgressResult:k.x4.isInProgressPending(e.inProgressResult.value)?o.some(Object.assign(Object.assign({},e.inProgressResult.value),{kind:"inProgressInterrupted"})):k.x4.isInProgressInterrupted(e.inProgressResult.value)?e.inProgressResult:k.x4.isInProgressOngoing(e.inProgressResult.value)?o.none:(0,y.L0)(e.inProgressResult.value)}))),(0,r.zG)(e.inProgressResult.value,o.fromPredicate(k.x4.isInProgressOngoing),o.fold((()=>a.of(null)),(e=>this._params.capiService.cheetahInterrupt({promptId:k.x4.Id.toPrimitive(e.id)}))))))),a.UI(r.Q1),(e=this._logger,t=e=>`SessionService.stopInProgressResult error: ${e.message}`,a.Vn((n=>(e.error(t(n)),n)))));var e,t}regenerateResult(e){this._logger.debug("regenerateResult()",{resultId:e});const t=this._session.get();if("started"===t.kind){const n=this._resultById.get(e);if(n){this._submitAction(n.source.action,n.source.contextId);const t=this._contextIdByResultId.get(e);this._params.trackingService.trackResultRephrase(t)}else this._logger.warn("regenerateResult() - could not find result for provided result ID, skipping",{session:t,resultId:e})}else this._logger.warn("regenerateResult() - trying to regenerate result with a session that is not `started`, skipping",{session:t,resultId:e})}dismissResult(e){this._logger.debug("dismissResult()",{resultId:e});const t=this._session.get();if("started"===t.kind){if(this._resultById.delete(e)){const n=t.resultHistory.findIndex((t=>t.id===e));let i=t.context;if(0===n&&t.resultHistory.length>1){this._logger.debug("dismissResult() - dismissing latest result, will try to restore context from previous result",{session:t,resultId:e});const n=o.toUndefined(this._extractPreviousResultContext(t));n?(this._logger.debug("dismissResult() - found context for previous result, will restore its context",{session:t,resultId:e,previousResultContext:n}),i=n):this._logger.warn("dismissResult() - could not find context for previous result, context will not be updated",{session:t,resultId:e})}else if(1===t.resultHistory.length){const n=o.toNullable(this._extractInitialContext());n?(this._logger.debug("dismissResult() - dismissed all results, restoring initial context",{session:t,resultId:e,initialContext:n}),i=n):this._logger.warn("dimissResult() - dismissed all results, but there is no initial context to restore, keeping the latest context",{session:t,resultId:e})}this._session.set(Object.assign(Object.assign({},t),{context:i,resultHistory:t.resultHistory.filter((t=>!k.x4.Id.eq.equals(t.id,e)))}));const r=this._contextIdByResultId.get(e);this._params.trackingService.trackResultDismiss(r)}else this._logger.warn("dismissResult() - could not find result for provided result ID, skipping",{session:t,resultId:e})}else this._logger.warn("dismissResult() - trying to dismiss result with a session that is not `started`, skipping",{session:t,resultId:e})}dismissError(){this._logger.debug("dismissError()"),this._session.modify((e=>Object.assign(Object.assign({},e),{error:o.none})))}trackResultInsert(e){this._logger.debug("trackResultInsert()",{resultId:e});if(this._resultById.get(e)){const t=this._contextIdByResultId.get(e);this._params.trackingService.trackResultInsert(t)}else this._logger.warn("trackResultInsert() - could not find result for provided result ID, skipping",{resultId:e})}trackResultOffensive(e){this._logger.debug("trackResultOffensive()",{resultId:e});if(this._resultById.get(e)){const t=this._contextIdByResultId.get(e);this._params.trackingService.trackResultOffensive(t)}else this._logger.warn("trackResultOffensive() - could not find result for provided result ID, skipping",{resultId:e})}trackActionsOffensive(){this._logger.debug("trackActionsOffensive()");const e=this._session.get();if("started"!==e.kind)return this._logger.warn("trackActionsOffensive() - tracking actions as offensive with a session that is not `started`, skipping");this._params.trackingService.trackActionsOffensive(e.context.id)}dispose(e){this._logger.debug("dispose()",{reason:e}),this._endSession(),this._subs.dispose()}_endSession(){this._logger.debug("_endSession() - sending `cheetah:endSession` to CAPI"),(0,E.tt)("cheetahEndSession",this._params.capiService.cheetahEndSession(),this._logger)}_handleCheetahSetContext(e){this._logger.debug("_handleCheetahSetContext()",{event:e}),this._clearContextTimeout();const t=this._session.get(),n=e.message,i=I(n.context.voice,t,this._upstreamDialect.get()),r={id:k._y.Id.create(n.context.id),dynamicActions:A(n.context.availableActions),userPromptAction:R(n.context.promptAction,this._logger),quickRewriteAction:P(n.context.quickRewriteAction),intent:U(n.context.intent)},s=n.progressMessage?Object.assign(Object.assign({},r),{kind:"pending",loadingMessage:n.progressMessage}):Object.assign(Object.assign({},r),{kind:"received"});let a=!1;if(0===this._contextById.size&&k._y.isReceived(s)&&(a=!0,this._initialReceivedContext=s),this._contextById.set(s.id,s),this._stateBlobByContextId.set(s.id,n.context.stateBlob),this._session.set(Object.assign(Object.assign({},t),{kind:"started",voiceProfile:i,context:s,inProgressResult:"started"===t.kind?t.inProgressResult:o.none,resultHistory:"started"===t.kind?t.resultHistory:[]})),a&&k.z_.Mode.isQuickRewrite(t.mode)){const i=k.aU.QuickRewriteValue.fromInput(P(n.context.quickRewriteAction));this._logger.debug("_handleCheetahSetContext() - received initial context for quick rewrite session, submitting quick rewrite action",{session:t,event:e,quickRewriteAction:i}),this._submitAction(i)}}_handleCheetahChunk(e){this._logger.debug("_handleCheetahChunk()",{event:e});const t=this._session.get();if("started"!==t.kind)return this._logger.warn("_handleCheetahChunk() - received chunk with a session that is not `started`, skipping",{session:t,event:e});const n=e.message,i=k.x4.Id.create(n.promptId);(0,r.zG)(t.inProgressResult,o.filter(k.x4.isInProgressOngoing),o.filter((e=>k.x4.Id.eq.equals(e.id,i))),o.fold((()=>{const e=(0,r.zG)(t.inProgressResult,o.filter(k.x4.isInProgressOngoing),o.map((e=>e.id)));this._monitoringService.notify(k._H.Warning.UnexpectedChunkReceived.create(this._session.get().mode,e,i))}),(e=>{this._clearAllTimeouts(),this._session.set(Object.assign(Object.assign({},t),{inProgressResult:o.some(Object.assign(Object.assign({},e),{text:e.text+n.token}))}))})))}_handleCheetahResult(e){this._logger.debug("_handleCheetahResult()",{event:e});const t=this._session.get();if("started"!==t.kind)return this._logger.warn("_handleCheetahResult() - received result with a session that is not `started`, skipping",{session:t,event:e});const n=e.message,i=k.x4.Id.create(n.promptId);(0,r.zG)(t.inProgressResult,o.filter(k.x4.isInProgressOngoing),o.filter((e=>k.x4.Id.eq.equals(e.id,i))),o.fold((()=>{const e=(0,r.zG)(t.inProgressResult,o.filter(k.x4.isInProgressOngoing),o.map((e=>e.id)));this._monitoringService.notify(k._H.Warning.UnexpectedResultReceived.create(this._session.get().mode,e,i))}),(i=>{var s;if(this._clearAllTimeouts(),n.error||!n.text||""===n.text.plain){const i=n.error?k.JZ.create(n.error):k.JZ.createEmptyResultError();this._logger.warn("_handleCheetahResult() - received result with error, adding error to session",{session:t,event:e,error:i}),this._session.set(Object.assign(Object.assign({},t),{inProgressResult:o.none,error:o.some(i)}))}else if(n.text.interrupted)this._logger.debug("_handleCheetahResult() - received result with interrupted text, skipping",{session:t,event:e});else{const a=Object.assign(Object.assign({},i),{kind:"complete",text:n.text.plain,timestamp:Date.now(),delta:(0,r.zG)(null===(s=n.metadata)||void 0===s?void 0:s.voiceProfileData,(e=>{var t,i;const s=(0,r.zG)((0,_.DO)(null===(t=n.text)||void 0===t?void 0:t.delta),o.getOrElse((()=>new d.i)));return(0,r.zG)((0,_.DO)(null===(i=null==e?void 0:e.withVoiceText)||void 0===i?void 0:i.delta),u.fromOption((()=>s)),u.map((t=>({genericVoice:s,preferVoice:!1===(null==e?void 0:e.showVoiceTextByDefault)?"generic":"user",userVoice:t}))))})),references:(0,r.zG)(o.fromNullable(n.references),o.map((e=>e.map((e=>Object.assign(Object.assign({},e),{id:k.s3.Id.create(e.id),url:o.fromNullable(e.url),contextText:o.none}))))))});let l,c,m;this._logger.debug("_handleCheetahResult() - received complete result, saving complete result into history",{session:t,event:e,result:a}),n.context?(c=I(n.context.voice,t,this._upstreamDialect.get()),l={kind:"received",id:k._y.Id.create(n.context.id),dynamicActions:A(n.context.availableActions),userPromptAction:R(n.context.promptAction,this._logger),intent:U(n.context.intent)},m=n.context.stateBlob,this._logger.debug("_handleCheetahResult() - received result with context, will update voice profile and context accordingly",{session:t,event:e,voiceProfile:c,context:l})):(this._logger.warn("_handleCheetahResult() - received result without context, keeping latest voice profile and context",{session:t,event:e}),c=t.voiceProfile,l=t.context,m=this._stateBlobByContextId.get(t.context.id)),this._contextById.set(l.id,l),void 0!==m&&this._stateBlobByContextId.set(l.id,m),this._resultById.set(a.id,a),this._contextIdByResultId.set(a.id,l.id),this._session.set(Object.assign(Object.assign({},t),{voiceProfile:c,context:l,inProgressResult:o.none,resultHistory:[a,...t.resultHistory]}))}})))}_handleCheetahError(e){this._logger.debug("_handleCheetahError",{event:e}),this._clearAllTimeouts();const t=k.JZ.create(e.message.error);this._logger.warn("_handleCheetahError - received error, adding error to session",{error:t}),this._session.modify((e=>Object.assign(Object.assign({},e),{inProgressResult:o.none,error:o.some(t)})))}_handleUpstreamDialectChange(e){this._logger.debug("_handleUpstreamDialectChange()",{upstreamDialect:e});const t=this._session.get();if("started"===t.kind){const n=k.LA.Dialect.Id.create(e);this._logger.debug("_handleUpstreamDialectChange() - dialect changed on upstream services, updating selected dialect on voice profile",{session:t,selectedDialect:n}),this._session.set(Object.assign(Object.assign({},t),{voiceProfile:Object.assign(Object.assign({},t.voiceProfile),{selectedDialect:n})}))}}_handleCheetahAck(e){this._logger.debug("_handleCheetahAck()",{event:e}),this._clearCheetahAckTimeout(),this._cheetahAckIds.add(e.id);const t=this._cheetahAckHandlers.length>0?this._cheetahAckHandlers[0]:void 0;t&&(this._logger.debug("_handleCheetahAck() - extracting `cheetah:ack` handler from queue and executing it",{event:e,cheetahAckHandlers:this._cheetahAckHandlers}),this._cheetahAckHandlers=this._cheetahAckHandlers.slice(1),t(e.id))}_handleError(e){if(this._logger.debug("_handleError()",{event:e}),this._cheetahAckIds.has(e.id))if(this._clearAllTimeouts(),e.error===m.jK.SESSION_NOT_INITIALIZED){const t=(0,r.zG)(k.z_.toStarted(this._session.get()),o.map((e=>this._stateBlobByContextId.get(e.context.id))),o.toUndefined);this._logger.warn("_handleError() - received session not initialized error, restarting session",{event:e,startSessionOptions:this._params.startSessionOptions,stateBlob:t}),this._session.modify((e=>Object.assign(Object.assign({},e),{inProgressResult:o.none}))),this._startSession(this._params.startSessionOptions,t)}else{const e=k.JZ.createCriticalError((0,r.zG)(k.z_.toStarting(this._session.get()),o.isSome));this._logger.warn("_handleError - received error event that corresponds to one of the `cheetah:*` messages, adding error to session",{error:e}),this._session.modify((t=>Object.assign(Object.assign({},t),{inProgressResult:o.none,error:o.some(e)})))}}_submitAction(e,t){this._logger.debug("_submitAction()",{action:e,contextId:t});const n=this._session.get();if("started"===n.kind){const i=null!=t?t:n.context.id,s=this._stateBlobByContextId.get(i);if(void 0===s)return this._logger.warn("_submitAction() - cannot find state blob for context ID, skipping",{session:n,contextId:i,contextStateBlob:s});this._session.set(Object.assign(Object.assign({},n),{context:Object.assign(Object.assign({},n.context),{kind:"pending",loadingMessage:"Working on it..."}),inProgressResult:k.aU.willGenerateResult(e)?o.some({kind:"inProgressPending",header:{label:k.aU.isUserPrompt(e)?e.arg.value:e.label,iconUrl:k.aU.isUserPrompt(e)?o.none:o.some(e.iconUrl),copiablePrompt:k.aU.isUserPrompt(e)?o.some(e.arg.value):o.none},text:"",source:{contextId:i,action:e}}):o.none,error:o.none})),this._setupCheetahAckHandler(k._H.Error.SourceEvent.action,(e=>{(0,r.zG)(k.z_.toStarted(this._session.get()),o.chain((e=>e.inProgressResult)),o.filter((0,C.Kg)(k.x4.isInProgressPending,k.x4.isInProgressInterrupted)),o.fold((()=>(this._logger.warn("received `cheetah:ack` related to in-progress-pending result but we don't have an in-progress-pending result, skipping",{ackId:e}),a.of(null))),(t=>{if(k.x4.isInProgressInterrupted(t))return this._clearAllTimeouts(),this._logger.info("received `cheetah:ack` related to in-progress-interrupted, sending `cheetah:interrupt`",{ackId:e}),this._session.modify((e=>Object.assign(Object.assign({},e),{inProgressResult:o.none}))),this._params.capiService.cheetahInterrupt({promptId:e});if(k.x4.isInProgressPending(t)){this._setupContextTimeout(k._H.Error.SourceEvent.action);const n=Object.assign(Object.assign({},t),{kind:"inProgressOngoing",id:k.x4.Id.create(e)});return this._logger.debug("received `cheetah:ack` related to in-progress-pending result, transitioning result to in-progress-ongoing",{ackId:e,inProgressResult:n}),this._resultById.set(n.id,n),this._clearResultTimeout(),this._logger.debug("setting up result timeout",{ackId:e,inProgressResult:n}),this._resultTimeout=f.H(this._resultTimeoutMs).subscribe((()=>{const e=k.JZ.createCriticalError((0,r.zG)(k.z_.toStarting(this._session.get()),o.isSome));this._logger.warn("waited too long with an in-progress-ongoing result, adding error to session",{error:e}),this._session.modify((t=>Object.assign(Object.assign({},t),{inProgressResult:o.none,error:o.some(e)}))),this._monitoringService.notify(k._H.Error.WaitForResultTimeout.create(this._session.get().mode))})),this._session.modify((e=>Object.assign(Object.assign({},e),{inProgressResult:o.some(n)}))),a.of(null)}(0,y.L0)(t)})))()}));const c={contextId:i,actionId:e.id,args:k.aU.isUserPrompt(e)?[{name:e.arg.id,value:e.arg.value}]:(0,r.zG)(l.c2(e.args),o.fold((()=>[]),(e=>e.map((e=>({name:e.id,value:e.value})))))),stateBlob:s};this._logger.debug("_submitAction() - sending `cheetah:action` to CAPI",{data:c}),(0,E.tt)("cheetahAction",this._params.capiService.cheetahAction(c),this._logger,(()=>this._monitoringService.notify(k._H.Info.Action.create(this._session.get().mode))))}else this._logger.warn("_submitAction() - submitting action with a session that is not `started`, skipping",{session:n,action:e,contextId:t})}_prepareEntryPoint(e){let t;switch(e){case k.z_.Mode.ideation:t=m.vv.Schema.MessageStartSessionEntryPoint.Ideation;break;case k.z_.Mode.rewrite:t=m.vv.Schema.MessageStartSessionEntryPoint.Rewrite;break;case k.z_.Mode.quickRewrite:t=m.vv.Schema.MessageStartSessionEntryPoint.QuickRewrite;break;case k.z_.Mode.quickReply:t=m.vv.Schema.MessageStartSessionEntryPoint.QuickReply;break;default:return(0,y.L0)(e)}return this._logger.debug("_prepareEntryPoint()",{sessionMode:e,entryPoint:t}),t}_extractLatestResultContext(e){return this._extractContextFromResultHistory(e,0)}_extractPreviousResultContext(e){return this._extractContextFromResultHistory(e,1)}_extractContextFromResultHistory(e,t){const n=(0,r.zG)(o.fromNullable(e.resultHistory[t]),o.map((e=>e.id)),o.chain((e=>o.fromNullable(this._contextIdByResultId.get(e)))),o.chain((e=>o.fromNullable(this._contextById.get(e)))));return o.isNone(n)&&this._logger.warn("_extractContextFromResultHistory() - could not find context for result",{session:e,resultIndex:t}),n}_extractInitialContext(){return null!==this._initialReceivedContext?o.some(this._initialReceivedContext):(this._logger.warn("_extractInitialContext() - could not find initial context"),o.none)}_clearResultTimeout(){var e;this._logger.trace("_clearResultTimeout()"),null===(e=this._resultTimeout)||void 0===e||e.unsubscribe(),this._resultTimeout=void 0}_clearContextTimeout(){var e;this._logger.trace("_clearContextTimeout()"),null===(e=this._contextTimeout)||void 0===e||e.unsubscribe(),this._contextTimeout=void 0}_clearCheetahAckTimeout(){var e;this._logger.trace("_clearCheetahAckTimeout()"),null===(e=this._cheetahAckTimeout)||void 0===e||e.unsubscribe(),this._cheetahAckTimeout=void 0}_clearAllTimeouts(){this._clearResultTimeout(),this._clearContextTimeout(),this._clearCheetahAckTimeout()}_setupContextTimeout(e){this._logger.debug("_setupContextTimeout()",{sourceEvent:e}),this._clearContextTimeout(),this._contextTimeout=f.H(this._contextTimeoutMs).subscribe((()=>{const t=k.JZ.createCriticalError((0,r.zG)(k.z_.toStarting(this._session.get()),o.isSome));this._logger.warn("waited too long to receive `cheetah:setContext`, adding error to session",{error:t}),this._session.modify((e=>Object.assign(Object.assign({},e),{inProgressResult:o.none,error:o.some(t)}))),this._monitoringService.notify(k._H.Error.WaitForContextTimeout.create(this._session.get().mode,e))}))}_setupCheetahAckTimeout(e){this._logger.debug("_setupCheetahAckTimeout()",{sourceEvent:e}),this._clearCheetahAckTimeout(),this._cheetahAckTimeout=f.H(this._cheetahAckTimeoutMs).subscribe((()=>{const t=k.JZ.createCriticalError((0,r.zG)(k.z_.toStarting(this._session.get()),o.isSome));this._logger.warn("waited too long to receive an ACK for a `cheetah:*` command, adding error to session",{error:t}),this._session.modify((e=>Object.assign(Object.assign({},e),{inProgressResult:o.none,error:o.some(t)}))),this._monitoringService.notify(k._H.Error.WaitForAckTimeout.create(this._session.get().mode,e))}))}_setupCheetahAckHandler(e,t){this._setupCheetahAckTimeout(e),this._cheetahAckHandlers.push(t)}}function I(e,t,n){var i,a;const l=(0,r.zG)(k.z_.toStarted(t),o.map((e=>e.voiceProfile.styles)),o.getOrElse((()=>[]))),c=(0,r.zG)(k.z_.toStarted(t),o.map((e=>e.voiceProfile.roles)),o.getOrElse((()=>[]))),u=(0,r.zG)(null!==(i=e.styles)&&void 0!==i?i:[],s.UI((e=>({id:k.LA.Style.Id.create(e.button.label),label:e.button.label,iconUrl:e.button.iconUrl,tones:e.tones.map((e=>({id:k.LA.Tone.Id.create(e.label),label:e.label,iconUrl:e.iconUrl,description:e.description}))),maxTones:e.maxTones,description:e.button.description}))),(e=>e.length>0?e:l)),d=k.LA.Style.Id.create(e.selectedStyle),m=u.find((e=>k.LA.Style.Id.eq.equals(e.id,d)));return{styles:u,roles:(0,r.zG)(null!==(a=e.roles)&&void 0!==a?a:[],s.UI((e=>({id:k.LA.Role.Id.create(e),label:e}))),(e=>e.length>0?e:c)),selectedStyle:d,selectedTonesPerStyle:(new Map).set(d,new Set(e.selectedTones.filter((e=>null==m?void 0:m.tones.map((e=>e.id.toString())).includes(e))))),selectedRole:(0,r.zG)(o.fromNullable(e.selectedRole),o.map((e=>e.trim())),o.filter((e=>""!==e)),o.map(k.LA.Role.Id.create)),dialects:k.LA.Dialect.all(),selectedDialect:(0,r.zG)(k.z_.toStarted(t),o.fold((()=>k.LA.Dialect.Id.create(n)),(e=>e.voiceProfile.selectedDialect))),needsSetup:e.needSetup}}function A(e){return e.map((t=>({id:k.aU.Id.create(t.id),kind:"dynamic",iconUrl:t.iconUrl,group:{label:t.group,rank:e.map((e=>e.group)).findIndex((e=>t.group===e))},label:(0,i.sanitize)(t.label,{ALLOWED_TAGS:_.ap}),searchLabel:(0,i.sanitize)(t.label,{ALLOWED_TAGS:[]}),searchTags:t.searchTags,generatesResult:t.generatesText,args:t.args.map((e=>({id:k.pY.Id.create(e.name),kind:"string",label:e.label,hints:(0,r.zG)(o.fromNullable(e.hint),o.map((e=>({header:e.header,items:e.text}))))})))})))}function R(e,t){const n=(0,r.zG)(e.args,s.YM,o.map((t=>({id:k.aU.Id.create(e.id),kind:"userPrompt",arg:{id:k.pY.Id.create(t.name),kind:"string",label:t.label,hints:(0,r.zG)(o.fromNullable(t.hint),o.map((e=>({header:e.header,items:e.text}))))}}))));return o.isNone(n)&&t.warn("_extractUserPromptAction() - failed to extract user prompt action, received empty action args",{promptAction:e}),n}function P(e){return{kind:"quickRewrite",id:k.aU.Id.create(e.id),label:(0,i.sanitize)(e.label,{ALLOWED_TAGS:_.ap}),iconUrl:e.iconUrl}}function U(e){return(0,r.zG)(o.fromNullable(e),o.filter((e=>e.length>0)),o.map((e=>({header:"Sender's intent",text:(0,i.sanitize)(e,{ALLOWED_TAGS:[..._.ap,"person"]})}))))}var B=n(60797),T=n(24209),F=n(16118);class G{constructor(e,t,n=b.C8.Logging.getLogger("CheetahWeb.AvailabilityServiceImpl",v.i.DEBUG)){this._capiService=e,this._sessionStartCheetahInfo=t,this._logger=n,this._subs=new p.w.Keeper,this.availability=x.h.create({kind:k.a8.Kind.pending}),this.promptsAllocated=this.availability.view((e=>(0,r.zG)(e,o.fromPredicate(k.a8.isActiveOrPassive),o.map((e=>e.promptsAllocated))))),this._subs.push(this._sessionStartCheetahInfo.pipe(B.oA).subscribe((({allowedFeatures:e,cheetahUsage:t})=>this.availability.set(e.includes(m.vv.AllowedFeature)?k.a8.fromUsage(t):{kind:k.a8.Kind.unavailable}))),T.T(this._capiService.capiEvents.pipe(h.h((e=>"cheetah:setContext"===e.kind))),this._capiService.capiEvents.pipe(h.h((e=>"cheetah:result"===e.kind)))).subscribe((e=>this.availability.set(k.a8.fromUsage(e.message.usage)))),this.availability.pipe(F.G()).subscribe((([e,t])=>{this._logger.debug("availability updated",{prevAvailability:e,newAvailability:t}),k.a8.isActiveOrPassive(t)&&0===t.refillDate&&this._logger.warn("availability updated - error parsing refill date for new availability, setting timestamp to 0",{prevAvailability:e,newAvailability:t})})))}dispose(){this._subs.dispose()}}class z{constructor(e,t=b.C8.Logging.getLogger("CheetahWeb.TrackingServiceImpl",v.i.DEBUG)){this._capiService=e,this._logger=t}trackResultInsert(e){this._logger.debug("trackResultInsert()",{contextId:e}),e||this._logger.warn("trackResultInsert() - tracking result insert without context"),this._trackUxInteraction({kind:"result",userAction:k.Z7.Result.UserAction.insert},e)}trackResultOffensive(e){this._logger.debug("trackResultOffensive()",{contextId:e}),e||this._logger.warn("trackResultOffensive() - tracking result offensive without context"),this._trackUxInteraction({kind:"result",userAction:k.Z7.Result.UserAction.offensive},e)}trackResultDismiss(e){this._logger.debug("trackResultDismiss()",{contextId:e}),e||this._logger.warn("trackResultDismiss() - tracking result dismiss without context"),this._trackUxInteraction({kind:"result",userAction:k.Z7.Result.UserAction.dismiss},e)}trackResultRephrase(e){this._logger.debug("trackResultRephrase()",{contextId:e}),e||this._logger.warn("trackResultRephrase() - tracking result rephrase without context"),this._trackUxInteraction({kind:"result",userAction:k.Z7.Result.UserAction.rephrase},e)}trackVoiceProfileOpen(e){this._logger.debug("trackVoiceProfileOpen()",{source:e}),this._trackUxInteraction({kind:"voiceProfile",userAction:"toolbar"===e?k.Z7.VoiceProfile.UserAction.open:k.Z7.VoiceProfile.UserAction.openFromBanner})}trackVoiceProfileSkip(){this._logger.debug("trackVoiceProfileSkip()"),this._trackUxInteraction({kind:"voiceProfile",userAction:k.Z7.VoiceProfile.UserAction.skip})}trackActionsOpenStore(){this._logger.debug("trackActionsOpenStore()"),this._trackUxInteraction({kind:"actions",userAction:k.Z7.Actions.UserAction.openStore})}trackActionsOffensive(e){this._logger.debug("trackActionsOffensive()"),e||this._logger.warn("trackActionsOffensive() - tracking actions offensive without context"),this._trackUxInteraction({kind:"actions",userAction:k.Z7.Actions.UserAction.offensive},e)}trackPromptSearch(){this._logger.debug("trackPromptSearch()"),this._trackUxInteraction({kind:"prompt",userAction:k.Z7.Prompt.UserAction.search})}trackUsageInfoClick(){this._logger.debug("trackUsageInfoClick()"),this._trackUxInteraction({kind:"usageInfo",userAction:k.Z7.UsageInfo.UserAction.click})}trackUsageInfoHover(){this._logger.debug("trackUsageInfoHover()"),this._trackUxInteraction({kind:"usageInfo",userAction:k.Z7.UsageInfo.UserAction.hover})}trackOnboardingPopupView(){this._logger.debug("trackOnboardingPopupView()"),this._trackUxInteraction({kind:"onboardingPopup",userAction:k.Z7.Onboarding.UserAction.view})}trackOnboardingPopupSkip(){this._logger.debug("trackOnboardingPopupSkip()"),this._trackUxInteraction({kind:"onboardingPopup",userAction:k.Z7.Onboarding.UserAction.skip})}trackOnboardingPopupNext(){this._logger.debug("trackOnboardingPopupNext()"),this._trackUxInteraction({kind:"onboardingPopup",userAction:k.Z7.Onboarding.UserAction.next})}trackOnboardingPromptsTooltipView(){this._logger.debug("trackOnboardingPromptsTooltipView()"),this._trackUxInteraction({kind:"onboardingPromptsTooltip",userAction:k.Z7.Onboarding.UserAction.view})}trackOnboardingReviewTooltipView(){this._logger.debug("trackOnboardingReviewTooltipView()"),this._trackUxInteraction({kind:"onboardingReviewTooltip",userAction:k.Z7.Onboarding.UserAction.view})}trackOnboardingRewriteTooltipView(){this._logger.debug("trackOnboardingRewriteTooltipView()"),this._trackUxInteraction({kind:"onboardingRewriteTooltip",userAction:k.Z7.Onboarding.UserAction.view})}trackOnboardingKnowledgeHubTooltipView(){this._logger.debug("trackOnboardingRewriteTooltipView()"),this._trackUxInteraction({kind:"onboardingKnowledgeHubTooltip",userAction:k.Z7.Onboarding.UserAction.view})}trackAssistantClose(){this._logger.debug("trackAssistantClose()"),this._trackUxInteraction({kind:"assistant",userAction:k.Z7.Assistant.UserAction.close})}_trackUxInteraction(e,t){const n=k.Z7.getComponentId(e,t),i=k.Z7.getUserAction(e);this._logger.debug("_trackUxInteraction() - sending `user_action` to CAPI",{componentId:n,userAction:i,uxInteraction:e,contextId:t}),(0,E.tt)("sendUserAction",this._capiService.sendUserAction(n,i),this._logger)}}var j,N,V,M=n(19744),D=n.n(M);!function(e){e.mockUsage=function(e){return{promptsAllocated:50,promptsRemaining:e.get()===k.a8.Kind.active?30:e.get()===k.a8.Kind.passive?0:-30,refillDate:"2023-05-01T00:00:00.00Z"}},e.fromDiff=function(e,t,n,i){const r=D()(e,t),o=new d.i;for(const e of r)if(e[0]===D().EQUAL){const t=e[1].split(" ");if(t.filter((e=>""!==e.trim())).length>2){let e=!1;t.forEach(((t,i)=>{n&&i>0&&""!==t.trim()&&!e?(o.insert(t,{knowledgeHubTerm:!0}),e=!0):o.insert(t),o.insert(" ")}))}else o.insert(e[1])}else e[0]===D().INSERT?o.insert(e[1],{generatedText:i}):(e[0],D().DELETE);return o},e.textMock={resultText:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.",selectedText:"Lorem ipsum dolor sit amet sed do eiusmod tempor incididunt ut labore et dolore magna aliqua."},e.longTextMock="Once upon a time, a group of sailors were out on a voyage in search of new lands to discover. They had sailed for many days without any luck, and their supplies were running low. Just when they thought all hope was lost, they spotted something in the distance.\n\nAs they drew closer, they could make out the outline of an island. It was unlike anything they had ever seen before. The island was covered in lush green forests with tall trees that stretched towards the sky. The sea was crystal clear, and they could see colorful fish swimming around the coral reefs.\n\nExcited at the prospect of discovering a new land, the sailors anchored their ship and set foot on the island. They were amazed by the beauty of the place. The air was fresh, and the breeze was gentle. The sun was shining, and the birds were singing.\n\nAs they explored the island, they found that it was rich in natural resources. There were fruits and vegetables that they had never tasted before. The forests were home to exotic animals, and the hills were filled with precious minerals.\n\nThe sailors decided to stay on the island for a while and explore its secrets. They built temporary shelters and started to gather food and water. They also started to map the island and record their findings.\n\nAs days turned into weeks, the sailors discovered many wonders on the island. They found hidden waterfalls, secret caves, and even some ancient ruins. They also encountered friendly locals who welcomed them with open arms.\n\nThe island had so much to offer, and the sailors knew they had to share their discovery with the world. They returned to their ship and set sail back to their homeland, eager to tell everyone about the new island they had found.\n\nWord of the new island spread quickly, and soon, people from all over the world came to visit and explore its wonders. The island became a popular tourist destination, and many people decided to make it their home.\n\nYears went by, and the island flourished. It became a hub of culture, commerce, and education. The sailors who had discovered the island were hailed as heroes, and their names were forever etched in history.\n\nThe discovery of the new island had changed the lives of many people. It had opened up new opportunities and brought people together. It was a testament to the power of exploration and the beauty of nature."}(j||(j={}));!function(e){e.disabled="disabled",e.notReady="notReady",e.calculatedOff="calculatedOff",e.calculatedOn="calculatedOn"}(N||(N={})),function(e){const t=Math.floor(200*Math.random());e.initial={promptsAllocated:20,promptsRemaining:2,refillDate:new Date((new Date).getTime()+36e5*t).toISOString()},e.mock=x.h.create(e.initial)}(V||(V={}))},62692:(e,t,n)=>{n.d(t,{TB:()=>Ee,WY:()=>fa,aK:()=>ha});var i=n(57050),r=n(5114),o=n(16188),s=n(14601),a=n(2768),l=n(85985),c=n(2834),u=n(49708),d=n(38983),m=n(90732);function p(e){return(0,i.zG)(e,r.fromPredicate((e=>"initial"===e.kind||"dragged"===e.kind)))}class h{constructor(e,t){this._positionInfo=e,this._handlers=t,this._internalState=d.h.create({managedPositionInfo:r.none,assistant:r.none,dragState:r.none,assistantMaxHeight:r.none}),this.state=this._internalState.view((e=>(0,i.zG)(e.dragState,r.map((t=>{return n=t,i=e.assistantMaxHeight,{kind:"dragged",dragging:n.dragging,referencePosition:n.translationOrigin,assistantMaxHeight:i,translation:(0,o.NN)(Object.assign(Object.assign({},n.assistantSize),{top:n.viewportSize.height-n.translationOrigin.bottom-n.assistantSize.height,left:n.viewportSize.width-n.translationOrigin.right-n.assistantSize.width}),Object.assign({left:0,top:0},n.viewportSize))(n.translation)};var n,i})),r.alt((()=>(0,i.zG)(e.managedPositionInfo,r.map((t=>({kind:"initial",referenceElement:t.referenceElement,placement:t.placement,offset:t.offset,assistantMaxHeight:e.assistantMaxHeight})))))),r.getOrElse((()=>({kind:"none"})))))),this._subs=new s.w,this._subs.add(this._positionInfo.pipe(a.R(this._internalState.view("dragState").pipe(l.h(r.isSome))),c.b((e=>this._internalState.lens("managedPositionInfo").set(r.some(e))))).subscribe()),this._subs.add(u.R(self,"resize").pipe(c.b((()=>this._internalState.lens("dragState").modify(r.map(m.eG.set("viewportSize",(0,i.zG)((0,o.C7)(),(({width:e,height:t})=>({width:e,height:t}))))))))).subscribe())}onFocusChange(e){this._handlers.onFocusChange(e)}onMount(e){this._internalState.lens("assistant").set(r.some(e))}onResize(e){this._internalState.lens("dragState").modify(r.map(m.eG.set("assistantSize",(0,i.zG)(e,(({width:e,height:t})=>({width:e,height:t}))))))}onMaxHeightChange(e){this._internalState.lens("assistantMaxHeight").set(r.some(e))}onDrag(e){this._internalState.modify((t=>Object.assign(Object.assign({},t),{dragState:(0,i.zG)(t.dragState,r.map((0,i.ls)(m.eG.set("translation",e),m.eG.set("dragging",!0))),r.alt((()=>(0,i.zG)(t.assistant,r.map((e=>({assistantRect:e.getBoundingClientRect(),viewportSize:(0,i.zG)((0,o.C7)(),(({width:e,height:t})=>({width:e,height:t})))}))),r.map((({assistantRect:t,viewportSize:n})=>({dragging:!0,viewportSize:n,assistantSize:{width:t.width,height:t.height},translation:e,translationOrigin:{bottom:n.height-(t.top+t.height),right:n.width-(t.left+t.width)}})))))))})))}onDragEnd(){this._internalState.lens("dragState").modify(r.map(m.eG.set("dragging",!1)))}dispose(){this._subs.unsubscribe()}}var g=n(17771),f=n(48044),x=n(13853),b=n(64015),v=n(73975),y=n(45701),C=n(95195),k=n(81531),w=n(24209),S=n(60797),_=n(77176),E=n(19751),O=n(78674),I=n(98403),A=n(8125),R=n(83078),P=n(22232),U=n(1226),B=n(1651),T=n(17889);function F(e){return(0,i.zG)(U.z_.toStarted(e),r.map((e=>e.context.dynamicActions)),r.chain((0,i.ls)(b.hX(G.isSupportedDynamicAction),T.c2)))}var G,z,j,N=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n};!function(e){let t,n;e.isSupportedDynamicAction=(0,A.Kg)(U.aU.DynamicInput.isFollowUpQuestion,U.aU.DynamicInput.isQuickAction),function(e){e.ordByGroup=y.contramap((e=>e.group.rank))(y.ordNumber)}(t=e.SupportedDynamicActions||(e.SupportedDynamicActions={})),function(e){e.make=function(e){return{kind:"backendAction",action:e}}}(n=e.BackendAction||(e.BackendAction={}))}(G||(G={})),function(e){e.eq=C.getEq(v.yv,U.x4.Id.eq),e.card=function(e){return C.right(e)},e.uiItem=function(e){return C.left(e)},e.toCard=function(e){return r.fromEither(e)},e.toUIItem=function(e){return(0,i.zG)(e,C.fold(r.some,(()=>r.none)))}}(z||(z={})),function(e){function t(e){return t=>Object.assign(Object.assign({},t),{activeView:e,previousView:t.activeView})}e.create=function(){return{activeView:"loading",previousView:"loading",stagingVoiceProfile:r.none,stagingFeedbackFormData:{},textBox:"",selectedDynamicAction:r.none,contentOverflowUnderToolbar:!1,promptAutofocusToken:0,cardsState:{hoveredCard:r.none,focusedCard:r.none},reportMenuVisible:r.none,referencesVisibility:new Map,detectedReferences:[],overrideCardVoice:new Map}},e.updateActiveView=t,e.goToPreviousView=e=>t(e.previousView)(e)}(j||(j={}));class V{constructor(e){var t,n;this._params=e,this._state=d.h.create(j.create()),this._subs=new s.w,this._reportMenuVisibleDebounced=d.h.create(r.none),this.state=d.h.combine(this._state,this._params.userService.user,this._params.availabilityService.availability,this._params.sessionService.session,this._reportMenuVisibleDebounced,((e,t,n,o,s)=>{var{cardsState:a,reportMenuVisible:l}=e,c=N(e,["cardsState","reportMenuVisible"]);return Object.assign(Object.assign({},c),{user:t,availability:n,session:o,userPromptAction:(0,i.zG)(U.z_.toStarted(o),r.chain((e=>e.context.userPromptAction))),activeCards:new Set((0,i.zG)([a.hoveredCard,(0,i.zG)(a.focusedCard,R.orElse((0,i.zG)(s,r.chain(z.toCard))))],b.oA)),canScroll:r.isNone(l),contextualActions:F(o)})})),this.assistantUIActions=this._params.assistantUIActions,this._logger=null!==(t=this._params.logger)&&void 0!==t?t:k.C8.Logging.getLogger(V.name),this._monitoringService=null!==(n=this._params.monitoringService)&&void 0!==n?n:B.gz.getInstance(),this._subs.add(this.state.subscribe((e=>this._logger.debug("State update",e)))),this._subs.add(this._updateActiveView().subscribe()),this._subs.add(w.T(this._state.view("reportMenuVisible").pipe(S.oA,_.U(r.some)),this._state.view("reportMenuVisible").pipe(E.skipBy(r.getEq(z.eq)),O.b(250),l.h(r.isNone))).subscribe(I.wW(this._reportMenuVisibleDebounced))),this._subs.add(this.assistantUIActions.subscribe((e=>this._handleUIAction(e))))}_updateActiveView(){return d.h.combine(this._params.sessionService.session.view(U.z_.toStarting).view((0,i.ls)(r.chain((e=>e.error)),r.fold(i.jv,i.W8))),this._params.sessionService.session.view(U.z_.toStarted).view(r.map((e=>({hasResults:e.resultHistory.length>0,hasInProgressResult:r.isSome(e.inProgressResult)})))),this._state.view("selectedDynamicAction").view(r.isSome),((e,t,n)=>{const o=e?r.some("loadingError"):(0,i.zG)(t,r.map((({hasResults:e,hasInProgressResult:t})=>n?"actionSelected":e||t?"afterResults":"beforeResults")));(0,i.zG)(o,R.tap((e=>this._state.modify((t=>"voiceProfile"!==t.activeView&&"feedbackForm"!==t.activeView?j.updateActiveView(e)(t):t)))))}))}contentOverflowUnderToolbar(e){this._state.lens("contentOverflowUnderToolbar").set(e)}focusPromptField(){this._state.lens("promptAutofocusToken").modify((e=>e+1))}dispose(){this._subs.unsubscribe()}_handleUIAction(e){switch(e.kind){case U.ix.Kind.toolbarCloseButtonClick:return void this._close(e);case U.ix.Kind.toolbarGoBackButtonClick:return this._goBack();case U.ix.Kind.toolbarVoiceButtonClick:return this._openVoiceProfile("toolbar");case U.ix.Kind.setVoiceButtonClick:return this._openVoiceProfile("banner");case U.ix.Kind.voiceProfileCloseButtonClick:return this._closeVoiceProfile();case U.ix.Kind.voiceProfileUseVoiceButtonClick:return this._applyVoiceProfile();case U.ix.Kind.toneToggleClick:return this._toggleTone(e.id,e.selected);case U.ix.Kind.styleToggleClick:return this._selectStyle(e.id);case U.ix.Kind.roleTypeaheadSelectionChange:return this._selectRole((0,i.zG)(e.role,r.map((e=>e.id))));case U.ix.Kind.dialectDropdownSelectionChange:return this._selectDialect(e.dialect.id);case U.ix.Kind.promptFieldTextChange:return this._updateTextBox(e.text);case U.ix.Kind.actionBrickClick:return this._executeAction(e.action);case U.ix.Kind.promptSubmitButtonClick:return this._go();case U.ix.Kind.generateStopButtonClick:return this._stop();case U.ix.Kind.resultCardInsertButtonClick:return this._insert(e.result);case U.ix.Kind.resultCardRephraseButtonClick:return this._rephrase(e.result);case U.ix.Kind.resultCardDismissButtonClick:return this._dismissResult(e.result);case U.ix.Kind.errorCardOkButtonClick:return this._dismissError();case U.ix.Kind.openFeedbackFormButtonClick:return this._openFeedbackForm(e.source);case U.ix.Kind.feedbackFormChange:return this._updateFeedbackForm(e.feedbackData);case U.ix.Kind.feedbackFormSubmitButtonClick:return this._submitFeedbackForm(e.feedbackData);case U.ix.Kind.reportOffensiveResultButtonClick:return this._reportOffensiveResult(e.result);case U.ix.Kind.reportOffensiveActionsButtonClick:return this._reportOffensiveActions();case U.ix.Kind.resultCardHeaderClick:return this._clickResultHeader(e.prompt);case U.ix.Kind.creditsInfoHover:return this._onCreditsInfoHover();case U.ix.Kind.creditsInfoClick:return this._onCreditsInfoClick();case U.ix.Kind.resultCardHoverChange:return this._onCardHover(e.resultId,e.hovered);case U.ix.Kind.resultCardFocusChange:return this._onCardFocus(e.resultId,e.focused);case U.ix.Kind.resultCardToggleGenericVoiceButtonClick:return this._onToggleGenericVoice(e.resultId,e.voice);case U.ix.Kind.reportMenuVisibilityChange:return this._onCardReportMenuVisibilityChange(e.trigger,e.visible);case U.ix.Kind.referencesVisibilityChange:return this._onCardReferencesVisibilityChange(e.resultId,e.visible);case U.ix.Kind.mount:e.name===U.ec.creditsInfoButton&&(0,m.tt)("reportUphookShow",this._params.uphookService.reportUphookShow(this._params.userService.user.get()),this._logger,void 0,(e=>U._H.Error.ReportUphookShowFailed.create(this._params.sessionService.session.get().mode,e)));break;case U.ix.Kind.promptFieldKeyPressEscape:return this._onPromptFieldKeyPressEscape(e);case U.ix.Kind.promptFieldKeyPressEnter:return e.text.trim().length>0?this._go():this._tryInsertLatestResult();default:return}}_onCardHover(e,t){this._state.lens("cardsState").lens("hoveredCard").modify(t?()=>r.some(e):r.filter((t=>t!==e)))}_onCardFocus(e,t){this._state.lens("cardsState").lens("focusedCard").modify(t?()=>r.some(e):r.filter((t=>t!==e)))}_onCardReportMenuVisibilityChange(e,t){this._state.modify((n=>Object.assign(Object.assign({},n),{reportMenuVisible:t?r.some(e):(0,i.zG)(n.reportMenuVisible,r.filter((t=>!z.eq.equals(t,e)))),cardsState:Object.assign(Object.assign({},n.cardsState),{hoveredCard:(0,i.zG)(z.toCard(e),r.fold((()=>n.cardsState.hoveredCard),(e=>t?n.cardsState.hoveredCard:(0,i.zG)(n.cardsState.hoveredCard,r.filter((t=>t!==e))))))})})))}_onCardReferencesVisibilityChange(e,t){this._state.lens("referencesVisibility").modify((n=>new Map(n).set(e,t)))}_onToggleGenericVoice(e,t){this._state.lens("overrideCardVoice").modify((n=>{var i;const r=new Map(n),o=null!==(i=n.get(e))&&void 0!==i?i:t;return r.set(e,"generic"===o?"user":"generic"),r}))}_close(e){U.ix.is(U.ix.Kind.toolbarCloseButtonClick)(e)&&this._params.trackingService.trackAssistantClose(),(0,m.tt)("close",this._params.handlers.close(),this._logger,void 0,(e=>this._monitoringService.notify(U._H.Error.AssistantCloseFailed.create(this._params.sessionService.session.get().mode,e))))}_goBack(){const e=(0,i.zG)(U.z_.toStarted(this._params.sessionService.session.get()),r.map((e=>e.resultHistory.length>0)),r.fold(i.jv,i.W8));this._state.modify((t=>Object.assign(Object.assign({},"actionSelected"===t.activeView?j.updateActiveView(e?"afterResults":"beforeResults")(t):j.updateActiveView(t.previousView)(t)),{selectedDynamicAction:"actionSelected"===t.activeView?r.none:t.selectedDynamicAction,textBox:"actionSelected"===t.activeView?"":t.textBox})))}_openVoiceProfile(e){(0,i.zG)(U.z_.toStarted(this._params.sessionService.session.get()),R.tap((t=>{this._params.trackingService.trackVoiceProfileOpen(e),this._state.modify((0,i.ls)(j.updateActiveView("voiceProfile"),m.eG.set("stagingVoiceProfile",r.some({selectedStyle:t.voiceProfile.selectedStyle,selectedTonesPerStyle:t.voiceProfile.selectedTonesPerStyle,selectedRole:t.voiceProfile.selectedRole,selectedDialect:t.voiceProfile.selectedDialect,needsSetup:t.voiceProfile.needsSetup})),m.eG.set("reportMenuVisible",r.none),m.eG.set("cardsState",{hoveredCard:r.none,focusedCard:r.none})))})))}_closeVoiceProfile(){this._params.trackingService.trackVoiceProfileSkip(),this._state.modify((e=>(0,i.zG)(j.updateActiveView(e.previousView)(e),m.eG.set("stagingVoiceProfile",r.none))))}_applyVoiceProfile(){const e=this._state.get().stagingVoiceProfile;this._state.modify((e=>(0,i.zG)(j.updateActiveView(e.previousView)(e),m.eG.set("stagingVoiceProfile",r.none)))),(0,i.zG)(e,R.tap((e=>{(0,m.tt)("setVoiceProfile",this._params.sessionService.setVoiceProfile(e),this._logger)})))}_toggleTone(e,t){this._state.lens("stagingVoiceProfile").modify(r.map((n=>Object.assign(Object.assign({},n),{selectedTonesPerStyle:(0,i.zG)(n.selectedTonesPerStyle,t?(0,m.ni)(U.LA.Style.Id.eq)(n.selectedStyle,r.fold((()=>new Set([e])),x.$T(U.LA.Tone.Id.eq)(e))):(0,i.ls)(f.cq(U.LA.Style.Id.eq)(n.selectedStyle,x.Od(U.LA.Tone.Id.eq)(e)),r.getOrElse((()=>n.selectedTonesPerStyle))))}))))}_selectStyle(e){this._state.lens("stagingVoiceProfile").modify(r.map((t=>Object.assign(Object.assign({},t),{selectedStyle:e}))))}_selectRole(e){this._state.lens("stagingVoiceProfile").modify(r.map((t=>Object.assign(Object.assign({},t),{selectedRole:e}))))}_selectDialect(e){this._state.lens("stagingVoiceProfile").modify(r.map((t=>Object.assign(Object.assign({},t),{selectedDialect:e}))))}_updateTextBox(e){this._state.lens("textBox").set(e)}_executeAction(e){if("backendAction"===e.kind)if(U.aU.DynamicInput.isFollowUpQuestion(e.action)){const t=e.action;this._state.modify((e=>Object.assign(Object.assign({},e),{textBox:"",selectedDynamicAction:r.some(t)})))}else U.aU.DynamicInput.isQuickAction(e.action)?(this._state.modify((e=>Object.assign(Object.assign({},e),{textBox:"",selectedDynamicAction:r.none}))),this._params.sessionService.submitAction(e.action)):(0,P.L0)(e.action);else"allResults"===e.kind||("go"===e.kind?this._go():(0,P.L0)(e))}_go(){r.isSome(this._state.get().selectedDynamicAction)?this._submitSelectedFollowUpAction():this._submitCustomPrompt()}_stop(){this._params.sessionService.stopInProgressResult()()}_insert(e){(0,m.tt)("insertText",this._params.textEditorService.insertText(e.text),this._logger,(()=>{this._params.sessionService.trackResultInsert(e.id)}))}_tryInsertLatestResult(){(0,i.zG)(U.z_.toStarted(this._params.sessionService.session.get()),r.map((e=>e.resultHistory)),r.chain(b.YM),R.tap((e=>this._insert(e))))}_onPromptFieldKeyPressEscape(e){(0,i.zG)(U.z_.toStarted(this._params.sessionService.session.get()),r.chain((e=>e.inProgressResult)),r.fold((()=>this._close(e)),(()=>this._stop())))}_rephrase(e){this._params.sessionService.regenerateResult(e.id)}_dismissResult(e){this._params.sessionService.dismissResult(e.id),this._state.modify((t=>Object.assign(Object.assign({},t),{reportMenuVisible:(0,i.zG)(t.reportMenuVisible,r.filter((t=>!z.eq.equals(t,z.card(e.id))))),cardsState:{hoveredCard:(0,i.zG)(t.cardsState.hoveredCard,r.filter((t=>t!==e.id))),focusedCard:(0,i.zG)(t.cardsState.hoveredCard,r.filter((t=>t!==e.id)))}})))}_dismissError(){this._params.sessionService.dismissError()}_openFeedbackForm(e){this._state.modify((t=>Object.assign(Object.assign({},j.updateActiveView("feedbackForm")(t)),{stagingFeedbackFormData:{source:e},reportMenuVisible:r.none,cardsState:{hoveredCard:r.none,focusedCard:r.none}})))}_updateFeedbackForm(e){this._state.modify((t=>Object.assign(Object.assign({},t),{stagingFeedbackFormData:Object.assign(Object.assign({},t.stagingFeedbackFormData),e)})))}_submitFeedbackForm(e){this._state.modify((e=>Object.assign(Object.assign({},j.goToPreviousView(e)),{stagingFeedbackFormData:{}}))),(0,m.tt)("submitFeedback",this._params.feedbackService.submitFeedback(e),this._logger,void 0,(e=>U._H.Error.SubmitFeedbackFailed.create(this._params.sessionService.session.get().mode,e)))}_reportOffensiveResult(e){this._params.sessionService.trackResultOffensive(e.id)}_reportOffensiveActions(){this._params.sessionService.trackActionsOffensive()}_clickResultHeader(e){this._state.modify((t=>Object.assign(Object.assign({},t),{textBox:e,promptAutofocusToken:t.promptAutofocusToken+1})))}_onCreditsInfoHover(){this._params.trackingService.trackUsageInfoHover()}_onCreditsInfoClick(){this._params.trackingService.trackUsageInfoClick(),(0,m.tt)("reportUphookClick",this._params.uphookService.reportUphookClick(this._params.userService.user.get()),this._logger,void 0,(e=>U._H.Error.ReportUphookClickFailed.create(this._params.sessionService.session.get().mode,e)))}_submitSelectedFollowUpAction(){const e=(0,i.zG)(this._state.get().textBox.trim(),r.fromPredicate((e=>""!==e)));(0,i.zG)(g.Y(r.Applicative)({text:e,selectedDynamicAction:this._state.get().selectedDynamicAction}),r.map((({text:e,selectedDynamicAction:t})=>U.aU.FollowUpQuestionValue.fromInputAndValue(t,e))),R.tap((e=>{this._state.modify((e=>Object.assign(Object.assign({},e),{selectedDynamicAction:r.none,textBox:""}))),this._params.sessionService.submitAction(e)})))}_submitCustomPrompt(){(0,i.zG)(this._state.get().textBox.trim(),r.fromPredicate((e=>""!==e)),r.chain((e=>(0,i.zG)(U.z_.toStarted(this._params.sessionService.session.get()),r.chain((e=>e.context.userPromptAction)),r.map((t=>({userPromptAction:t,text:e})))))),R.tap((({text:e,userPromptAction:t})=>{this._state.lens("textBox").set(""),this._params.sessionService.submitAction(U.aU.UserPromptValue.fromInput(t,e))})))}}var M=n(80900),D=n(28043);class H{constructor(e,t,n=3e3,i=1){this._assistantUIActions=e,this._activeView=t,this._notificationsDurationMs=n,this._maxNotificationsCountAtOnce=i,this._state=d.h.create([]),this._notificationsSubs=new Map,this._subs=new s.w,this._nextToastId=0,this.state=this._state.view(),this._subs.add(this._showFeedbackSubmittedToast().subscribe()),this._subs.add(this._clearNotificationsOnViewChange().subscribe())}dismiss(e){var t;null===(t=this._notificationsSubs.get(e))||void 0===t||t.unsubscribe(),this._notificationsSubs.delete(e),this._state.modify(b.hX((t=>t.id!==e)))}clearAll(){this._notificationsSubs.forEach((e=>e.unsubscribe())),this._notificationsSubs.clear(),this._state.set([])}dispose(){this._subs.unsubscribe(),this.clearAll()}_showNotification(e){const t=this._nextToastId++;this._notificationsSubs.set(t,M.H(this._notificationsDurationMs).subscribe((()=>this.dismiss(t)))),this._state.modify((0,i.ls)(b.QI({kind:e,id:t}),b.ke(this._maxNotificationsCountAtOnce)))}_showFeedbackSubmittedToast(){return this._assistantUIActions.pipe(l.h((0,A.Kg)(U.ix.is(U.ix.Kind.feedbackFormSubmitButtonClick),U.ix.is(U.ix.Kind.reportOffensiveResultButtonClick),U.ix.is(U.ix.Kind.reportOffensiveActionsButtonClick))),c.b((()=>this._showNotification(U.Cl.Kind.feedbackSubmitted))))}_clearNotificationsOnViewChange(){return this._activeView.pipe(D.x(),c.b((e=>{"feedbackForm"!==e&&"voiceProfile"!==e||this.clearAll()})))}}var L=n(32952),$=n(16118),K=n(2844),Z=n(66310),W=n(76974),q=n(93508),Y=n(27378),X=n(12187),Q=n(5739),J=n(34217),ee=n(74903),te=n(89894),ne=n(9546),ie=n(62172),re=n(13578);const oe="brick",se=o.Es.buttonOverrideSpecificity({padding:`0 ${te.ux.rem(ne.x)} 0 ${te.ux.rem(ne.F2)}`},oe),ae={display:"flex",alignItems:"center",gap:te.ux.rem(ne.x)},le=o.Es.buttonOverrideSpecificity({minHeight:te.ux.rem(1.75),fontSize:te.ux.rem(.75),lineHeight:te.ux.rem(1.125),color:ie.BlueGray80},oe),ce=o.Es.buttonOverrideSpecificity({minHeight:te.ux.rem(2),fontSize:te.ux.rem(.875),lineHeight:te.ux.rem(1.375),color:re.XY.Content.Primary.Default},oe),ue=o.Es.buttonOverrideSpecificity({boxShadow:`inset 0 0 0 ${te.ux.rem(.125)} ${o.BO.BrandGreen60}`},oe),de={textAlign:"left",whiteSpace:"initial",lineHeight:te.ux.rem(1.125),margin:`${te.ux.rem(.25)} 0 ${te.ux.rem(.25)} 0`},me=Object.assign({},o.Es.iconSizeRems(1.5)),pe=te.ux.joinClasses([oe,te.ux.style(se)]),he=te.ux.style(ae),ge=te.ux.style(le),fe=te.ux.style(ce),xe=te.ux.style(ue),be=te.ux.style(de),ve=te.ux.style(me),ye=te.ux.style(me),Ce=(0,X.xb)(ee.zx.Secondary),ke="actionBrick",we=J.UI.Node.make((({view:e,notify:t})=>Y.createElement(Ce,Object.assign({onClick:e("action").pipe(_.U((e=>t({kind:U.ix.Kind.actionBrickClick,action:e})))),name:"actionBrick"},(0,X.Sh)(ke,pe,e("action").pipe(_.U((({kind:e})=>"go"===e?xe:null))),e("mode").pipe(_.U((e=>"compact"===e?ge:"standard"===e?fe:(0,P.L0)(e)))))),Y.createElement(Q.F.div,{className:he},e("icon").pipe(_.U(C.fold((({kind:e})=>{switch(e){case"allResults":return Y.createElement(ee.k8,{className:ve});case"go":return Y.createElement(ee.CT,{className:ye});default:return(0,P.L0)(e)}}),(({url:e})=>Y.createElement("img",{src:e,style:{width:20,height:20}}))))),Y.createElement(Q.F.span,Object.assign({className:be},(0,o.E)(e("label"))))))));class Se{constructor(e,t,n,a,u,m){var p,h,g;this._availabilityService=t,this._sessionService=n,this._trackingService=a,this._focusPromptField=m,this._subs=new s.w,this._state=d.h.create(r.none),this._userTyped=new L.xQ,this._promptOrMenuFocused=new L.xQ,this._promptMenuActions=new L.xQ,this._promptMenuContainer=r.none,this._cachedActionBricks=r.none,this.state=this._state.view(),this._subs.add(this._userTyped.pipe(O.b(150),l.h((()=>!u())),c.b((e=>this._promptMenuActions.next({kind:"showSearchResults",search:e})))).subscribe()),this._subs.add((p=this._promptMenuActions,h=this._sessionService.session,g=this._availabilityService.availability,K.aj([p.pipe(Z.w((e=>"showSearchResults"===e.kind?h.view(U.z_.toStarted).pipe(_.U((t=>(0,i.zG)(t,r.filter((()=>""!==e.search.trim())),r.chain((t=>{return n=(0,i.zG)(t.context.dynamicActions,b.hX(G.isSupportedDynamicAction)),s=e.search,(0,i.zG)(n,b.DZ((e=>(0,i.zG)((0,o.lA)(s,e.searchLabel,e.searchTags),r.map((t=>({data:e,matchScore:t})))))),b.DY((0,o.JY)()),b.UI((({data:e})=>e)),T.c2);var n,s})),r.map((e=>({kind:"searchResults",actions:e}))))))):"showActionsStore"===e.kind?h.view((0,i.ls)(F,r.map((e=>({kind:"actionsStore",actions:e}))))):"close"===e.kind?W.of(r.none):(0,P.L0)(e))),q.O(r.none)),g]).pipe(_.U((([e,t])=>(0,i.zG)(e,r.filter((()=>!U.a8.isUnavailable(t)))))))).subscribe(I.wW(this._state))),this._subs.add(this._promptOrMenuFocused.pipe(O.b(100),l.h((e=>!e))).subscribe((()=>this._promptMenuActions.next({kind:"close"})))),this._subs.add(this.state.pipe($.G(),l.h((([e,t])=>r.isNone(e)&&r.isSome(t))),_.U((([e,t])=>t)),S.oA).subscribe((e=>{"actionsStore"===e.kind?this._trackingService.trackActionsOpenStore():"searchResults"===e.kind&&this._trackingService.trackPromptSearch()}))),this._subs.add(this._promptMenuActions.pipe(l.h((e=>"close"===e.kind))).subscribe((()=>this._invalidateActionBricks()))),this._subs.add(e.subscribe((e=>this._handleUIAction(e))))}dispose(){this._subs.unsubscribe()}_handleUIAction(e){switch(e.kind){case U.ix.Kind.mount:return void(this._promptMenuContainer=r.some(e.element));case U.ix.Kind.promptMenuKeyPressArrowDown:return this._onPromptMenuKeyPressArrowDown();case U.ix.Kind.promptMenuKeyPressArrowUp:return this._onPromptMenuKeyPressArrowUp();case U.ix.Kind.promptFieldKeyPressArrowUp:return this._focusLastBrick();case U.ix.Kind.promptFieldKeyPressArrowDown:return this._focusFirstBrick();case U.ix.Kind.promptFieldTextChange:return this._invalidateActionBricks(),this._userTyped.next(e.text);case U.ix.Kind.collapsePromptMenuButtonClick:case U.ix.Kind.promptSubmitButtonClick:return this._promptMenuActions.next({kind:"close"});case U.ix.Kind.promptFieldKeyPressEnter:return void(e.text.trim().length>0&&this._promptMenuActions.next({kind:"close"}));case U.ix.Kind.actionBrickClick:return"allResults"===e.action.kind?this._promptMenuActions.next({kind:"showActionsStore"}):this._promptMenuActions.next({kind:"close"});case U.ix.Kind.promptFieldAndMenuFocusChange:return this._promptOrMenuFocused.next(e.focused);default:return}}_invalidateActionBricks(){this._cachedActionBricks=r.none}_getActionBricks(){return(0,i.zG)(this._cachedActionBricks,r.getOrElse((()=>{const e=(0,i.zG)(this._promptMenuContainer,r.fold((()=>[]),(e=>Array.from(e.querySelectorAll(".actionBrick")).filter(o.Re))));return this._cachedActionBricks=r.some(e),e})))}_onPromptMenuKeyPressArrowDown(){var e;const t=this._getActionBricks(),n=(0,o.vY)((null===(e=r.toNullable(this._promptMenuContainer))||void 0===e?void 0:e.ownerDocument)||document);return(0,i.zG)(r.fromNullable(t.findIndex((e=>e===n))),R.tap((e=>{var n;e+1>=t.length?this._focusPromptField():null===(n=t[e+1])||void 0===n||n.focus()})))}_onPromptMenuKeyPressArrowUp(){var e;const t=this._getActionBricks(),n=(0,o.vY)((null===(e=r.toNullable(this._promptMenuContainer))||void 0===e?void 0:e.ownerDocument)||document);return(0,i.zG)(r.fromNullable(t.findIndex((e=>e===n))),R.tap((e=>{var n;e-1<0?this._focusPromptField():null===(n=t[e-1])||void 0===n||n.focus()})))}_focusFirstBrick(){var e;null===(e=this._getActionBricks()[0])||void 0===e||e.focus()}_focusLastBrick(){var e;const t=this._getActionBricks();null===(e=t[t.length-1])||void 0===e||e.focus()}}var _e,Ee,Oe=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n};!function(e){e.create=function(e){const t=new L.xQ,n=new V(Object.assign({assistantUIActions:t},e)),i=new Se(t,e.availabilityService,e.sessionService,e.trackingService,(()=>r.isSome(n.state.get().selectedDynamicAction)),(()=>n.focusPromptField())),o=new H(t,n.state.view("activeView"));return{assistant:n,promptMenu:i,notifications:o,actions:t.asObservable(),notify:e=>t.next(e),dispose:()=>{o.dispose(),n.dispose()}}}}(_e||(_e={})),function(e){e.create=function(e){const{positionInfo:t,handlers:n}=e,i=Oe(e,["positionInfo","handlers"]),r=_e.create(Object.assign(Object.assign({},i),{handlers:{close:()=>n.close()}})),o=new h(t,{onFocusChange:e=>n.onFocusChange(e)});return Object.assign(Object.assign({},r),{position:o,dispose:()=>{o.dispose(),r.dispose()}})}}(Ee||(Ee={}));var Ie=n(90845),Ae=n(99094),Re=n(31278),Pe=n(56133),Ue=n(88392);const Be="content",Te="toolbar",Fe=e=>te.ux.color(ie.BlueGray40).toRGBA().fade(e).toString(),Ge={fontFamily:"Inter, sans-serif",width:te.ux.rem(26.875),borderRadius:te.ux.rem(Ue.ze),background:"linear-gradient(180deg, #FCFCFC 0%, #FCFCFC 100%)",$nest:{"&[data-dragging='true']":{cursor:"grabbing",$nest:{[`.${Be}`]:{pointerEvents:"none"},[`.${Te}`]:{pointerEvents:"none"}}}}},ze=Object.assign(Object.assign({},Ge),{boxShadow:`0px 0px 0px 0.5px ${ie.BlueGray40}, 0px 0px 2px 0.5px ${Fe(.5)}, 0px 1px 8px 0.5px ${Fe(.1)}, 0px 2px 12px 0.5px ${Fe(.1)}, 0px 4px 20px 0.5px ${Fe(.25)}`,backdropFilter:`blur(${te.ux.rem(.34375)})`}),je={maxWidth:te.ux.rem(40),minWidth:te.ux.rem(18),width:te.ux.percent(100)},Ne=Object.assign({display:"flex",alignItems:"center",justifyContent:"space-between",gap:te.ux.rem(ne.x),padding:`${te.ux.rem(ne.F2)} ${te.ux.rem(ne.x)}`,height:te.ux.rem(2.5),boxSizing:"border-box"},{"app-region":"drag","-webkit-app-region":"drag","--grammarly-app-region":"drag"}),Ve={borderBottom:`0.5px solid ${ie.BlueGray10}`},Me=te.ux.style(ze),De=(te.ux.style(Ge),te.ux.style(ze,je)),He=te.ux.style(Ge,je),Le=te.ux.joinClasses([Te,te.ux.style(Ne)]),$e=te.ux.joinClasses([Te,te.ux.style(Ne,{cursor:"grab",$nest:{"&:active":{cursor:"grabbing"}}})]),Ke=te.ux.style(Ve),Ze=Be,We=J.UI.Grid.make((({slots:e,state:t,notify:n})=>{const{ref:i,onMount:r}=Ie.P.useElWatcher();return Y.createElement(Pe.l.Provider,{value:{portalContainer:i}},Y.createElement(Ae.f.Context.Provider,{value:Ae.f.emptyWithName("cheetahAssistant")},Y.createElement(Q.F.Fragment,null,t.pipe(_.U((t=>"initial"===t.kind||"dragged"===t.kind?Y.createElement(Pe.Q,{placement:t,onFocus:n({kind:"focus",focused:!0}),onBlur:n({kind:"focus",focused:!1}),onMount:e=>{n({kind:"mount",element:e})(),r(e)},onMaxSizeChange:e=>n({kind:"maxSize",maxSize:e})(),"data-grammarly-part":"ideation-assistant","data-dragging":"dragged"===t.kind&&t.dragging,className:Me},Y.createElement("header",Object.assign({},(0,X.Sh)($e,t.contentOverflowUnderToolbar?Ke:null),{ref:e=>e&&n({kind:"dragHandleMount",element:e})()}),e.toolbar,Y.createElement(ee.zx.Tertiary,{onClick:n({kind:U.ix.Kind.toolbarCloseButtonClick}),compact:!0,size:"large",name:"toolbarClose","aria-label":"Close Assistant"},Y.createElement(Re.JO.Close,null))),Y.createElement("main",{className:Ze},e.content)):"none"===t.kind?null:(0,P.L0)(t)))))))}));var qe=n(38194),Ye=n(49143),Xe=n(85089),Qe=n(83401);function Je(e){return(0,i.ls)(qe.B(),(t=>{return w.T(t.pipe(c.b((t=>function(e,t){switch(e.kind){case"focus":return t.position.onFocusChange(e.focused);case"mount":return t.position.onMount(e.element);case"maxSize":return t.position.onMaxHeightChange(e.maxSize.height);case"dragHandleMount":break;case U.ix.Kind.toolbarCloseButtonClick:return t.notify(e);default:return(0,P.L0)(e)}}(t,e))),Ye.l()),t.pipe((n=e.position,(0,i.ls)(_.U((e=>"dragHandleMount"===e.kind?r.some(e.element):r.none)),S.oA,(0,o.uj)(),(s=n,(0,i.ls)(qe.B(),(e=>(0,i.zG)(w.T(e.pipe(l.h((e=>o.E9.l1Distance(o.E9.fromCartesian(e.translate),o.E9.fromCartesian(e.lastTranslate))>=3)),c.b((e=>s.onDrag(e.translate)))),e.pipe(l.h((e=>e.dragEnd)),c.b((()=>s.onDragEnd())))),Ye.l())))),Ye.l()))),t.pipe(function(e){return(0,i.ls)(_.U((e=>"mount"===e.kind?r.some(e.element):r.none)),S.oA,Z.w((e=>Xe.YC(e).pipe(q.O(null),_.U((()=>e.getBoundingClientRect()))))),c.b((t=>e.onResize(t))),Ye.l())}(e.position)),t.pipe((0,i.ls)(_.U((e=>"mount"===e.kind?r.some(e.element):r.none)),S.oA,_.U(r.some),Ie.P.FocusTrap.dynamicFocusTrap(Ie.P.FocusTrap.InitialFocus.none,et,tt),Ye.l())),K.aj([e.position.state,e.assistant.state]).pipe(_.U((([e,{contentOverflowUnderToolbar:t,activeView:n}])=>Object.assign(Object.assign({},e),{contentOverflowUnderToolbar:t&&"voiceProfile"!==n&&"feedbackForm"!==n})))));var n,s}))}function et(e){var t;if(e instanceof HTMLIFrameElement){const n=null===(t=e.contentWindow)||void 0===t?void 0:t.document;if(n){const e=n.body.querySelector("textarea:not([disabled]), input:not([disabled])");e&&"focus"in e&&"function"==typeof e.focus&&e.focus()}}else e.focus()}function tt(e,t){return e instanceof HTMLIFrameElement?e.contentDocument?u.R(e.contentDocument.body,t):Qe.C:u.R(e,t)}const nt=J.UI.Grid.make((({slots:e,state:t,notify:n})=>{const{ref:o,onMount:s}=Ie.P.useElWatcher();return Y.createElement(Pe.l.Provider,{value:{portalContainer:o}},Y.createElement(Ae.f.Context.Provider,{value:Ae.f.emptyWithName("cheetahAssistant")},Y.createElement(Q.F.Fragment,null,t.pipe(_.U((t=>Y.createElement(Q.F.div,Object.assign({},(0,X.Sh)(t.includeBoxShadow?De:He),{key:"ideation-assistant-container",mount:e=>{(0,i.zG)(r.fromNullable(e),R.tap((e=>{n({kind:"mount",element:e})}))),s(e)}}),Y.createElement(Q.F.header,Object.assign({},(0,X.Sh)(Le,t.contentOverflowUnderToolbar?Ke:null)),e.toolbar,Y.createElement(ee.zx.Tertiary,{onClick:n({kind:U.ix.Kind.toolbarCloseButtonClick}),compact:!0,size:"large",name:"toolbarClose","aria-label":"Close Assistant"},Y.createElement(Re.JO.Close,null))),Y.createElement(Q.F.main,{className:Ze},e.content))))))))}));var it;function rt(e,t,n){return J.Z.fromSideEffect((t=>e.notify(t)),K.aj([t,e.assistant.state.view("textBox")]).pipe(_.U((([e,t])=>({icon:"backendAction"===e.kind?C.right({url:e.action.iconUrl}):C.left({kind:e.kind}),label:"backendAction"===e.kind?e.action.label:"allResults"===e.kind?"More":"go"===e.kind?`”${t.trim()}”`:(0,P.L0)(e),action:e,mode:n})))))}!function(e){e.empty={includeBoxShadow:!0}}(it||(it={}));const ot=J.UI.List.make(b.bw,we);function st(e,t,n){return J.Z.composeList(b.Ot,(()=>t.pipe(_.U(r.getOrElse((()=>[]))))),(t=>rt(e,W.of(t),n)))}function at(e=3,t=(t=>t.length>e)){return n=>t(n)?T.Ss(b.ke(e)(n),{kind:"allResults"}):n}const lt=({className:e,children:t,header:n})=>Y.createElement("div",Object.assign({},(0,X.Sh)(ct,e)),n?Y.createElement("div",{className:ut},n):null,Y.createElement("div",{className:dt},t)),ct=te.ux.style({background:"white",display:"flex",flexDirection:"column",gap:te.ux.rem(ne.x)}),ut=te.ux.style({color:re.XY.Content.Secondary.Default,fontWeight:400,fontSize:te.ux.rem(.75),lineHeight:te.ux.rem(1.125),overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"}),dt=te.ux.style({display:"flex",flexDirection:"row",flexWrap:"wrap",gap:te.ux.rem(ne.x)}),mt=J.UI.Grid.make((({slots:e,view:t})=>Y.createElement(lt,{header:Y.createElement(Q.F.Fragment,null,t("group")),className:gt},e.actions))),pt=J.UI.Knot.make(mt,{actions:ot}),ht=J.UI.List.make(b.bw,pt),gt=te.ux.style({background:"transparent",padding:`${te.ux.rem(ne.x)} 0`});function ft(e,t){return J.Z.composeList(b.Ot,(()=>t),(t=>function(e,t){return J.Z.composeKnot({root:()=>W.of({group:t.group}),actions:st(e,W.of(r.some(t.actions)),"standard")})}(e,t)))}const xt="setVoiceBtn",bt=te.ux.style({padding:te.ux.rem(ne.qp),border:`0.5px solid ${ie.BlueGray10}`,borderRadius:te.ux.rem(Ue.xB+Ue.fe),backgroundColor:"#D8F2EC",backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"right",backgroundImage:"url('https://d201kpdrh73vuz.cloudfront.net/text-generation/voice-banner.png')"}),vt=te.ux.style({fontWeight:700,fontSize:te.ux.rem(.875),lineHeight:te.ux.rem(1.375),color:re.XY.Content.Primary.Default}),yt=te.ux.style({fontWeight:400,fontSize:te.ux.rem(.75),lineHeight:te.ux.rem(1.125),color:re.XY.Content.Secondary.Default}),Ct=te.ux.style({stroke:"white"}),kt=te.ux.joinClasses([xt,te.ux.style(o.Es.buttonOverrideSpecificity({marginTop:te.ux.rem(ne.x),padding:`0 ${te.ux.rem(ne.x)} 0 ${te.ux.rem(ne.F2)}`,lineHeight:te.ux.rem(1.125),gap:te.ux.rem(ne.F2),$nest:{"& > i":Object.assign({marginLeft:0},o.Es.iconSizeRems(1.5))}},xt))]),wt=J.UI.Node.make((({notify:e})=>Y.createElement("div",{className:bt},Y.createElement("div",{className:vt},"Set your voice"),Y.createElement("div",{className:yt},"Choose how you want your generated text to sound."),Y.createElement(ee.zx.Primary,{className:kt,onClick:e({kind:U.ix.Kind.setVoiceButtonClick}),name:"bannerVoiceProfile",size:"small"},Y.createElement(ee.uA,{className:Ct}),"Set voice")))),St=J.UI.Union.asOption(wt);function _t(e){return J.Z.fromSideEffect((t=>e.notify(t)),null)}const Et={display:"flex",flexDirection:"column",padding:te.ux.rem(ne.qp),border:`0.5px solid ${ie.BlueGray10}`,borderRadius:te.ux.rem(Ue.xB+Ue.fe),gap:te.ux.rem(ne.yC)},Ot={color:re.XY.Content.Secondary.Default,fontWeight:400,fontSize:te.ux.rem(.75),lineHeight:te.ux.rem(1.125)},It={color:re.XY.Content.Primary.Default,fontStyle:"normal",fontWeight:400,fontSize:te.ux.rem(.75),lineHeight:te.ux.rem(1.125),fontFeatureSettings:"'ss01' on",$nest:{"& person":{color:ie.Blue60,fontWeight:700,$nest:{"&::before":{content:"''",display:"inline-block",width:te.ux.rem(1),height:te.ux.rem(1),backgroundSize:"cover",verticalAlign:"text-bottom",backgroundRepeat:"no-repeat",backgroundPosition:"center",backgroundImage:`url('data:image/svg+xml;utf8,${encodeURIComponent(`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M7.95768 3.00512C8.95983 3.00512 9.7855 3.83575 9.7855 4.8769V6.01259C9.7855 7.05374 8.95983 7.88437 7.95768 7.88437C6.95553 7.88437 6.12986 7.05374 6.12986 6.01259V4.8769C6.12986 3.83575 6.95553 3.00512 7.95768 3.00512ZM10.5847 4.8769C10.5847 3.40916 9.41586 2.20593 7.95768 2.20593C6.4995 2.20593 5.33067 3.40916 5.33067 4.8769V6.01259C5.33067 7.48032 6.4995 8.68355 7.95768 8.68355C8.20909 8.68355 8.45189 8.64779 8.68159 8.58107C8.68635 8.65317 8.69342 8.72016 8.70392 8.78578C8.81061 9.45248 9.17662 10.0499 9.72211 10.4478C9.88673 10.5679 10.0776 10.6652 10.3757 10.8171L11.2702 11.2732C11.6108 11.4469 11.7408 11.5145 11.8477 11.5924C12.2227 11.866 12.4743 12.2767 12.5477 12.7351C12.5589 12.8055 12.5645 12.8807 12.5672 12.995H9.90666C9.68597 12.995 9.50707 13.1739 9.50707 13.3946C9.50707 13.6152 9.68597 13.7941 9.90666 13.7941H12.9694C13.19 13.7941 13.3689 13.6152 13.3689 13.3946L13.369 13.3588C13.369 13.0242 13.369 12.81 13.3368 12.6088C13.2301 11.9421 12.8641 11.3446 12.3186 10.9468C12.154 10.8267 11.9632 10.7294 11.665 10.5775C11.6546 10.5721 11.644 10.5667 11.6332 10.5612L10.7705 10.1214C10.43 9.94773 10.2999 9.88006 10.1931 9.80215C9.81805 9.52861 9.56642 9.11785 9.49307 8.65949C9.4762 8.55408 9.47217 8.43819 9.47124 8.19619C10.1462 7.71137 10.5847 6.9116 10.5847 6.01259V4.8769Z" fill="${ie.Blue60}"/><path fill-rule="evenodd" clip-rule="evenodd" d="M7.91127 3.00512C6.90913 3.00512 6.08346 3.83575 6.08346 4.8769V6.01259C6.08346 7.05374 6.90913 7.88437 7.91127 7.88437C8.91342 7.88437 9.73909 7.05374 9.73909 6.01259V4.8769C9.73909 3.83575 8.91342 3.00512 7.91127 3.00512ZM5.28427 4.8769C5.28427 3.40916 6.45309 2.20593 7.91127 2.20593C9.36946 2.20593 10.5383 3.40916 10.5383 4.8769V6.01259C10.5383 7.48032 9.36946 8.68355 7.91127 8.68355C7.65987 8.68355 7.41706 8.64779 7.18737 8.58107C7.1826 8.65317 7.17553 8.72016 7.16503 8.78578C7.05834 9.45248 6.69233 10.0499 6.14684 10.4478C5.98222 10.5679 5.7914 10.6652 5.49326 10.8171L4.59875 11.2732C4.25818 11.4469 4.12811 11.5145 4.02129 11.5924C3.64626 11.866 3.39463 12.2767 3.32128 12.7351C3.31001 12.8055 3.30447 12.8807 3.30176 12.995H10.2779C10.4986 12.995 10.6775 13.1739 10.6775 13.3946C10.6775 13.6152 10.4986 13.7941 10.2779 13.7941H2.8996C2.67891 13.7941 2.50001 13.6152 2.50001 13.3946L2.5 13.3588C2.49996 13.0242 2.49994 12.81 2.53214 12.6088C2.63883 11.9421 3.00484 11.3446 3.55033 10.9468C3.71494 10.8267 3.90577 10.7294 4.2039 10.5775C4.21438 10.5721 4.22499 10.5667 4.23574 10.5612L5.09841 10.1214C5.43899 9.94773 5.56906 9.88006 5.67588 9.80215C6.0509 9.52861 6.30254 9.11785 6.37589 8.65949C6.39276 8.55408 6.39678 8.43819 6.39771 8.19619C5.72278 7.71137 5.28427 6.9116 5.28427 6.01259V4.8769Z" fill="${ie.Blue60}"/></svg>`)}')`}}}}},At={container:te.ux.style(Et),header:te.ux.style(Ot),text:te.ux.style(It)},Rt=J.UI.Node.make((({view:e})=>Y.createElement("div",{className:At.container},Y.createElement(Q.F.div,{className:At.header},e("header")),Y.createElement(Q.F.div,Object.assign({className:At.text},(0,o.E)(e("text"),[...o.ap,"person"])))))),Pt=J.UI.Union.asOption(Rt);function Ut(e){const t=e.state.view("session").view((0,i.ls)(U.z_.toStarted,r.filter((e=>U.z_.Mode.isQuickReply(e.mode))),r.map((e=>e.context)),r.chain((e=>e.intent))));return J.Z.composeOption(function(e){return()=>e.pipe(S.oA)}(t),(()=>t))}var Bt=n(80544),Tt=n(79692),Ft=n(9223);const Gt=Y.createContext({notifyUnmount:i.Q1}),zt=J.UI.Knot.make(J.UI.Grid.make((({slots:e,notify:t,state:n})=>{const{ref:i,onMount:r}=Ie.P.useElWatcher(),{notifyUnmount:o}=Y.useContext(Gt),s=Y.useMemo((()=>i.pipe(Bt.QV(Tt.E),S.oA,c.b((e=>t({kind:U.ix.Kind.mount,name:U.ec.initialActionsList,element:e})())),Ft.x((()=>o({kind:U.ix.Kind.unmount,name:U.ec.initialActionsList}))))),[i]);return Ie.P.useSubscriptionTo(s),Y.createElement("div",{className:Ht,ref:r},Y.createElement(Q.F.Fragment,null,n.pipe(_.U((({isQuickReply:e})=>e?Y.createElement(ee.PG,{reportMenuButtonClassName:Lt,onClickProvideFeedback:t({kind:U.ix.Kind.openFeedbackFormButtonClick,source:U.x2.Source.quickReplyInitialActions}),onClickReportOffensive:t({kind:U.ix.Kind.reportOffensiveActionsButtonClick}),onOpenChange:e=>t({kind:U.ix.Kind.reportMenuVisibilityChange,trigger:z.uiItem(U.ec.initialActionsList),visible:e})()}):null))),e.actions))})),{actions:ht}),jt=J.UI.Union.asOption(zt),Nt=J.UI.Grid.make((({slots:e})=>Y.createElement("div",{className:Dt},e.voiceBanner,e.intent,e.initialActions))),Vt=J.UI.Knot.make(Nt,{voiceBanner:St,intent:Pt,initialActions:jt}),Mt=J.UI.Union.asOption(Vt),Dt=te.ux.style({display:"flex",flexDirection:"column",gap:te.ux.rem(ne.x)}),Ht=te.ux.style({position:"relative",backgroundColor:ie.White,padding:`${te.ux.rem(ne.F2)} ${te.ux.rem(ne.qp)}`,border:`0.5px solid ${ie.BlueGray10}`,borderRadius:te.ux.rem(Ue.xB+Ue.fe)}),Lt=te.ux.style({position:"absolute",top:te.ux.rem(ne.qp),right:te.ux.rem(ne.qp)});function $t(e){const t=e.assistant.state.view("session").view((0,i.ls)(U.z_.toStarted,r.chain((e=>e.selectedText)))),n=e.assistant.state.view("session").view((0,i.ls)(U.z_.toStarted,r.fold(i.jv,(e=>e.voiceProfile.needsSetup)))),o=e.assistant.state.view("session").view((0,i.ls)(U.z_.toStarted,r.fold(i.jv,(e=>U.z_.Mode.isQuickReply(e.mode))))),s=d.h.combine(e.assistant.state.view("contextualActions"),t,o,((e,t,n)=>(0,i.zG)(e,r.map(T.UI(G.BackendAction.make)),r.map((e=>T.of({group:n?"Ways to reply":r.isSome(t)?`Your text: "${t.value}"`:"Ideas for you",actions:n?e:at()(e)}))))));return J.Z.composeOption(function(e,t,n,i){return J.Z.composeKnot({initialActions:Kt(e,t,i),voiceBanner:J.Z.composeOption(_t(e),(()=>n.view((e=>e?r.some(null):r.none)))),intent:Ut(e.assistant)})}(e,s,n,o),(()=>d.h.combine(s,n,((e,t)=>r.isSome(e)||t?r.some(null):r.none))))}function Kt(e,t,n){return J.Z.composeOption(J.Z.composeKnot({root:J.Z.fromSideEffect((t=>e.notify(t)),n.view((e=>({isQuickReply:e})))),actions:ft(e,t.pipe(S.oA))}),(()=>t))}const Zt=J.UI.Node.make((({view:e})=>Y.createElement(Q.F.div,{className:Wt},Y.createElement(ee.Ho,{className:Yt}),e("loadingMessage")))),Wt=te.ux.style({border:`0.5px solid ${ie.BlueGray10}`,borderRadius:te.ux.rem(Ue.xB+Ue.fe),padding:te.ux.rem(ne.qp),background:"white",display:"flex",alignItems:"center",flexDirection:"row",gap:te.ux.rem(ne.x),color:re.XY.Content.Secondary.Default,fontSize:te.ux.rem(.75),lineHeight:te.ux.rem(1.125)}),qt=te.ux.keyframes({from:{transform:"rotate(0deg)"},to:{transform:"rotate(360deg)"}}),Yt=te.ux.style(Object.assign({animation:`${qt} 1s linear infinite`},o.Es.iconSizeRems(1)));const Xt="primaryBtn",Qt="rephraseBtn",Jt="dismissBtn",en="voiceBtn",tn="voiceBtnMyVoice",nn="reportBtn",rn="editHeaderBtn",on="headerBtn",sn="ignoreIcon",an=o.Es.buttonOverrideSpecificity(o.Es.iconSizeRems(1.5),sn),ln={dismissButton:Jt,reportButton:nn,insertButton:Xt,rephraseButton:Qt,voiceBtn:en,voiceBtnMyVoice:tn,editHeaderButton:rn,ignoreIcon:te.ux.joinClasses([sn,te.ux.style(an)])},cn={background:"white",$nest:{[`& .${Jt}, & .${nn}`]:{opacity:1,pointerEvents:"auto"},[`& ${o.Es.repeatClassSelector(Xt,o.Es.cheetahButtonContentOverrideSpecificity)}`]:{color:"white",backgroundColor:o.BO.BrandGreen60,border:"1px solid transparent"}}},un={display:"flex",flexDirection:"column",padding:te.ux.rem(ne.qp),gap:te.ux.rem(ne.x),background:"transparent",border:`0.5px solid ${ie.BlueGray10}`,borderRadius:te.ux.rem(Ue.xB+Ue.fe),$nest:{"&:not(:last-of-type)":{borderBottom:`0.5px solid ${ie.BlueGray10}`},[`& ${o.Es.repeatClassSelector(Xt,o.Es.cheetahButtonContentOverrideSpecificity)}`]:{lineHeight:te.ux.rem(1.125),backgroundColor:"white",color:re.XY.Content.Secondary.Default,border:`1px solid ${ie.BlueGray5}`,boxSizing:"border-box"},[`& ${o.Es.repeatClassSelector(Qt,o.Es.cheetahButtonContentOverrideSpecificity)}`]:{lineHeight:te.ux.rem(1.5)},[`& .${Jt}, & .${nn}`]:{opacity:0,pointerEvents:"none",justifyContent:"center"},"&:focus, &:hover":Object.assign({},cn),"&[data-active='true']":Object.assign({},cn)}},dn={gap:te.ux.rem(ne.x),display:"flex",alignItems:"center",justifyContent:"space-between"},mn={display:"flex",alignItems:"center",gap:te.ux.rem(ne.x)},pn=mn,hn={container:te.ux.style(un),footer:te.ux.style(dn),footerLeft:te.ux.style(mn),footerRight:te.ux.style(pn)},gn=o.Es.buttonOverrideSpecificity({height:te.ux.rem(1.5),lineHeight:te.ux.rem(1.125),padding:`0 ${te.ux.rem(ne.F2)}`,margin:`0 ${te.ux.rem(-ne.F2)}`,$nest:{[`& .${rn}`]:{opacity:0,pointerEvents:"none"},"&:focus, &:hover":{background:ie.BlueGray0,[`& .${rn}`]:{opacity:1,pointerEvents:"auto",color:re.XY.Content.Primary.Default}}}},on),fn=o.Es.buttonOverrideSpecificity({display:"flex",alignItems:"center",height:te.ux.rem(1.25),lineHeight:te.ux.rem(1.125),color:ie.Green80,background:ie.Green0,padding:`0 ${te.ux.rem(ne.F2)}`,$nest:{"& i":{marginRight:te.ux.rem(ne.x),minWidth:te.ux.rem(1),minHeight:te.ux.rem(1),$nest:{"& svg":{fill:ie.Green60}}},"&:not([data-disabled='true'])":{$nest:{"&[data-hovered='true'], &[data-active='true'], &:active":{backgroundColor:te.ux.color(o.BO.Green10).mix(te.ux.color(o.BO.BlueGray5)).toRGBA().toString(),color:ie.Green80}}}}},tn),xn=o.Es.buttonOverrideSpecificity({display:"flex",alignItems:"center",height:te.ux.rem(1.25),lineHeight:te.ux.rem(1.125),color:ie.BlueGray60,background:ie.BlueGray0,padding:`0 ${te.ux.rem(ne.F2)}`,$nest:{"& i":{marginRight:te.ux.rem(ne.x),minWidth:te.ux.rem(1),minHeight:te.ux.rem(1),$nest:{"& svg":{fill:ie.BlueGray60}}},"&:not([data-disabled='true'])":{$nest:{"&[data-hovered='true'], &[data-active='true'], &:active":{background:ie.BlueGray10,color:ie.BlueGray60}}}}},en),bn={display:"flex",alignItems:"center",gap:te.ux.rem(ne.x+ne.yC),height:te.ux.rem(1.5),fontWeight:400,fontSize:te.ux.rem(.75),lineHeight:te.ux.rem(1.125),color:ie.BlueGray60},vn={display:"flex",justifyContent:"space-between",width:"100%",gap:te.ux.rem(ne.F2)},yn=te.ux.keyframes({from:{transform:"rotate(0deg)"},to:{transform:"rotate(360deg)"}}),Cn={marginBottom:`-${te.ux.rem(ne.yC)}`,display:"inline-flex",alignItems:"center",justifyContent:"center",animation:`${yn} 1s linear infinite`,width:te.ux.rem(1),height:te.ux.rem(1),minWidth:te.ux.rem(1),minHeight:te.ux.rem(1)},kn={header:te.ux.style(bn),headerButton:te.ux.joinClasses([on,te.ux.style(gn)]),voiceBtn:te.ux.joinClasses([en,te.ux.style(xn)]),voiceBtnMyVoice:te.ux.joinClasses([tn,te.ux.style(fn)]),headerWrapper:te.ux.style(vn),loadingIcon:te.ux.style(Cn),label:te.ux.style({overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",textAlign:"left"})},wn=({isActive:e,id:t,children:n,onHovered:i,onFocused:r})=>{const s=Y.useRef(null);return Y.createElement("div",{ref:s,className:hn.container,"data-active":e,"data-id":t,onMouseEnter:()=>null==i?void 0:i(!0),onMouseLeave:()=>null==i?void 0:i(!1),onFocus:()=>{var e;return null==r?void 0:r((null===(e=s.current)||void 0===e?void 0:e.contains((0,o.vY)(document)))||!1)},onBlur:()=>{var e;return null==r?void 0:r((null===(e=s.current)||void 0===e?void 0:e.contains((0,o.vY)(document)))||!1)}},n)},Sn=({header:e,footer:t,isActive:n,resultId:i,onHovered:r,onFocused:o,body:s})=>Y.createElement(wn,{id:i,isActive:n,onHovered:r,onFocused:o},e,s,t),_n=({onInsert:e,onRephrase:t,onDismiss:n,onProvideFeedback:i,onReportOffensive:r,onReportMenuVisibilityChange:o,disabled:s})=>Y.createElement("div",{className:hn.footer},Y.createElement("div",{className:hn.footerLeft},Y.createElement(ee.zx.Primary,{className:ln.insertButton,name:"insertResult",onClick:e,size:"small"},"Insert"),Y.createElement(ee.zx.Tertiary,{className:ln.rephraseButton,name:"rephraseResult",onClick:t,disabled:s,size:"small"},"Rephrase")),Y.createElement("div",{className:hn.footerRight},Y.createElement(ee.zx.Tertiary,{onClick:n,className:ln.dismissButton,compact:!0,size:"small",name:"dismissResult",title:"Delete"},Y.createElement(ee.L3,{className:ln.ignoreIcon})),Y.createElement(ee.PG,{reportMenuButtonClassName:ln.reportButton,onClickProvideFeedback:i,onClickReportOffensive:r,onOpenChange:o}))),En=({header:e,onClick:t,disabled:n})=>Y.createElement(ee.zx.Tertiary,{compact:!0,disabled:n,onClick:t,className:kn.headerButton,name:"editResultPrompt",size:"small"},Y.createElement("div",{className:kn.headerWrapper},Y.createElement("div",Object.assign({className:kn.label},(0,o.E)(e))),Y.createElement("div",{className:ln.editHeaderButton},"Edit"))),On=({iconUrl:e,loading:t,header:n})=>Y.createElement("div",{className:kn.header},t?Y.createElement(ee.Ho,{className:kn.loadingIcon}):(0,i.zG)(e,r.fold(i.gn,(e=>Y.createElement("img",{src:e,style:{width:te.ux.rem(1.25),height:te.ux.rem(1.25)}})))),Y.createElement("span",Object.assign({className:kn.label},(0,o.E)(n))));var In=n(18208);const An=({title:e,url:t})=>{const n=Y.useRef(null),s=(0,o.KL)(n,e);return(0,i.zG)(t,r.fold((0,i.a9)(Y.createElement("span",{className:Rn,title:s,ref:n},e)),(t=>Y.createElement(ee.dL,{className:Rn,title:s,ref:n,href:t},e))))},Rn=te.ux.style({overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",textAlign:"left",$nest:{"&:visited":{color:"inherit"}}}),Pn=({isOpen:e,references:t,onOpenChange:n})=>Y.createElement("div",{className:Un},t.length>0?Y.createElement(Y.Fragment,null,Y.createElement(ee.zx.Tertiary,{style:Bn,onClick:()=>n(!e),name:"collapseReferencesList",size:"small"},Y.createElement("span",{className:Fn},t.length," ",In.pluralize(t.length,"reference","references")),e?Y.createElement(Re.JO.Arrow,{direction:Re.n4.up}):Y.createElement(Re.JO.Arrow,{direction:Re.n4.down})),Y.createElement("ul",{className:zn,hidden:!e,"aria-hidden":!e},t.map((({title:e,iconUrl:t,url:n},i)=>Y.createElement("li",{key:i,className:jn},Y.createElement("img",{src:t,className:Nn,alt:""}),Y.createElement(An,{title:e,url:n})))))):Y.createElement("span",{className:Gn},"0 references")),Un=te.ux.style({paddingTop:te.ux.rem(ne.x)}),Bn={base:{width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between",paddingLeft:te.ux.rem(ne.F2),paddingRight:0}},Tn={fontSize:te.ux.rem(ne.qp),lineHeight:te.ux.rem(ne.mh+ne.yC),color:re.XY.Content.Secondary.Default,userSelect:"none"},Fn=te.ux.style(Tn),Gn=te.ux.style(Object.assign(Object.assign({},Tn),{paddingLeft:te.ux.rem(ne.F2),display:"flex",alignItems:"center",height:te.ux.rem(1.5)})),zn=te.ux.style({fontSize:te.ux.rem(ne.qp),lineHeight:te.ux.rem(ne.mh+ne.yC),color:re.XY.Content.Primary.Default,margin:0,padding:0}),jn=te.ux.style({height:te.ux.rem(ne.sD),display:"flex",alignItems:"center",borderRadius:te.ux.rem(Ue.xB)}),Nn=te.ux.style({minWidth:te.ux.rem(ne.mh),height:te.ux.rem(ne.mh),marginRight:te.ux.rem(ne.x)}),Vn=({isMyVoice:e,onClick:t})=>Y.createElement(ee.zx.Tertiary,{className:e?kn.voiceBtnMyVoice:kn.voiceBtn,name:"toggleVoice",onClick:t,size:"small",compact:!0},Y.createElement(ee.qn,null),e?"My voice":"Generic");var Mn=n(36991),Dn=n(65223);const Hn=te.ux.style({whiteSpace:"break-spaces",overflowWrap:"anywhere",fontStyle:"normal",fontWeight:"normal",fontSize:te.ux.rem(.875),fontFeatureSettings:"'ss03' on",lineHeight:te.ux.rem(1.3125),color:re.XY.Content.Primary.Default});var Ln;!function(e){e.generatedText="generatedText",e.knowledgeHubTerm="knowledgeHubTerm",e.none="none"}(Ln||(Ln={}));const $n=({delta:e})=>Y.createElement("div",{className:Hn},e.map(((e,t)=>{if(!Mn.s.isInsert(e))return null;switch(Zn(e.attributes)){case Ln.generatedText:return Y.createElement(Wn,{key:t},e.insert);case Ln.knowledgeHubTerm:return Y.createElement(qn,{key:t},e.insert);default:return Y.createElement(Yn,{key:t},e.insert)}})));var Kn;!function(e){e.generatedText="generatedText",e.knowledgeHubTerm="knowledgeHubTerm"}(Kn||(Kn={}));const Zn=e=>{switch(!0){case null==e?void 0:e[Kn.knowledgeHubTerm]:return Ln.knowledgeHubTerm;case null==e?void 0:e[Kn.generatedText]:return Ln.generatedText;default:return Ln.none}},Wn=({children:e})=>Y.createElement("span",{className:Xn},e),qn=({children:e})=>Y.createElement(Dn.u,{title:"from Knowledge Share"},Y.createElement("span",{className:Qn},e)),Yn=({children:e})=>Y.createElement("span",null,e),Xn=te.ux.style({backgroundColor:ie.Green0,borderRadius:te.ux.rem(Ue.fe)}),Qn=te.ux.style({backgroundColor:ie.Blue0,borderRadius:te.ux.rem(Ue.fe)}),Jn=({text:e})=>""!==e.trim()?Y.createElement("div",{className:Hn},e):null,ei=J.UI.Node.make((({state:e})=>Y.createElement(Q.F.Fragment,null,e.pipe(_.U((({result:e})=>Y.createElement(Sn,{resultId:"in-progress",body:Y.createElement(Jn,{text:e.text}),header:Y.createElement(On,{header:"Working on it...",iconUrl:r.none,loading:!0}),isActive:!0}))))))),ti=J.UI.Union.asOption(ei);function ni(e){const t=e.state.view("session").view(U.z_.toStarted).view((0,i.ls)(r.chain((e=>e.inProgressResult)),r.map((e=>({result:e})))));return J.Z.composeOption((()=>t.pipe(S.oA)),(()=>t))}const ii=J.UI.Grid.make((({slots:e,state:t,notify:n})=>Y.createElement(Q.F.Fragment,null,t.pipe(_.U((({result:t,disabled:o,isActive:s,isReferencesOpen:a,isMyVoice:l})=>Y.createElement(Sn,{resultId:t.id,body:Y.createElement($n,{delta:(0,i.zG)(t.delta,C.fold(i.yR,(e=>l?e.userVoice:e.genericVoice)))}),header:e.header,footer:Y.createElement(Y.Fragment,null,Y.createElement(_n,{onRephrase:n({kind:U.ix.Kind.resultCardRephraseButtonClick,result:t}),onInsert:n({kind:U.ix.Kind.resultCardInsertButtonClick,result:t}),onDismiss:n({kind:U.ix.Kind.resultCardDismissButtonClick,result:t}),onProvideFeedback:n({kind:U.ix.Kind.openFeedbackFormButtonClick,source:U.x2.Source.resultCard}),onReportOffensive:n({kind:U.ix.Kind.reportOffensiveResultButtonClick,result:t}),onReportMenuVisibilityChange:e=>n({kind:U.ix.Kind.reportMenuVisibilityChange,trigger:z.card(t.id),visible:e})(),disabled:o}),(0,i.zG)(t.references,r.map((e=>Y.createElement(Pn,{isOpen:a,references:e,onOpenChange:e=>n({kind:U.ix.Kind.referencesVisibilityChange,visible:e,resultId:t.id})(),onClickDeleteReference:i.Q1}))),r.toNullable)),isActive:s,onHovered:e=>n({kind:U.ix.Kind.resultCardHoverChange,hovered:e,resultId:t.id})(),onFocused:e=>n({kind:U.ix.Kind.resultCardFocusChange,focused:e,resultId:t.id})()})))))));var ri;!function(e){e.searchLabel="searchLabel",e.clickableSearchLabel="clickableSearchLabel",e.knowledgeHub="knowledgeHub"}(ri||(ri={}));const oi=J.UI.Union.asOption(J.UI.Node.make((({notify:e,state:t})=>Y.createElement(Q.F.Fragment,null,t.pipe(_.U((t=>Y.createElement(Vn,{key:"voiceButton",isMyVoice:"user"===t.selectedVoice,onClick:e({kind:U.ix.Kind.resultCardToggleGenericVoiceButtonClick,resultId:t.resultId,voice:t.selectedVoice})})))))))),si=J.UI.Knot.make(J.UI.Grid.make((({slots:e,notify:t,state:n})=>Y.createElement(Q.F.div,{className:ai},n.pipe(_.U((e=>{switch(e.kind){case ri.clickableSearchLabel:return Y.createElement(En,{header:e.label,disabled:e.disabled,onClick:t({kind:U.ix.Kind.resultCardHeaderClick,prompt:e.copiablePrompt})});case ri.searchLabel:return Y.createElement(On,{header:e.label,iconUrl:e.iconUrl,loading:!1});case ri.knowledgeHub:return Y.createElement(On,{header:"Knowledge Share content was used.",iconUrl:r.none,loading:!1});default:return(0,P.L0)(e)}}))),e.voiceButton))),{voiceButton:oi}),ai=te.ux.style({display:"grid",gridTemplateColumns:"1fr auto",gap:te.ux.rem(ne.x)});var li=n(17343);function ci(e,t,n){return J.Z.composeKnot({root:J.Z.fromSideEffect((t=>e.notify(t)),e.assistant.state.view((({availability:e,activeCards:r,session:o,referencesVisibility:s,overrideCardVoice:a})=>{var l,c;return{disabled:U.a8.isUnavailable(e),result:t,isActive:(0,i.zG)(!!r.has(t.id)||0===r.size&&n&&!ui(U.z_.toStarted(o))),isReferencesOpen:null!==(l=s.get(t.id))&&void 0!==l&&l,isMyVoice:"user"===(null!==(c=a.get(t.id))&&void 0!==c?c:(0,i.zG)(t.delta,C.fold((()=>"generic"),(e=>e.preferVoice))))}}))),header:J.Z.composeKnot({root:J.Z.fromSideEffect((t=>e.notify(t)),e.assistant.state.pipe(Z.w((e=>{const n=(0,i.zG)(t.header.copiablePrompt,r.fold((()=>({kind:ri.searchLabel,label:t.header.label,iconUrl:t.header.iconUrl})),(n=>({kind:ri.clickableSearchLabel,label:t.header.label,disabled:U.a8.isUnavailable(e.availability),copiablePrompt:n}))));return function(e){return(0,i.zG)(e.delta,C.fold(i.yR,(e=>e.genericVoice)),(e=>e.ops.some((e=>{var t;return Mn.s.isInsert(e)&&!!(null===(t=e.attributes)||void 0===t?void 0:t[Kn.knowledgeHubTerm])}))))}(t)&&t.timestamp+3e3>Date.now()?M.H(t.timestamp+3e3-Date.now()).pipe(li.h(n),q.O({kind:ri.knowledgeHub})):W.of(n)})))),voiceButton:J.Z.composeOption(J.Z.fromSideEffect((t=>e.notify(t)),e.assistant.state.pipe(_.U((e=>{var n;return{selectedVoice:null!==(n=e.overrideCardVoice.get(t.id))&&void 0!==n?n:(0,i.zG)(t.delta,C.fold((()=>"generic"),(e=>e.preferVoice))),resultId:t.id}})))),(()=>W.of((0,i.zG)(t.delta,r.fromEither))))})})}function ui(e){return(0,i.zG)(e,r.fold(i.jv,(e=>r.isSome(e.inProgressResult)||r.isSome(e.error))))}const di=J.UI.Knot.make(ii,{header:si}),mi=J.UI.List.make(b.bw,di);const pi=te.ux.style({display:"flex",alignItems:"center",gap:te.ux.rem(ne.F2)}),hi=te.ux.style({fontSize:te.ux.rem(.875),lineHeight:te.ux.rem(1.375),fontWeight:700,color:re.XY.Content.Primary.Default}),gi=te.ux.style({fontSize:te.ux.rem(.75),lineHeight:te.ux.rem(1.125),color:re.XY.Content.Secondary.Default,whiteSpace:"break-spaces",overflowWrap:"anywhere"}),fi=te.ux.style(Object.assign({padding:te.ux.rem(ne.yC)},o.Es.iconSizeRems(1.125))),xi=Xt,bi=J.UI.Node.make((({view:e,notify:t})=>Y.createElement(wn,{id:"error",isActive:!1},Y.createElement(Q.F.div,{className:pi},e("error").pipe(_.U((e=>Y.createElement(Y.Fragment,null,Y.createElement(ee.T6,{className:fi}),Y.createElement("span",{className:hi},e.header)))))),Y.createElement(Q.F.div,{className:gi},e("error").pipe(_.U((e=>e.text)))),Y.createElement(Q.F.div,null,e("showGotItButton").pipe(_.U((e=>e?Y.createElement(ee.zx.Primary,{className:xi,name:"gotItButton",onClick:t({kind:U.ix.Kind.errorCardOkButtonClick}),size:"small"},"OK"):null))))))),vi=J.UI.Union.asOption(bi);var yi=n(41398);function Ci(e){const t=e.assistant.state.view("session").pipe(_.U((e=>e.error)));return J.Z.composeOption(function(e,t){const n=e.assistant.state.view("activeView").view((e=>"loadingError"!==e));return J.Z.fromSideEffect((t=>e.notify(t)),t.pipe(yi.M(n),_.U((([e,t])=>({error:e,showGotItButton:t})))))}(e,t.pipe(S.oA)),(()=>t))}var ki=n(60135);const wi=J.UI.Grid.make((({slots:e,view:t})=>{const{ref:n,onMount:i}=Ie.P.useElWatcher(),r=Y.useMemo((()=>K.aj([n.pipe(S.oA),t("scrollToken").pipe(D.x())]).pipe(_.U(ki.li),c.b((e=>e.scrollIntoView({behavior:"auto",block:"end"}))))),[n]);return Ie.P.useSubscriptionTo(r),Y.createElement("div",{className:Ri,ref:i},e.intent,e.history,e.belowHistory)})),Si=J.UI.Knot.make(J.UI.Grid.make((({slots:e,notify:t})=>{const{ref:n,onMount:i}=Ie.P.useElWatcher(),{notifyUnmount:r}=Y.useContext(Gt),o=Y.useMemo((()=>n.pipe(Bt.QV(Tt.E),S.oA,c.b((e=>t({kind:U.ix.Kind.mount,name:U.ec.followUpActionsList,element:e})())),Ft.x((()=>r({kind:U.ix.Kind.unmount,name:U.ec.followUpActionsList}))))),[n]);return Ie.P.useSubscriptionTo(o),Y.createElement("div",{className:Ui,ref:i},e.actions)})),{actions:ot}),_i=J.UI.Union.asOption(Si),Ei=J.UI.Union.asOption(J.UI.Composite.make(J.UI.Grid.make((({slots:e})=>Y.createElement("div",{className:Pi},e.history))),mi)),Oi=J.UI.Union.make("kind",{inProgressResult:ti,error:vi,followUpActions:_i}),Ii=J.UI.Union.asOption(Oi),Ai=J.UI.Knot.make(wi,{intent:Pt,history:Ei,belowHistory:Ii}),Ri=te.ux.style({display:"flex",flexDirection:"column",gap:te.ux.rem(ne.x)}),Pi=te.ux.style({display:"flex",flexDirection:"column",gap:te.ux.rem(ne.x)}),Ui=te.ux.style({display:"flex",flexWrap:"wrap",alignItems:"center",justifyContent:"flex-end",flexDirection:"row",width:"100%",gap:te.ux.rem(ne.x),marginBottom:te.ux.rem(ne.x)});function Bi(e,t){return J.Z.composeOption(function(e,t){return J.Z.composeList(b.Ot,(()=>t.pipe(_.U((0,i.ls)(b.ke(50),b.Su(((e,t)=>({result:t,isLast:0===e}))),b.GY)))),(({result:t,isLast:n})=>ci(e,t,n)))}(e,t.view(r.getOrElse((()=>[])))),(()=>t))}function Ti(e){const t=e.assistant.state.view("session").view(U.z_.toStarted).pipe(_.U(r.map((e=>r.isSome(e.error)?"error":r.isSome(e.inProgressResult)?"inProgressResult":"followUpActions"))));return J.Z.composeOption(function(e,t){return J.Z.composeUnion({inProgressResult:ni(e.assistant),followUpActions:(0,i.zG)(e.assistant.state.view("contextualActions").view((t=>(0,i.zG)(t,r.filter((()=>!U.a8.isUnavailable(e.assistant.state.get().availability))),r.map((0,i.ls)(T.UI(G.BackendAction.make),at()))))),(t=>J.Z.composeOption(J.Z.composeKnot({root:J.Z.fromSideEffect((t=>e.notify(t)),null),actions:st(e,t,"compact")}),(()=>t)))),error:Ci(e)},(()=>t.pipe(S.oA,_.U((e=>({kind:e}))))))}(e,t),(()=>t))}function Fi(e){const t=e.assistant.state.view("session").view((0,i.ls)(U.z_.toStarted,r.map((e=>e.resultHistory)),r.chain(T.c2)));return J.Z.composeKnot({root:()=>e.assistant.state.view("session").view((0,i.ls)(U.z_.toStarted,r.chain((e=>e.inProgressResult)),r.map((e=>e.text)))).pipe(S.oA,q.O(""),_.U((e=>({scrollToken:e})))),intent:Ut(e.assistant),history:Bi(e,t),belowHistory:Ti(e)})}const Gi=J.UI.Node.make((({view:e})=>Y.createElement("div",{className:ji},Y.createElement("div",{className:Ni},Y.createElement(Q.F.img,{src:e("iconUrl"),style:{width:16,height:16}}),Y.createElement(Q.F.span,Object.assign({},(0,o.E)(e("header"))))),Y.createElement(Q.F.div,null,e("hintsHeader")),Y.createElement(Q.F.ul,{className:Vi},e("hintsItems").pipe(_.U(b.UI((e=>Y.createElement("li",{key:e},e))))))))),zi=J.UI.Union.asOption(Gi),ji=te.ux.style({display:"flex",flexDirection:"column",gap:te.ux.rem(ne.x),padding:te.ux.rem(ne.qp),border:`0.5px solid ${ie.BlueGray10}`,borderRadius:te.ux.rem(Ue.xB+Ue.fe),fontWeight:400,fontSize:te.ux.rem(.875),lineHeight:te.ux.rem(1.3125),backgroundColor:ie.White,color:re.XY.Content.Primary.Default}),Ni=te.ux.style({display:"flex",alignItems:"center",gap:te.ux.rem(ne.x),color:re.XY.Content.Secondary.Default,fontSize:te.ux.rem(.75),lineHeight:te.ux.rem(1.125)}),Vi=te.ux.style({padding:`0 0 0 ${te.ux.rem(ne.sD+ne.yC)}`,margin:0}),Mi=J.UI.Union.make("kind",{loading:Zt,loadingError:vi,initialError:vi,initialActions:Mt,results:Ai,actionHints:zi}),Di=10,Hi=34.75,Li=J.UI.Grid.make((({slots:e,state:t,view:n,notify:o})=>{const{rect:s,onMount:a}=Ie.P.useRectWatcher(),l=Y.useMemo((()=>s.pipe(S.oA,c.b((e=>o({kind:"contentSizeChange",height:e.height})())))),[s]);return Ie.P.useSubscriptionTo(l),Y.createElement(Q.F.div,{mount:a,onScroll:e=>o({kind:"contentScroll",scrollTop:e.currentTarget.scrollTop})(),style:{overflow:n("canScroll").pipe(_.U((0,A.RN)("auto","hidden"))),maxHeight:t.pipe(_.U((({assistantMaxHeight:e,promptHeight:t})=>(0,i.zG)(g.Y(r.Applicative)({assistantMaxHeight:e,promptHeight:t}),r.fold((()=>te.ux.rem(Hi)),(({assistantMaxHeight:e,promptHeight:t})=>(0,i.zG)(function(e,t,n=.25){const i=`calc(${te.ux.rem(Lr+$r+2.5)} + ${te.ux.px(t)})`;return`calc(${e}px - ${i} - ${te.ux.rem(n)})`}(e,t),(e=>`max(min(${e}, ${te.ux.rem(Hi)}), ${te.ux.rem(Di)})`))))))),q.O(te.ux.rem(Hi)))}},e.content)})),$i=J.UI.Knot.make(Li,{content:Mi}),Ki=J.UI.Union.asOption($i);function Zi(e){return J.Z.composeOption(function(e){return()=>e.state.view("selectedDynamicAction").view(r.chain((e=>(0,i.zG)(e.args[0].hints,r.map((t=>({header:e.label,iconUrl:e.iconUrl,hintsHeader:t.header,hintsItems:t.items}))))))).pipe(S.oA)}(e),(()=>e.state.view("selectedDynamicAction").view(r.chain((e=>e.args[0].hints)))))}function Wi(e,t){return J.Z.composeUnion({loading:(n=e.assistant,()=>n.state.view("session").view(U.z_.toStarted).view((0,i.ls)(r.map((e=>e.context)),r.filter(U._y.isPending),r.fold((()=>({loadingMessage:"Working on it..."})),(e=>({loadingMessage:e.loadingMessage})))))),loadingError:Ci(e),initialError:Ci(e),initialActions:$t(e),results:Fi(e),actionHints:Zi(e.assistant)},(()=>t.pipe(S.oA,_.U((e=>({kind:e}))))));var n}function qi(e,t,n,i){const o=e.assistant.state.pipe(_.U((({activeView:e,availability:t,session:n})=>{switch(e){case"loading":return r.some("loading");case"loadingError":return r.some("loadingError");case"beforeResults":return r.isSome(n.error)?r.some("initialError"):U.a8.isUnavailable(t)?r.none:r.some("initialActions");case"actionSelected":return r.some("actionHints");case"afterResults":return r.some("results");case"voiceProfile":case"feedbackForm":return r.none;default:return(0,P.L0)(e)}})));return J.Z.composeOption(function(e,t,n,i,o){return J.Z.composeKnot({root:J.Z.fromSideEffect((t=>{switch(t.kind){case"contentScroll":return e.assistant.contentOverflowUnderToolbar(t.scrollTop>0);case"contentSizeChange":return n.set(r.some(t.height+8));default:(0,P.L0)(t)}}),d.h.combine(i,o,e.assistant.state.view("canScroll"),((e,t,n)=>({assistantMaxHeight:e,promptHeight:t,canScroll:n})))),content:Wi(e,t)})}(e,o,t,n,i),(()=>o))}const Yi=({title:e,url:t})=>{const n=Y.useRef(null),s=(0,o.KL)(n,e);return(0,i.zG)(t,r.fold((0,i.a9)(Y.createElement("span",{className:Xi,title:s,ref:n},e)),(t=>Y.createElement(ee.dL,{className:Xi,title:s,ref:n,href:t},e))))},Xi=te.ux.style({overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",textAlign:"left",$nest:{"&:visited":{color:"inherit"}}}),Qi=J.UI.Node.make((({state:e})=>Y.createElement(Q.F.Fragment,null,e.pipe(_.U((({detectedReferences:e})=>Y.createElement("div",{className:er},Y.createElement("span",{className:tr},"Detected references"),Y.createElement("ul",{className:nr},e.map((({title:e,iconUrl:t,url:n},i)=>Y.createElement("li",{key:i,className:ir},Y.createElement("img",{src:t,className:rr,alt:""}),Y.createElement(Yi,{title:e,url:n})))))))))))),Ji=J.UI.Union.asOption(Qi),er=te.ux.style({position:"relative",backgroundColor:ie.White,padding:`${te.ux.rem(ne.F2)} ${te.ux.rem(ne.qp)}`,border:`0.5px solid ${ie.BlueGray10}`,borderRadius:te.ux.rem(Ue.xB+Ue.fe)}),tr=te.ux.style({fontSize:te.ux.rem(ne.qp),lineHeight:te.ux.rem(ne.mh+ne.yC),color:re.XY.Content.Secondary.Default,userSelect:"none"}),nr=te.ux.style({fontSize:te.ux.rem(ne.qp),lineHeight:te.ux.rem(ne.mh+ne.yC),color:re.XY.Content.Primary.Default,margin:0,padding:0}),ir=te.ux.style({height:te.ux.rem(ne.sD),display:"flex",alignItems:"center",borderRadius:te.ux.rem(Ue.xB)}),rr=te.ux.style({minWidth:te.ux.rem(ne.mh),height:te.ux.rem(ne.mh),marginRight:te.ux.rem(ne.x)});function or(e){const t=e.assistant.state.view((({detectedReferences:e})=>e.length?r.some(!0):r.none));return J.Z.composeOption(function(e){return()=>e.assistant.state.view("detectedReferences").pipe(_.U((e=>({detectedReferences:e}))))}(e),(()=>t))}const sr="goBtn",ar=te.ux.style({display:"flex",alignItems:"flex-start",padding:`${te.ux.rem(ne.x)} ${te.ux.rem(ne.qp)}`,gap:te.ux.rem(ne.F2),justifyContent:"space-between"}),lr=te.ux.style({flexGrow:1,$nest:{"&[data-hasheader='false']":{paddingTop:te.ux.rem(ne.F2+ne.W9)}}}),cr=te.ux.style({width:te.ux.percent(100),border:"none"}),ur=o.Es.buttonOverrideSpecificity({alignSelf:"flex-end",$nest:{"&[data-disabled='true']":{opacity:1,$nest:{"& svg":{fill:ie.BlueGray30}}}}},sr),dr=te.ux.joinClasses([sr,te.ux.style(ur)]),mr=J.UI.Node.make((({state:e,view:t,notify:n})=>{const{ref:o,onMount:s}=Ie.P.useElWatcher(),a=Y.useMemo((()=>o.pipe(Bt.QV(Tt.E),S.oA,c.b((e=>n({kind:U.ix.Kind.mount,name:U.ec.promptInput,element:e})())))),[o]);return Ie.P.useSubscriptionTo(a),Y.createElement(Q.F.div,{className:ar,mount:s},Y.createElement(Q.F.div,{className:lr,"data-hasheader":t("hasHeader")},e.pipe(_.U((({placeholder:e,kind:t,text:o,autofocusToken:s,availability:a})=>Y.createElement(ee.b,{text:o,ariaLabel:"custom prompt",className:cr,placeholder:"ready"===t?r.toUndefined(e):void 0,fitContentHeight:!0,autofocus:s,onChange:e=>n({kind:U.ix.Kind.promptFieldTextChange,text:e})(),onKeyDownEnter:"ready"===t?n({kind:U.ix.Kind.promptFieldKeyPressEnter,text:o}):i.Q1,onKeyUpEscape:n({kind:U.ix.Kind.promptFieldKeyPressEscape}),onFocus:n({kind:U.ix.Kind.promptFieldFocusChange,focused:!0}),onBlur:n({kind:U.ix.Kind.promptFieldFocusChange,focused:!1}),onKeyDownArrowUp:n({kind:U.ix.Kind.promptFieldKeyPressArrowUp}),onKeyDownArrowDown:n({kind:U.ix.Kind.promptFieldKeyPressArrowDown}),disabled:U.a8.isUnavailable(a)}))))),e.pipe(_.U((({kind:e,text:t,availability:i})=>"waitingForResult"===e?Y.createElement(ee.zx.Tertiary,{onClick:n({kind:U.ix.Kind.generateStopButtonClick}),name:"generateStop",compact:!0,size:"large"},Y.createElement(ee.wN,null)):"ready"===e?Y.createElement(ee.zx.Tertiary,{className:dr,onClick:n({kind:U.ix.Kind.promptSubmitButtonClick,text:t}),disabled:""===t.trim()||U.a8.isUnavailable(i),name:"promptSend",compact:!0,size:"large"},Y.createElement(ee.kc,null)):null))))}));var pr=n(67434);function hr(e){const t=e.promptMenu.state.pipe(pr.R(((e,t)=>(0,i.zG)(t,r.fold((()=>e),(()=>e+1)))),0));return J.Z.fromSideEffect((t=>e.notify(t)),K.aj([e.assistant.state,t]).pipe(_.U((([e,t])=>{return{kind:(0,i.zG)(U.z_.toStarted(e.session),r.fold((()=>"loading"),(e=>(0,i.zG)(e.inProgressResult,r.fold((()=>"ready"),(()=>"waitingForResult")))))),availability:e.availability,placeholder:(n=e,(0,i.zG)(n.selectedDynamicAction,r.chain((e=>""!==e.args[0].label.trim()?r.some([e.args[0].label]):r.none)),r.alt((()=>(0,i.zG)(n.userPromptAction,r.map((e=>[e.arg.label]))))))),hasHeader:!1,text:e.textBox,autofocusToken:ee.vw.create(`${e.activeView}_${(0,i.zG)(U.z_.toStarted(e.session),r.chain((e=>e.inProgressResult)),r.fold((()=>"done"),(()=>"inProgress")))}_${(0,i.zG)(e.selectedDynamicAction,r.fold((()=>"no-selected-action"),(()=>"selected-action")))}_${e.promptAutofocusToken}_promptMenuOpen:${t}`)};var n})),D.x()))}const gr=J.UI.Union.asOption(J.UI.Composite.make(J.UI.Grid.make((({slots:e})=>Y.createElement("div",{className:fr},e.content))),ht)),fr=te.ux.style({padding:`${te.ux.rem(ne.F2)} ${te.ux.rem(ne.qp)}`});function xr(e,t){const n=t.pipe(_.U(r.map((e=>function(e){return(0,i.zG)(e,b.pO((e=>{const{init:t,rest:n}=b.zT((t=>t.group.label===e[0].group.label))(e);return[t,n]})),b.UI((e=>g.Y(r.Applicative)({group:(0,i.zG)(e,b.YM,r.map((e=>e.group.label))),actions:(0,i.zG)(e,b.UI(G.BackendAction.make),T.c2)}))),b.oA,T.c2,r.getOrElse((()=>[{group:e[0].group.label,actions:[G.BackendAction.make(e[0])]}])))}((0,i.zG)(e,T.DY(G.SupportedDynamicActions.ordByGroup)))))));return J.Z.composeOption(ft(e,n.pipe(S.oA)),(()=>n))}const br=J.UI.List.make(b.bw,we),vr=J.UI.Grid.make((({slots:e})=>Y.createElement("div",{className:Cr},e.customPromptGo,Y.createElement("div",{className:kr},e.searchResults)))),yr=J.UI.Knot.make(vr,{searchResults:br,customPromptGo:we}),Cr=te.ux.style({background:"transparent",padding:te.ux.rem(ne.qp),display:"flex",flexDirection:"column",alignItems:"flex-start",gap:te.ux.rem(ne.x)}),kr=te.ux.style({display:"flex",flexDirection:"row",flexWrap:"wrap",gap:te.ux.rem(ne.x)});function wr(e,t){return J.Z.composeKnot({searchResults:st(e,t.pipe(_.U(r.map(T.UI(G.BackendAction.make)))),"standard"),customPromptGo:rt(e,W.of({kind:"go"}),"standard")})}const Sr=J.UI.Union.make("kind",{searchResults:yr,actionsStore:gr}),_r=J.UI.Knot.make(J.UI.Grid.make((({slots:e,view:t,notify:n})=>Y.createElement(Q.F.div,{className:Or,style:{maxHeight:t("maxHeight")}},Y.createElement(ee.zx.Tertiary,{compact:!0,className:Ir,onClick:n({kind:U.ix.Kind.collapsePromptMenuButtonClick}),name:"collapsePromptMenu",size:"small"},Y.createElement(Re.JO.Arrow,{direction:Re.n4.down,className:Pr})),Y.createElement("div",{ref:e=>e&&n({kind:U.ix.Kind.mount,name:U.ec.promptMenuContent,element:e})(),onKeyDown:e=>{"ArrowDown"===e.key?n({kind:U.ix.Kind.promptMenuKeyPressArrowDown})():"ArrowUp"===e.key&&n({kind:U.ix.Kind.promptMenuKeyPressArrowUp})()}},e.content)))),{content:Sr}),Er=J.UI.Union.asOption(_r),Or=te.ux.style({overflowY:"scroll",borderBottom:`0.5px solid ${re.XY.Boundaries.Secondary.Default}`}),Ir=te.ux.style({position:"absolute",top:te.ux.rem(ne.x),right:te.ux.rem(ne.x),zIndex:1,$nest:{"&:not(:hover)":{backgroundColor:te.ux.important(ie.White)}}}),Ar="arrowIcon",Rr=o.Es.buttonOverrideSpecificity(o.Es.iconSizeRems(1.5),Ar),Pr=te.ux.joinClasses([Ar,te.ux.style(Rr)]);function Ur(e,t){return J.Z.composeOption(J.Z.composeKnot({root:J.Z.fromSideEffect((t=>e.notify(t)),t.pipe(S.oA)),content:J.Z.composeUnion({searchResults:wr(e,t.pipe(_.U((0,i.ls)(r.filter((({kind:e})=>"searchResults"===e)),r.map((e=>e.actions)))))),actionsStore:xr(e,t.pipe(_.U((0,i.ls)(r.filter((({kind:e})=>"actionsStore"===e)),r.map((e=>e.actions))))))},(()=>t.pipe(S.oA)))}),(()=>t))}const Br=J.UI.Grid.make((({slots:e,view:t,notify:n})=>{const{onMount:s,rect:a}=Ie.P.useRectWatcher(),l=Y.useMemo((()=>a.pipe(c.b((e=>n({kind:"promptHeightChange",height:(0,i.zG)(e,r.map((e=>e.height)))})())))),[a]);Ie.P.useSubscriptionTo(l);const u=Y.useRef(null);return Y.createElement(Q.F.div,{className:Gr},Y.createElement(Q.F.div,{mount:u,className:jr,"data-expanded":t("menuExpanded"),onFocus:()=>{var e;return n({kind:U.ix.Kind.promptFieldAndMenuFocusChange,focused:(null===(e=u.current)||void 0===e?void 0:e.contains((0,o.vY)(document)))||!1})()},onBlur:()=>{var e;return n({kind:U.ix.Kind.promptFieldAndMenuFocusChange,focused:(null===(e=u.current)||void 0===e?void 0:e.contains((0,o.vY)(document)))||!1})()}},e.promptMenu,Y.createElement("div",{ref:s},e.promptField)),K.aj([a,t("menuExpanded")]).pipe(_.U((([e,t])=>(0,i.zG)(e,r.filter((()=>t)),r.fold(i.gn,(e=>Y.createElement("div",{className:Nr,style:{height:e.height}}))))))))})),Tr=J.UI.Knot.make(Br,{promptField:mr,promptHeader:J.UI.Node.empty,promptMenu:Er}),Fr=J.UI.Union.asOption(Tr),Gr=te.ux.style({position:"relative"}),zr=e=>te.ux.color(ie.BlueGray40).toRGBA().fade(e).toString(),jr=te.ux.style({background:"white",boxShadow:`0px 0px 0px 0.5px ${ie.BlueGray40}, 0px 0px 2px 0.5px ${zr(.5)}, 0px 1px 6px 0.5px ${zr(.25)}`,borderRadius:te.ux.rem(Ue.xB+Ue.fe),$nest:{"&[data-expanded='true']":{position:"absolute",bottom:0,width:"100%"}}}),Nr=te.ux.style({opacity:0,pointerEvents:"none"});var Vr=n(598);function Mr(e,t,n){const o=e.assistant.state.view((({activeView:e})=>"loadingError"!==e?r.some(!0):r.none));return J.Z.composeOption(function(e,t,n){const o=K.aj([e.promptMenu.state,t]).pipe(_.U((([e,t])=>(0,i.zG)(g.Y(r.Applicative)({maxHeight:t,menu:e}),r.map((({menu:e,maxHeight:t})=>Object.assign(Object.assign({},e),{maxHeight:t})))))),E.shareReplay({bufferSize:1,refCount:!0}));return J.Z.composeKnot({root:J.Z.fromSideEffect((t=>{switch(t.kind){case"promptHeightChange":return n.set(t.height);case U.ix.Kind.promptFieldAndMenuFocusChange:return e.notify(t);default:(0,P.L0)(t)}}),o.pipe(_.U((e=>({menuExpanded:r.isSome(e)}))))),promptField:hr(e),promptHeader:()=>W.of(null),promptMenu:Ur(e,o)})}(e,o.pipe(S.oA,Vr.c(t)),n),(()=>o))}const Dr=J.UI.Grid.make((({slots:e})=>Y.createElement("div",{className:Kr},e.content,e.detectedReferences,e.prompt))),Hr=J.UI.Knot.make(Dr,{content:Ki,detectedReferences:Ji,prompt:Fr}),Lr=ne.x,$r=ne.x,Kr=te.ux.style({display:"flex",flexDirection:"column",gap:te.ux.rem($r)});var Zr;function Wr(e,t=Zr.empty){const n=d.h.create(r.none),i=d.h.create(r.none);return J.Z.composeKnot({content:qi(e,n,t.assistantMaxHeight,i),detectedReferences:or(e),prompt:Mr(e,n,i)})}!function(e){e.empty={assistantMaxHeight:d.h.create(r.none)}}(Zr||(Zr={}));const qr=({kind:e,label:t,description:n,iconUrl:i,isUnselectable:r,onToggle:s})=>Y.createElement(Dn.u,{title:n},Y.createElement("button",{disabled:"disabled"===e,className:Yr,"data-kind":e,"data-unselectable":r,onClick:(0,o.m)((()=>{"disabled"!==e&&s("selected"!==e&&("unselected"===e||(0,P.L0)(e)))}))},i?Y.createElement("img",{src:i,style:{width:20,height:20}}):null,Y.createElement("span",null,t),r&&"selected"===e?Y.createElement(ee.cv,{className:Xr}):null)),Yr=te.ux.style({display:"flex",alignItems:"center",justifyContent:"center",gap:te.ux.rem(ne.x),padding:`${te.ux.rem(ne.F2)} ${te.ux.rem(.625)} ${te.ux.rem(ne.F2)} ${te.ux.rem(ne.x)}`,background:re.XY.Surface.Primary.Default,border:`${te.ux.px(1)} solid transparent`,borderRadius:te.ux.rem(1.875),fontSize:te.ux.rem(.875),lineHeight:te.ux.rem(1.375),boxSizing:"border-box",$nest:{"&[data-kind='unselected']":{border:`${te.ux.px(1)} solid ${ie.BlueGray5}`,color:re.XY.Content.Primary.Default,cursor:"pointer"},"&[data-kind='disabled']":{border:`${te.ux.px(1)} solid ${ie.BlueGray5}`,color:ie.BlueGray40,cursor:"default"},"&[data-kind='selected']":{border:`${te.ux.px(2)} solid ${o.BO.BrandGreen60}`,padding:`${te.ux.rem(.1875)} ${te.ux.rem(.5625)} ${te.ux.rem(.1875)} ${te.ux.rem(.4375)}`,position:"relative",$nest:{"&[data-unselectable='true']":{cursor:"pointer"}}}}}),Xr=te.ux.style(Object.assign(Object.assign({position:"absolute",top:te.ux.rem(-(ne.F2+ne.W9)),right:te.ux.rem(-(ne.F2+ne.W9)),boxSizing:"content-box"},o.Es.iconSizeRems(.75)),{border:`${te.ux.rem(.125)} solid white`,borderRadius:"50%",background:o.BO.BrandGreen60,display:"flex",alignItems:"center",justifyContent:"center"})),Qr=({chips:e,className:t,onToggle:n})=>Y.createElement(Q.F.div,Object.assign({},(0,X.Sh)(Jr,t)),e.pipe(_.U(b.UI((e=>Y.createElement(qr,Object.assign({},e,{onToggle:t=>n(e,t),key:e.label}))))))),Jr=te.ux.style({display:"flex",flexWrap:"wrap",gap:te.ux.rem(ne.F2),$nest:{div:{marginTop:te.ux.rem(ne.F2)}}}),eo={margin:0,padding:te.ux.rem(ne.mh),background:"white",border:`0.5px solid ${ie.BlueGray10}`,borderRadius:te.ux.rem(Ue.xB+Ue.fe),display:"flex",flexDirection:"column",gap:te.ux.rem(ne.mh)},to={color:re.XY.Content.Primary.Default,fontWeight:700,fontSize:te.ux.rem(.875),lineHeight:te.ux.rem(1.375),margin:0},no={color:re.XY.Content.Secondary.Default,fontWeight:400,fontSize:te.ux.rem(.75),lineHeight:te.ux.rem(1.125)},io={marginTop:te.ux.rem(ne.x)},ro={color:ie.BlueGray60,fontWeight:400,fontSize:te.ux.rem(.75),lineHeight:te.ux.rem(1.125)},oo={display:"flex",justifyContent:"flex-end",gap:te.ux.rem(ne.x)},so={fontSize:te.ux.important(te.ux.rem(.875))},ao={marginTop:te.ux.rem(ne.x)},lo={marginTop:te.ux.rem(ne.x)},co={display:"flex",alignItems:"center",gap:te.ux.rem(ne.x)},uo={width:te.ux.rem(1.5),height:te.ux.rem(1.5),display:"flex",alignItems:"center",justifyContent:"center"},mo=te.ux.style(eo),po=te.ux.style(to),ho=te.ux.style(io),go=te.ux.style(no),fo=te.ux.style(ro),xo=te.ux.style(oo),bo=te.ux.style(so),vo=te.ux.style(so),yo=te.ux.style(ao),Co=te.ux.style(lo),ko=te.ux.style(co),wo=te.ux.style(uo),So=J.UI.Node.make((({view:e,state:t,notify:n})=>Y.createElement("div",{className:mo},Y.createElement("section",null,Y.createElement("h2",{className:po},"Formality"),Y.createElement(Qr,{className:ho,chips:e("styles").pipe(_.U(b.UI((e=>Object.assign(Object.assign({},e),{isUnselectable:!1}))))),onToggle:e=>n({kind:U.ix.Kind.styleToggleClick,id:e.id})()})),Y.createElement("section",null,Y.createElement("h2",{className:po},"Tone"),Y.createElement(Q.F.div,{className:go},"Select up to"," ",e("maxSelectableTones").pipe(_.U((e=>(0,o.xs)(e)?(0,o.mA)(e):`${e}`)))),Y.createElement(Qr,{className:ho,chips:e("tones").pipe(_.U(b.UI((e=>Object.assign(Object.assign({},e),{isUnselectable:!0}))))),onToggle:(e,t)=>n({kind:U.ix.Kind.toneToggleClick,selected:t,id:e.id})()})),Y.createElement(Q.F.Fragment,null,t.pipe(_.U((e=>(0,i.zG)(e.roles,T.c2,r.fold(i.gn,(t=>Y.createElement("section",null,Y.createElement("h2",{className:po},"Your profession"),Y.createElement(ee.pY,{className:yo,placeholder:"Product designer",text:e.roleTypeaheadText,onInputChange:e=>n({kind:"updateRoleTypeaheadText",text:e})(),onSelectionChange:e=>n({kind:U.ix.Kind.roleTypeaheadSelectionChange,role:r.fromNullable(e)})(),options:t,label:e=>e.label,clearButton:!0,selectOnBlur:!0}))))))))),Y.createElement("section",null,Y.createElement("h2",{className:po},"I write in"),Y.createElement(Q.F.Fragment,null,t.pipe(_.U((({dialects:e,selectedDialect:t})=>Y.createElement(ee.Ph,{className:Co,options:e.filter((e=>!U.LA.Dialect.Id.eq.equals(e.id,t.id))),selection:t,onSelectionChange:e=>n({kind:U.ix.Kind.dialectDropdownSelectionChange,dialect:e})(),label:e=>e.label,renderOption:e=>Y.createElement("div",{className:ko},Y.createElement("div",{className:wo},Y.createElement("img",{src:e.iconUrl,style:{width:te.ux.rem(1),height:te.ux.rem(1)}})),e.label)})))))),Y.createElement(Q.F.Fragment,null,e("description").pipe(_.U((e=>""!==e.trim()?Y.createElement("div",{className:fo},e):null)))),Y.createElement(Q.F.div,{className:xo},Y.createElement(ee.zx.Tertiary,{className:vo,onClick:n({kind:U.ix.Kind.voiceProfileCloseButtonClick}),name:"closeVoiceProfile"},"Close"),e("applyButtonEnabled").pipe(_.U((e=>Y.createElement(ee.zx.Primary,{className:bo,onClick:n({kind:U.ix.Kind.voiceProfileUseVoiceButtonClick}),disabled:!e,name:"applyVoiceProfile"},"Use this voice"))))))));function _o(e){const t=d.h.create("");return J.Z.fromSideEffect((n=>{"updateRoleTypeaheadText"===n.kind?(t.set(n.text),""===n.text&&e.notify({kind:U.ix.Kind.roleTypeaheadSelectionChange,role:r.none})):(n.kind===U.ix.Kind.roleTypeaheadSelectionChange&&t.set((0,i.zG)(n.role,r.fold((()=>""),(e=>e.label)))),e.notify(n))}),d.h.combine(e.assistant.state,t,(({stagingVoiceProfile:e,session:t},n)=>(0,i.zG)(g.Y(r.Applicative)({voiceProfile:(0,i.zG)(U.z_.toStarted(t),r.map((e=>e.voiceProfile))),stagingVoiceProfile:e}),r.fold((()=>({tones:[],styles:[],roles:[],maxSelectableTones:0,applyButtonEnabled:!1,description:"",roleTypeaheadText:"",dialects:U.LA.Dialect.all(),selectedDialect:U.LA.Dialect.american})),(({stagingVoiceProfile:e,voiceProfile:t})=>(0,i.zG)(t.styles,b.Ew((t=>t.id===e.selectedStyle)),(o=>({styles:(0,i.zG)(t.styles,b.UI((t=>Object.assign(Object.assign({},t),{kind:t.id===e.selectedStyle?"selected":"unselected"})))),tones:(0,i.zG)(o,r.fold((()=>[]),(t=>(0,i.zG)(t.tones,b.UI((n=>Object.assign(Object.assign({},n),{kind:(0,i.zG)(r.fromNullable(e.selectedTonesPerStyle.get(e.selectedStyle)),r.getOrElse((()=>new Set)),(e=>e.has(n.id)?"selected":e.size>=t.maxTones?"disabled":"unselected"))}))))))),roles:t.roles,maxSelectableTones:(0,i.zG)(o,r.fold((()=>3),(e=>e.maxTones))),applyButtonEnabled:!U.LA.Selections.eq.equals(e,t),description:"These voice settings will apply to any text you generate with GrammarlyGO.",roleTypeaheadText:(0,i.zG)(e.selectedRole,r.filter((()=>""===n)),r.chain((e=>r.fromNullable(t.roles.find((t=>t.id===e))))),r.fold((()=>n),(e=>e.label))),dialects:t.dialects,selectedDialect:t.dialects.find((t=>U.LA.Dialect.Id.eq.equals(t.id,e.selectedDialect)))||U.LA.Dialect.american})))))))))}const Eo=J.UI.Node.make((()=>Y.createElement("div",null,"New voice profile")));const Oo="submitBtn",Io={padding:te.ux.rem(ne.mh),background:"white",border:`0.5px solid ${ie.BlueGray10}`,borderRadius:te.ux.rem(Ue.xB+Ue.fe),display:"flex",flexDirection:"column",gap:te.ux.rem(ne.mh)},Ao={color:re.XY.Content.Primary.Default,fontWeight:700,fontSize:te.ux.rem(1.25),lineHeight:te.ux.rem(1.5),margin:0},Ro={border:`${te.ux.px(1)} solid ${ie.NeutralGray20}`,borderRadius:te.ux.rem(Ue.xB),padding:`${te.ux.rem(ne.x+ne.yC)} ${te.ux.rem(ne.x)}`,height:te.ux.rem(8)},Po={display:"flex",alignItems:"flex-start",$nest:{"& input[type='checkbox']":{margin:`${te.ux.rem(ne.W9)} ${te.ux.rem(ne.x)} 0 0`,minWidth:te.ux.rem(1),minHeight:te.ux.rem(1)},"& label":{color:re.XY.Content.Primary.Default,fontWeight:400,fontSize:te.ux.rem(.75),lineHeight:te.ux.rem(1.125)}}},Uo=Object.assign({width:te.ux.percent(100)},o.Es.buttonOverrideSpecificity({fontSize:te.ux.rem(.875)},Oo)),Bo={display:"flex",flexDirection:"column",gap:te.ux.rem(ne.x)},To={container:te.ux.style(Io),title:te.ux.style(Ao),feedbackTextarea:te.ux.style(Ro),checkboxGroup:te.ux.style(Po),domain:te.ux.style({fontWeight:700}),submitButton:te.ux.joinClasses([Oo,te.ux.style(Uo)]),bottomSection:te.ux.style(Bo)},Fo=(e,t)=>(0,X.Sh)(zo,e===t&&jo),Go=te.ux.style({display:"flex",flexDirection:"row",justifyContent:"space-between",paddingLeft:te.ux.rem(ne.mh),paddingRight:te.ux.rem(ne.mh)}),zo=te.ux.style({width:te.ux.rem(5),height:te.ux.rem(5),cursor:"pointer",display:"flex",alignItems:"center",flexDirection:"column",justifyContent:"center",gap:te.ux.rem(ne.x),borderRadius:te.ux.rem(Ue.HP),fontWeight:400,fontSize:te.ux.rem(.75),lineHeight:te.ux.rem(1.125),$nest:{"&:hover":{backgroundColor:re.XY.Surface.Secondary.Default}}}),jo=te.ux.style({backgroundColor:ie.Blue10,$nest:{"&:hover":{backgroundColor:ie.Blue10}}}),No=te.ux.style(Object.assign({},o.Es.iconSizeRems(1.5))),Vo=(0,X.xb)((({selectedScore:e,onSelectScore:t})=>Y.createElement("div",{className:Go},Y.createElement("div",Object.assign({},Fo(U.x2.Mood.dissatisfied,e),{onClick:()=>t(U.x2.Mood.dissatisfied)}),Y.createElement(ee.XR,{className:No}),"I dislike it"),Y.createElement("div",Object.assign({},Fo(U.x2.Mood.ok,e),{onClick:()=>t(U.x2.Mood.ok)}),Y.createElement(ee.R6,{className:No}),"It′s OK"),Y.createElement("div",Object.assign({},Fo(U.x2.Mood.satisfied,e),{onClick:()=>t(U.x2.Mood.satisfied)}),Y.createElement(ee.OJ,{className:No}),"I like it!")))),Mo=(0,X.xb)(ee.b),Do=J.UI.Node.make((({state:e,view:t,notify:n})=>{const o="domainCheckbox"+In.alphanumeric(5);return Y.createElement(Q.F.div,{className:To.container},Y.createElement("h1",{className:To.title},"How do you like Grammarly?"),Y.createElement(Vo,{selectedScore:t("formData").pipe(_.U((e=>e.mood))),onSelectScore:e=>n({kind:U.ix.Kind.feedbackFormChange,feedbackData:{mood:e}})()}),Y.createElement(Mo,{ariaLabel:"tell us why",className:To.feedbackTextarea,placeholder:["How can we improve?"],fitContentHeight:!1,text:t("formData").pipe(_.U((({message:e})=>null!=e?e:""))),onChange:e=>n({kind:U.ix.Kind.feedbackFormChange,feedbackData:{message:e}})()}),e.pipe(_.U((({formData:e,domain:t,source:s})=>Y.createElement("div",{className:To.bottomSection},(0,i.zG)(t,r.fold(i.gn,(t=>Y.createElement("div",{className:To.checkboxGroup},Y.createElement("input",{type:"checkbox",id:o,checked:void 0!==e.domain,onChange:n({kind:U.ix.Kind.feedbackFormChange,feedbackData:{domain:void 0!==e.domain?void 0:t}})}),Y.createElement("label",{htmlFor:o},"Include the domain ",Y.createElement("b",null,t)," with my feedback to help improve Grammarly."))))),(0,i.zG)(r.fromNullable(void 0!==e.mood?Object.assign(Object.assign({},e),{mood:e.mood,source:s}):null),r.fold((()=>Y.createElement(ee.zx.Primary,{disabled:!0,className:To.submitButton,onClick:i.Q1},"Submit")),(e=>Y.createElement(ee.zx.Primary,{disabled:!1,className:To.submitButton,onClick:n({kind:U.ix.Kind.feedbackFormSubmitButtonClick,feedbackData:e})},"Submit")))))))))}));var Ho;function Lo(e,t=Ho.empty){return J.Z.fromSideEffect((t=>e.notify(t)),e.assistant.state.view((e=>{var n,i;return{formData:e.stagingFeedbackFormData,domain:t.showDomainCheckbox,source:null!==(i=null===(n=e.stagingFeedbackFormData)||void 0===n?void 0:n.source)&&void 0!==i?i:U.x2.Source.resultCard}})))}!function(e){e.empty={showDomainCheckbox:r.none}}(Ho||(Ho={}));const $o=J.UI.Node.make((({view:e,notify:t})=>Y.createElement(Q.F.div,{className:Zo,"data-id":e("id")},e("kind").pipe(_.U((e=>e===U.Cl.Kind.feedbackSubmitted?Y.createElement(Y.Fragment,null,Y.createElement(ee.j4,{className:Wo}),Y.createElement("div",null,"Thanks for the feedback!")):(0,P.L0)(e)))),e("id").pipe(_.U((e=>Y.createElement(ee.xx,{name:"notificationClose",onClick:t({kind:"dismissNotification",id:e}),size:"small"}))))))),Ko=te.ux.keyframes({from:{transform:`translateY(${te.ux.rem(.25)})`,opacity:0},to:{transform:"translateY(0)",opacity:1}}),Zo=te.ux.style({background:re.S5.Surface.Primary.Default,color:re.S5.Content.Primary.Default,borderRadius:te.ux.rem(Ue.xB+Ue.fe),display:"flex",flexDirection:"row",alignItems:"center",padding:`${te.ux.rem(ne.x)} ${te.ux.rem(ne.qp)}`,gap:te.ux.rem(ne.qp),fontSize:te.ux.rem(.75),lineHeight:te.ux.rem(1.125),animation:`${Ko} 0.1s ease-in`}),Wo=te.ux.style(Object.assign({},o.Es.iconSizeRems(1.5)));const qo=J.UI.List.make(b.bw,$o),Yo=J.UI.Grid.make((({slots:e,view:t})=>Y.createElement(Q.F.div,{className:t("contentOverflowUnderToolbar").pipe(_.U((0,A.RN)(es,Jo)))},e.content))),Xo=J.UI.Knot.make(Yo,{content:qo}),Qo={position:"absolute",top:0,right:te.ux.rem(ne.x),display:"flex",flexDirection:"column",gap:te.ux.rem(ne.x),zIndex:1e3,transition:"top 0.1s ease-in"},Jo=te.ux.style(Qo),es=te.ux.style(Qo,{top:te.ux.rem(ne.F2)});function ts(e){return J.Z.composeKnot({root:()=>e.assistant.state.view((({contentOverflowUnderToolbar:e})=>({contentOverflowUnderToolbar:e}))),content:(t=e.notifications,J.Z.composeList(b.Ot,(()=>t.state.view(b.GY)),(e=>function(e,t){return J.Z.fromSideEffect((e=>{if("dismissNotification"===e.kind)return t.dismiss(e.id);(0,P.L0)(e.kind)}),e)}(e,t))))});var t}const ns=J.UI.Grid.make((({slots:e})=>Y.createElement("div",{className:os},e.notifications,e.content))),is=J.UI.Union.make("kind",{chat:Hr,legacyVoiceProfile:So,newVoiceProfile:Eo,feedbackForm:Do}),rs=J.UI.Knot.make(ns,{content:is,notifications:Xo}),os=te.ux.style({position:"relative",padding:te.ux.rem(ne.x),paddingTop:0});var ss;function as(e,t=ss.empty){return J.Z.composeKnot({content:ls(e,t),notifications:ts(e)})}function ls(e,t=ss.empty){return J.Z.composeUnion({chat:Wr(e,t.chatFlowOptions),legacyVoiceProfile:_o(e),newVoiceProfile:()=>W.of(null),feedbackForm:Lo(e,t.feedbackFormFlowOptions)},(()=>e.assistant.state.view("activeView").view((e=>({kind:"voiceProfile"===e?"legacyVoiceProfile":"feedbackForm"===e?e:"chat"})))))}!function(e){e.empty={chatFlowOptions:Zr.empty,feedbackFormFlowOptions:Ho.empty}}(ss||(ss={}));var cs=n(13444);const us=J.UI.Node.make((({state:e,notify:t})=>{const{ref:n,onMount:i}=Ie.P.useElWatcher(),{ref:r,onMount:o}=Ie.P.useElWatcher(),s=Y.useMemo((()=>n.pipe(S.oA,Z.w((e=>u.R(e,"mouseenter").pipe(Vr.c(W.of(null).pipe(cs.g(500),a.R(u.R(e,"mouseleave"))))))),c.b(t({kind:U.ix.Kind.creditsInfoHover})))),[n]);Ie.P.useSubscriptionTo(s);const l=Y.useMemo((()=>r.pipe(Bt.QV(Tt.E),S.oA,c.b((e=>t({kind:U.ix.Kind.mount,name:U.ec.creditsInfoButton,element:e})())))),[r]);return Ie.P.useSubscriptionTo(l),Y.createElement(Q.F.Fragment,null,e.pipe(_.U((({user:e,availability:n})=>{const r=U.a8.isActive(n)?function(e){const t=`${e.promptsRemaining}/${e.promptsAllocated} prompts left. `,n=U.a8.Active.daysUntilRefillDate(e.refillDate),i=U.a8.Active.hoursUntilRefillDate(e.refillDate);return n>0?t+`Next refill in ${n} ${In.pluralize(n,"day","days")}.`:i>0?t+`Next refill in ${i} ${In.pluralize(i,"hour","hours")}.`:t+"Next refill in less than an hour."}(n):e.isPremium?"To get more prompts, contact support.":"To get more prompts, upgrade to Premium.",s=U.a8.isActive(n)?`${n.promptsRemaining} ${In.pluralize(n.promptsRemaining,"prompt","prompts")}`:e.isPremium?"0 prompts":Y.createElement(Y.Fragment,null,"0 prompts. ",Y.createElement("span",{className:ps},"Upgrade"));return e.isPremium&&U.a8.isActive(n)?Y.createElement(Dn.u,{title:r},Y.createElement("div",{ref:i,className:ms},s)):Y.createElement(ee.zx.Tertiary,{onClick:t({kind:U.ix.Kind.creditsInfoClick}),title:r,name:"creditsInfo",mount:o},Y.createElement("div",{ref:i},s))}))))})),ds=J.UI.Union.asOption(us),ms=te.ux.style({padding:`${te.ux.rem(ne.x)}`,fontSize:te.ux.rem(.75),lineHeight:te.ux.rem(1.125),color:re.XY.Content.Secondary.Default,cursor:"default"}),ps=te.ux.style({color:ie.Blue60});function hs(e){const t=e.assistant.state.view((e=>(0,i.zG)(e.availability,r.fromPredicate(U.a8.isActiveOrPassive),r.filter((()=>r.isSome(U.z_.toStarted(e.session)))))));return J.Z.composeOption(function(e,t,n){return J.Z.fromSideEffect((t=>e.notify(t)),(0,i.zG)(K.aj([t,n]),_.U((([e,t])=>({user:e,availability:t})))))}(e,e.assistant.state.view("user"),t.pipe(S.oA)),(()=>d.h.combine(t,e.assistant.state.view("activeView"),((e,t)=>(0,i.zG)(e,r.filter((()=>"voiceProfile"!==t&&"feedbackForm"!==t)))))))}const gs=J.UI.Node.make((({view:e,notify:t})=>Y.createElement(ee.zx.Tertiary,{className:vs,onClick:t({kind:U.ix.Kind.toolbarVoiceButtonClick}),name:"toolbarVoiceProfile"},Y.createElement(ee.uA,{className:ys}),Y.createElement(Q.F.span,null,e("styleLabel"))))),fs="voiceBtn",xs=o.Es.buttonOverrideSpecificity({padding:0,paddingRight:te.ux.rem(ne.x),paddingLeft:te.ux.rem(ne.F2),gap:te.ux.rem(ne.x),flexWrap:"nowrap",$nest:{"& > i":Object.assign({},o.Es.iconSizeRems(1.5))}},fs),bs={stroke:ie.BlueGray60},vs=te.ux.joinClasses([fs,te.ux.style(xs)]),ys=te.ux.style(bs),Cs=J.UI.Node.make((({notify:e,view:t})=>Y.createElement("div",{className:ks},Y.createElement(ee.zx.Tertiary,{compact:!0,onClick:e({kind:U.ix.Kind.toolbarGoBackButtonClick}),name:"goBack"},Y.createElement(Re.JO.Arrow,{direction:Re.n4.left})),Y.createElement(Q.F.Fragment,null,t("activeViewLabel").pipe(_.U(r.fold(i.gn,(e=>Y.createElement("span",null,e))))))))),ks=te.ux.style({display:"flex",alignItems:"center",gap:te.ux.rem(ne.x),color:ie.BlueGray60,fontWeight:400,fontSize:te.ux.rem(.75),lineHeight:te.ux.rem(1.125)}),ws="bnrGr",Ss="bnrGo",_s="goLogo",Es="betaBadge",Os="sepAndRight",Is=te.ux.style({display:"flex",alignItems:"center",justifyContent:"space-between",width:te.ux.percent(100),gap:te.ux.rem(ne.x),position:"relative",overflow:"hidden"}),As=te.ux.style({display:"flex",flexDirection:"row",alignItems:"center",gap:te.ux.rem(ne.x)}),Rs={height:te.ux.rem(1),borderLeft:`1px solid ${ie.BlueGray20}`},Ps=te.ux.style(Rs),Us=te.ux.style({display:"flex",flexDirection:"row",alignItems:"center"}),Bs=te.ux.joinClasses([te.ux.style({display:"flex",alignItems:"center",justifyContent:"center",height:te.ux.rem(2),width:te.ux.rem(2.375)}),_s]),Ts=te.ux.style({display:"flex",flexDirection:"row",alignItems:"center"}),Fs=Es,Gs=te.ux.style({width:te.ux.rem(10),overflowWrap:"normal",whiteSpace:"normal",textAlign:"left"}),zs=te.ux.style(Object.assign(Object.assign({},Rs),{marginLeft:te.ux.rem(ne.x),marginRight:te.ux.rem(ne.F2)})),js=te.ux.joinClasses([te.ux.style({display:"flex",alignItems:"center"}),Os]),Ns=te.ux.style({display:"flex",flexDirection:"row",alignItems:"center",height:te.ux.rem(2)}),Vs=e=>te.ux.rem(79*(null!=e?e:1)/16),Ms=te.ux.joinClasses([te.ux.style({width:Vs(),height:te.ux.rem(1),paddingTop:te.ux.rem(ne.W9),marginLeft:te.ux.rem(ne.F2+ne.yC)}),ws]),Ds=te.ux.joinClasses([te.ux.style({minWidth:te.ux.rem(1.625)}),Ss]),Hs=te.ux.keyframes({from:{opacity:0},to:{opacity:1}}),Ls=te.ux.keyframes({"0%":{opacity:0},"99%":{opacity:0},"100%":{opacity:1}}),$s=te.ux.keyframes({from:{opacity:1,transform:"translateX(0)"},to:{opacity:0,transform:"translateX(-50%)"}}),Ks=te.ux.keyframes({from:{transform:"translateX(0)"},to:{transform:`translateX(${Vs(-1)})`}}),Zs=te.ux.style({$nest:{[`.${Os}`]:{animation:`${Hs} 300ms cubic-bezier(0.52, 0, 0.23, 1)`},[`.${Es}`]:{animation:`${Hs} 300ms cubic-bezier(0.52, 0, 0.23, 1)`},[`.${_s}`]:{animation:`${Ls} 300ms linear`}}}),Ws=te.ux.style({position:"absolute",top:0,zIndex:1,$nest:{[`.${ws}`]:{animation:`${$s} 300ms cubic-bezier(0.52, 0, 0.23, 1)`},[`.${Ss}`]:{animation:`${Ks} 300ms cubic-bezier(0.52, 0, 0.23, 1)`}}}),qs=J.UI.Grid.make((({slots:e})=>Y.createElement("div",{className:As},e.back,Y.createElement("div",{className:Ps}),e.voice))),Ys=J.UI.Knot.make(qs,{back:Cs,voice:gs}),Xs=()=>Y.createElement("div",{className:Ts},Y.createElement(ee.T3,{className:Bs}),Y.createElement(Dn.u,{title:Y.createElement("div",{className:Gs},"GrammarlyGO is still in beta testing. Please check for any inaccuracies.")},Y.createElement(ee.Ct,{className:Fs},"Beta"))),Qs=J.UI.Node.make(Xs),Js=J.UI.Composite.make(J.UI.Grid.make((({slots:e})=>Y.createElement("div",{className:Us},Y.createElement(Xs,null),Y.createElement("div",{className:js},Y.createElement("div",{className:zs}),e.content)))),gs),ea=J.UI.Node.make((()=>Y.createElement("div",{className:Ns},Y.createElement(ee.Pe,{className:Ms}),Y.createElement(ee.T3,{className:Ds})))),ta=J.UI.Union.make("kind",{goBanner:ea,goLogoOnly:Qs,goLogoAndVoiceButton:Js,backButton:Cs,backButtonAndVoiceButton:Ys}),na=J.UI.Transition.make({toolbarEntry:Zs},{bannerExit:Ws}),ia=J.UI.Grid.make((({slots:e})=>Y.createElement("div",{className:Is},e.left,e.right))),ra=J.UI.Knot.make(ia,{left:J.UI.Animated.make(na,ta),right:ds});var oa=n(93756),sa=n(38062);function aa(e){return J.Z.composeKnot({left:J.Z.animatingFlow(la(e),((e,t)=>(0,i.zG)(e,r.filter((e=>"goBanner"===e.kind&&("goLogoOnly"===t.kind||"goLogoAndVoiceButton"===t.kind))),r.map((()=>oa.Hk("bannerExit","toolbarEntry")))))),right:hs(e)})}function la(e){const t=e.assistant.state.view((({activeView:e,session:t})=>(0,i.zG)(U.z_.toStarted(t),r.fold((()=>"goLogoOnly"),(()=>"loadingError"===e?"goLogoOnly":"loading"===e||"beforeResults"===e||"afterResults"===e?"goLogoAndVoiceButton":"voiceProfile"===e||"feedbackForm"===e?"backButton":"actionSelected"===e?"backButtonAndVoiceButton":(0,P.L0)(e))))));return J.Z.composeUnion({goBanner:()=>W.of(null),goLogoOnly:()=>W.of(null),goLogoAndVoiceButton:ma(e),backButton:ca(e),backButtonAndVoiceButton:da(e)},(()=>sa.S3(M.H(1e3),t.pipe(l.h((e=>"goLogoOnly"!==e&&"goLogoAndVoiceButton"!==e)))).pipe(Vr.c(t),q.O("goBanner"),_.U((e=>({kind:e}))))))}function ca(e){return J.Z.fromSideEffect((t=>e.notify(t)),e.assistant.state.view("activeView").view((e=>({activeViewLabel:"voiceProfile"===e?r.some("My voice"):"feedbackForm"===e?r.some("Share your thoughts"):r.none}))))}function ua(e){return(0,i.zG)(e,r.chain((e=>r.fromNullable(e.styles.find((t=>U.LA.Style.Id.eq.equals(t.id,e.selectedStyle)))))),r.fold((()=>""),(e=>e.label)))}function da(e){return J.Z.fromSideEffect((t=>e.notify(t.action)),e.assistant.state.view("session").view((0,i.ls)(U.z_.toStarted,r.map((e=>e.voiceProfile)))).pipe(_.U((e=>({back:{activeViewLabel:r.none},voice:{styleLabel:ua(e)}})))))}function ma(e){return J.Z.fromSideEffect((t=>e.notify(t)),e.assistant.state.view("session").view((0,i.ls)(U.z_.toStarted,r.map((e=>e.voiceProfile)))).pipe(_.U((e=>({kind:"goLogoAndVoiceButton",styleLabel:ua(e)})))))}const pa=J.UI.Knot.make(We,{toolbar:ra,content:rs});function ha(e){return J.UI.Knot.make(J.UI.Grid.make((({slots:t})=>Y.createElement(Gt.Provider,{value:{notifyUnmount:t=>e.notify(t)}},t.assistant))),{assistant:pa})}var ga;function fa(e,t=ga.empty){return J.Z.composeKnot({assistant:J.Z.composeKnot({root:Je(e),content:as(e,Object.assign(Object.assign({},t.contentFlowOptions),{chatFlowOptions:{assistantMaxHeight:d.h.combine(t.contentFlowOptions.chatFlowOptions.assistantMaxHeight,e.position.state,((e,t)=>(0,i.zG)(e,r.alt((()=>(0,i.zG)(t,p,r.chain((e=>e.assistantMaxHeight))))))))}})),toolbar:aa(e)})})}!function(e){e.empty={contentFlowOptions:ss.empty}}(ga||(ga={}));J.UI.Knot.make(nt,{toolbar:ra,content:rs});var xa;!function(e){e.empty={fixedContainerFlowOptions:it.empty,contentFlowOptions:ss.empty}}(xa||(xa={}))},56133:(e,t,n)=>{n.d(t,{l:()=>d,Q:()=>c});var i=n(57050),r=n(5114),o=n(27378),s=n(74204),a=n(16188),l=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n};const c=e=>{var{placement:t,onMount:n,onMaxSizeChange:c,children:u}=e,d=l(e,["placement","onMount","onMaxSizeChange","children"]);const[m,p]=o.useState(null),h="initial"===t.kind?t:void 0,g=(0,a.gM)(c),{styles:f}=(0,s.D)(null==h?void 0:h.referenceElement,m,{placement:null==h?void 0:h.placement,modifiers:[g,...(0,i.zG)((null==h?void 0:h.offset)||r.none,r.fold((()=>[]),(e=>[{name:"offset",options:{offset:e}}])))]});return o.createElement("div",Object.assign({ref:e=>{p(e),e&&e!==m&&n(e)},style:"initial"===t.kind?f.popper:{position:"fixed",top:t.referencePosition.top,left:t.referencePosition.left,bottom:t.referencePosition.bottom,right:t.referencePosition.right,transform:`translate(${t.translation.x}px, ${t.translation.y}px)`},tabIndex:0},d),u)};var u=n(38983);const d=o.createContext({portalContainer:u.h.create(r.none)})},74903:(e,t,n)=>{n.d(t,{vw:()=>Y,Ct:()=>Ne,zx:()=>F,j4:()=>_,xx:()=>$e,XR:()=>C,dL:()=>rt,CT:()=>c,T3:()=>b,rN:()=>y,Pe:()=>v,k8:()=>u,L3:()=>a,Ho:()=>p,R6:()=>k,kc:()=>x,J2:()=>st,PG:()=>mt,Ph:()=>je,cv:()=>h,OJ:()=>w,wN:()=>d,b:()=>$,pY:()=>ke,qn:()=>s,uA:()=>o,T6:()=>g});var i=n(27378),r=n(31278);const o=e=>i.createElement(r.a1,Object.assign({width:"24",height:"24",viewBox:"0 0 24 24",fill:"none"},e),i.createElement("path",{d:"M12 7L12 17",strokeLinecap:"round"}),i.createElement("path",{d:"M9 9L9 15",strokeLinecap:"round"}),i.createElement("path",{d:"M15 9L15 15",strokeLinecap:"round"}),i.createElement("path",{d:"M18 11L18 13",strokeLinecap:"round"}),i.createElement("path",{d:"M6 11L6 13",strokeLinecap:"round"})),s=e=>i.createElement(r.a1,Object.assign({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},e),i.createElement("rect",{width:"16",height:"16",rx:"2",fill:"inherit",stroke:"none"}),i.createElement("path",{d:"M3 7L3 9",stroke:"white",fill:"none",strokeLinecap:"round"}),i.createElement("path",{d:"M5.5 5.5L5.5 10.5",stroke:"white",fill:"none",strokeLinecap:"round"}),i.createElement("path",{d:"M8 3L8 13",stroke:"white",fill:"none",strokeLinecap:"round"}),i.createElement("path",{d:"M10.5 5.5L10.5 10.5",stroke:"white",fill:"none",strokeLinecap:"round"}),i.createElement("path",{d:"M13 7L13 9",stroke:"white",fill:"none",strokeLinecap:"round"})),a=e=>i.createElement(r.a1,Object.assign({width:"12",height:"15",viewBox:"0 0 12 15",fill:"#99A0B3"},e),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.5 0.5C3.67157 0.5 3 1.17157 3 2V3H0.5C0.223858 3 0 3.22386 0 3.5C0 3.77614 0.223858 4 0.5 4H1.04536L1.82983 12.237C1.95203 13.5201 3.02968 14.5 4.31857 14.5H7.68143C8.97032 14.5 10.048 13.5201 10.1702 12.237L10.9546 4H11.5C11.7761 4 12 3.77614 12 3.5C12 3.22386 11.7761 3 11.5 3H9V2C9 1.17157 8.32843 0.5 7.5 0.5H4.5ZM8 3V2C8 1.72386 7.77614 1.5 7.5 1.5H4.5C4.22386 1.5 4 1.72386 4 2V3H8ZM2.04988 4H9.95012L9.17467 12.1422C9.10135 12.9121 8.45476 13.5 7.68143 13.5H4.31857C3.54524 13.5 2.89865 12.9121 2.82533 12.1422L2.04988 4Z",stroke:"none"}));var l=n(13578);const c=e=>i.createElement(r.a1,Object.assign({width:"24",height:"24",viewBox:"0 0 24 24",fill:"none"},e),i.createElement("path",{d:"M14 11.5H16.7929L8.92289 19.37L10.4851 13.1213L10.6404 12.5H10H7.20711L15.0771 4.62999L13.5149 10.8787L13.3596 11.5H14Z",stroke:l.XY.Content.Secondary.Default,strokeMiterlimit:"4.25735"})),u=e=>i.createElement(r.a1,Object.assign({width:"24",height:"24",viewBox:"0 0 24 24",fill:"none"},e),i.createElement("rect",{x:"4.5",y:"4.5",width:"6",height:"6",rx:"1.5",stroke:l.XY.Content.Secondary.Default}),i.createElement("rect",{x:"4.5",y:"13.5",width:"6",height:"6",rx:"1.5",stroke:l.XY.Content.Secondary.Default}),i.createElement("rect",{x:"13.5",y:"4.5",width:"6",height:"6",rx:"1.5",stroke:l.XY.Content.Secondary.Default}),i.createElement("path",{d:"M14.5513 15.8162L12.9269 16.3577C12.7902 16.4033 12.7902 16.5967 12.9269 16.6423L14.5513 17.1838C15.1485 17.3828 15.6172 17.8515 15.8162 18.4487L16.3577 20.0731C16.4033 20.2098 16.5967 20.2098 16.6423 20.0731L17.1838 18.4487C17.3828 17.8515 17.8515 17.3828 18.4487 17.1838L20.0731 16.6423C20.2098 16.5967 20.2098 16.4033 20.0731 16.3577L18.4487 15.8162C17.8515 15.6172 17.3828 15.1485 17.1838 14.5513L16.6423 12.9269C16.5967 12.7902 16.4033 12.7902 16.3577 12.9269L15.8162 14.5513C15.6172 15.1485 15.1485 15.6172 14.5513 15.8162Z",fill:l.XY.Content.Secondary.Default,stroke:l.XY.Content.Secondary.Default})),d=e=>i.createElement(r.a1,Object.assign({width:"32",height:"32",fill:l.XY.Content.Secondary.Default,viewBox:"0 0 32 32"},e),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M24 16a8 8 0 1 1-16 0 8 8 0 0 1 16 0Zm1 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-11-3a1 1 0 0 0-1 1v4a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1v-4a1 1 0 0 0-1-1h-4Z",stroke:"none"})),m=e=>i.createElement(r.a1,Object.assign({width:"12",height:"15",viewBox:"0 0 12 15",fill:"#99A0B3"},e),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0.5 0.5C0.776142 0.5 1 0.723858 1 1V2H11.5C11.7022 2 11.8845 2.12182 11.9619 2.30866C12.0393 2.4955 11.9966 2.71055 11.8536 2.85355L8.70711 6L11.8536 9.14645C11.9966 9.28945 12.0393 9.5045 11.9619 9.69134C11.8845 9.87818 11.7022 10 11.5 10H1V14.5C1 14.7761 0.776142 15 0.5 15C0.223858 15 0 14.7761 0 14.5V1C0 0.723858 0.223858 0.5 0.5 0.5ZM1 9H10.2929L7.64645 6.35355C7.45118 6.15829 7.45118 5.84171 7.64645 5.64645L10.2929 3H1V9Z",stroke:"none"})),p=e=>i.createElement(r.a1,Object.assign({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},e),i.createElement("circle",{cx:"8",cy:"8",r:"5",stroke:"#C2C6D4",strokeWidth:"2"}),i.createElement("path",{d:"M13 8C13 8.76694 12.8236 9.5236 12.4844 10.2114C12.1452 10.8993 11.6523 11.4999 11.0438 11.9668C10.4354 12.4336 9.72765 12.7543 8.97545 12.9039C8.22325 13.0535 7.44671 13.0281 6.7059 12.8296",stroke:"#05735A",strokeWidth:"2",strokeLinecap:"round"})),h=e=>i.createElement(r.a1,Object.assign({width:"12",height:"12",viewBox:"0 0 12 12",fill:"none"},e),i.createElement("path",{stroke:"#fff",strokeLinecap:"round",strokeWidth:".857",d:"m4 4 2 2m2 2L6 6m0 0 2-2M6 6 4 8"})),g=e=>i.createElement(r.a1,Object.assign({width:"18",height:"18",viewBox:"0 0 18 18",fill:"#99A0B3"},e),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.0607 3.64286C9.5893 2.78571 8.4107 2.78571 7.93926 3.64286L3.16592 12.3214C2.69448 13.1786 3.28378 14.25 4.22667 14.25H13.7733C14.7162 14.25 15.3055 13.1786 14.8341 12.3214L10.0607 3.64286ZM8.25 6C8.25 5.58579 8.58579 5.25 9 5.25C9.41421 5.25 9.75 5.58579 9.75 6V9.75C9.75 10.1642 9.41421 10.5 9 10.5C8.58579 10.5 8.25 10.1642 8.25 9.75V6ZM9.75 12C9.75 12.4142 9.41421 12.75 9 12.75C8.58579 12.75 8.25 12.4142 8.25 12C8.25 11.5858 8.58579 11.25 9 11.25C9.41421 11.25 9.75 11.5858 9.75 12Z",stroke:"none"}));var f=n(16188);const x=e=>i.createElement(r.a1,Object.assign({width:"18",height:"18",viewBox:"0 0 18 18",fill:f.BO.BrandGreen60},e),i.createElement("path",{d:"M17.1056 9.44721L0.992696 17.5037C0.607324 17.6963 0.174955 17.3439 0.285972 16.9276L1.83393 11.1228C1.93505 10.7436 2.24864 10.4586 2.63576 10.394L9.52041 9.2466C9.79894 9.20018 9.79894 8.79982 9.52041 8.7534L2.63576 7.60596C2.24864 7.54144 1.93505 7.25644 1.83393 6.87723L0.285971 1.07239C0.174955 0.656082 0.607322 0.303661 0.992694 0.496347L17.1056 8.55279C17.4741 8.73705 17.4741 9.26295 17.1056 9.44721Z",stroke:"none"})),b=e=>i.createElement(r.a1,Object.assign({width:"26",height:"12",viewBox:"0 0 26 12",fill:f.BO.BrandGreen60},e),i.createElement("path",{d:"M19.3727 0.000327934C16.1036 0.000327934 13.4619 2.6865 13.4619 6.00016C13.4619 9.31383 16.1081 12 19.3727 12C22.6374 12 25.2836 9.31474 25.2836 6.00016C25.2836 2.68559 22.6374 0.000327934 19.3727 0.000327934ZM19.3727 9.73428C17.3867 9.73428 15.7766 8.06247 15.7766 6.00016C15.7766 3.93786 17.3867 2.26604 19.3727 2.26604C21.3587 2.26604 22.9688 3.93786 22.9688 6.00016C22.9688 8.06247 21.3587 9.73428 19.3727 9.73428Z",stroke:"none"}),i.createElement("path",{d:"M12.6746 6.42151H7.39304V8.29493H8.68981C9.01927 8.30238 9.34872 8.28019 9.67419 8.22864L9.69144 8.24589C9.08392 9.13311 7.98875 9.75788 6.70651 9.75788C4.63967 9.75788 2.99964 8.11512 2.99964 5.9938C2.99964 3.87247 4.63967 2.23062 6.70651 2.23062C7.30404 2.23157 7.89242 2.3776 8.42105 2.65615C8.94969 2.93471 9.40278 3.33745 9.74139 3.82979L11.593 2.55844C11.0537 1.76195 10.3255 1.11146 9.47342 0.665066C8.62136 0.218676 7.672 -0.00970839 6.71014 0.000316333C5.92081 -0.00586192 5.13814 0.145157 4.40777 0.444568C3.6774 0.74398 3.01395 1.18579 2.45608 1.74425C1.89822 2.3027 1.45712 2.96663 1.15848 3.69731C0.859842 4.428 0.709651 5.21083 0.716666 6.00015C0.716666 9.35378 3.34108 12 6.60571 12C8.60354 12 10.2626 10.8658 10.9192 9.61622L10.9519 9.63347C10.8546 10.0093 10.8049 10.3958 10.8039 10.784V11.7221L12.6755 11.7167V6.42242L12.6746 6.42151Z",stroke:"none"})),v=e=>i.createElement(r.a1,Object.assign({width:"79",height:"15",viewBox:"0 0 79 15",fill:l.XY.Content.Secondary.Default},e),i.createElement("path",{stroke:"none",d:"M7.76927 3.34994C7.12351 3.34994 6.60106 3.87239 6.60106 4.50309V4.51815C5.97131 3.82626 5.21824 3.28876 3.94178 3.28876C2.05251 3.28782 0.284668 4.67159 0.284668 7.13037V7.16143C0.284668 9.60515 2.02144 11.004 3.94272 11.004C5.18717 11.004 5.94118 10.4966 6.63213 9.66634V10.0664C6.63213 11.5415 5.87906 12.3106 4.28066 12.3106C3.40427 12.3106 2.68226 12.1261 2.00638 11.8192C1.89907 11.7731 1.77575 11.742 1.62231 11.742C1.09987 11.742 0.669676 12.1722 0.669676 12.6946C0.669676 13.1248 0.931369 13.4477 1.3305 13.6011C2.29914 13.9852 3.25177 14.1697 4.34279 14.1697C5.94118 14.1697 7.12445 13.8318 7.89353 13.0636C8.58541 12.3718 8.93841 11.2958 8.93841 9.82072V4.51721C8.93841 3.87145 8.41597 3.349 7.77021 3.349L7.76927 3.34994ZM6.63213 7.16143C6.63213 8.28351 5.75574 9.06765 4.6186 9.06765C3.48146 9.06765 2.62013 8.29951 2.62013 7.16143V7.13037C2.62013 6.00829 3.48052 5.22415 4.6186 5.22415C5.75668 5.22415 6.63213 6.00829 6.63213 7.13037V7.16143Z"}),i.createElement("path",{stroke:"none",d:"M14.3577 3.34988C13.6658 3.34988 13.1133 4.0879 12.7744 4.88709V4.51809C12.7744 3.87233 12.252 3.34988 11.6062 3.34988C10.9604 3.34988 10.438 3.87233 10.438 4.51809V10.6039C10.438 11.2496 10.9604 11.7721 11.6062 11.7721C12.252 11.7721 12.7744 11.2496 12.7744 10.6039V8.42183C12.7744 6.76224 13.4352 5.85479 14.6185 5.57898C15.0948 5.47167 15.4949 5.10266 15.4949 4.48797C15.4949 3.82714 15.0797 3.35083 14.3577 3.35083V3.34988Z"}),i.createElement("path",{stroke:"none",d:"M19.5002 3.34988C18.4092 3.34988 17.61 3.50332 16.872 3.78008C16.5029 3.91845 16.2422 4.27146 16.2422 4.68659C16.2422 5.22409 16.6724 5.63923 17.2108 5.63923C17.3181 5.63923 17.4104 5.62416 17.5488 5.57804C17.994 5.43966 18.5174 5.34741 19.1622 5.34741C20.3304 5.34741 20.9301 5.88491 20.9301 6.85355V6.99193C20.3464 6.79237 19.7468 6.65399 18.9165 6.65399C16.9651 6.65399 15.5964 7.48425 15.5964 9.28221V9.31328C15.5964 10.9427 16.872 11.8342 18.4242 11.8342C19.5614 11.8342 20.3455 11.4191 20.9141 10.7893V10.8044C20.9141 11.2957 21.3593 11.773 22.0361 11.773C22.6659 11.773 23.1733 11.2816 23.1733 10.6509V6.90062C23.1733 5.7936 22.8965 4.88709 22.2818 4.2724C21.6982 3.68877 20.7757 3.34988 19.5002 3.34988ZM20.9602 8.77483C20.9602 9.62016 20.2222 10.2198 19.1312 10.2198C18.3781 10.2198 17.8557 9.85078 17.8557 9.22103V9.18996C17.8557 8.45195 18.4703 8.05282 19.4691 8.05282C20.0377 8.05282 20.5601 8.17614 20.9602 8.36064V8.77577V8.77483Z"}),i.createElement("path",{stroke:"none",d:"M34.4752 3.28764C33.3531 3.28764 32.4927 3.7489 31.7698 4.59422C31.3396 3.76396 30.5253 3.28764 29.4494 3.28764C28.2661 3.28764 27.5592 3.9174 27.0207 4.60929V4.51703C27.0207 3.87127 26.4983 3.34883 25.8525 3.34883C25.2068 3.34883 24.6843 3.87127 24.6843 4.51703V10.6037C24.6843 11.2495 25.2068 11.7719 25.8525 11.7719C26.4983 11.7719 27.0207 11.2495 27.0207 10.6037V7.08407C27.0207 5.978 27.5582 5.40848 28.4346 5.40848C29.311 5.40848 29.8024 5.97705 29.8024 7.08407V10.6037C29.8024 11.2495 30.3248 11.7719 30.9706 11.7719C31.6164 11.7719 32.1388 11.2495 32.1388 10.6037V7.08407C32.1388 5.978 32.6763 5.40848 33.5527 5.40848C34.4291 5.40848 34.9205 5.97705 34.9205 7.08407V10.6037C34.9205 11.2495 35.4429 11.7719 36.0887 11.7719C36.7344 11.7719 37.2569 11.2495 37.2569 10.6037V6.31594C37.2569 4.33347 36.212 3.28858 34.4752 3.28858V3.28764Z"}),i.createElement("path",{stroke:"none",d:"M48.5558 3.28764C47.4337 3.28764 46.5733 3.7489 45.8504 4.59422C45.4202 3.76396 44.6059 3.28764 43.53 3.28764C42.3467 3.28764 41.6397 3.9174 41.1013 4.60929V4.51703C41.1013 3.87127 40.5789 3.34883 39.9331 3.34883C39.2873 3.34883 38.7649 3.87127 38.7649 4.51703V10.6037C38.7649 11.2495 39.2873 11.7719 39.9331 11.7719C40.5789 11.7719 41.1013 11.2495 41.1013 10.6037V7.08407C41.1013 5.978 41.6388 5.40848 42.5152 5.40848C43.3916 5.40848 43.883 5.97705 43.883 7.08407V10.6037C43.883 11.2495 44.4054 11.7719 45.0512 11.7719C45.6969 11.7719 46.2194 11.2495 46.2194 10.6037V7.08407C46.2194 5.978 46.7569 5.40848 47.6333 5.40848C48.5097 5.40848 49.001 5.97705 49.001 7.08407V10.6037C49.001 11.2495 49.5235 11.7719 50.1692 11.7719C50.815 11.7719 51.3374 11.2495 51.3374 10.6037V6.31594C51.3374 4.33347 50.2926 3.28858 48.5558 3.28858V3.28764Z"}),i.createElement("path",{stroke:"none",d:"M56.11 3.34988C55.019 3.34988 54.2198 3.50332 53.4818 3.78008C53.1128 3.91845 52.8521 4.27146 52.8521 4.68659C52.8521 5.22409 53.2822 5.63923 53.8207 5.63923C53.928 5.63923 54.0203 5.62416 54.1586 5.57804C54.6039 5.43966 55.1273 5.34741 55.7721 5.34741C56.9403 5.34741 57.5399 5.88491 57.5399 6.85355V6.99193C56.9563 6.79237 56.3567 6.65399 55.5264 6.65399C53.5741 6.65399 52.2063 7.48425 52.2063 9.28221V9.31328C52.2063 10.9427 53.4818 11.8342 55.0341 11.8342C56.1712 11.8342 56.9554 11.4191 57.5239 10.7893V10.8044C57.5239 11.2957 57.9692 11.773 58.646 11.773C59.2758 11.773 59.7831 11.2816 59.7831 10.6509V6.90062C59.7831 5.7936 59.5064 4.88709 58.8917 4.2724C58.3081 3.68877 57.3856 3.34988 56.11 3.34988ZM57.5701 8.77483C57.5701 9.62016 56.832 10.2198 55.741 10.2198C54.988 10.2198 54.4655 9.85078 54.4655 9.22103V9.18996C54.4655 8.45195 55.0802 8.05282 56.079 8.05282C56.6475 8.05282 57.17 8.17614 57.5701 8.36064V8.77577V8.77483Z"}),i.createElement("path",{stroke:"none",d:"M65.1976 3.34988C64.5057 3.34988 63.9522 4.0879 63.6142 4.88709V4.51809C63.6142 3.87233 63.0918 3.34988 62.446 3.34988C61.8003 3.34988 61.2778 3.87233 61.2778 4.51809V10.6039C61.2778 11.2496 61.8003 11.7721 62.446 11.7721C63.0918 11.7721 63.6142 11.2496 63.6142 10.6039V8.42183C63.6142 6.76224 64.2751 5.85479 65.4583 5.57898C65.9346 5.47167 66.3347 5.10266 66.3347 4.48797C66.3347 3.82714 65.9196 3.35083 65.1976 3.35083V3.34988Z"}),i.createElement("path",{stroke:"none",d:"M68.2759 0.367645C67.6301 0.367645 67.1077 0.890089 67.1077 1.53585V10.6038C67.1077 11.2495 67.6301 11.772 68.2759 11.772C68.9216 11.772 69.4441 11.2495 69.4441 10.6038V1.53585C69.4441 0.890089 68.9216 0.367645 68.2759 0.367645Z"}),i.createElement("path",{stroke:"none",d:"M77.1111 3.34988C76.5115 3.34988 76.1736 3.74901 75.9891 4.24133L74.2673 9.02146L72.4844 4.22627C72.2849 3.67276 71.9469 3.34988 71.3624 3.34988C70.7166 3.34988 70.2092 3.81114 70.2092 4.47196C70.2092 4.6254 70.2704 4.85603 70.3325 5.00947L73.1453 11.5264L73.0681 11.7109C72.8525 12.126 72.6529 12.2023 72.2378 12.2023C72.0684 12.2023 71.946 12.1712 71.7464 12.11C71.6542 12.0789 71.5469 12.0488 71.3624 12.0488C70.8861 12.0488 70.4399 12.4329 70.4399 13.0015C70.4399 13.57 70.8399 13.8468 71.1779 13.9701C71.5619 14.1085 71.9309 14.1857 72.4534 14.1857C73.8522 14.1857 74.5432 13.5559 75.235 11.8803L78.109 4.97935C78.1551 4.87203 78.2163 4.61034 78.2163 4.42584C78.2163 3.81114 77.7089 3.34988 77.1093 3.34988H77.1111Z"})),y=()=>i.createElement("svg",{width:"240",height:"35",viewBox:"0 0 240 35",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("path",{d:"M209.923 15.8961H197.325V20.5059H200.418C201.204 20.5238 201.989 20.4701 202.766 20.3428L202.807 20.3852C201.358 22.5683 198.746 24.1056 195.687 24.1056C190.757 24.1056 186.845 20.0635 186.845 14.8437C186.845 9.62393 190.757 5.58174 195.687 5.58174C197.113 5.58398 198.514 5.94373 199.775 6.62748C201.035 7.31123 202.116 8.30558 202.926 9.51667L207.343 6.39063C206.054 4.42875 204.315 2.82438 202.279 1.72725C200.245 0.627883 197.977 0.0692616 195.685 0.0960754C193.807 0.080434 191.94 0.449124 190.2 1.18651C188.461 1.92165 186.88 3.00985 185.55 4.38406C184.22 5.75827 183.169 7.39168 182.456 9.19044C181.746 10.9892 181.384 12.9153 181.402 14.8593C181.402 23.1113 187.662 29.6226 195.449 29.6226C200.219 29.6226 204.172 26.8317 205.738 23.7571L205.816 23.7995C205.584 24.7246 205.465 25.6743 205.463 26.6306V28.9388L209.927 28.9254H209.923V15.8984V15.8961Z",fill:"white"}),i.createElement("path",{d:"M225.901 0C218.113 0 211.801 6.62972 211.801 14.8102C211.801 22.9906 218.113 29.6204 225.901 29.6204C233.688 29.6204 240 22.9906 240 14.8102C240 6.62972 233.688 0 225.901 0ZM226.018 24.1191C221.187 24.1191 217.271 20.0054 217.271 14.9308C217.271 9.85632 221.187 5.74263 226.018 5.74263C230.848 5.74263 234.765 9.85632 234.765 14.9308C234.765 20.0054 230.848 24.1191 226.018 24.1191Z",fill:"white"}),i.createElement("path",{d:"M17.223 8.39048C15.737 8.39048 14.5348 9.63062 14.5348 11.1277V11.1635C13.0857 9.52113 11.3528 8.24524 8.41547 8.24524C4.06802 8.24301 0 11.5277 0 17.3642V17.4379C0 23.2386 3.99653 26.5591 8.41763 26.5591C11.2813 26.5591 13.0164 25.3547 14.6063 23.3839V24.3335C14.6063 27.835 12.8734 29.6606 9.19528 29.6606C7.1786 29.6606 5.51717 29.2226 3.96188 28.4942C3.71494 28.3847 3.43117 28.3109 3.07809 28.3109C1.87588 28.3109 0.885953 29.3321 0.885953 30.5722C0.885953 31.5934 1.48814 32.3598 2.40659 32.724C4.63555 33.6357 6.82768 34.0737 9.33824 34.0737C13.0164 34.0737 15.7392 33.2715 17.5089 31.4482C19.1011 29.8058 19.9134 27.2518 19.9134 23.7503V11.1612C19.9134 9.62839 18.7111 8.38825 17.2252 8.38825L17.223 8.39048ZM14.6063 17.4379C14.6063 20.1014 12.5896 21.9628 9.97293 21.9628C7.35622 21.9628 5.3742 20.1394 5.3742 17.4379V17.3642C5.3742 14.7007 7.35406 12.8393 9.97293 12.8393C12.5918 12.8393 14.6063 14.7007 14.6063 17.3642V17.4379Z",fill:"white"}),i.createElement("path",{d:"M32.3836 8.39038C30.7914 8.39038 29.5199 10.1422 28.7401 12.0393V11.1634C28.7401 9.63052 27.5379 8.39038 26.0519 8.39038C24.5659 8.39038 23.3637 9.63052 23.3637 11.1634V25.6093C23.3637 27.1422 24.5659 28.3823 26.0519 28.3823C27.5379 28.3823 28.7401 27.1422 28.7401 25.6093V20.4298C28.7401 16.4904 30.2607 14.3364 32.9836 13.6816C34.0797 13.4269 35.0003 12.551 35.0003 11.0919C35.0003 9.52327 34.045 8.39262 32.3836 8.39262V8.39038Z",fill:"white"}),i.createElement("path",{d:"M44.2178 8.39038C41.7072 8.39038 39.8682 8.7546 38.1699 9.41154C37.3208 9.74001 36.7207 10.5779 36.7207 11.5634C36.7207 12.8392 37.7107 13.8247 38.9497 13.8247C39.1967 13.8247 39.4089 13.7889 39.7274 13.6794C40.7519 13.3509 41.9563 13.132 43.4401 13.132C46.1283 13.132 47.5081 14.4079 47.5081 16.7071V17.0356C46.1651 16.5619 44.7853 16.2334 42.8748 16.2334C38.3843 16.2334 35.2348 18.2042 35.2348 22.4721V22.5459C35.2348 26.4138 38.1699 28.5298 41.7419 28.5298C44.3586 28.5298 46.163 27.5444 47.4713 26.0495V26.0853C47.4713 27.2517 48.4959 28.3846 50.0534 28.3846C51.5025 28.3846 52.6701 27.2182 52.6701 25.7211V16.8189C52.6701 14.1911 52.0332 12.0393 50.6187 10.5802C49.2757 9.1948 47.1529 8.39038 44.2178 8.39038ZM47.5775 21.2677C47.5775 23.2743 45.8792 24.6977 43.3686 24.6977C41.6357 24.6977 40.4335 23.8217 40.4335 22.3269V22.2531C40.4335 20.5013 41.848 19.5539 44.1463 19.5539C45.4546 19.5539 46.6568 19.8466 47.5775 20.2846V21.27V21.2677Z",fill:"white"}),i.createElement("path",{d:"M78.6766 8.24286C76.0945 8.24286 74.1147 9.33776 72.4511 11.3443C71.4611 9.37351 69.5874 8.24286 67.1115 8.24286C64.3887 8.24286 62.7619 9.73773 61.5229 11.3801V11.1611C61.5229 9.62824 60.3207 8.3881 58.8347 8.3881C57.3487 8.3881 56.1465 9.62824 56.1465 11.1611V25.6093C56.1465 27.1422 57.3487 28.3823 58.8347 28.3823C60.3207 28.3823 61.5229 27.1422 61.5229 25.6093V17.2545C61.5229 14.629 62.7597 13.2772 64.7764 13.2772C66.7931 13.2772 67.9238 14.6268 67.9238 17.2545V25.6093C67.9238 27.1422 69.126 28.3823 70.612 28.3823C72.098 28.3823 73.3002 27.1422 73.3002 25.6093V17.2545C73.3002 14.629 74.5371 13.2772 76.5537 13.2772C78.5704 13.2772 79.7011 14.6268 79.7011 17.2545V25.6093C79.7011 27.1422 80.9034 28.3823 82.3893 28.3823C83.8753 28.3823 85.0775 27.1422 85.0775 25.6093V15.4312C85.0775 10.7254 82.6731 8.24509 78.6766 8.24509V8.24286Z",fill:"white"}),i.createElement("path",{d:"M111.077 8.24286C108.495 8.24286 106.516 9.33776 104.852 11.3443C103.862 9.37351 101.988 8.24286 99.5124 8.24286C96.7895 8.24286 95.1628 9.73773 93.9237 11.3801V11.1611C93.9237 9.62824 92.7215 8.3881 91.2355 8.3881C89.7496 8.3881 88.5474 9.62824 88.5474 11.1611V25.6093C88.5474 27.1422 89.7496 28.3823 91.2355 28.3823C92.7215 28.3823 93.9237 27.1422 93.9237 25.6093V17.2545C93.9237 14.629 95.1606 13.2772 97.1773 13.2772C99.194 13.2772 100.325 14.6268 100.325 17.2545V25.6093C100.325 27.1422 101.527 28.3823 103.013 28.3823C104.499 28.3823 105.701 27.1422 105.701 25.6093V17.2545C105.701 14.629 106.938 13.2772 108.955 13.2772C110.971 13.2772 112.102 14.6268 112.102 17.2545V25.6093C112.102 27.1422 113.304 28.3823 114.79 28.3823C116.276 28.3823 117.478 27.1422 117.478 25.6093V15.4312C117.478 10.7254 115.074 8.24509 111.077 8.24509V8.24286Z",fill:"white"}),i.createElement("path",{d:"M128.461 8.39038C125.95 8.39038 124.111 8.7546 122.413 9.41154C121.564 9.74001 120.964 10.5779 120.964 11.5634C120.964 12.8392 121.954 13.8247 123.193 13.8247C123.44 13.8247 123.652 13.7889 123.97 13.6794C124.995 13.3509 126.199 13.132 127.683 13.132C130.371 13.132 131.751 14.4079 131.751 16.7071V17.0356C130.408 16.5619 129.028 16.2334 127.118 16.2334C122.625 16.2334 119.478 18.2042 119.478 22.4721V22.5459C119.478 26.4138 122.413 28.5298 125.985 28.5298C128.602 28.5298 130.406 27.5444 131.714 26.0495V26.0853C131.714 27.2517 132.739 28.3846 134.296 28.3846C135.745 28.3846 136.913 27.2182 136.913 25.7211V16.8189C136.913 14.1911 136.276 12.0393 134.862 10.5802C133.519 9.1948 131.396 8.39038 128.461 8.39038ZM131.82 21.2677C131.82 23.2743 130.122 24.6977 127.612 24.6977C125.879 24.6977 124.676 23.8217 124.676 22.3269V22.2531C124.676 20.5013 126.091 19.5539 128.389 19.5539C129.698 19.5539 130.9 19.8466 131.82 20.2846V21.27V21.2677Z",fill:"white"}),i.createElement("path",{d:"M149.373 8.39038C147.781 8.39038 146.507 10.1422 145.73 12.0393V11.1634C145.73 9.63052 144.527 8.39038 143.041 8.39038C141.555 8.39038 140.353 9.63052 140.353 11.1634V25.6093C140.353 27.1422 141.555 28.3823 143.041 28.3823C144.527 28.3823 145.73 27.1422 145.73 25.6093V20.4298C145.73 16.4904 147.25 14.3364 149.973 13.6816C151.069 13.4269 151.99 12.551 151.99 11.0919C151.99 9.52327 151.034 8.39262 149.373 8.39262V8.39038Z",fill:"white"}),i.createElement("path",{d:"M156.456 1.31152C154.97 1.31152 153.768 2.55166 153.768 4.08452V25.6093C153.768 27.1422 154.97 28.3823 156.456 28.3823C157.942 28.3823 159.144 27.1422 159.144 25.6093V4.08452C159.144 2.55166 157.942 1.31152 156.456 1.31152Z",fill:"white"}),i.createElement("path",{d:"M176.788 8.39038C175.408 8.39038 174.63 9.3378 174.206 10.5064L170.244 21.8532L166.141 10.4707C165.682 9.15681 164.904 8.39038 163.559 8.39038C162.073 8.39038 160.906 9.48528 160.906 11.0539C160.906 11.4181 161.046 11.9656 161.189 12.3298L167.662 27.7991L167.484 28.2371C166.988 29.2225 166.529 29.4035 165.574 29.4035C165.184 29.4035 164.902 29.3298 164.443 29.1845C164.231 29.1108 163.984 29.0393 163.559 29.0393C162.463 29.0393 161.436 29.9509 161.436 31.3006C161.436 32.6502 162.357 33.3071 163.135 33.5999C164.018 33.9283 164.867 34.1116 166.07 34.1116C169.289 34.1116 170.879 32.6167 172.471 28.6393L179.084 12.2583C179.19 12.0035 179.331 11.3824 179.331 10.9444C179.331 9.48528 178.163 8.39038 176.783 8.39038H176.788Z",fill:"white"})),C=e=>i.createElement(r.a1,Object.assign({width:"24",height:"24",fill:"none",viewBox:"0.5 0 24 24"},e),i.createElement("path",{d:"M12.5 23.25C18.7132 23.25 23.75 18.2132 23.75 12C23.75 5.7868 18.7132 0.75 12.5 0.75C6.2868 0.75 1.25 5.7868 1.25 12C1.25 18.2132 6.2868 23.25 12.5 23.25Z",fill:"url(#paint0_linear_4506_11023_disheartening_emoji)",stroke:"none"}),i.createElement("path",{d:"M8.97126 19.5491C10.9569 18.1193 14.0431 18.1193 16.0295 19.5491C16.3344 19.7674 16.5155 19.5315 16.4184 19.3455C14.4879 15.6555 10.5121 15.6555 8.58164 19.3455C8.48451 19.5315 8.66564 19.7674 8.97126 19.5491Z",fill:"#302C3B",stroke:"none"}),i.createElement("path",{d:"M19.895 12.8239C17.9806 13.5491 15.4865 12.8809 14.1909 11.2954C13.9925 11.0531 13.7945 11.2046 13.8328 11.376C14.5936 14.775 17.807 15.6364 20.1654 13.0721C20.2839 12.9435 20.1886 12.7133 19.895 12.8239Z",fill:"#302C3B",stroke:"none"}),i.createElement("path",{d:"M10.8091 11.2954C9.51351 12.8813 7.01976 13.5491 5.10501 12.8239C4.81176 12.7133 4.71614 12.9431 4.83464 13.0721C7.19301 15.6364 10.4064 14.775 11.1673 11.376C11.2059 11.2046 11.0079 11.0531 10.8091 11.2954Z",fill:"#302C3B",stroke:"none"}),i.createElement("defs",null,i.createElement("linearGradient",{id:"paint0_linear_4506_11023_disheartening_emoji",x1:"12.5002",y1:"23.25",x2:"12.5002",y2:"0.750188",gradientUnits:"userSpaceOnUse"},i.createElement("stop",{stopColor:"#FFA027"}),i.createElement("stop",{offset:"0.2723",stopColor:"#FFC151"}),i.createElement("stop",{offset:"0.7633",stopColor:"#FFC93F"}),i.createElement("stop",{offset:"1",stopColor:"#FFE261"})))),k=e=>i.createElement(r.a1,Object.assign({width:"24",height:"24",fill:"none",viewBox:"0.5 0 24 24"},e),i.createElement("path",{d:"M12.5 23.25C18.7132 23.25 23.75 18.2132 23.75 12C23.75 5.7868 18.7132 0.75 12.5 0.75C6.2868 0.75 1.25 5.7868 1.25 12C1.25 18.2132 6.2868 23.25 12.5 23.25Z",fill:"url(#paint0_linear_4506_11027_neutral_emoji)",stroke:"none"}),i.createElement("path",{d:"M17.3266 17.25H7.6726C6.7336 17.25 6.7336 15.75 7.6726 15.75H17.3266C18.2656 15.75 18.2656 17.25 17.3266 17.25Z",fill:"#302C3B",stroke:"none"}),i.createElement("path",{d:"M8.7496 12.1875C9.68158 12.1875 10.4371 11.1801 10.4371 9.9375C10.4371 8.69486 9.68158 7.6875 8.7496 7.6875C7.81762 7.6875 7.0621 8.69486 7.0621 9.9375C7.0621 11.1801 7.81762 12.1875 8.7496 12.1875Z",fill:"#302C3B",stroke:"none"}),i.createElement("path",{d:"M16.2496 12.1875C17.1816 12.1875 17.9371 11.1801 17.9371 9.9375C17.9371 8.69486 17.1816 7.6875 16.2496 7.6875C15.3176 7.6875 14.5621 8.69486 14.5621 9.9375C14.5621 11.1801 15.3176 12.1875 16.2496 12.1875Z",fill:"#302C3B",stroke:"none"}),i.createElement("defs",null,i.createElement("linearGradient",{id:"paint0_linear_4506_11027_neutral_emoji",x1:"12.5002",y1:"23.25",x2:"12.5002",y2:"0.750188",gradientUnits:"userSpaceOnUse"},i.createElement("stop",{stopColor:"#FFA027"}),i.createElement("stop",{offset:"0.2723",stopColor:"#FFC151"}),i.createElement("stop",{offset:"0.7633",stopColor:"#FFC93F"}),i.createElement("stop",{offset:"1",stopColor:"#FFE261"})))),w=e=>i.createElement(r.a1,Object.assign({width:"24",height:"24",fill:"none",viewBox:"0.5 0 24 24"},e),i.createElement("path",{d:"M12.5 23.25C18.7132 23.25 23.75 18.2132 23.75 12C23.75 5.7868 18.7132 0.75 12.5 0.75C6.2868 0.75 1.25 5.7868 1.25 12C1.25 18.2132 6.2868 23.25 12.5 23.25Z",fill:"url(#paint0_linear_11994_841_smiling_emoji)",stroke:"none"}),i.createElement("path",{d:"M5.82085 15.8453C7.89191 15.8453 9.57085 14.1663 9.57085 12.0953C9.57085 10.0242 7.89191 8.34528 5.82085 8.34528C3.74978 8.34528 2.07085 10.0242 2.07085 12.0953C2.07085 14.1663 3.74978 15.8453 5.82085 15.8453Z",fill:"url(#paint1_radial_11994_841_smiling_emoji)",stroke:"none"}),i.createElement("path",{d:"M19.1792 15.75C21.2502 15.75 22.9292 14.0711 22.9292 12C22.9292 9.92893 21.2502 8.25 19.1792 8.25C17.1081 8.25 15.4292 9.92893 15.4292 12C15.4292 14.0711 17.1081 15.75 19.1792 15.75Z",fill:"url(#paint2_radial_11994_841_smiling_emoji)",stroke:"none"}),i.createElement("path",{d:"M14.0844 9.3015C15.5 7.72425 17.7012 7.7235 19.1176 9.3015C19.3344 9.543 19.4634 9.282 19.3944 9.07725C18.0181 5.0055 15.1831 5.0055 13.8069 9.07725C13.7379 9.282 13.8669 9.54262 14.0844 9.3015Z",fill:"#302C3B",stroke:"none"}),i.createElement("path",{d:"M5.88312 9.3015C7.29949 7.72425 9.49999 7.7235 10.9164 9.3015C11.1331 9.543 11.2629 9.282 11.1931 9.07725C9.81687 5.0055 6.98187 5.0055 5.60562 9.07725C5.53699 9.282 5.66562 9.54262 5.88312 9.3015Z",fill:"#302C3B",stroke:"none"}),i.createElement("path",{d:"M17.1961 13.647C14.3352 15.7061 10.6614 15.705 7.802 13.647C7.397 13.356 7.15512 13.6706 7.28487 13.9178C9.4805 18.1151 15.5187 18.1144 17.7147 13.9178C17.8437 13.6703 17.6026 13.3556 17.1961 13.647Z",fill:"#302C3B",stroke:"none"}),i.createElement("defs",null,i.createElement("linearGradient",{id:"paint0_linear_11994_841_smiling_emoji",x1:"12.5002",y1:"23.25",x2:"12.5002",y2:"0.750188",gradientUnits:"userSpaceOnUse"},i.createElement("stop",{stopColor:"#FFA027"}),i.createElement("stop",{offset:"0.2723",stopColor:"#FFC151"}),i.createElement("stop",{offset:"0.7633",stopColor:"#FFC93F"}),i.createElement("stop",{offset:"1",stopColor:"#FFE261"})),i.createElement("radialGradient",{id:"paint1_radial_11994_841_smiling_emoji",cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"translate(5.82103 12.0952) scale(3.75 3.75)"},i.createElement("stop",{stopColor:"#F18D84"}),i.createElement("stop",{offset:"0.2514",stopColor:"#F29180",stopOpacity:"0.7486"}),i.createElement("stop",{offset:"0.5118",stopColor:"#F49E73",stopOpacity:"0.4882"}),i.createElement("stop",{offset:"0.7755",stopColor:"#F8B25F",stopOpacity:"0.2245"}),i.createElement("stop",{offset:"1",stopColor:"#FDCA47",stopOpacity:"0"})),i.createElement("radialGradient",{id:"paint2_radial_11994_841_smiling_emoji",cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"translate(19.179 12) scale(3.75)"},i.createElement("stop",{stopColor:"#F18D84"}),i.createElement("stop",{offset:"0.2514",stopColor:"#F29180",stopOpacity:"0.7486"}),i.createElement("stop",{offset:"0.5118",stopColor:"#F49E73",stopOpacity:"0.4882"}),i.createElement("stop",{offset:"0.7755",stopColor:"#F8B25F",stopOpacity:"0.2245"}),i.createElement("stop",{offset:"1",stopColor:"#FDCA47",stopOpacity:"0"}))));var S=n(62172);const _=e=>i.createElement(r.a1,Object.assign({width:"24",height:"24",viewBox:"0 0 24 24",fill:S.Green30},e),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22ZM18.2071 9.20711C18.5976 8.81658 18.5976 8.18342 18.2071 7.79289C17.8166 7.40237 17.1834 7.40237 16.7929 7.79289L10 14.5858L8.20711 12.7929C7.81658 12.4024 7.18342 12.4024 6.79289 12.7929C6.40237 13.1834 6.40237 13.8166 6.79289 14.2071L10 17.4142L18.2071 9.20711Z",stroke:"none"}));var E=n(64757),O=n(12187),I=n(89894),A=n(88392),R=n(9546);const P="button",U=e=>({minWidth:I.ux.rem(e),minHeight:I.ux.rem(e),lineHeight:I.ux.rem(e)}),B=e=>{const t=(t,n)=>{var i;return Object.assign({"& > i":Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},e.compact?{marginLeft:0}:{marginLeft:I.ux.rem(-.25)}),"small"===e.size?{minWidth:I.ux.rem(1.5)}:{}),"medium"===e.size?{minWidth:I.ux.rem(1.75)}:{}),"large"===e.size?{minWidth:I.ux.rem(2)}:{}),t),"&[data-disabled='true']":Object.assign({opacity:.4,cursor:"not-allowed"},null===(i=e.style)||void 0===i?void 0:i.disabled)},n)};return f.Es.specificity(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({borderRadius:I.ux.rem(A.xB),fontSize:I.ux.rem(.75),textAlign:"center",padding:`0 ${I.ux.rem(R.x)}`,userSelect:"none",display:"inline-flex",alignItems:"center",justifyContent:"center"},e.compact?{padding:0}:{}),"small"===e.size?U(1.5):{}),"medium"===e.size?U(1.75):{}),"large"===e.size?U(2):{}),"primary"===e.type?((e,t)=>Object.assign(Object.assign({color:l.XY.Content.OnPrimary.Default,backgroundColor:f.BO.BrandGreen60,transitionProperty:"border, background, color",fontWeight:"bold"},null==t?void 0:t.base),{$nest:e((null==t?void 0:t.icon)||{},{"&:not([data-disabled='true'])":{$nest:{"&[data-hovered='true']":Object.assign({backgroundColor:f.BO.BrandGreen80},null==t?void 0:t.hovered),"&:focus-visible":Object.assign({boxShadow:`0 0 0 2px ${l.XY.Surface.Primary.Default}, 0 0 0 4px ${f.BO.BrandGreen80}`},null==t?void 0:t.focusVisible),"&[data-active='true'], &:active":Object.assign({backgroundColor:f.BO.BrandGreen60,color:l.XY.Surface.Primary.Default},null==t?void 0:t.active)}}})}))(t,e.style):{}),"secondary"===e.type?((e,t)=>Object.assign(Object.assign({backgroundColor:"transparent",fontWeight:"normal",color:S.BlueGray80,stroke:S.BlueGray80,boxShadow:`inset 0 0 0 1px ${S.BlueGray5}`,transitionProperty:"border, background, color"},null==t?void 0:t.base),{$nest:e(Object.assign({stroke:I.ux.important(S.BlueGray80),fill:I.ux.important(S.BlueGray80)},null==t?void 0:t.icon),{"&:not([data-disabled='true'])":{$nest:{"&[data-hovered='true']":Object.assign({backgroundColor:S.BlueGray0},null==t?void 0:t.hovered),"&:focus-visible":Object.assign({boxShadow:`inset 0 0 0 1px ${S.BlueGray80}, 0 0 0 1px ${S.BlueGray80}, 0 0 0 2px ${l.XY.Surface.Primary.Default}, 0 0 0 4px ${S.BlueGray80}`},null==t?void 0:t.focusVisible),"&[data-active='true'], &:active":Object.assign({backgroundColor:"transparent",color:S.BlueGray80},null==t?void 0:t.active)}}})}))(t,e.style):{}),"tertiary"===e.type?((e,t,n)=>Object.assign(Object.assign({backgroundColor:"transparent",fontWeight:"normal",color:l.XY.Content.Secondary.Default,transitionProperty:"border, background, color"},null==n?void 0:n.base),{$nest:t({stroke:I.ux.important(l.XY.Content.Secondary.Default),fill:I.ux.important(l.XY.Content.Secondary.Default)},{"&:not([data-disabled='true'])":{$nest:Object.assign(Object.assign({"&[data-hovered='true'], &[data-active='true'], &:active":Object.assign({backgroundColor:S.BlueGray0,color:l.XY.Content.Secondary.Default},null==n?void 0:n.active)},"dark"===e.theme?{"&[data-hovered='true'], &[data-active='true'], &:active":Object.assign({backgroundColor:I.ux.color(S.BlueGray0).toRGBA().fade(.2).toString()},null==n?void 0:n.active)}:{}),{"&:focus-visible":Object.assign({boxShadow:`0 0 0 2px ${l.XY.Surface.Primary.Default}, 0 0 0 4px ${l.XY.Content.Secondary.Default}`},null==n?void 0:n.focusVisible)})}})}))(e,t,e.style):{}),P,f.Es.baseButtonContentOverrideSpecificity)},T=e=>I.ux.joinClasses([P,I.ux.style(B(e))]);var F,G=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n};!function(e){e.Primary=e=>{var{className:t,compact:n,theme:r,children:o,onClick:s,size:a,style:l}=e,c=G(e,["className","compact","theme","children","onClick","size","style"]);return i.createElement(E.zx.Primary,Object.assign({},(0,O.Sh)(T({compact:n,theme:null!=r?r:"light",size:null!=a?a:"large",type:"primary",style:l}),t),c,{onClick:(0,f.m)(s)}),o)},e.Secondary=e=>{var{className:t,compact:n,theme:r,children:o,onClick:s,size:a,style:l}=e,c=G(e,["className","compact","theme","children","onClick","size","style"]);return i.createElement(E.zx.Ghost,Object.assign({},(0,O.Sh)(T({compact:n,theme:null!=r?r:"light",size:null!=a?a:"large",type:"secondary",style:l}),t),c,{onClick:(0,f.m)(s)}),o)},e.Tertiary=e=>{var{className:t,compact:n,theme:r,children:o,onClick:s,size:a,style:l}=e,c=G(e,["className","compact","theme","children","onClick","size","style"]);return i.createElement(E.zx.Tertiary,Object.assign({},(0,O.Sh)(T({compact:n,theme:null!=r?r:"light",size:null!=a?a:"large",type:"tertiary",style:l}),t),c,{onClick:(0,f.m)(s)}),o)}}(F||(F={}));var z=n(15073),j=n(5114),N=n(31542),V=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n};const M="#161719",D="#646B81",H=e=>{var{children:t,style:n,dataGrammarlyPart:r="ui-kit-iframe"}=e,o=V(e,["children","style","dataGrammarlyPart"]);const[s,a]=i.useState(null),l=i.useCallback((e=>{var t,n;let i=null;"contentDocument"in e.target&&(i=null!==(n=null===(t=e.target.contentDocument)||void 0===t?void 0:t.body)&&void 0!==n?n:null),a(i),i&&(i.style.margin="0",i.style.height="100vh",i.style.overflowY="hidden")}),[]),c=i.useContext(z.u.Context);return i.useEffect((()=>{const e=c.subscribe((e=>{s&&z.u.setRootCssVar(s,j.some(e))}));return()=>e.unsubscribe()}),[s]),i.createElement("iframe",Object.assign({},o,{style:Object.assign({},n),onLoad:l,srcDoc:"<html><body></body></html>","data-grammarly-part":r}),s&&(0,N.createPortal)(t,s))},L=1.375,$=({fitContentHeight:e,text:t,ariaLabel:n,onChange:r,placeholder:o,disabled:s,className:a,onFocus:l,onBlur:c,onKeyDownEnter:u,autofocus:d,onKeyUpEscape:m,onKeyDownArrowUp:p,onKeyDownArrowDown:h})=>{const g=L*(o?o.length:1),[f,x]=i.useState({kind:"rem",value:g}),[b,v]=i.useState(null);return i.useEffect((()=>{b&&void 0!==d&&(b.focus(),b.selectionStart=t.length,b.selectionEnd=t.length)}),[d,b]),i.useLayoutEffect((()=>{if(""===t)x({kind:"rem",value:g});else{const e=null==b?void 0:b.scrollHeight;x(e?{kind:"px",value:e}:{kind:"rem",value:g})}}),[t,b,o]),i.createElement(H,{className:a,style:{height:e?"rem"===f.kind?I.ux.rem(f.value):I.ux.px(f.value):void 0},title:`${n} container`},i.createElement("style",{dangerouslySetInnerHTML:{__html:`\n      .container {\n        position: relative;\n        width: 100%;\n        height: 100%;\n      }\n      .textarea {\n        box-sizing: border-box;\n        border-radius: ${I.ux.rem(A.xB)};\n        overflow-y: auto;\n        width: 100%;\n        height: 100%;\n        border: none;\n        padding: 0px;\n        background: transparent;\n        resize: none;\n        font-family: Inter, sans-serif;\n        font-size: ${I.ux.rem(.875)};\n        font-weight: 400;\n        color: ${M};\n      }\n      .textarea::placeholder {\n        color: ${D};\n      }\n      .textarea:focus {\n        outline: none;\n      }\n      .placeholder {\n        position: absolute;\n        top: 0px;\n        left: 0px;\n        width: 100%;\n        height: 100%;\n        background: transparent;\n        font-family: Inter, sans-serif;\n        font-size: ${I.ux.rem(.875)};\n        font-weight: 400;\n        z-index: -1;\n        color: ${D};\n      }\n      `}}),i.createElement("div",{className:"container"},i.createElement("textarea",{"aria-label":n,className:"textarea",style:{lineHeight:I.ux.rem(L)},value:t,ref:v,onChange:e=>r(e.target.value),placeholder:1===(null==o?void 0:o.length)?o[0]:void 0,disabled:s,onFocus:()=>null==l?void 0:l(),onBlur:()=>null==c?void 0:c(),onKeyDown:e=>{var t;u&&"Enter"===e.key&&!e.shiftKey?(e.preventDefault(),e.stopPropagation(),u()):"ArrowUp"===e.key&&p&&(K(t=e.currentTarget)&&0===t.selectionStart)?(e.preventDefault(),e.stopPropagation(),p()):"ArrowDown"===e.key&&h&&function(e){return K(e)&&e.selectionStart===e.value.length}(e.currentTarget)&&(e.preventDefault(),e.stopPropagation(),h())},onKeyUp:e=>{m&&"Escape"===e.key&&(e.preventDefault(),e.stopPropagation(),m())}}),((null==o?void 0:o.length)||0)>1&&""===t?i.createElement("div",{className:"placeholder",style:{lineHeight:I.ux.rem(L)}},(o||[]).map(((e,t)=>i.createElement(i.Fragment,{key:t},e,i.createElement("br",null))))):null))};function K(e){return e.selectionStart===e.selectionEnd}var Z=n(22232),W=function(){function e(e,t,n){void 0===t&&(t=0),void 0===n&&(n=!0),this._capacity=e,this._start=t,this._allowOverflow=n,this._nextId=t}return Object.defineProperty(e.prototype,"id",{get:function(){return this._nextId},enumerable:!1,configurable:!0}),e.prototype.newId=function(){var e=this._nextId;if(e>this._capacity){if(!this._allowOverflow)throw new Z.ej("ids limit reached: "+this._capacity);this._nextId=e=0}return this._nextId++,e},e.prototype.reset=function(){this._nextId=this._start},e}();const q=new W(999999);var Y;!function(e){e.create=function(e){return null!=e?e:q.newId()}}(Y||(Y={}));var X=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n};const Q=e=>{var{text:t,onChange:n,placeholder:r,disabled:o,className:s,onFocus:a,onBlur:l,onKeyPressEnter:c,autofocus:u,onKeyUpEscape:d}=e,m=X(e,["text","onChange","placeholder","disabled","className","onFocus","onBlur","onKeyPressEnter","autofocus","onKeyUpEscape"]);const[p,h]=i.useState(null);return i.useEffect((()=>{p&&void 0!==u&&p.focus()}),[u,p]),i.createElement(H,{className:s,style:{height:I.ux.rem(1.375)}},i.createElement("style",{dangerouslySetInnerHTML:{__html:`\n      .textBox {\n        box-sizing: border-box;\n        border-radius: ${I.ux.rem(A.xB)};\n        overflow-y: auto;\n        width: 100%;\n        height: 100%;\n        border: none;\n        padding: 0;\n        background: transparent;\n        resize: none;\n        font-family: Inter, sans-serif;\n        font-size: ${I.ux.rem(.875)};\n        font-weight: 400;\n        color: ${M};\n      }\n      .textBox::placeholder {\n        color: ${D};\n      }\n      .textBox:focus {\n        outline: none;\n      }\n      `}}),i.createElement("input",Object.assign({},m,{className:"textBox",style:{lineHeight:I.ux.rem(1.375)},value:t,ref:h,onChange:e=>n(e.target.value),placeholder:r,disabled:o,onFocus:()=>null==a?void 0:a(),onBlur:()=>null==l?void 0:l(),onKeyPress:e=>{c&&"Enter"===e.key&&!e.shiftKey&&(e.preventDefault(),e.stopPropagation(),c())},onKeyDown:e=>{d&&"Escape"===e.key&&(e.preventDefault(),e.stopPropagation(),d())}})))};var J=n(64015),ee=n(90845),te=n(32952),ne=n(78674),ie=n(85985),re=n(2834),oe=n(74204),se=n(57050);const ae={padding:`${I.ux.rem(R.F2)} ${I.ux.rem(R.F2+R.Ze)} ${I.ux.rem(R.F2)} ${I.ux.rem(R.qp)}`,border:`1px solid ${l.S5.InteractiveNeutral.Primary.Default}`,borderRadius:I.ux.rem(A.xB),width:I.ux.rem(15),height:I.ux.rem(2),boxSizing:"border-box",position:"relative"},le={position:"absolute",right:I.ux.rem(R.x),top:I.ux.rem(.1875),border:"none",background:"transparent",display:"flex",alignItems:"center",cursor:"pointer",width:I.ux.rem(1.5),height:I.ux.rem(1.5),padding:0},ce=Object.assign(Object.assign({},f.Es.iconSizeRems(1.5)),{$nest:{"& svg":{stroke:l.XY.Content.Secondary.Default}}}),ue=e=>I.ux.color(S.BlueGray40).toRGBA().fade(e).toString(),de={padding:I.ux.rem(R.F2),background:"white",boxShadow:`0px 0px 0px 0.5px ${S.BlueGray40}, 0px 0px 2px 0.5px ${ue(.5)}, 0px 1px 6px 0.5px ${ue(.25)}`,borderRadius:I.ux.rem(A.xB),width:I.ux.rem(15),boxSizing:"border-box",overflowY:"auto",maxHeight:I.ux.rem(8.125),zIndex:9999,$nest:{"& > ul":{listStyle:"none",padding:0,margin:0,$nest:{"& > li":{padding:0,margin:0}}}}},me={border:"none",background:"transparent",width:"100%",cursor:"pointer",overflow:"hidden",textOverflow:"ellipsis",fontSize:I.ux.rem(.875),lineHeight:I.ux.rem(1.375),color:l.XY.Content.Primary.Default,padding:`${I.ux.rem(.1875)} ${I.ux.rem(R.qp)}`,borderRadius:I.ux.rem(A.xB),display:"flex",justifyContent:"flex-start",$nest:{"&:hover":{background:S.Blue0},"& mark":{backgroundColor:"unset",fontWeight:"bold"}}},pe={width:I.ux.percent(100),border:"none"},he=I.ux.style(ae),ge=I.ux.style(le),fe=I.ux.style(ce),xe=I.ux.style(de),be=I.ux.style(me),ve=I.ux.style({whiteSpace:"pre"}),ye=I.ux.style(pe),Ce=new W(999999);function ke({text:e,placeholder:t,clearButton:n,selectOnBlur:o,label:s,options:a,className:l,filterBy:c=((e,t)=>s(e).toLowerCase().includes(t.toLowerCase())),onInputChange:u,onSelectionChange:d}){const[m,p]=i.useState(!1),h=i.useRef(Ce.newId().toString()),[g,x]=i.useState(null),[b,v]=i.useState(null),{styles:y,attributes:C}=(0,oe.D)(g,b,{placement:"bottom-start",modifiers:[{name:"offset",options:{offset:[0,4]}}]}),k=a.filter((t=>c(t,e.trim()))),w=m&&k.length>0,S=i.useMemo((()=>new te.xQ),[]);return ee.P.useSubscriptionTo(S.pipe(ne.b(50),ie.h((e=>!e)),re.b((()=>{p(!1),o&&""!==e.trim()&&d(k.length>0?k[0]:null)})))),i.createElement("div",Object.assign({},(0,O.Sh)(he,l),{ref:x}),i.createElement(Q,{className:ye,placeholder:t,onChange:u,text:e,onFocus:()=>{p(!0),S.next(!0)},onBlur:()=>S.next(!1),role:"combobox","aria-haspopup":"listbox","aria-owns":h.current,"aria-expanded":w}),""!==e.trim()&&!!n&&i.createElement("button",{onClick:(0,f.m)((()=>d(null))),className:ge,"aria-label":"Clear",type:"button"},i.createElement(r.JO.Close,{className:fe})),w&&i.createElement("div",Object.assign({ref:v,style:y.popper},C.popper,{className:xe,onFocus:()=>S.next(!0),onBlur:()=>S.next(!1)}),i.createElement("ul",{"aria-label":"menu-options",role:"listbox",id:h.current},k.map((t=>{const n=s(t);return i.createElement("li",{key:n,"aria-label":n,role:"option"},i.createElement("button",{className:be,onClick:(0,f.m)((()=>{d(t),p(!1)}))},i.createElement(we,{label:n,pattern:e})))})))))}const we=({label:e,pattern:t})=>{if(""===t.trim())return i.createElement(i.Fragment,null,e);const n=t.trim(),r=e.split(new RegExp(n,"i")),o=(0,se.zG)(r.map(((e,t)=>({token:e,mark:!1,end:t*n.length+r.slice(0,t).join("").length+e.length}))),J.iD({token:"",mark:!0,end:0})).map(((t,i,r)=>t.mark&&i>0?{token:e.slice(r[i-1].end,r[i-1].end+n.length),mark:!0}:{token:t.token,mark:!1})).filter((e=>e.token.length>0));return i.createElement(i.Fragment,null,o.map(((e,t)=>e.mark?i.createElement("mark",{key:t,className:ve},e.token):i.createElement("span",{key:t,className:ve},e.token))))},Se={border:`1px solid ${l.S5.InteractiveNeutral.Primary.Default}`,borderRadius:I.ux.rem(A.xB),width:I.ux.rem(15),height:I.ux.rem(2),boxSizing:"border-box",position:"relative"},_e={padding:`${I.ux.rem(R.F2)} ${I.ux.rem(R.F2+R.Ze)} ${I.ux.rem(R.F2)} ${I.ux.rem(R.qp)}`,width:"100%",height:"100%",border:"none",background:"transparent",position:"relative",cursor:"pointer",display:"flex",alignItems:"center"},Ee={fontWeight:400,fontSize:I.ux.rem(.875),lineHeight:I.ux.rem(1.375),color:l.XY.Content.Primary.Default},Oe=Object.assign(Object.assign({position:"absolute",top:I.ux.rem(R.F2),right:I.ux.rem(R.x)},f.Es.iconSizeRems(1.5)),{$nest:{"& svg":{stroke:l.XY.Content.Secondary.Default}}}),Ie=e=>I.ux.color(S.BlueGray40).toRGBA().fade(e).toString(),Ae={padding:I.ux.rem(R.F2),background:"white",boxShadow:`0px 0px 0px 0.5px ${S.BlueGray40}, 0px 0px 2px 0.5px ${Ie(.5)}, 0px 1px 6px 0.5px ${Ie(.25)}`,borderRadius:I.ux.rem(A.xB),width:I.ux.rem(15),boxSizing:"border-box",overflowY:"auto",maxHeight:I.ux.rem(8.125),zIndex:9999,$nest:{"& > ul":{listStyle:"none",padding:0,margin:0,$nest:{"& > li":{padding:0,margin:0}}}}},Re={border:"none",background:"transparent",width:"100%",cursor:"pointer",overflow:"hidden",textOverflow:"ellipsis",fontSize:I.ux.rem(.875),lineHeight:I.ux.rem(1.375),color:l.XY.Content.Primary.Default,padding:`${I.ux.rem(.1875)} ${I.ux.rem(R.qp)}`,borderRadius:I.ux.rem(A.xB),display:"flex",justifyContent:"flex-start",$nest:{"&:hover":{background:S.Blue0}}},Pe=I.ux.style(Se),Ue=I.ux.style(_e),Be=I.ux.style(Ee),Te=I.ux.style(Ae),Fe=I.ux.style(Re),Ge=I.ux.style(Oe),ze=new W(999999);function je({label:e,selection:t,className:n,placeholder:o,options:s,onSelectionChange:a,renderOption:l}){const[c,u]=i.useState(!1),d=i.useRef(ze.newId().toString()),m=i.useRef(ze.newId().toString()),p=i.useRef(null),[h,g]=i.useState(null),[x,b]=i.useState(null),{styles:v,attributes:y}=(0,oe.D)(h,x,{placement:"bottom-start",modifiers:[{name:"offset",options:{offset:[0,4]}}]}),C=i.useMemo((()=>new te.xQ),[]),k=i.useMemo((()=>C.pipe(ne.b(100),ie.h((e=>!e)),re.b((()=>{u(!1)})))),[C,u]);return ee.P.useSubscriptionTo(k),i.createElement("div",Object.assign({},(0,O.Sh)(Pe,n),{ref:g}),i.createElement("button",{ref:p,className:Ue,onClick:()=>{var e;u(!0),C.next(!0),null===(e=p.current)||void 0===e||e.focus()},onFocus:()=>{u(!0),C.next(!0)},onBlur:()=>C.next(!1),type:"button","aria-haspopup":"listbox","aria-owns":d.current,"aria-expanded":c,"aria-labelledby":m.current},i.createElement("div",{id:m.current,className:Be},t?l?l(t):e(t):o),i.createElement(r.JO.Arrow,{direction:r.n4.down,className:Ge})),c&&i.createElement("div",Object.assign({ref:b,style:v.popper},y.popper,{className:Te,onFocus:()=>C.next(!0),onBlur:()=>C.next(!1)}),i.createElement("ul",{"aria-label":"menu-options",role:"listbox",id:d.current},s.map(((t,n)=>{const r=e(t);return i.createElement("li",{key:n,"aria-label":r,role:"option"},i.createElement("button",{className:Fe,onClick:(0,f.m)((()=>{a(t),u(!1)}))},l?l(t):e(t)))})))))}const Ne=({className:e,children:t})=>i.createElement("div",Object.assign({},(0,O.Sh)(Ve,e)),t),Ve=I.ux.style({color:S.BlueGray60,fontWeight:400,fontSize:I.ux.rem(.625),lineHeight:I.ux.rem(1),background:S.BlueGray0,borderRadius:I.ux.rem(A.fe),padding:`0 ${I.ux.rem(R.F2)}`,cursor:"default"}),Me="closeBtn",De="closeIcon",He=f.Es.buttonOverrideSpecificity({$nest:{[`& .${De}`]:Object.assign(Object.assign({},f.Es.iconSizeRems(1.5)),{stroke:I.ux.important(l.S5.Content.Primary.Default)})}},Me),Le={closeButton:I.ux.joinClasses([Me,I.ux.style(He)]),closeIcon:De},$e=({name:e,className:t,size:n,onClick:o})=>i.createElement(F.Tertiary,Object.assign({},(0,O.Sh)(Le.closeButton,t),{onClick:o,compact:!0,size:n,theme:"dark",name:e}),i.createElement(r.JO.Close,{className:Le.closeIcon}));var Ke=n(93002),Ze=n(38983),We=n(5739),qe=n(56133),Ye=n(66310),Xe=n(80900),Qe=n(77176),Je=n(8125),et=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n};function tt(e){var{children:t,onOpenChange:n,title:r,placement:o="bottom end",appearanceBehavior:s="mouseClick"}=e,a=et(e,["children","onOpenChange","title","placement","appearanceBehavior"]);const l=i.useMemo((()=>Ze.h.create(!1)),[]),c=i.useMemo((()=>l.pipe(ie.h((e=>!0===e)),Ye.w((()=>Xe.H(250))),re.b((()=>l.set(!1))))),[l]);return ee.P.useSubscriptionTo(c),i.createElement(qe.l.Consumer,null,(({portalContainer:e})=>i.createElement(We.F.Fragment,null,e.view(j.fold(se.gn,(e=>i.createElement(Ke.v.Dropdown,Object.assign({title:l.pipe(Qe.U((0,Je.RN)(void 0,r))),placement:o,appearanceBehavior:s,portalContainer:e,onOpenChange:e=>{e||l.set(!0),null==n||n(e)}},a),t)))))))}var nt=n(18208),it=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n};const rt=i.forwardRef((function(e,t){var{children:n,rel:r}=e,o=it(e,["children","rel"]);const s=(0,i.useMemo)((()=>nt.alphanumeric(10)),[]);return i.createElement(i.Fragment,null,i.createElement("span",{hidden:!0,id:s},"Opens an external site in a new window"),i.createElement("a",Object.assign({},o,{"aria-describedby":s,target:"_blank",rel:null!=r?r:"noopener noreferrer",ref:t}),n))}));var ot;!function(e){let t;!function(e){e.create=function(e){return e}}(t=e.Id||(e.Id={}))}(ot||(ot={}));I.ux.style({display:"flex",alignContent:"flex-start",gap:I.ux.rem(R.x)}),I.ux.style({cursor:"pointer",border:"none",display:"flex",alignItems:"center",background:"transparent",borderBottom:`${I.ux.rem(R.yC)} solid transparent`,fontWeight:400,fontSize:I.ux.rem(.75),lineHeight:I.ux.rem(1.125),height:I.ux.rem(1.5),color:f.BO.TextBaseSubduedColor,$nest:{'&[aria-selected="true"]':{borderBottomColor:f.BO.TextBaseSubduedColor,fontWeight:700},'&[aria-selected="false"]:hover':{borderBottomColor:S.BlueGray10}}});const st=({reference:e,children:t,placement:n,offset:r,theme:o,boundaryAreaPadding:s})=>{var a,l;const[c,u]=i.useState(null),[d,m]=i.useState(null),p=(0,f.sJ)(),{styles:h,attributes:g,state:x}=(0,oe.D)(e,c,{placement:null!=n?n:"top",modifiers:[{name:"offset",options:{offset:[0,12+(null!=r?r:0)]}},{name:"arrow",options:{element:d,padding:12}},{name:"preventOverflow",options:{padding:null!=s?s:5}},p]});return e?i.createElement("div",Object.assign({ref:u,style:h.popper},g.popper,{className:lt(o)}),i.createElement("div",{ref:m,style:h.arrow,className:ct(null==o?void 0:o.bgColor),"data-placement":(null===(a=null==x?void 0:x.placement)||void 0===a?void 0:a.startsWith("bottom"))?"bottom":(null==x?void 0:x.placement.startsWith("top"))?"top":(null==x?void 0:x.placement.startsWith("right"))?"right":(null===(l=null==x?void 0:x.placement)||void 0===l?void 0:l.startsWith("left"))?"left":void 0}),t):null},at=I.ux.keyframes({from:{opacity:0},to:{opacity:1}});function lt(e){var t,n,i;return I.ux.style({animation:`${at} linear 0.1s`,background:null!==(t=null==e?void 0:e.bgColor)&&void 0!==t?t:l.S5.Surface.Primary.Default,borderRadius:I.ux.rem(R.x),width:null==e?void 0:e.width,color:null!==(n=null==e?void 0:e.fgColor)&&void 0!==n?n:l.S5.Content.Primary.Default,padding:null!==(i=null==e?void 0:e.padding)&&void 0!==i?i:I.ux.rem(R.mh),fontSize:I.ux.rem(.875),lineHeight:I.ux.rem(1.375),display:"flex",flexDirection:"column",gap:I.ux.rem(R.yC),$nest:{"&[data-popper-reference-hidden='true']":{visibility:"hidden"}}})}function ct(e=l.S5.Surface.Primary.Default,t=I.ux.rem(.5),n=I.ux.rem(-.5)){return I.ux.style({$nest:{"&[data-placement='bottom']":{top:n,borderLeft:`${t} solid transparent`,borderRight:`${t} solid transparent`,borderBottom:`${t} solid ${e}`},"&[data-placement='top']":{bottom:n,borderLeft:`${t} solid transparent`,borderRight:`${t} solid transparent`,borderTop:`${t} solid ${e}`},"&[data-placement='right']":{left:n,borderTop:`${t} solid transparent`,borderBottom:`${t} solid transparent`,borderRight:`${t} solid ${e}`},"&[data-placement='left']":{right:n,borderTop:`${t} solid transparent`,borderBottom:`${t} solid transparent`,borderLeft:`${t} solid ${e}`}}})}I.ux.style({position:"absolute",top:I.ux.rem(R.x),right:I.ux.rem(R.x)});const ut="reportMenuBtnIcon",dt=f.Es.buttonOverrideSpecificity(f.Es.iconSizeRems(1.5),ut),mt=({reportMenuButtonClassName:e,onClickReportOffensive:t,onClickProvideFeedback:n,onOpenChange:o})=>i.createElement(tt,{"aria-label":"Provide feedback",title:"Provide feedback",name:"reportMenu",label:i.createElement(m,{className:I.ux.joinClasses([ut,I.ux.style(dt)])}),theme:{button:I.ux.joinClasses([e,T({type:"tertiary",compact:!0,size:"small"})])},onAction:e=>{switch(e){case"provideFeedback":return n();case"reportOffensive":return t()}},onOpenChange:o},i.createElement(Ke.v.Item,{key:"provideFeedback",textValue:"provideFeedback"},i.createElement(r.JO.AssistantFeedback,null),"Share your thoughts"),i.createElement(Ke.v.Item,{key:"reportOffensive",textValue:"reportOffensive"},i.createElement(r.JO.Report,null),"Report as offensive"))},70288:(e,t,n)=>{n.d(t,{Xd:()=>i,gy:()=>Ge,kF:()=>z,Bx:()=>je});var i,r=n(14601),o=n(32952),s=n(98403),a=n(77176),l=n(93508),c=n(16118),u=n(85985),d=n(2844),m=n(28043),p=n(41398),h=n(60797),g=n(67434),f=n(38983),x=n(1226),b=n(22232),v=n(57050),y=n(5114);!function(e){e.isTooltipOnboardingStep=function(e){return x.TG.StepName.isTooltipOnboardingStep(e.name)}}(i||(i={}));class C{constructor(e){var t,n,i,h,g;this._params=e,this._subs=new r.w,this._assistantElements=f.h.create({}),this._externalElements=f.h.create({}),this._hideAssistantTooltips=f.h.create(!1),this._nextCandidateStep=f.h.create(y.none),this._uiActions=new o.xQ,this.uiActions=this._uiActions.asObservable(),this.activeStep=f.h.combine(this._nextCandidateStep,this._assistantElements,this._externalElements,this._hideAssistantTooltips,((e,t,n,i)=>(0,v.zG)(e,y.chain((e=>function(e,t,n,i){switch(e){case x.TG.StepName.initial:return(0,v.zG)(y.fromNullable(n[x.nF.initialPopupAnchor]),y.map((e=>({name:x.TG.StepName.initial,reference:e.reference,placement:e.placement,offset:e.offset,boundaryAreaPadding:e.boundaryAreaPadding,show:!0}))));case x.TG.StepName.rewrite:return(0,v.zG)(y.fromNullable(n[x.nF.rewriteTooltipAnchor]),y.map((e=>({name:x.TG.StepName.rewrite,reference:e.reference,placement:e.placement,offset:e.offset,boundaryAreaPadding:e.boundaryAreaPadding,show:!0}))));case x.TG.StepName.prompts:return(0,v.zG)(y.fromNullable(t[x.ec.initialActionsList]),y.map((e=>({name:x.TG.StepName.prompts,reference:e.reference,placement:e.placement,offset:e.offset,boundaryAreaPadding:e.boundaryAreaPadding,show:!i}))));case x.TG.StepName.review:return(0,v.zG)(y.fromNullable(t[x.ec.followUpActionsList]),y.map((e=>({name:x.TG.StepName.review,reference:e.reference,placement:e.placement,offset:e.offset,boundaryAreaPadding:e.boundaryAreaPadding,show:!i}))));case x.TG.StepName.knowledgeHub:return(0,v.zG)(y.fromNullable(t[x.ec.promptInput]),y.map((e=>({name:x.TG.StepName.knowledgeHub,reference:e.reference,placement:e.placement,offset:e.offset,boundaryAreaPadding:e.boundaryAreaPadding,show:!i}))));default:return(0,b.L0)(e)}}(e,t,n,i)))))),this.promptsAllocated=this._params.promptsAllocated,this._subs.add((t=this._params.upstreamOnboardingState,n=this._params.session,i=this._params.textStats,h=this._params.forceDisabledOnboardingSteps,g=this._params.client,d.aj([n,t,i.pipe(k()),n.pipe(a.U(y.isSome),m.x(),p.M(t),a.U((([e,t])=>e?y.some(t):y.none)))]).pipe(a.U((([e,t,n,i])=>{return y.isNone(e)?!h.has(x.TG.StepName.initial)&&(0,v.zG)(t.initial[g],(({completed:e,lastSeen:t})=>!e&&void 0===t))?y.some(x.TG.StepName.initial):!h.has(x.TG.StepName.rewrite)&&!t.rewrite[g].completed&&t.initial[g].completed&&n>=30?y.some(x.TG.StepName.rewrite):y.none:x.Zq.Step.anyClientCompleted(t.prompts)||h.has(x.TG.StepName.prompts)?x.Zq.Step.anyClientCompleted(t.review)||h.has(x.TG.StepName.review)?x.Zq.Step.anyClientCompleted(t.knowledgeHub)||h.has(x.TG.StepName.knowledgeHub)||(r=i,!(0,v.zG)(r,y.fold(v.jv,(({prompts:e,review:t})=>{const n={prompts:x.Zq.Step.anyClientCompleted(e),review:x.Zq.Step.anyClientCompleted(t)};return Object.values(n).every(v.yR)}))))?y.none:y.some(x.TG.StepName.knowledgeHub):y.some(x.TG.StepName.review):y.some(x.TG.StepName.prompts);var r})))).subscribe(s.wW(this._nextCandidateStep))),this._subs.add(this._params.assistantMountActions.subscribe((({name:e,element:t})=>this._assistantElements.modify((n=>Object.assign(Object.assign({},n),{[e]:{reference:t,placement:"left"}})))))),this._subs.add(this._params.assistantUnmountActions.subscribe((({name:e})=>this._assistantElements.modify((t=>Object.assign(Object.assign({},t),{[e]:void 0})))))),this._subs.add(this._params.externalElements.subscribe(s.wW(this._externalElements))),this._subs.add(this._params.hideAssistantOnboardingTooltips.subscribe(s.wW(this._hideAssistantTooltips))),this._subs.add(this._params.session.pipe(a.U(y.isSome),l.O(!1),c.G(),u.h((([e,t])=>e&&!t))).subscribe((()=>this._assistantElements.set({}))))}notify(e){this._uiActions.next(e)}dispose(){this._subs.unsubscribe()}}function k(){return(0,v.ls)(h.oA,a.U((e=>e.wordCount)),l.O(0),c.G(),g.R(((e,[t,n])=>(0,v.zG)(Math.abs(n-t),(t=>t<=2?e+t:e))),0),l.O(0),m.x())}var w,S=n(64015),_=n(66310),E=n(80544),O=n(79692),I=n(2834),A=n(24209),R=n(17343),P=n(40151),U=n(8125),B=n(83078);function T(e,t,n,i,r=1e3){return e.pipe(u.h((0,U.W9)(x.lG.is(x.lG.Kind.mount),(e=>n(e.step)))),_.w((({step:e})=>t.pipe(a.U(B.contains(e)),_.w((e=>e?i.pipe(R.h(Date.now())):P.E)),u.h((e=>Date.now()-e>=r)),R.h(e)))))}!function(e){e.completeInitialOrRewriteStepOnSessionInit=({session:e})=>e.pipe(l.O(y.none),c.G(),a.U((([e,t])=>y.isNone(e)&&y.isSome(t)?y.some(t):y.none)),h.oA,_.w((e=>(0,v.zG)([y.some(x.TG.StepName.initial),x.z_.Mode.isRewriteOrQuickRewrite(e.value.mode)?y.some(x.TG.StepName.rewrite):y.none],S.oA)))),e.completeReviewStepOnSecondResultReceived=({session:e,activeStep:t})=>e.pipe(a.U((0,v.ls)(y.chain(x.z_.toStarted),y.fold((()=>0),(e=>e.resultHistory.length)))),c.G(),u.h((([e,t])=>1===e&&2===t)),p.M(t),a.U((([e,t])=>(0,v.zG)(t,y.filter((e=>e===x.TG.StepName.review))))),h.oA),e.completeActiveAssistantStepOnSessionEnd=({session:e,activeStep:t,visibleForMs:n,onboardingUIActions:i})=>T(i,t.pipe(E.QV(O.E)),x.TG.StepName.isAssistantOnboardingStep,e.pipe(c.G(),u.h((([e,t])=>y.isSome(e)&&y.isNone(t)))),n),e.completeStepOnCloseClick=({onboardingUIActions:e,trackingService:t})=>e.pipe(u.h(x.lG.is(x.lG.Kind.close)),a.U((e=>(e.step===x.TG.StepName.initial&&t.trackOnboardingPopupSkip(),e.step)))),e.completeInitialStepOnTryItOutClick=({onboardingUIActions:e,trackingService:t})=>e.pipe(u.h(x.lG.is(x.lG.Kind.tryItOut)),a.U((()=>(t.trackOnboardingPopupNext(),x.TG.StepName.initial)))),e.completeReviewStepOnResultInteraction=({assistantUIActions:e})=>e.pipe(u.h((0,U.W9)(x.ix.isResultAction,(e=>"complete"===e.result.kind))),a.U((()=>x.TG.StepName.review))),e.completeAssistantStepsOnUserActions=({assistantUIActions:e,activeStep:t})=>e.pipe(u.h((0,U.Kg)(x.ix.is(x.ix.Kind.actionBrickClick),x.ix.is(x.ix.Kind.promptSubmitButtonClick),x.ix.is(x.ix.Kind.promptFieldKeyPressEnter),x.ix.is(x.ix.Kind.toolbarVoiceButtonClick),x.ix.is(x.ix.Kind.setVoiceButtonClick),x.ix.is(x.ix.Kind.openFeedbackFormButtonClick))),p.M(t),a.U((([e,t])=>(0,v.zG)(t,y.filter(x.TG.StepName.isAssistantOnboardingStep)))),h.oA),e.completeInitialStepOnDispose=({onboardingUIActions:e,activeStep:t,disposed:n,visibleForMs:i})=>T(e,t,(e=>e===x.TG.StepName.initial),n,i);const t=e=>t=>n=>t(n).pipe(I.b((t=>{var i;return null===(i=n.logger)||void 0===i?void 0:i.debug(`${e} - step to complete: ${t}`)})));function n(e){return e.pipe(g.R(((e,t)=>({seen:new Set(e.seen).add(t),step:e.seen.has(t)?y.none:y.some(t)})),{seen:new Set,step:y.none}),a.U((e=>e.step)),h.oA)}e.defaultCompletionSources=[t("session init")(e.completeInitialOrRewriteStepOnSessionInit),t("second result received")(e.completeReviewStepOnSecondResultReceived),t("session end")(e.completeActiveAssistantStepOnSessionEnd),t("user closed step")(e.completeStepOnCloseClick),t("user clicked try-it-out")(e.completeInitialStepOnTryItOutClick),t("user interacted with results")(e.completeReviewStepOnResultInteraction),t("user interacted with assistant")(e.completeAssistantStepsOnUserActions),t("feature disposed")(e.completeInitialStepOnDispose)],e.extractStepsToComplete=function(e,t){return A.T(...e.map((e=>e(t)))).pipe(n)}}(w||(w={}));var F=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n};class G extends C{constructor(e,t){super(e),this._onDispose=t}dispose(){super.dispose(),this._onDispose()}}function z(e){var{assistantUIActions:t,trackingService:n,completeOnboardingStep:i,stepCompletionSources:o,disposed:s,logger:a}=e,l=F(e,["assistantUIActions","trackingService","completeOnboardingStep","stepCompletionSources","disposed","logger"]);const c=new r.w,d=new G(Object.assign(Object.assign({},l),{assistantMountActions:t.pipe(u.h(x.ix.is(x.ix.Kind.mount))),assistantUnmountActions:t.pipe(u.h(x.ix.is(x.ix.Kind.unmount)))}),(()=>c.unsubscribe()));return c.add(w.extractStepsToComplete(null!=o?o:w.defaultCompletionSources,{onboardingUIActions:d.uiActions,assistantUIActions:t,activeStep:d.activeStep.view(y.map((e=>e.name))),session:l.session,trackingService:n,disposed:s,logger:a}).subscribe(i)),c.add(function(e,t){return e.pipe(u.h(x.lG.is(x.lG.Kind.mount)),I.b((e=>{switch(e.step){case x.TG.StepName.initial:return t.trackOnboardingPopupView();case x.TG.StepName.prompts:return t.trackOnboardingPromptsTooltipView();case x.TG.StepName.review:return t.trackOnboardingReviewTooltipView();case x.TG.StepName.rewrite:return t.trackOnboardingRewriteTooltipView();case x.TG.StepName.knowledgeHub:return t.trackOnboardingKnowledgeHubTooltipView();default:(0,b.L0)(e.step)}})))}(d.uiActions,n).subscribe()),d}var j=n(34217),N=n(27378),V=n(74903),M=n(89894),D=n(88392),H=n(13578),L=n(9546),$=n(16188);const K="tryItOutBtn",Z="skipBtn",W=M.ux.rem(D.xB+D.fe),q={width:M.ux.rem(25.875),background:H.XY.Surface.Primary.Default},Y={display:"flex",alignItems:"center",justifyContent:"center",height:M.ux.rem(14.5625),width:"100%",backgroundColor:"#00231F",backgroundImage:"url(https://assets.grammarly.com/icons/v1/cheetah-onboarding.2x.png)",backgroundPosition:`top ${M.ux.rem(1)} left 0`,backgroundSize:"100%",backgroundRepeat:"no-repeat",borderTopLeftRadius:W,borderTopRightRadius:W},X={display:"flex",flexDirection:"column",gap:M.ux.rem(L.F2),padding:`${M.ux.rem(L.mh)} ${M.ux.rem(L.x0)} ${M.ux.rem(L.sD)} ${M.ux.rem(L.sD)}`,color:H.XY.Content.Primary.Default},Q={display:"flex",flexDirection:"row",alignItems:"center",gap:M.ux.rem(L.x),fontWeight:"bold",fontSize:M.ux.rem(1),lineHeight:M.ux.rem(1.5)},J={fontSize:M.ux.rem(.875),lineHeight:M.ux.rem(1.375)},ee={display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",borderBottomLeftRadius:W,borderBottomRightRadius:W,padding:`${M.ux.rem(L.qp)} ${M.ux.rem(L.sD)} ${M.ux.rem(L.qp)} ${M.ux.rem(L.sD)}`,backgroundColor:H.XY.Surface.Secondary.Default,color:H.XY.Content.Secondary.Default,fontSize:M.ux.rem(.875),lineHeight:M.ux.rem(1.3125),$nest:{a:{color:"inherit"}}},te={width:M.ux.rem(12),lineHeight:M.ux.rem(1.25)},ne=Object.assign({marginRight:M.ux.rem(.5)},$.Es.buttonOverrideSpecificity({fontSize:M.ux.rem(.875)},Z)),ie=$.Es.buttonOverrideSpecificity({fontSize:M.ux.rem(.875),fontWeight:"bold"},K),re={position:"absolute",top:M.ux.rem(L.x),right:M.ux.rem(L.x)},oe=M.ux.style(q),se=M.ux.style(Y),ae=M.ux.style(X),le=M.ux.style(Q),ce=M.ux.style(J),ue=M.ux.style(ee),de=M.ux.style(te),me=M.ux.style({display:"flex",flexDirection:"row",alignItems:"flex-end"}),pe=M.ux.joinClasses([Z,M.ux.style(ne)]),he=M.ux.joinClasses([K,M.ux.style(ie)]),ge=M.ux.style({display:"inline"}),fe=M.ux.style(re);var xe=n(12187),be=n(74204);const ve=N.forwardRef((function({placement:e,style:t,arrowColor:n},i){return N.createElement("div",{ref:i,style:{width:33}},N.createElement("svg",{width:33,height:12,viewBox:"0 0 33 12.5",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:Object.assign(Object.assign(Object.assign({position:"absolute"},t),{transform:`${(null==t?void 0:t.transform)||""} rotate(${ye(e)}deg)`.trimStart()}),Ce(e))},N.createElement("path",{d:"M0.5 3.41877e-07C3.5 3.41877e-07 29.5 3.41877e-07 32.5 3.41877e-07C28.5 3.41877e-07 26.4111 0.903505 24.1814 3.69994L17.5562 11.4728C16.957 12.1757 15.8652 12.1757 15.2661 11.4728L8.64084 3.69994C6.41113 0.903505 4.5 3.41877e-07 0.5 3.41877e-07Z",fill:n||"white"})))}));function ye(e){return(null==e?void 0:e.startsWith("right"))?90:(null==e?void 0:e.startsWith("bottom"))?180:(null==e?void 0:e.startsWith("left"))?270:0}function Ce(e){return(null==e?void 0:e.startsWith("bottom"))?{top:-12}:(null==e?void 0:e.startsWith("top"))?{bottom:-12}:(null==e?void 0:e.startsWith("right"))?{transformOrigin:"top left",top:-16.5,left:0}:(null==e?void 0:e.startsWith("left"))?{transformOrigin:"top right",top:-16.5,right:0}:{}}var ke=n(62172);const we=(0,xe.xb)((({reference:e,placement:t,offset:n,boundaryAreaPadding:i,className:r,arrowColor:o,children:s})=>{const[a,l]=N.useState(null),[c,u]=N.useState(null),d=(0,$.sJ)(),{styles:m,attributes:p,state:h}=(0,be.D)(e,a,{placement:t,modifiers:[{name:"offset",options:{offset:[0,12+(null!=n?n:0)]}},{name:"arrow",options:{element:c,padding:12}},{name:"preventOverflow",options:{padding:null!=i?i:5}},d]});return N.createElement("div",Object.assign({ref:l,style:m.popper},p.popper,(0,xe.Sh)(_e,r)),N.createElement(ve,{ref:u,style:m.arrow,placement:null==h?void 0:h.placement,arrowColor:o}),s)})),Se=e=>M.ux.color(ke.BlueGray40).toRGBA().fade(e).toString(),_e=M.ux.style({filter:`drop-shadow(0px 0px 0.5px ${ke.BlueGray40}) drop-shadow(0px 0px 2px ${Se(.5)}) drop-shadow(0px 1px 6px ${Se(.25)})`,borderRadius:M.ux.rem(D.xB+D.fe)});var Ee=n(90845);const Oe=j.UI.Node.make((({view:e,notify:t})=>{const{ref:n,onMount:i}=Ee.P.useElWatcher(),r=N.useMemo((()=>n.pipe(E.QV(O.E),h.oA,I.b((e=>t({kind:x.lG.Kind.mount,step:x.TG.StepName.initial,element:e})())))),[n]);return Ee.P.useSubscriptionTo(r),N.createElement(we,{className:oe,reference:e("reference"),placement:e("placement"),offset:e("offset"),boundaryAreaPadding:e("boundaryAreaPadding"),arrowColor:H.XY.Surface.Secondary.Default},N.createElement(V.xx,{onClick:t({kind:x.lG.Kind.close,step:x.TG.StepName.initial}),name:"onboardingClose",size:"medium",className:fe}),N.createElement("div",{className:se},N.createElement(V.rN,null)),N.createElement("div",{className:ae,ref:i},N.createElement("div",{className:le},N.createElement("div",null,"Write faster with GrammarlyGO"),N.createElement(V.Ct,null,"Beta")),N.createElement("div",{className:ce},"Brainstorm, write, and rewrite with generative AI assistance at your fingertips.")),N.createElement("div",{className:ue},N.createElement("div",{className:de},"If you use GrammarlyGO,"," ",N.createElement(V.dL,{href:"https://grammarly.com/terms",className:ge},"additional terms")," ","apply."),N.createElement("div",{className:me},N.createElement(V.zx.Tertiary,{onClick:t({kind:x.lG.Kind.close,step:x.TG.StepName.initial}),className:pe,name:"skip"},"Skip"),N.createElement(V.zx.Primary,{onClick:t({kind:x.lG.Kind.tryItOut}),className:he,name:"tryItOut"},"Try it out"))))}));function Ie(e){return j.Z.fromSideEffect((t=>e.notify(t)),e.activeStep.pipe(h.oA))}const Ae=(0,xe.xb)((({reference:e,placement:t,offset:n,boundaryAreaPadding:i,children:r,name:o})=>N.createElement(V.J2,{reference:e,placement:t,offset:n,boundaryAreaPadding:i,theme:{bgColor:ke.Green80,fgColor:H.S5.Content.Primary.Default,padding:M.ux.rem(L.mh),width:o===x.TG.StepName.knowledgeHub?M.ux.rem(16):M.ux.rem(13.75)}},r))),Re={[x.TG.StepName.prompts]:{title:"Start with a prompt",description:e=>e?`Choose a suggested prompt, or type your own to get started. You’ll get ${e} each month.`:"Choose a suggested prompt, or type your own to get started."},[x.TG.StepName.review]:{title:"How does this sound?",description:"Adjust it to your liking with additional prompts. Don’t forget to check for any inaccuracies. "},[x.TG.StepName.rewrite]:{title:"Want help rewriting?",description:"Select your text to rewrite it with GrammarlyGO."},[x.TG.StepName.knowledgeHub]:{title:"Using organizational language?",description:"Prompt GrammarlyGO using terms and project names from Knowledge Share to automatically insert organizational context."}},Pe=j.UI.Node.make((({state:e,view:t,notify:n})=>{const{ref:i,onMount:r}=Ee.P.useElWatcher(),o=N.useMemo((()=>i.pipe(h.oA,p.M(t("name")),E.QV(O.E),a.U((([e,t])=>({element:e,stepName:t}))),I.b((({element:e,stepName:t})=>n({kind:x.lG.Kind.mount,step:t,element:e})())))),[i]);return Ee.P.useSubscriptionTo(o),N.createElement(Ae,{name:t("name"),reference:t("reference"),placement:t("placement"),offset:t("offset"),boundaryAreaPadding:t("boundaryAreaPadding")},e.pipe(a.U((e=>N.createElement(N.Fragment,null,N.createElement(V.xx,{onClick:n({kind:x.lG.Kind.close,step:e.name}),name:"tooltipClose",className:Te,size:"small"}),N.createElement("div",{className:Be},Re[e.name].title),N.createElement("div",{ref:r},e.name===x.TG.StepName.prompts?Re[e.name].description(e.promptsAllocated):Re[e.name].description))))))})),Ue=j.UI.Union.asOption(Pe),Be=M.ux.style({fontWeight:700}),Te=M.ux.style({position:"absolute",top:M.ux.rem(L.x),right:M.ux.rem(L.x)});function Fe(e){return j.Z.composeOption(function(e){return j.Z.fromSideEffect((t=>e.notify(t)),e.activeStep.pipe(h.oA,u.h(i.isTooltipOnboardingStep),p.M(e.promptsAllocated.pipe(a.U(y.toUndefined))),a.U((([e,t])=>Object.assign(Object.assign({},e),{promptsAllocated:t})))))}(e),(()=>e.activeStep.pipe(a.U(y.filter(i.isTooltipOnboardingStep)))))}const Ge=j.UI.Union.make("kind",{none:j.UI.Node.empty,initial:Oe,tooltip:Ue});var ze=n(76974);function je(e){return j.Z.composeUnion({none:()=>ze.of(null),initial:Ie(e),tooltip:Fe(e)},(()=>e.activeStep.view(Ne).view((e=>({kind:e})))))}function Ne(e){return(0,v.zG)(e,y.filter((e=>e.show)),y.fold((()=>"none"),(e=>{switch(e.name){case x.TG.StepName.initial:return"initial";case x.TG.StepName.prompts:case x.TG.StepName.review:case x.TG.StepName.rewrite:case x.TG.StepName.knowledgeHub:return"tooltip";default:return(0,b.L0)(e.name)}})))}},16188:(e,t,n)=>{n.d(t,{Es:()=>i,BO:()=>o,E9:()=>p,ap:()=>d,$d:()=>N,mA:()=>H,vY:()=>c,JY:()=>G,C7:()=>h,Re:()=>u,xs:()=>D,uj:()=>O,m:()=>U,NN:()=>g,E:()=>m,DO:()=>M,lA:()=>j,gM:()=>P,sJ:()=>A,KL:()=>L});var i={};n.r(i),n.d(i,{baseButtonContentOverrideSpecificity:()=>X,buttonOverrideSpecificity:()=>J,cheetahButtonContentOverrideSpecificity:()=>Q,heightAndMinHeightRems:()=>Z,iconSizeRems:()=>W,repeatClassSelector:()=>q,specificity:()=>Y,widthAndMinWidthRems:()=>K});var r=n(62172);const o=Object.assign(Object.assign({},r),{BrandGreen60:"#018374",BrandGreen80:"#017467",TextBaseSubduedColor:"#646B81",TextBaseDefault:"#161719"});var s=n(77176),a=n(31699);function l(e){const t=function(e){const t=e.ownerDocument;if(t)return t;throw new Error("target does not have ownerDocument")}(e).defaultView;if(t)return t;throw new Error("active document is detached from a window")}function c(e){var t,n;return null===(n=(null===(t=e.activeElement)||void 0===t?void 0:t.shadowRoot)||e)||void 0===n?void 0:n.activeElement}function u(e){return e instanceof HTMLElement}const d=["b","i"];function m(e,t=d){return"string"==typeof e?{dangerouslySetInnerHTML:{__html:(0,a.sanitize)(e,{ALLOWED_TAGS:t})}}:{dangerouslySetInnerHTML:e.pipe(s.U((e=>({__html:(0,a.sanitize)(e,{ALLOWED_TAGS:t})}))))}}var p;function h(e=document){return{top:0,left:0,height:e.documentElement.clientHeight,width:e.documentElement.clientWidth}}function g(e,t){return n=>{const i=function(e,t){const n=e.left<t.left?t.left:e.left+e.width>t.left+t.width?t.left+t.width-e.width:e.left,i=e.top<t.top?t.top:e.top+e.height>t.top+t.height?t.top+t.height-e.height:e.top;return Object.assign(Object.assign({},e),{left:n,top:i})}({left:e.left+n.x,top:e.top+n.y,width:e.width,height:e.height},t);return{x:i.left-e.left,y:i.top-e.top}}}!function(e){e.fromCartesian=function({x:e,y:t}){return{top:t,left:e}},e.l1Distance=function(e,t){return Math.abs(e.top-t.top)+Math.abs(e.left-t.left)}}(p||(p={}));var f,x=n(57050),b=n(85985),v=n(28043),y=n(66310),C=n(49708),k=n(2834),w=n(2768),S=n(55721),_=n(39719),E=n(67434);function O(){return(0,x.ls)(b.h((e=>!!e)),v.x(),y.w((e=>C.R(e,"mousedown").pipe(b.h((e=>!e.button)),k.b((e=>e.preventDefault())),s.U((t=>({element:e,startPos:{x:t.clientX,y:t.clientY}}))),y.w((e=>C.R(l(e.element),"mousemove").pipe(w.R(C.R(l(e.element),"mouseup",{capture:!0})),S.p(10),s.U((({clientX:t,clientY:n})=>({kind:"dragInProgress",element:e.element,startPos:e.startPos,delta:{x:t-e.startPos.x,y:n-e.startPos.y}}))),_.l({kind:"dragDone"}))))))),E.R(((e,t)=>"dragDone"===t.kind?{translate:e.translate,lastTranslate:e.translate,dragging:!1,dragStart:!1,dragEnd:e.dragging}:{dragging:!0,dragStart:!e.dragging,dragEnd:!1,lastTranslate:e.lastTranslate,translate:{x:t.delta.x+e.lastTranslate.x,y:t.delta.y+e.lastTranslate.y}}),f.create()))}!function(e){e.create=function(){return{translate:{x:0,y:0},lastTranslate:{x:0,y:0},dragging:!1,dragStart:!1,dragEnd:!1}}}(f||(f={}));var I=n(27378);function A(){return I.useMemo((()=>({name:"nudgeArrow",phase:"afterMain",enabled:!0,fn:()=>{},effect:({instance:e})=>{const t=setTimeout((()=>e.forceUpdate()),0);return()=>clearTimeout(t)}})),[])}var R=n(34530);function P(e){return I.useMemo((()=>({name:"maxSize",phase:"main",enabled:!0,requiresIfExists:["offset","preventOverflow","flip"],fn({state:t,name:n}){const i=(0,R.Z)(t),{x:r,y:o}=t.modifiersData.preventOverflow||{x:0,y:0},{width:s,height:a}=t.rects.popper,[l]=t.placement.split("-"),c="top"===l?"top":"bottom",u={width:s-i["left"===l?"left":"right"]-r,height:a-i[c]-o};t.modifiersData[n]=u,null==e||e(u)}})),[])}function U(e){return t=>{(null==t?void 0:t.isTrusted)&&(null==e||e(t))}}var B=n(64015),T=n(45701),F=n(5114);function G(){return T.contramap((({matchScore:e})=>e))(T.ordNumber)}function z(e){return e.split(/\s+/).map((e=>e.trim())).filter((e=>""!==e))}function j(e,t,n){const i=z(e),r=[...z(t),...(0,x.zG)(n,B.tS((e=>z(e))))],o=i.map((()=>null));let s=0;for(const e of r){if(s>=i.length)break;e.toLowerCase().includes(i[s].toLowerCase())&&(o[s]=0,++s)}return o.includes(null)?F.none:F.some(o.map((e=>null!=e?e:0)).reduce(((e,t)=>e+t),0))}const N=()=>e=>e;var V=n(8709);function M(e){return(0,x.zG)(F.fromNullable(null==e?void 0:e.ops),F.filter(Array.isArray),F.map((e=>new V.i([...e]))))}function D(e){return Number.isInteger(e)&&e>=0&&e<10}function H(e){return["zero","one","two","three","four","five","six","seven","eight","nine"][e]}function L(e,t){var n,i;const[r,o]=(0,I.useState)(void 0);return(0,I.useEffect)((()=>{e.current&&e.current.scrollWidth>e.current.clientWidth&&o(t)}),[null===(n=e.current)||void 0===n?void 0:n.scrollWidth,null===(i=e.current)||void 0===i?void 0:i.clientWidth,t]),r}var $=n(89894);function K(e){return{width:$.ux.rem(e),minWidth:$.ux.rem(e)}}function Z(e){return{height:$.ux.rem(e),minHeight:$.ux.rem(e)}}function W(e,t){return Object.assign(Object.assign({},K(e)),Z(null!=t?t:e))}function q(e,t){return`.${e}`.repeat(t)}function Y(e,t,n){return{$nest:{[`&${q(t,n)}`]:e}}}const X=6,Q=X+1;function J(e,t){return Y(e,t,Q)}},90732:(e,t,n)=>{n.d(t,{eG:()=>i,ni:()=>l,tt:()=>c});var i,r=n(57050),o=n(48044),s=n(5114),a=n(95195);function l(e){return(t,n)=>i=>(0,r.zG)(i,o.cq(e)(t,(0,r.ls)(s.some,n)),s.getOrElse((()=>(0,r.zG)(i,o.ZQ(e)(t,n(s.none))))))}async function c(e,t,n,i,r){try{const o=await t();a.isLeft(o)?(null==n||n.error("runTaskEither() - error running task",{taskName:e,result:o}),null==r||r(o.left)):null==i||i(o.right)}catch(t){null==n||n.error("runTaskEither() - promise rejection running task",t,{taskName:e})}}!function(e){e.set=function(e,t){return n=>Object.assign(Object.assign({},n),{[e]:t})}}(i||(i={}))},51369:(e,t,n)=>{n.d(t,{X:()=>A});var i,r=n(59312),o=n(27378),s=n(57050),a=n(5114),l=n(19962),c=n(44060),u=n(11413),d=n(89894),m=n(32096),p=n(40327),h=n(5739),g=n(49708),f=n(85985),x=n(41398),b=n(24209),v=n(17343),y=n(98403),C=n(38194),k=n(598),w=n(50628),S=n(25781),_=n(83078),E=n(18625);!function(e){var t="scrollaction";e.emit=function(e){return self.dispatchEvent(new CustomEvent(t,{detail:e}))},e.observe=E.P((function(){return g.R(self,t)}))}(i||(i={}));var O=n(42103),I=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._subs=[],t._outOfTarget=function(e){return function(t){return!l.Rect.hasPoint(t.getBoundingClientRect(),e)}},t}return(0,r.__extends)(t,e),t.prototype.componentDidMount=function(){this._listenTooltipAppearance()},t.prototype.componentWillUnmount=function(){this._subs.forEach((function(e){return e.unsubscribe()})),this._subs=[],this.context.hide()},t.prototype.render=function(){return o.createElement(h.F.div,{"data-role":"tooltip"},this.context.state.view(this.props.children))},t.prototype._listenTooltipAppearance=function(){var e=this,t=g.R(document,"keydown").pipe(f.h((function(e){return e.keyCode===S.R.ESC_CODE}))),n=g.R(document,"mousedown").pipe(x.M(this.context.state),f.h((function(t){var n=t[0],i=t[1];return(0,p.pipe)(i,a.map((function(e){return e.target})),a.filter((function(){return l.isDisabled(n.target)})),_.forAll(e._outOfTarget({x:n.clientX,y:n.clientY})))}))),r=b.T(t,n,g.R(document,"scroll"),i.observe.pipe(f.h((function(e){return"show"===e.detail})))).pipe(v.h(y.PU),C.B());this._subs=[this.context.hasContent.pipe(f.h(Boolean),k.c(r.pipe(w.P()))).subscribe(this.context.hide),this.context.hasContent.pipe(f.h(Boolean),k.c(b.T(y.gw(!0,500),r.pipe(v.h(!1))).pipe(w.P())),f.h(Boolean)).subscribe(this.context.show)]},t.contextType=O.G.Context,t}(o.Component),A=function(){return o.createElement(I,null,(0,s.ls)(a.map((function(e){return o.createElement(u.t.ByAbsoluteRect,(0,r.__assign)({rect:l.Rect.fromEl(e.target),className:U.container},u.t.Alignment.toSelector(e.alignment),{withPin:!0}),o.createElement("div",{className:U.content},e.content))})),a.toNullable))},R={position:"fixed",zIndex:m.DY,pointerEvents:"none",$nest:{"@media print":{visibility:"hidden"}}},P={padding:"".concat(d.ux.rem(.25)," ").concat(d.ux.rem(1)),borderRadius:d.ux.rem(m.fx),background:c.Il.BackgroundTooltip,color:c.Il.CoreNeutral1,textAlign:"center",whiteSpace:"nowrap",letterSpacing:d.ux.px(.25),fontSize:d.ux.rem(.75),lineHeight:d.ux.rem(1)},U=d.ux.stylesheet({container:[R],content:[P]})},13853:(e,t,n)=>{n.d(t,{$T:()=>_,AO:()=>a,DZ:()=>R,Eh:()=>l,G:()=>c,G0:()=>f,KX:()=>p,Lf:()=>y,Lx:()=>w,Od:()=>E,UI:()=>u,ZN:()=>o,e5:()=>v,hX:()=>h,jV:()=>x,nI:()=>O,oA:()=>I,oP:()=>C,ri:()=>S,t9:()=>g,tS:()=>m,tV:()=>b,u4:()=>k,xu:()=>A,yW:()=>d});var i=n(73975),r=n(57050);function o(e){return{show:function(t){var n="";return t.forEach((function(t){n+=e.show(t)+", "})),""!==n&&(n=n.substring(0,n.length-2)),"new Set(["+n+"])"}}}var s=new Set;function a(e){return function(t){var n=[];return t.forEach((function(e){return n.push(e)})),n.sort(e.compare)}}function l(e){var t=p(e);return(0,i.f7)((function(e,n){return t(e,n)&&t(n,e)}))}function c(e){return function(t){for(var n,i=t.values(),r=!1;!r&&!(n=i.next()).done;)r=e(n.value);return r}}function u(e){var t=g(e);return function(e){return function(n){var i=new Set;return n.forEach((function(n){var r=e(n);t(r,i)||i.add(r)})),i}}}function d(e){return(0,r.ff)(c((0,r.ff)(e)))}function m(e){var t=g(e);return function(e){return function(n){var i=new Set;return n.forEach((function(n){e(n).forEach((function(e){t(e,i)||i.add(e)}))})),i}}}function p(e){var t=g(e);return function(n,i){if(void 0===i){var r=p(e);return function(e){return r(e,n)}}return d((function(e){return t(e,i)}))(n)}}function h(e){return function(t){for(var n,i=t.values(),r=new Set;!(n=i.next()).done;){var o=n.value;e(o)&&r.add(o)}return r}}function g(e){return function(t,n){if(void 0===n){var i=g(e);return function(e){return i(t,e)}}for(var r,o=n.values(),s=!1;!s&&!(r=o.next()).done;)s=e.equals(t,r.value);return s}}function f(e){var t=g(e);return function(n,i){if(void 0===i){var r=f(e);return function(e){return r(n,e)}}if(n===s)return i;if(i===s)return n;var o=new Set(n);return i.forEach((function(e){t(e,o)||o.add(e)})),o}}function x(e){var t=g(e);return function(n,i){if(void 0===i){var r=x(e);return function(e){return r(e,n)}}if(n===s||i===s)return s;var o=new Set;return n.forEach((function(e){t(e,i)&&o.add(e)})),o}}function b(e,t){return function(n){return function(i){for(var r,o=i.values(),s=new Set,a=new Set,l=g(e),c=g(t);!(r=o.next()).done;){var u=n(r.value);switch(u._tag){case"Left":l(u.left,s)||s.add(u.left);break;case"Right":c(u.right,a)||a.add(u.right)}}return{left:s,right:a}}}}function v(e){var t=g(e);return function(n,i){if(void 0===i){var r=v(e);return function(e){return r(e,n)}}return h((function(e){return!t(e,i)}))(n)}}function y(e){return{concat:f(e),empty:s}}function C(e){return{concat:x(e)}}function k(e){var t=a(e);return function(e,n){return function(i){return t(i).reduce(n,e)}}}function w(e,t){var n=a(e);return function(e){return function(i){return n(i).reduce((function(n,i){return t.concat(n,e(i))}),t.empty)}}}function S(e){return new Set([e])}function _(e){var t=g(e);return function(e){return function(n){if(t(e)(n))return n;var i=new Set(n);return i.add(e),i}}}function E(e){return function(t){return function(n){return h((function(n){return!e.equals(t,n)}))(n)}}}function O(e){return function(t){for(var n=t.length,i=new Set,r=g(e),o=0;o<n;o++){var s=t[o];r(s,i)||i.add(s)}return i}}function I(e){return R(e)(r.yR)}function A(e,t){return function(n){var i=g(e),r=g(t),o=new Set,s=new Set;return n.forEach((function(e){switch(e._tag){case"Left":i(e.left,o)||o.add(e.left);break;case"Right":r(e.right,s)||s.add(e.right)}})),{left:o,right:s}}}function R(e){var t=g(e);return function(e){return function(n){var i=new Set;return n.forEach((function(n){var r=e(n);"Some"!==r._tag||t(r.value,i)||i.add(r.value)})),i}}}}}]);